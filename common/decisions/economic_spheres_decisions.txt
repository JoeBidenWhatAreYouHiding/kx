continental_system_category = {
	spawn_the_continental_system = {
		allowed = { 
			tag = NFA
		}
		visible = {
			is_faction_leader = yes
			num_faction_members > 0
			has_completed_focus = NFE_abandon_the_entente
			is_member_of_economic_sphere = no
		}
		available = {
			is_faction_leader = yes
			num_faction_members > 0
			has_completed_focus = NFE_abandon_the_entente
		}
		fire_only_once = yes
		days_remove = 30
		ai_will_do = {
			factor = 100
		}
		cost = 15

		remove_effect = {
			add_ideas = NFA_continental_system_leader
		}
	}
	add_to_continental_system = {
		allowed = { 
			tag = NFA
		}
		visible = {
			is_faction_leader = yes
			has_idea = NFA_continental_system_leader
			any_allied_country = {
				NOT = {
					has_idea = NFA_continental_system_member
				}
			}
		}
		available = {
			is_faction_leader = yes
			has_idea = NFA_continental_system_leader
			any_allied_country = {
				NOT = {
					has_idea = NFA_continental_system_member
				}
			}
		}
		fire_only_once = no
		days_re_enable = 30
		days_remove = 15
		ai_will_do = {
			factor = 100
		}
		cost = 15
		remove_effect = {
			custom_effect_tooltip = NFA_continental_system
			hidden_effect = {
				every_other_country = {
					if = {
						limit = {
							is_in_faction_with = NFA
							NOT = { has_idea = NFA_continental_system_member}
						}
						add_ideas = NFA_continental_system_member
						set_country_flag = continental_system_member
					}
				}
			}
		}
	}
}

american_customs_union_category = {
	customs_union_forming = {
		allowed = { 
			is_american_tag = yes
		}
		visible = {
			is_faction_leader = yes
			OR = {
				has_completed_focus = USA_american_imperialism
				has_completed_focus = NEE_american_imperialism
				has_completed_focus = WCC_american_imperialism
				has_completed_focus = CAL_american_imperialism
				has_completed_focus = AMERICA_american_imperialism
				has_completed_focus = COR_american_empire
				has_completed_focus = TEX_populist_alliance
			}
			is_member_of_economic_sphere = no
		}
		available = {
			is_faction_leader = yes
			OR = {
				has_completed_focus = USA_american_imperialism
				has_completed_focus = NEE_american_imperialism
				has_completed_focus = WCC_american_imperialism
				has_completed_focus = CAL_american_imperialism
				has_completed_focus = AMERICA_american_imperialism
				has_completed_focus = COR_american_empire
				has_completed_focus = TEX_populist_alliance
			}
		}
		fire_only_once = yes
		days_remove = 15
		ai_will_do = {
			factor = 100
		}
		cost = 15

		remove_effect = {
		}

		complete_effect = {
			add_ideas = USA_sphere_leader
		}
	}
	add_to_customs_union = {
		allowed = { 
			AND = {
				is_american_tag = yes
				NOT = {
					tag = CSA
				}
			}
		}
		visible = {
			is_faction_leader = yes
			has_idea = USA_sphere_leader
			OR = {
				any_allied_country = {
					NOT = {
						has_idea = USA_sphere_member
					}
				}
				custom_trigger_tooltip = {
					tooltip = Cuba_american_aligned
					CUB = {
						OR = {
							has_idea = CUB_american_puppet_idea
							has_idea = CUB_american_puppet_idea_2
							has_idea = CUB_american_puppet_idea_3
							has_idea = CUB_american_puppet_idea_4
						}
					}
				}    
			}
		}
		available = {
			is_faction_leader = yes
			has_idea = USA_sphere_leader
			OR = {
				any_allied_country = {
					NOT = {
						has_idea = USA_sphere_member
					}
				}
				custom_trigger_tooltip = {
					tooltip = Cuba_american_aligned
					CUB = {
						OR = {
							has_idea = CUB_american_puppet_idea
							has_idea = CUB_american_puppet_idea_2
							has_idea = CUB_american_puppet_idea_3
							has_idea = CUB_american_puppet_idea_4
						}
					}
				}    
			}
		}
		fire_only_once = no
		days_re_enable = 30
		days_remove = 15
		ai_will_do = {
			factor = 100
		}
		cost = 15
		remove_effect = {
			custom_effect_tooltip = NFA_continental_system
			hidden_effect = {
				every_other_country = {
					if = {
						limit = {
							is_in_faction_with = ROOT
							NOT = { has_idea = USA_sphere_member }
						}
						add_ideas = USA_sphere_member
					}
				}
				CUB = {
					if = {
						limit = {
							OR = {
								has_idea = CUB_american_puppet_idea
								has_idea = CUB_american_puppet_idea_2
								has_idea = CUB_american_puppet_idea_3
								has_idea = CUB_american_puppet_idea_4
							}
						}
						add_ideas = USA_sphere_member
					}
				}
			}
		}
	}
}