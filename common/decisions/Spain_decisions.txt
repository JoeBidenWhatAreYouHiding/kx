# Spain decisions

political_actions = {

	CAR_assassinate_juan = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = CAR
		}

		available = {
			FROM = {
				has_country_leader = { name = "Alfonso XIII" }
			}
		}

		targets = { SPR }
		target_trigger = {
			has_war_with = FROM
		}

		visible = {
			has_war_with = FROM
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_assassinate_juan target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_assassinate_juan target: [From.GetName]"
			country_event = sprc.306
		}
	}
	CAR_centro_syndicalist_war = {
		icon = generic_ignite_civil_war

		allowed = {
			original_tag = CAR
		}

		available = {
			ROOT = { controls_all_owned_states = yes }
			has_completed_focus = CAR_conquer_centro
			has_country_flag = CAR_centro_wars_unlocked
			FROM = {
				NOT = {
					is_in_faction_with = CAR
					has_war_together_with = CAR
				}
				has_socialist_government = yes
			}
		}

		visible = {
			date > 1939.1.1
			has_completed_focus = CAR_new_reconquista
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
				has_socialist_government = yes
			}
		}

		target_root_trigger = {
			has_completed_focus = CAR_conquer_centro
		}

		target_trigger = {
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
			}
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_war_with = CAR
					is_subject_of = CAR
					NOT = {
						owns_state = 316 #Costa Rica
						owns_state = 304 #Panama
						owns_state = 317 #Nicaragua
						owns_state = 842 #Honduras
						owns_state = 314 #El Salvador
						owns_state = 313 #Guatemala
					}
				}
			}
		}

		fire_only_once = yes
		days_remove = 60
		war_with_target_on_remove = yes

		cost = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_centro_syndicalist_war target: [From.GetName]"
			add_war_support = 0.01
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_centro_syndicalist_war target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 0.33 }
			}
			modifier = {
				factor = 0
				is_in_faction = no
				strength_ratio = { tag = FROM ratio < 1.0 }
				FROM = {
					OR = {
						has_war = no
						surrender_progress < 0.25
					}
				}
			}
		}
	}
}

SPR_intro_politics = {
	
	SPR_bop_opposing_side_does_something_mission = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				hidden_trigger = {
					NOT = {
						has_power_balance = {
							id = SPR_burning_house_of_cards
						}
					}
				}
				has_global_flag = spanish_civil_war
			}
		}
		is_good = no
		priority = 10
		days_mission_timeout = SPR_opposing_side_progress_time_var
		selectable_mission = no
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_bop_opposing_side_does_something_mission_tt
			hidden_effect = {
				if = {
					limit = {
						check_variable = { SPR_opposing_side_progress_var > 3 }
					}
					activate_mission = SPR_bop_opposing_side_does_something_mission_final
					set_country_flag = SPR_avoiding_scw_extended
					mark_focus_tree_layout_dirty = yes
				}
				else = {
					add_to_variable = { SPR_opposing_side_progress_var = 1 }
					subtract_from_variable = { SPR_opposing_side_progress_time_var = 5 }
					activate_mission = SPR_bop_opposing_side_does_something_mission
				}
				country_event = {
					id = sprd.1191
					hours = 1
				}
			}
		}
	}
	
	SPR_bop_opposing_side_does_something_mission_final = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = {
						has_power_balance = {
							id = SPR_burning_house_of_cards
						}
					}
					has_global_flag = spanish_civil_war
				}
			}
		}
		is_good = no
		days_mission_timeout = 100
		selectable_mission = no
		priority = 100
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_bop_opposing_side_does_something_mission_final_tt
			hidden_effect = {
				country_event = {
					id = sprc.7
					days = 1
				}
			}
		}
	}
	
	SPR_organize_strike = {
		icon = generic_ignite_civil_war
		
		cost = 50
		fire_only_once = no
		days_remove = 28
		
		available = {
			has_completed_focus = SPR_Favor_Unions
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
		}
		allowed = {}
		modifier = {
			research_speed_factor = -0.025
			industrial_capacity_factory = -0.05
			resistance_target = 0.02
			authoritarian_democrat_drift = -0.01
			paternal_autocrat_drift = 0.01
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_organize_strike"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 35
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 35
				}
			}
		}
		ai_will_do = {
			base = 10
			modifier = {
				add = 90
				check_variable = { SPR_opposing_side_progress_var > 1 }
			}
		}
	}
	
	SPR_PSOE_talks = {
		icon = generic_ignite_civil_war
		
		cost = 20
		fire_only_once = yes
		days_remove = 7
		
		available = {
			has_completed_focus = SPR_Favor_Unions
		}
		
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
		}
		allowed = {}
		priority = 5
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_PSOE_talks"
			country_event = {
				id = sprd.501
				days = 1
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 14
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 14
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	
	SPR_CNT_FAI_talks = {
		icon = generic_ignite_civil_war
		
		cost = 100
		fire_only_once = yes
		days_remove = 14
		priority = 7
		available = {
			AND = {
				OR = {
					AND = {
						is_power_balance_side_active = {
							id = SPR_burning_house_of_cards
							side = SPR_leftcenter_side
						}
						has_completed_focus = SPR_Promote_Leftist_Unity
					}
					AND = {
						is_power_balance_side_active = {
							id = SPR_burning_house_of_cards
							side = SPR_center_side
						}
						has_completed_focus = SPR_Deals_With_The_CNTFAI
					}
				}
			}
		}
		visible = {
			NOT = {
				set_temp_variable = { coalition_target = token:syndicalist }
				has_coalition_with_target = yes
			}
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_CNT_FAI_talks"
			country_event = {
				id = sprd.1186
				days = 1
			}
			custom_effect_tooltip = SPR_CNT_FAI_talks_yes_tt
			hidden_effect = {
				if = {
					limit = {
						has_active_mission = SPR_bop_opposing_side_does_something_mission_final
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 21
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 21
						}
					}
				}
			}
			effect_tooltip = {
				if = {
					limit = {
						has_country_flag = SPR_left_kingdom_intro
					}
					add_synd_to_coalition = yes
					add_political_power = 100
					add_stability = 0.025
					add_popularity = {
						ideology = totalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.075
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.02
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.05
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.15
					}
				}
				else = {
					add_political_power = 150
					add_stability = 0.05
					add_popularity = {
						ideology = syndicalist
						popularity = 0.075
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.05
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.1
					}
				}
			}
			custom_effect_tooltip = SPR_CNT_FAI_talks_no_tt
			effect_tooltip = {
				if = {
					limit = {
						has_country_flag = SPR_left_kingdom_intro
					}
					add_political_power = -100
					add_stability = -0.05
					add_popularity = {
						ideology = totalist
						popularity = 0.01
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.025
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.075
					}
					add_popularity = {
						ideology = paternal_autocrat
						popularity = 0.1
					}
					add_popularity = {
						ideology = national_populist
						popularity = 0.025
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.1
					}
				}
				else = {
					add_political_power = -50
					add_stability = -0.02
					add_popularity = {
						ideology = syndicalist
						popularity = 0.05
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.02
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.1
					}
				}
			}
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				SPR_SCW_ai_avoid_trigger = yes
				set_temp_variable = { coalition_target = token:social_democrat }
				has_coalition_with_target = no
			}
			modifier = {
				add = 500
				SPR_SCW_ai_avoid_trigger = yes
				set_temp_variable = { coalition_target = token:social_democrat }
				has_coalition_with_target = yes
			}
		}
	}
	SPR_crack_down_on_the_right = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_remove = 35
		
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		modifier = {
			authoritarian_democrat_drift = 0.02
			paternal_autocrat_drift = -0.05
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_crack_down_on_the_right"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					paternal_autocrat > 0.1
				}
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.05
				}
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 42
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 42
				}
			}
		}
		ai_will_do = {
			base = 25
			modifier = {
				add = 75
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_distance_from_the_CNT_FAI = {
		icon = generic_ignite_civil_war
		
		cost = 60
		fire_only_once = no
		days_remove = 14
		
		available = {
			AND = {
				set_temp_variable = { coalition_target = token:syndicalist }
				has_coalition_with_target = yes
			}
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
			set_temp_variable = { coalition_target = token:syndicalist }
			has_coalition_with_target = yes
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.02
			syndicalist_drift = -0.05
			radical_socialist_drift = 0.02
			social_democrat_drift = 0.01
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_distance_from_the_CNT_FAI"
			add_stability = 0.01
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.05
			}
		}
		ai_will_do = {
			base = 5
			modifier = {
				factor = 0
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_promote_moderate_CNTFAI = {
		icon = generic_ignite_civil_war
		
		cost = 50
		fire_only_once = no
		days_remove = 42
		
		available = {
			AND = {
				set_temp_variable = { coalition_target = token:syndicalist }
				has_coalition_with_target = yes
			}
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
			set_temp_variable = { coalition_target = token:syndicalist }
			has_coalition_with_target = yes
		}
		modifier = {
			authoritarian_democrat_drift = -0.01
			syndicalist_drift = -0.02
			radical_socialist_drift = 0.03
			social_democrat_drift = 0.02
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_promote_moderate_CNTFAI"
			add_stability = 0.03
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.01
			}
		}
		ai_will_do = {
			base = 90
			modifier = {
				add = 10
				check_variable = { SPR_opposing_side_progress_var > 2 }
			}
		}
	}
	SPR_buy_time = {
		icon = generic_ignite_civil_war
		
		cost = 10
		fire_only_once = no
		days_remove = 21
		priority = 3
		visible = {
			has_power_balance = {
				id = SPR_burning_house_of_cards
			}
		}
		allowed = {}
		modifier = {
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_buy_time"
			if = {
				limit = {
					set_temp_variable = { coalition_target = token:market_liberal }
					has_coalition_with_target = yes
				}
				add_political_power = 35
				add_stability = -0.02
				add_war_support = -0.02
				random_list = {
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 42
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 42
								}
							}
						}
						else = {
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 28
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 28
								}
							}
						}
					}
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 35
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 35
								}
							}
						}
						else = {
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 14
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 14
								}
							}
						}
					}
				}
			}
			else = {
				add_political_power = 25
				add_stability = -0.01
				add_war_support = -0.01
				random_list = {
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 35
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 35
								}
							}
						}
						else = {
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 14
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 14
								}
							}
						}
					}
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 14
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 14
								}
							}
						}
						else = {
							if = {
								limit = {
									has_active_mission = SPR_bop_opposing_side_does_something_mission_final
								}
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission_final
									days = 7
								}
							}
							else = {
								add_days_mission_timeout = {
									mission = SPR_bop_opposing_side_does_something_mission
									days = 7
								}
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 90
			modifier = {
				add = 10
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_AP_unity = {
		icon = generic_ignite_civil_war
		
		cost = 50
		fire_only_once = no
		days_remove = 28
		
		available = {
			OR = {
				has_completed_focus = SPR_Favor_Unions
				has_completed_focus = SPR_Promises_Of_Stability
				has_completed_focus = SPR_Compromise_After_Compromise
			}
		}
		visible = {
			has_power_balance = {
				id = SPR_burning_house_of_cards
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.05
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_AP_unity"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					NOT = { has_country_flag = SPR_center_kingdom_intro }
				}
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.05
				}
				if = {
					limit = {
						has_active_mission = SPR_bop_opposing_side_does_something_mission_final
					}
					add_days_mission_timeout = {
						mission = SPR_bop_opposing_side_does_something_mission_final
						days = 42
					}
				}
				else = {
					add_days_mission_timeout = {
						mission = SPR_bop_opposing_side_does_something_mission
						days = 42
					}
				}
			}
			else = {
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.02
				}
				random_list = {
					50 = {
						if = {
							limit = {
								has_active_mission = SPR_bop_opposing_side_does_something_mission_final
							}
							add_days_mission_timeout = {
								mission = SPR_bop_opposing_side_does_something_mission_final
								days = 35
							}
						}
						else = {
							add_days_mission_timeout = {
								mission = SPR_bop_opposing_side_does_something_mission
								days = 35
							}
						}
					}
					50 = {
						if = {
							limit = {
								has_active_mission = SPR_bop_opposing_side_does_something_mission_final
							}
							add_days_mission_timeout = {
								mission = SPR_bop_opposing_side_does_something_mission_final
								days = 28
							}
						}
						else = {
							add_days_mission_timeout = {
								mission = SPR_bop_opposing_side_does_something_mission
								days = 28
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 30
			modifier = {
				add = 70
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_political_moves = {
		icon = generic_ignite_civil_war
		
		cost = 35
		fire_only_once = no
		days_remove = 50
		
		available = {
			has_completed_focus = SPR_Compromise_After_Compromise
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_center_side
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.03
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_political_moves"
			add_popularity = {
				ideology = syndicalist
				popularity = -0.03
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.06
			}
			add_popularity = {
				ideology = paternal_autocrat
				popularity = -0.03
			}
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				50 = {
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 56
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 56
						}
					}
				}
				30 = {
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 49
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 49
						}
					}
				}
				20 = {
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 35
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 35
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_seek_german_support = {
		icon = generic_ignite_civil_war
		
		cost = 60
		fire_only_once = yes
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_Promises_Of_Stability
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_center_side
			}
		}
		allowed = {}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_seek_german_support"
			GER = {
				country_event = {
					id = sprd.1200
					days = 3
				}
			}
		}
		ai_will_do = {
			base = 40
			modifier = {
				add = 60
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_talk_with_UMN = {
		icon = generic_ignite_civil_war
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		
		available = {
			has_completed_focus = SPR_Carlist_Truce
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_rightcenter_side
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			paternal_autocrat_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_UMN"
			country_event = sprd.505
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 21
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 21
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_talk_with_DLE = {
		icon = generic_ignite_civil_war
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			social_conservative_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_DLE"
			add_soccon_to_coalition = yes
			add_popularity = {
				ideology = social_conservative
				popularity = 0.07
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 21
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 21
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_talk_with_PRR = {
		icon = generic_ignite_civil_war
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			market_liberal_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_PRR"
			add_marlib_to_coalition = yes
			add_popularity = {
				ideology = market_liberal
				popularity = 0.07
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 21
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 21
				}
			}
			custom_effect_tooltip = SPR_marlib_buff_bribe_for_time_tt
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_talk_with_UR = {
		icon = generic_ignite_civil_war
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_center_side
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			social_liberal_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_UR"
			add_soclib_to_coalition = yes
			add_popularity = {
				ideology = social_liberal
				popularity = 0.07
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 21
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 21
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_crack_down_on_the_left = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_remove = 30
		
		available = {}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			totalist_drift = -0.03
			syndicalist_drift = -0.05
			radical_socialist_drift = -0.02
			social_democrat_drift = -0.01
			authoritarian_democrat_drift = 0.03
			power_balance_daily = -0.002
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_crack_down_on_the_left"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					syndicalist > 0.1
				}
				add_popularity = {
					ideology = syndicalist
					popularity = -0.05
				}
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 42
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 42
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_raid_leftist_offices = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_Promises_Of_Stability
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			totalist_drift = -0.05
			syndicalist_drift = -0.1
			radical_socialist_drift = -0.08
			social_democrat_drift = -0.05
			authoritarian_democrat_drift = 0.08
			power_balance_daily = -0.005
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_raid_leftist_offices"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				33 = {
					add_stability = -0.01
					add_political_power = -10
					add_popularity = {
						ideology = syndicalist
						popularity = -0.02
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 28
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 28
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
					add_stability = 0.02
					add_political_power = 10
					add_popularity = {
						ideology = syndicalist
						popularity = -0.05
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 35
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 35
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
					add_stability = 0.05
					add_political_power = 25
					add_popularity = {
						ideology = syndicalist
						popularity = -0.07
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 42
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 42
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_raid_rightist_offices = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_The_Ability_Of_The_Workers
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			paternal_autocrat_drift = -0.08
			national_populist_drift = -0.05
			authoritarian_democrat_drift = 0.08
			power_balance_daily = -0.005
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_raid_leftist_offices"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				33 = {
					add_stability = -0.01
					add_political_power = -10
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.02
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 28
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 28
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
					add_stability = 0.02
					add_political_power = 10
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.05
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 35
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 35
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
					add_stability = 0.05
					add_political_power = 50
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.07
					}
					if = {
						limit = {
							has_active_mission = SPR_bop_opposing_side_does_something_mission_final
						}
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission_final
							days = 42
						}
					}
					else = {
						add_days_mission_timeout = {
							mission = SPR_bop_opposing_side_does_something_mission
							days = 42
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_more_police = {
		icon = generic_ignite_civil_war
		
		cost = 35
		fire_only_once = no
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_Increase_Police_Funding
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			stability_weekly = 0.025
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_more_police"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.01
			}
			add_stability = 0.02
			add_political_power = -10
			add_popularity = {
				ideology = totalist
				popularity = -0.03
			}
			add_popularity = {
				ideology = syndicalist
				popularity = -0.02
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = -0.01
			}
			add_popularity = {
				ideology = national_populist
				popularity = -0.02
			}
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission_final
					days = 21
				}
			}
			else = {
				add_days_mission_timeout = {
					mission = SPR_bop_opposing_side_does_something_mission
					days = 21
				}
			}
		}
		ai_will_do = {
			base = 75
			modifier = {
				add = 25
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
}

SPR_civil_war_decisions = {
	SPR_civil_war_countdown = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			has_global_flag = spanish_civil_war
		}
		is_good = no
		days_mission_timeout = civil_war_countdown_length_var
		selectable_mission = no
		priority = 10
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_civil_war_countdown_tt
			hidden_effect = {
				country_event = { id = sprc.1 }
				country_event = { id = sprc.3 }
			}
		}
	}
	SPR_SCW_show_starting_cnt_states = {
		cost = 0
		fire_only_once = no
		available = { always = no }
		visible = {
			has_country_flag = SPR_left_republic_intro
			spanish_civil_war_will_happen_or_is_happening = no
		}
		highlight_states = {
			highlight_states_trigger = {
				has_state_flag = is_cnt_state
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		priority = 8
		complete_effect = {}
	}
	SPR_SCW_show_starting_car_states = {
		cost = 0
		fire_only_once = no
		available = { always = no }
		visible = {
			has_country_flag = SPR_right_republic_intro
			spanish_civil_war_will_happen_or_is_happening = no
		}
		highlight_states = {
			highlight_states_trigger = {
				has_state_flag = is_car_state
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		priority = 8
		complete_effect = {}
	}
	SPR_SCW_give_selected_side_infantry = {
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 1000 }
		}
		custom_cost_text = SPR_SCW_decision_cost_1000_infa
		days_remove = 21
		fire_only_once = no
		available = { hidden_trigger = { has_allied_with_anyone_republic_and_no_civil_war = yes } }
		visible = {
			has_allied_with_anyone_republic_and_no_civil_war = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				CNT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -1000
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				CAR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -1000
					}
				}
			}
		}
	}
	SPR_SCW_give_selected_side_at = {
		custom_cost_trigger = {
			has_equipment = { artillery_equipment > 100 }
		}
		custom_cost_text = SPR_SCW_decision_cost_100_at
		days_remove = 14
		fire_only_once = no
		available = { hidden_trigger = { has_allied_with_anyone_republic_and_no_civil_war = yes } }
		visible = {
			has_allied_with_anyone_republic_and_no_civil_war = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				CNT = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = -100
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				CAR = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = -100
					}
				}
			}
		}
	}
	SPR_SCW_cancel_cnt_current_focus = {
		cost = 150
		fire_only_once = yes
		available = {
			custom_trigger_tooltip = {
				tooltip = SCW_Focus_Is_Not_Over_Some_Percent_Complete_tt
				SPR_SCW_Joint_Focus_Progress_Check_CNT = yes
			}
		}
		visible = {
			is_spanish_civil_war_tag = yes
			NOT = { tag = CNT }
			CNT = { exists = yes }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_SCW_cancel_cnt_current_focus"
			CNT = {
				country_event = {
					id = sprc.11
					days = 1
				}
			}
		}
	}
	SPR_SCW_cancel_car_current_focus = {
		cost = 150
		fire_only_once = yes
		available = {
			custom_trigger_tooltip = {
				tooltip = SCW_Focus_Is_Not_Over_Some_Percent_Complete_tt
				SPR_SCW_Joint_Focus_Progress_Check_CAR = no
			}
		}
		visible = {
			is_spanish_civil_war_tag = yes
			NOT = { tag = CAR }
			CAR = { exists = yes }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_SCW_cancel_car_current_focus"
			CAR = {
				country_event = {
					id = sprc.11
					days = 1
				}
			}
		}
	}
	SPR_SCW_cancel_spr_current_focus = {
		cost = 150
		fire_only_once = yes
		available = {
			custom_trigger_tooltip = {
				tooltip = SCW_Focus_Is_Not_Over_Some_Percent_Complete_tt
				SPR_SCW_Joint_Focus_Progress_Check_Kingdom = yes
			}
		}
		visible = {
			is_spanish_civil_war_tag = yes
			NOT = { tag = SPR }
			SPR = { exists = yes }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_SCW_cancel_spr_current_focus"
			SPR = {
				country_event = {
					id = sprc.11
					days = 1
				}
			}
		}
	}
	SPR_SCW_desperate_measures = {
		cost = 100
		fire_only_once = no
		days_re_enable = 180
		available = { hidden_trigger = { has_allied_with_anyone_republic = yes } }
		visible = {
			is_spanish_civil_war_tag = yes
		}
		complete_effect = {
			add_timed_idea = {
				idea = SPR_desperate_measures_idea
				days = 120
			}
		}
	}
}

SPR_foreign_decisions = {
	SPR_save_portugal = {
		
		cost = 15
		fire_only_once = yes
		days_remove = 7
		
		priority = 10

		available = {
			hidden_trigger = {
				POR = {
					OR = {
						NOT = { has_full_control_of_state = 180 }
						NOT = { has_full_control_of_state = 181 }
						NOT = { has_full_control_of_state = 112 }
						NOT = { has_full_control_of_state = 179 }
					}
				}
			}
		}
		
		visible = {
			POR = {
				has_war = yes
				has_war_with = INT
				NOT = { has_war_with = SPR }
			}
		}
		
		war_with_on_remove  = INT
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_save_portugal"
			add_to_war = {
				targeted_alliance = POR
				enemy = INT
				hostility_reason = asked_to_join
			}
			if = {
				limit = {
					is_in_faction = no
					POR = {
						is_in_faction_with = GER
					}
				}
				GER = {
					country_event = sprd.30
				}
			}
			if = {
				limit = {
					is_in_faction = no
					POR = {
						is_in_faction_with = ENT
					}
				}
				ENT = {
					country_event = sprd.31
				}
			}
		}
	}
	SPR_buy_west_timor = {
		cost = 50
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			always = yes
		}
		
		visible = {
			has_completed_focus = SPR_trade_focus
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_buy_west_timor"
			country_event = sprf.18
		}
	}
}