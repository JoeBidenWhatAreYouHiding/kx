# Spain decisions

political_actions = {
	
	SPR_kill_morocco_mission = {
		icon = generic_flags
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				MOR = { has_capitulated = yes }
				MOR = { exists = no }
				SPR = { has_capitulated = yes }
				SPR = { exists = no }
			}
		}
		is_good = no
		days_mission_timeout = 120
		selectable_mission = no
		priority = 10
		complete_effect = {}
		timeout_effect = {
			if = {
				limit = {
					tag = SPR
				}
				country_event = sprd.219
			}
		}
		cancel_effect = {
			every_country = {
				limit = {
					has_idea = SPR_morocco_war
				}
				remove_ideas = SPR_morocco_war
			}
		}
	}
	
	SPR_iberian_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_IBERIA
				has_cosmetic_tag = SPR_IBERIA_1
				has_cosmetic_tag = SPR_IBERIA_austria_larp
			}
			has_country_flag = SPR_iberia_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_iberian_flag_picker"
			country_event = sprd.1137
		}
	}
	
	SPR_latin_union_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_LATIN_UNION
				has_cosmetic_tag = SPR_LATIN_UNION_1
				has_cosmetic_tag = SPR_LATIN_UNION_2
				has_cosmetic_tag = SPR_LATIN_UNION_3
				has_cosmetic_tag = SPR_LATIN_UNION_4
			}
			has_country_flag = SPR_latin_union_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_latin_union_flag_picker"
			country_event = sprd.1139
		}
	}

	SPR_iberian_absolute_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_iberian_union_larp
				has_cosmetic_tag = SPR_iberian_union_larp1
				has_cosmetic_tag = SPR_iberian_union_larp2
			}
			has_country_flag = SPR_iberia_absolute_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_iberian_flag_picker"
			country_event = sprd.11761
		}
	}

	SPR_pne_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_pne_kingdom
				has_cosmetic_tag = SPR_pne_red
				has_cosmetic_tag = SPR_pne_white
				has_cosmetic_tag = SPR_pne_black
			}
			has_country_flag = SPR_pne_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_iberian_flag_picker"
			country_event = sprd.1177
		}
	}

	SPR_hre_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_HRE
				has_cosmetic_tag = SPR_hre_burgundless
				has_cosmetic_tag = SPR_hre_yellow
				has_cosmetic_tag = SPR_hre_white
				has_cosmetic_tag = SPR_hre_black
			}
			has_country_flag = SPR_hre_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_iberian_flag_picker"
			country_event = sprd.1178
		}
	}

	SPR_ap_flag_picker = {
		
		cost = 0
		fire_only_once = no
		icon = generic_flags
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			OR = {
				has_cosmetic_tag = SPR_ap_kingdom
				has_cosmetic_tag = SPR_ap_red
				has_cosmetic_tag = SPR_ap_black
			}
			has_country_flag = SPR_ap_allow_flag_picker_decision
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_iberian_flag_picker"
			country_event = sprd.1178
		}
	}

	CAR_centro_syndicalist_war = {
		icon = generic_ignite_civil_war

		allowed = {
			original_tag = CAR
		}

		available = {
			ROOT = { controls_all_owned_states = yes }
			has_completed_focus = CAR_conquer_centro
			has_country_flag = CAR_centro_wars_unlocked
			FROM = {
				NOT = {
					is_in_faction_with = CAR
					has_war_together_with = CAR
				}
				has_socialist_government = yes
			}
		}

		visible = {
			date > 1939.1.1
			has_completed_focus = CAR_new_reconquista
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
				has_socialist_government = yes
			}
		}

		target_root_trigger = {
			has_completed_focus = CAR_conquer_centro
		}

		target_trigger = {
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
			}
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_war_with = CAR
					is_subject_of = CAR
					NOT = {
						owns_state = 316 #Costa Rica
						owns_state = 304 #Panama
						owns_state = 317 #Nicaragua
						owns_state = 842 #Honduras
						owns_state = 314 #El Salvador
						owns_state = 313 #Guatemala
					}
				}
			}
		}

		fire_only_once = yes
		days_remove = 60
		war_with_target_on_remove = yes

		cost = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_centro_syndicalist_war target: [From.GetName]"
			add_war_support = 0.01
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_centro_syndicalist_war target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 0.33 }
			}
			modifier = {
				factor = 0
				is_in_faction = no
				strength_ratio = { tag = FROM ratio < 1.0 }
				FROM = {
					OR = {
						has_war = no
						surrender_progress < 0.25
					}
				}
			}
		}
	}
}

SPR_intro_politics = {
	
	SPR_bop_opposing_side_does_something_mission = {
		icon = generic_ignite_civil_war
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			OR = {
				hidden_trigger = {
					NOT = {
						has_power_balance = {
							id = SPR_burning_house_of_cards
						}
					}
				}
				spanish_civil_war_will_happen_or_is_happening = yes
			}
		}
		is_good = no
		priority = 10
		days_mission_timeout = SPR_opposing_side_progress_time_var
		selectable_mission = no
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_bop_opposing_side_does_something_mission_tt
			hidden_effect = {
				if = {
					limit = {
						check_variable = { SPR_opposing_side_progress_var > 3 }
					}
					activate_mission = SPR_bop_opposing_side_does_something_mission_final
					set_country_flag = SPR_avoiding_scw_extended
					mark_focus_tree_layout_dirty = yes
				}
				else = {
					add_to_variable = { SPR_opposing_side_progress_var = 1 }
					subtract_from_variable = { SPR_opposing_side_progress_time_var = 5 }
					activate_mission = SPR_bop_opposing_side_does_something_mission
				}
				country_event = {
					id = sprd.1191
					hours = 1
				}
			}
		}
	}
	
	SPR_bop_opposing_side_does_something_mission_final = {
		icon = generic_ignite_civil_war
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = {
						has_power_balance = {
							id = SPR_burning_house_of_cards
						}
					}
					spanish_civil_war_will_happen_or_is_happening = yes
				}
			}
		}
		is_good = no
		days_mission_timeout = 100
		selectable_mission = no
		priority = 100
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_bop_opposing_side_does_something_mission_final_tt
			hidden_effect = {
				country_event = {
					id = sprc.7
					days = 1
				}
			}
		}
	}
	
	SPR_organize_strike = {
		icon = generic_political_rally
		
		cost = 30
		fire_only_once = no
		days_remove = 28
		
		available = {
			is_in_coalition_with_radical_socialist = yes
			has_completed_focus = SPR_Favor_Unions
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.04
			power_balance_daily = -0.0015
			stability_weekly = 0.01
			consumer_goods_factor = -0.2
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_organize_strike"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			set_temp_variable = { temp_days = 35 }
			SPR_add_days_to_radicals_mission = yes
		}
	}
	
	SPR_PSOE_talks = {
		icon = generic_agreement
		
		cost = 10
		fire_only_once = yes
		days_remove = 7
		
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
			is_in_coalition_with_radical_socialist = no
		}
		allowed = {}
		priority = 5
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_PSOE_talks"
			country_event = {
				id = sprd.501
				days = 1
			}
			set_temp_variable = { temp_days = 14 }
			SPR_add_days_to_radicals_mission = yes
		}
		ai_will_do = {
			base = 100
		}
	}
	
	SPR_CNT_FAI_talks = {
		icon = generic_agreement
		
		cost = 80
		fire_only_once = yes
		days_remove = 14
		priority = 7
		available = {
			OR = {
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_leftcenter_side
					}
					has_completed_focus = SPR_Promote_Leftist_Unity
				}
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_center_side
					}
					has_completed_focus = SPR_Deals_With_The_CNTFAI
				}
			}
		}
		visible = {
			is_in_coalition_with_syndicalist = no
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_CNT_FAI_talks"
			country_event = {
				id = sprd.1186
				days = 1
			}
			custom_effect_tooltip = SPR_CNT_FAI_talks_yes_tt
			hidden_effect = {
				set_temp_variable = { temp_days = 21 }
				SPR_add_days_to_radicals_mission = yes
			}
			effect_tooltip = {
				if = {
					limit = {
						has_country_flag = SPR_left_kingdom_intro
					}
					add_synd_to_coalition = yes
					add_political_power = 100
					add_stability = 0.025
					add_popularity = {
						ideology = totalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.075
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.02
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.05
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.15
					}
				}
				else = {
					add_political_power = 150
					add_stability = 0.05
					add_popularity = {
						ideology = syndicalist
						popularity = 0.075
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.05
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.1
					}
				}
			}
			custom_effect_tooltip = SPR_CNT_FAI_talks_no_tt
			effect_tooltip = {
				if = {
					limit = {
						has_country_flag = SPR_left_kingdom_intro
					}
					add_political_power = -100
					add_stability = -0.05
					add_popularity = {
						ideology = totalist
						popularity = 0.01
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.025
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.075
					}
					add_popularity = {
						ideology = paternal_autocrat
						popularity = 0.1
					}
					add_popularity = {
						ideology = national_populist
						popularity = 0.025
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.1
					}
				}
				else = {
					add_political_power = -50
					add_stability = -0.02
					add_popularity = {
						ideology = syndicalist
						popularity = 0.05
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.02
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.1
					}
				}
			}
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				SPR_SCW_ai_avoid_trigger = yes
				is_in_coalition_with_social_democrat = no
			}
			modifier = {
				factor = 15
				SPR_SCW_ai_avoid_trigger = yes
				is_in_coalition_with_social_democrat = yes
			}
		}
	}
	SPR_buy_time = {
		icon = give_cash
		
		cost = 10
		fire_only_once = no
		days_remove = 21
		priority = 3
		visible = {
			hidden_trigger = {
				check_variable = { SPR.SPR_buy_time_uses < SPR.SPR_buy_time_uses_limit }
			}
		}
		allowed = {}
		modifier = {
			power_balance_daily = -0.001
			authoritarian_democrat_drift = 0.01
			political_power_factor = 0.1
		}
		available = {
			custom_override_tooltip = {
				tooltip = SPR_buy_time_tt
				check_variable = { SPR.SPR_buy_time_uses < SPR.SPR_buy_time_uses_limit }
			}
		}
		complete_effect = {
			hidden_effect = {
				add_to_variable = { SPR.SPR_buy_time_uses = 1 }
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_buy_time"
			set_temp_variable = { political_power_add_amount = party_popularity_100@authoritarian_democrat }
			if = {
				limit = {
					is_in_coalition_with_market_liberal = yes
				}
				add_to_temp_variable = { political_power_add_amount = party_popularity_100@market_liberal }
				random_list = {
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							set_temp_variable = { temp_days = 35 }
							SPR_add_days_to_radicals_mission = yes
						}
						else = {
							set_temp_variable = { temp_days = 28 }
							SPR_add_days_to_radicals_mission = yes
						}
					}
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							set_temp_variable = { temp_days = 21 }
							SPR_add_days_to_radicals_mission = yes
						}
						else = {
							set_temp_variable = { temp_days = 14 }
							SPR_add_days_to_radicals_mission = yes
						}
					}
				}
			}
			else = {
				random_list = {
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							set_temp_variable = { temp_days = 35 }
							SPR_add_days_to_radicals_mission = yes
						}
						else = {
							set_temp_variable = { temp_days = 14 }
							SPR_add_days_to_radicals_mission = yes
						}
					}
					50 = {
						if = {
							limit = {
								NOT = { has_country_flag = SPR_center_kingdom_intro }
							}
							set_temp_variable = { temp_days = 14 }
							SPR_add_days_to_radicals_mission = yes
						}
						else = {
							set_temp_variable = { temp_days = 7 }
							SPR_add_days_to_radicals_mission = yes
						}
					}
				}
			}
			clamp_temp_variable = {
				var = political_power_add_amount
				min = 1
				max = SPR.SPR_buy_time_pp_limit
			}
			if = {
				limit = {
					is_in_coalition_with_market_liberal = yes
				}
				custom_effect_tooltip = SPR_buy_time_pp_marlib_tt
			}
			else = {
				custom_effect_tooltip = SPR_buy_time_pp_tt
			}
			add_political_power = political_power_add_amount
		}
	}
	SPR_AP_unity = {
		icon = scales
		
		cost = 35
		fire_only_once = no
		days_remove = 28
		
		available = {
			OR = {
				has_completed_focus = SPR_Favor_Unions
				has_completed_focus = SPR_Promises_Of_Stability
				has_completed_focus = SPR_Compromise_After_Compromise
			}
		}
		visible = {
			has_power_balance = {
				id = SPR_burning_house_of_cards
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.05
			power_balance_daily = -0.001
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_AP_unity"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.05
			}
			if = {
				limit = {
					NOT = { has_country_flag = SPR_center_kingdom_intro }
				}
				set_temp_variable = { temp_days = 35 }
				SPR_add_days_to_radicals_mission = yes
			}
			else = {
				random_list = {
					50 = {
						set_temp_variable = { temp_days = 35 }
						SPR_add_days_to_radicals_mission = yes
					}
					50 = {
						set_temp_variable = { temp_days = 28 }
						SPR_add_days_to_radicals_mission = yes
					}
				}
			}
		}
		ai_will_do = {
			base = 30
			modifier = {
				add = 70
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_things_are_going_very_bad = {
		icon = generic_ignite_civil_war
		
		cost = 0
		days_remove = 7
		days_re_enable = 30
		
		available = {
			has_power_balance = {
				id = SPR_burning_house_of_cards
			}
		}
		visible = {
			power_balance_value  = {
				id = SPR_burning_house_of_cards
				value > 0.4
			}
		}
		modifier = {
			political_power_factor = 0.5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_things_are_going_very_bad"
			if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission
				}
				random_list = {
					50 = {
						set_temp_variable = { temp_days = -14 }
						SPR_add_days_to_radicals_mission = yes
					}
					50 = {
						set_temp_variable = { temp_days = 14 }
						SPR_add_days_to_radicals_mission = yes
					}
				}
			}
			else_if = {
				limit = {
					has_active_mission = SPR_bop_opposing_side_does_something_mission_final
				}
				random_list = {
					40 = {
						set_temp_variable = { temp_days = -7 }
						SPR_add_days_to_radicals_mission = yes
					}
					60 = {
						set_temp_variable = { temp_days = 14 }
						SPR_add_days_to_radicals_mission = yes
					}
				}
			}
			random_list = {
				25 = {
					add_political_power = -15
					add_stability = -0.01
				}
				25 = {
					add_political_power = 15
					add_stability = 0.01
				}
				25 = {
					add_political_power = 30
					add_stability = 0.02
				}
				25 = {
					add_political_power = 45
					add_stability = 0.03
				}
			}
			random_list = {
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
					hidden_effect = {
						add_popularity = {
							ideology = totalist
							popularity = -0.05
						}
						add_popularity = {
							ideology = syndicalist
							popularity = -0.05
						}
						add_popularity = {
							ideology = paternal_autocrat
							popularity = -0.05
						}
						add_popularity = {
							ideology = national_populist
							popularity = -0.05
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
					hidden_effect = {
						add_popularity = {
							ideology = totalist
							popularity = -0.03
						}
						add_popularity = {
							ideology = syndicalist
							popularity = -0.03
						}
						add_popularity = {
							ideology = paternal_autocrat
							popularity = -0.03
						}
						add_popularity = {
							ideology = national_populist
							popularity = -0.03
						}
					}
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.03
					}
					hidden_effect = {
						add_popularity = {
							ideology = totalist
							popularity = 0.01
						}
						add_popularity = {
							ideology = syndicalist
							popularity = 0.01
						}
						add_popularity = {
							ideology = paternal_autocrat
							popularity = 0.01
						}
						add_popularity = {
							ideology = national_populist
							popularity = 0.01
						}
					}
				}
			}
		}
	}
	SPR_political_moves = {
		icon = generic_political_discourse
		
		cost = 50
		days_remove = 50
		days_re_enable = 60
		
		available = {
			has_completed_focus = SPR_Compromise_After_Compromise
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_center_side
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = 0.03
			power_balance_daily = -0.002
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_political_moves"
			add_popularity = {
				ideology = syndicalist
				popularity = -0.03
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.06
			}
			add_popularity = {
				ideology = paternal_autocrat
				popularity = -0.03
			}
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				50 = {
					set_temp_variable = { temp_days = 56 }
					SPR_add_days_to_radicals_mission = yes
				}
				30 = {
					set_temp_variable = { temp_days = 49 }
					SPR_add_days_to_radicals_mission = yes
				}
				20 = {
					set_temp_variable = { temp_days = 35 }
					SPR_add_days_to_radicals_mission = yes
				}
			}
		}
	}
	SPR_seek_german_support = {
		icon = ger_flag
		
		cost = 60
		fire_only_once = yes
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_Promises_Of_Stability
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_center_side
			}
		}
		allowed = {}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_seek_german_support"
			GER = {
				country_event = {
					id = sprd.1200
					days = 3
				}
			}
		}
		ai_will_do = {
			base = 40
			modifier = {
				add = 60
				SPR_SCW_ai_avoid_trigger = yes
			}
		}
	}
	SPR_talk_with_UMN = {
		icon = generic_agreement
		
		cost = 80
		fire_only_once = yes
		days_remove = 14
		priority = 3
		
		available = {
			OR = {
				has_completed_focus = SPR_Carlist_Truce
				has_completed_focus = SPR_Popular_Nationalism
			}
		}
		visible = {
			is_in_coalition_with_paternal_autocrat = no
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			paternal_autocrat_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_UMN"
			country_event = sprd.505
			set_temp_variable = { temp_days = 21 }
			SPR_add_days_to_radicals_mission = yes
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_talk_with_DLE = {
		icon = generic_agreement
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			is_in_coalition_with_social_conservative = no
			OR = {
				has_completed_focus = SPR_The_Ability_Of_The_Workers
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			social_conservative_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_DLE"
			country_event = sprd.500
			set_temp_variable = { temp_days = 21 }
			SPR_add_days_to_radicals_mission = yes
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_talk_with_PRR = {
		icon = generic_agreement
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			is_in_coalition_with_market_liberal = no
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			market_liberal_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_PRR"
			country_event = sprd.499
			set_temp_variable = { temp_days = 21 }
			SPR_add_days_to_radicals_mission = yes
			custom_effect_tooltip = SPR_marlib_buff_bribe_for_time_tt
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_talk_with_UR = {
		icon = generic_agreement
		
		cost = 20
		fire_only_once = yes
		days_remove = 14
		priority = 3
		visible = {
			is_in_coalition_with_social_liberal = no
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			authoritarian_democrat_drift = -0.03
			social_liberal_drift = 0.03
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_talk_with_UR"
			country_event = sprd.502
			set_temp_variable = { temp_days = 21 }
			SPR_add_days_to_radicals_mission = yes
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_crack_down_on_the_left = {
		icon = hand_grab
		
		cost = 40
		fire_only_once = no
		days_remove = 35
		
		available = {}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			totalist_drift = -0.03
			syndicalist_drift = -0.05
			radical_socialist_drift = -0.02
			social_democrat_drift = -0.01
			authoritarian_democrat_drift = 0.03
			power_balance_daily = -0.002
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_crack_down_on_the_left"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					syndicalist > 0.1
				}
				add_popularity = {
					ideology = syndicalist
					popularity = -0.05
				}
			}
			set_temp_variable = { temp_days = 42 }
			SPR_add_days_to_radicals_mission = yes
		}
	}
	SPR_crack_down_on_the_right = {
		icon = hand_grab
		
		cost = 40
		fire_only_once = no
		days_remove = 35
		
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		modifier = {
			authoritarian_democrat_drift = 0.05
			paternal_autocrat_drift = -0.05
			national_populist_drift = -0.07
			power_balance_daily = -0.002
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_crack_down_on_the_right"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			if = {
				limit = {
					paternal_autocrat > 0.1
				}
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.05
				}
			}
			set_temp_variable = { temp_days = 42 }
			SPR_add_days_to_radicals_mission = yes
		}
	}
	SPR_raid_leftist_offices = {
		icon = generic_ignite_civil_war
		
		cost = 65
		fire_only_once = no
		days_remove = 14
		
		available = {
			has_completed_focus = SPR_Promises_Of_Stability
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			totalist_drift = -0.05
			syndicalist_drift = -0.1
			radical_socialist_drift = -0.08
			social_democrat_drift = -0.05
			authoritarian_democrat_drift = 0.08
			power_balance_daily = -0.005
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_raid_leftist_offices"
			if = {
				limit = {
					check_variable = { SPR.num_of_cnt_states_cleared < 2 }
				}
				random_state = {
					limit = {
						is_owned_by = SPR
						has_state_flag = is_cnt_state
						NOT = { state = 165 } #Catalonia
						NOT = { state = 1313 } #Andorra
						any_neighbor_state = {
							is_owned_by = SPR
							NOT = { has_state_flag = is_car_state }
							NOT = { has_state_flag = is_cnt_state }
						}
					}
					custom_effect_tooltip = will_end_cnt_state
					hidden_effect = {
						clr_state_flag = is_cnt_state
						add_to_variable = { SPR.num_of_cnt_states_cleared = 1 }
					}
				}
			}
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				33 = {
					add_stability = -0.01
					add_popularity = {
						ideology = syndicalist
						popularity = -0.02
					}
					add_popularity = {
						ideology = totalist
						popularity = -0.05
					}
					set_temp_variable = { temp_days = 21 }
					SPR_add_days_to_radicals_mission = yes
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
					add_stability = 0.02
					add_popularity = {
						ideology = syndicalist
						popularity = -0.05
					}
					add_popularity = {
						ideology = totalist
						popularity = -0.07
					}
					set_temp_variable = { temp_days = 28 }
					SPR_add_days_to_radicals_mission = yes
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
					add_stability = 0.05
					add_popularity = {
						ideology = syndicalist
						popularity = -0.07
					}
					add_popularity = {
						ideology = totalist
						popularity = -0.1
					}
					set_temp_variable = { temp_days = 35 }
					SPR_add_days_to_radicals_mission = yes
				}
			}
		}
	}
	SPR_raid_rightist_offices = {
		icon = generic_ignite_civil_war
		
		cost = 65
		fire_only_once = no
		days_remove = 14
		
		available = {
			is_in_coalition_with_social_conservative = yes
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {}
		modifier = {
			paternal_autocrat_drift = -0.08
			national_populist_drift = -0.08
			authoritarian_democrat_drift = 0.08
			power_balance_daily = -0.005
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_raid_rightist_offices"
			if = {
				limit = {
					check_variable = { SPR.num_of_car_states_cleared < 3 }
				}
				random_state = {
					limit = {
						is_owned_by = SPR
						has_state_flag = is_car_state
						NOT = { state = 172 } #Navarra
						any_neighbor_state = {
							is_owned_by = SPR
							NOT = { has_state_flag = is_car_state }
							NOT = { has_state_flag = is_cnt_state }
						}
					}
					custom_effect_tooltip = will_end_car_state
					hidden_effect = {
						clr_state_flag = is_car_state
						add_to_variable = { SPR.num_of_car_states_cleared = 1 }
					}
				}
			}
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.03
			}
			random_list = {
				33 = {
					add_stability = -0.01
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.02
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.05
					}
					set_temp_variable = { temp_days = 21 }
					SPR_add_days_to_radicals_mission = yes
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
					add_stability = 0.02
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.05
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.07
					}
					set_temp_variable = { temp_days = 28 }
					SPR_add_days_to_radicals_mission = yes
				}
				33 = {
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
					add_stability = 0.05
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.07
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.1
					}
					set_temp_variable = { temp_days = 35 }
					SPR_add_days_to_radicals_mission = yes
				}
			}
		}
	}
	SPR_more_police = {
		icon = generic_arrest
		
		cost = 45
		fire_only_once = no
		days_remove = 14
		days_re_enable = 30
		
		available = {
			has_completed_focus = SPR_Increase_Police_Funding
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
			}
		}
		allowed = {}
		modifier = {
			stability_weekly = 0.025
			power_balance_daily = -0.003
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_more_police"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.01
			}
			add_stability = 0.02
			add_popularity = {
				ideology = totalist
				popularity = -0.03
			}
			add_popularity = {
				ideology = syndicalist
				popularity = -0.02
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = -0.01
			}
			add_popularity = {
				ideology = national_populist
			 	popularity = -0.02
			}
			set_temp_variable = { temp_days = 21 }
			SPR_add_days_to_radicals_mission = yes
		}
	}
	SPR_public_works_decision = {
		icon = ger_military_buildup
		
		cost = 0
		days_remove = 35
		
		available = {
			power_balance_value  = {
				id = SPR_burning_house_of_cards
				value > -0.15
			}
		}
		visible = {
			has_completed_focus = SPR_a_fragile_yet_stable_market
			power_balance_value  = {
				id = SPR_burning_house_of_cards
				value > -0.15
			}
			has_power_balance = {
				id = SPR_burning_house_of_cards
			}
		}
		modifier = {
			political_power_factor = -0.5
			power_balance_daily = -0.002
			consumer_goods_factor = 0.25
			production_speed_buildings_factor = 0.5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_public_works_decision"
			hidden_effect = {
				set_temp_variable = { temp_not_authdem_pop = 100 }
				set_temp_variable = { temp_authdem_pop = party_popularity_100@authoritarian_democrat }
				subtract_from_temp_variable = { temp_not_authdem_pop = temp_authdem_pop }
			}
			random_owned_state = {
				limit = {
					SPR_is_gov_state = yes
					is_core_of = SPR
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_list = {
				temp_authdem_pop = {
					add_political_power = 25
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.05
					}
				}
				temp_not_authdem_pop = {
					add_political_power = 10
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.03
					}
				}
			}
			set_temp_variable = { temp_days = 14 }
			SPR_add_days_to_radicals_mission = yes
		}
		ai_will_do = {
			base = 100
		}
	}
}
SPR_attack_radicals_decisions = {
	SPR_show_cnt_states_to_attack = {
		icon = infiltrate_state
		state_target = any_owned_state
		visible = {
			SPR_bop_finale_trigger = yes
		}
		target_root_trigger = {
			always = yes
		}
		target_trigger = {
			FROM = {
				has_state_flag = is_cnt_state
				NOT = { state = 165 } #Catalonia
				NOT = { state = 1313 } #Andorra
			}
		}
		available = {
			FROM = {
				OR = {
					any_neighbor_state = {
						custom_trigger_tooltip = {
							tooltip = SPR_is_controlled_by_gov_tt
							is_owned_by = SPR
							NOT = {
								has_state_flag = is_car_state
								has_state_flag = is_cnt_state 
							}
						}
					}
					is_one_state_island = yes
				}
			}
		}
		on_map_mode = map_and_decisions_view
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 249 }
			has_equipment = { support_equipment > 9 }
			has_manpower > 299
		}
		custom_cost_text = SPR_SCW_decision_cost_300_manpower_250_infa_10_support
		priority = 10
		fire_only_once = no
		days_remove = 14
		modifier = {
			stability_weekly = 0.015
			authoritarian_democrat_drift = 0.01
			syndicalist_drift = -0.01
			totalist_drift = -0.02
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = spanish_civil_war
				spanish_civil_war_will_happen_or_is_happening = yes
			}
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -250
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = -10
				}
				add_manpower = -300
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_show_cnt_states_to_attack"
			ROOT = {
				hidden_effect = {
					add_to_variable = { SPR.num_of_cnt_states_cleared = 1 }
				}
				if = {
					limit = {
						NOT = { has_country_flag = SPR_left_kingdom_intro }
					}
					add_stability = 0.01
					add_popularity = {
						ideology = totalist
						popularity = -0.02
					}
					add_popularity = {
						ideology = syndicalist
						popularity = -0.01
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.01
					}
				}
				else = {
					add_political_power = -5
					add_popularity = {
						ideology = totalist
						popularity = -0.01
					}
					add_popularity = {
						ideology = syndicalist
						popularity = -0.01
					}
				}
				random_list = {
					33 = {
						army_experience = 2
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 150
						}
					}
					33 = {
						army_experience = 2
						add_equipment_to_stockpile = {
							type = support_equipment
							amount = 15
						}
					}
					33 = {
						army_experience = 5
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 200
						}
						add_equipment_to_stockpile = {
							type = support_equipment
							amount = 20
						}
					}
				}
			}
			FROM = {
				clr_state_flag = is_cnt_state
				set_demilitarized_zone = no
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_show_car_states_to_attack = {
		icon = infiltrate_state
		state_target = any_owned_state
		visible = {
			SPR_bop_finale_trigger = yes
		}
		target_root_trigger = {
			tag = SPR
		}
		target_trigger = {
			FROM = {
				has_state_flag = is_car_state
				NOT = { state = 172 } #Navarra
			}
		}
		available = {
			FROM = {
				OR = {
					any_neighbor_state = {
						custom_trigger_tooltip = {
							tooltip = SPR_is_controlled_by_gov_tt
							is_owned_by = SPR
							NOT = {
								has_state_flag = is_car_state
								has_state_flag = is_cnt_state 
							}
						}
					}
					is_one_state_island = yes
				}
			}
		}
		on_map_mode = map_and_decisions_view
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 249 }
			has_equipment = { support_equipment > 9 }
			has_manpower > 299
		}
		custom_cost_text = SPR_SCW_decision_cost_300_manpower_250_infa_10_support
		priority = 10
		fire_only_once = no
		days_remove = 14
		modifier = {
			stability_weekly = 0.015
			authoritarian_democrat_drift = 0.01
			paternal_autocrat_drift = -0.01
			national_populist_drift = -0.02
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -250
				}
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = -10
				}
				add_manpower = -300
			}
		}
		cancel_trigger = {
			spanish_civil_war_will_happen_or_is_happening = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_show_car_states_to_attack"
			ROOT = {
				hidden_effect = {
					add_to_variable = { SPR.num_of_car_states_cleared = 1 }
				}
				if = {
					limit = {
						NOT = { has_country_flag = SPR_right_kingdom_intro }
					}
					add_stability = 0.01
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.01
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.02
					}
				}
				else = {
					add_political_power = -5
					add_popularity = {
						ideology = national_populist
						popularity = -0.01
					}
				}
				random_list = {
					33 = {
						army_experience = 2
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 150
						}
					}
					33 = {
						army_experience = 2
						add_equipment_to_stockpile = {
							type = support_equipment
							amount = 15
						}
					}
					33 = {
						army_experience = 5
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 200
						}
						add_equipment_to_stockpile = {
							type = support_equipment
							amount = 20
						}
					}
				}
			}
			FROM = {
				clr_state_flag = is_car_state
				set_demilitarized_zone = no
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_show_cnt_states_to_attack_anarchist_capital = {
		icon = generic_ignite_civil_war
		state_target = any
		visible = {
			SPR_bop_finale_trigger = yes
			check_variable = { SPR.num_of_cnt_states_cleared > SPR.num_of_total_cnt_states_at_start }
		}
		target_root_trigger = {
			tag = SPR
		}
		targets = { state = 165 } #Catalonia, Andorra handled with the effect to not have decision appear for Andorra on the map
		on_map_mode = map_and_decisions_view
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 499 }
			has_manpower > 499
		}
		custom_cost_text = SPR_SCW_decision_cost_500_manpower_500_infa
		priority = 12
		fire_only_once = yes
		days_remove = 28
		modifier = {
			stability_weekly = 0.013
			authoritarian_democrat_drift = 0.02
			syndicalist_drift = -0.02
			totalist_drift = -0.04
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -500
				}
				add_manpower = -500
			}
		}
		cancel_trigger = {
			spanish_civil_war_will_happen_or_is_happening = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_show_cnt_states_to_attack_anarchist_capital"
			ROOT = {
				set_country_flag = SPR_all_cnt_states_cleared
				if = {
					limit = {
						has_country_flag = SPR_all_car_states_cleared
					}
					complete_national_focus = SPR_Prepare_Elections
				}
				if = {
					limit = {
						NOT = { has_country_flag = SPR_left_kingdom_intro }
					}
					add_stability = 0.07
					add_popularity = {
						ideology = totalist
						popularity = -0.04
					}
					add_popularity = {
						ideology = syndicalist
						popularity = -0.06
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.03
					}
				}
				else = {
					add_political_power = -30
					add_stability = 0.05
					add_popularity = {
						ideology = totalist
						popularity = -0.04
					}
					add_popularity = {
						ideology = syndicalist
						popularity = -0.03
					}
				}
			}
			FROM = {
				clr_state_flag = is_cnt_state
				set_demilitarized_zone = no
			}
			1313 = { #Andorra
				if = {
					limit = {
						has_state_flag = is_cnt_state
					}
					clr_state_flag = is_cnt_state
					set_demilitarized_zone = no
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_show_car_states_to_attack_carlist_capital = {
		icon = generic_ignite_civil_war
		state_target = any
		visible = {
			SPR_bop_finale_trigger = yes
			check_variable = { SPR.num_of_car_states_cleared > SPR.num_of_total_car_states_at_start }
		}
		target_root_trigger = {
			tag = SPR
		}
		targets = { state = 172 } #Navarra
		on_map_mode = map_and_decisions_view
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 499 }
			has_manpower > 499
		}
		custom_cost_text = SPR_SCW_decision_cost_500_manpower_500_infa
		priority = 12
		fire_only_once = yes
		days_remove = 28
		modifier = {
			stability_weekly = 0.013
			authoritarian_democrat_drift = 0.02
			paternal_autocrat_drift = -0.02
			national_populist_drift = -0.04
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -500
				}
				add_manpower = -500
			}
		}
		cancel_trigger = {
			spanish_civil_war_will_happen_or_is_happening = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_show_car_states_to_attack_carlist_capital"
			ROOT = {
				set_country_flag = SPR_all_car_states_cleared
				if = {
					limit = {
						has_country_flag = SPR_all_cnt_states_cleared
					}
					complete_national_focus = SPR_Prepare_Elections
				}
				if = {
					limit = {
						NOT = { has_country_flag = SPR_right_kingdom_intro }
					}
					add_stability = 0.07
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.06
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.03
					}
				}
				else = {
					add_stability = 0.05
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.03
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.04
					}
				}
			}
			FROM = {
				clr_state_flag = is_car_state
				set_demilitarized_zone = no
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_get_equipment_decision = {
		icon = ger_military_buildup
		cost = 10
		fire_only_once = no
		days_remove = 14
		
		visible = {
			SPR_bop_finale_trigger = yes
		}
		
		modifier = {
			stability_weekly = -0.02
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_get_equipment_decision"
			random_owned_state = {
				limit = {
					arms_factory > 0
					is_demilitarized_zone = no
					is_core_of = SPR
				}
				random_list = {
					33 = {
						damage_building = {
							type = arms_factory
							damage = 0.3
						}
					}
					33 = {
						damage_building = {
							type = arms_factory
							damage = 0.5
						}
					}
					33 = {
						damage_building = {
							type = arms_factory
							damage = 0.7
						}
					}
				}
			}
			random_list = {
				33 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 33
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 5
					}
				}
				33 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 66
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 10
					}
				}
				33 = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 100
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 15
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}

SPR_civil_war_decisions = {
	SPR_civil_war_countdown = {
		icon = generic_prepare_civil_war
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			custom_override_tooltip = {
				tooltip = spanish_civil_war_tt
				has_global_flag = spanish_civil_war
			}
		}
		is_good = no
		days_mission_timeout = 30
		selectable_mission = no
		priority = 10
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_civil_war_countdown_tt
			hidden_effect = {
				if = {
					limit = {
						tag = SPR
					}
					if = {
						limit = {
							OR = {
								CNT = { exists = yes }
								CAR = { exists = yes }
							}
						}
						country_event = sprc.9
					}
					if = {
						limit = {
							CNT = { exists = yes }
						}
						CNT_setup_effect = yes
					}
					if = {
						limit = {
							CAR = { exists = yes }
						}
						CAR_setup_effect = yes
					}
				}
			}
		}
	}
	SPR_civil_war_prelude_countdown = {
		icon = generic_prepare_civil_war
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			spanish_civil_war_will_happen_or_is_happening = yes
		}
		is_good = no
		days_mission_timeout = civil_war_prelude_countdown_length_var
		selectable_mission = no
		priority = 10
		complete_effect = {}
		timeout_effect = {
			custom_effect_tooltip = SPR_civil_war_prelude_countdown_tt
			hidden_effect = {
				country_event = sprc.7
			}
		}
	}
	SPR_SCW_give_selected_side_infantry = {
		icon = ger_military_buildup
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 249 }
		}
		custom_cost_text = SPR_SCW_decision_cost_250_infa
		days_remove = 21
		fire_only_once = no
		available = { hidden_trigger = { has_allied_with_anyone_republic_and_no_civil_war = yes } }
		visible = {
			has_allied_with_anyone_republic_and_no_civil_war = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				CNT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 250
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -250
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				CAR = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 250
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -250
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_SCW_give_selected_side_at = {
		icon = artillery
		custom_cost_trigger = {
			has_equipment = { artillery_equipment > 99 }
		}
		custom_cost_text = SPR_SCW_decision_cost_100_at
		days_remove = 14
		fire_only_once = no
		available = { hidden_trigger = { has_allied_with_anyone_republic_and_no_civil_war = yes } }
		visible = {
			has_allied_with_anyone_republic_and_no_civil_war = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				CNT = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = -100
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				CAR = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = 100
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = -100
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_SCW_take_government_state = {
		icon = infiltrate_state
		state_target = any_owned_state
		visible = {
			has_allied_with_anyone_republic_and_no_civil_war = yes
		}
		target_root_trigger = {
			tag = SPR
		}
		target_trigger = {
			FROM = {
				SPR_is_gov_state = yes
				NOT = {
					state = 41
					state = 118
					state = 169
					state = 1336
					state = 1342
				}
				is_on_continent = europe
				any_neighbor_state = {
					if = {
						limit = {
							SPR = {
								has_country_flag = SPR_left_republic_intro
							}
						}
						has_state_flag = is_cnt_state
					}
					if = {
						limit = {
							SPR = {
								has_country_flag = SPR_right_republic_intro
							}
						}
						has_state_flag = is_car_state
					}
				}
			}
		}
		available = {
			custom_override_tooltip = {
				tooltip = SPR_amount_of_gov_states_takeable_tt
				not_tooltip = SPR_amount_of_gov_states_takeable_tt_NOT
				check_variable = { SPR.amount_of_gov_states_takeable > 0 }
			}
			FROM = {
				custom_override_tooltip = {
					tooltip = is_gov_state_tt
					any_neighbor_state = {
						OR = {
							has_state_flag = is_car_state
							has_state_flag = is_cnt_state
						}
						is_owned_by = SPR
					}
				}
			}
		}
		on_map_mode = map_and_decisions_view
		cost = 50
		days_remove = 14
		cancel_trigger = {
			FROM = {
				NOT = {
					custom_override_tooltip = {
						tooltip = is_gov_state_tt
						not_tooltip = is_gov_state_NOT_tt
						any_neighbor_state = {
							OR = {
								has_state_flag = is_car_state
								has_state_flag = is_cnt_state
							}
							is_owned_by = SPR
						}
					}
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { SPR.amount_of_gov_states_takeable = 1 }
		}
		cancel_effect = {
			add_to_variable = { SPR.amount_of_gov_states_takeable = 1 }
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				ROOT = {
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.03
					}
					add_popularity = {
						ideology = syndicalist
						popularity = -0.04
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				ROOT = {
					add_popularity = {
						ideology = paternal_autocrat
						popularity = -0.03
					}
					add_popularity = {
						ideology = national_populist
						popularity = -0.04
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_SCW_take_government_state"
			add_to_variable = { SPR.num_of_total_cnt_states_at_start = 1 }
			if = {
				limit = {
					has_country_flag = SPR_left_republic_intro
				}
				FROM = {
					set_state_flag = is_cnt_state
					hidden_effect = { #check to handle olivenza
						if = {
							limit = {
								state = 1337
							}
							1316 = { set_state_flag = is_cnt_state }
						}
					}
				}
				ROOT = {
					add_popularity = {
						ideology = syndicalist
						popularity = 0.04
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.03
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_right_republic_intro
				}
				FROM = {
					set_state_flag = is_car_state
					hidden_effect = { #check to handle olivenza
						if = {
							limit = {
								state = 1337
							}
							1316 = { set_state_flag = is_car_state }
						}
					}
				}
				ROOT = {
					add_popularity = {
						ideology = paternal_autocrat
						popularity = 0.04
					}
					add_popularity = {
						ideology = national_populist
						popularity = 0.03
					}
				}
			}
			add_stability = -0.02
		}
		highlight_states = {
			highlight_state_targets = { state = FROM }
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		ai_will_do = {
			factor = 100
		}
	}
	SPR_SCW_raid_army_supplies = {
		icon = generic_prepare_civil_war
		cost = 20
		available = { hidden_trigger = { has_allied_with_anyone_republic_and_no_civil_war = yes } }
		days_remove = 7
		visible = {
			has_completed_focus = SPR_Fight_Fire_With_Fire
			has_allied_with_anyone_republic_and_no_civil_war = yes
			check_variable = { SPR.num_of_car_states_cleared < SPR.num_of_total_car_states_at_start }
			check_variable = { SPR.num_of_cnt_states_cleared < SPR.num_of_total_cnt_states_at_start }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_SCW_raid_army_supplies"
			random_list = {
				70 = {
					if = {
						limit = {
							has_country_flag = SPR_left_republic_intro
						}
						CNT = {
							add_equipment_to_stockpile = {
								type = infantry_equipment
								amount = 250
							}
							add_equipment_to_stockpile = {
								type = artillery_equipment
								amount = 100
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = infantry_equipment
								amount = -250
							}
							add_equipment_to_stockpile = {
								type = artillery_equipment
								amount = -100
							}
						}
					}
					if = {
						limit = {
							has_country_flag = SPR_right_republic_intro
						}
						CAR = {
							add_equipment_to_stockpile = {
								type = infantry_equipment
								amount = 250
							}
							add_equipment_to_stockpile = {
								type = artillery_equipment
								amount = 100
							}
						}
						hidden_effect = {
							add_equipment_to_stockpile = {
								type = infantry_equipment
								amount = -250
							}
							add_equipment_to_stockpile = {
								type = artillery_equipment
								amount = -100
							}
						}
					}
				}
				30 = {
					if = {
						limit = {
							has_country_flag = SPR_left_republic_intro
						}
						custom_effect_tooltip = will_end_random_cnt_state
						hidden_effect = {
							add_to_variable = { SPR.num_of_cnt_states_cleared = 1 }
							random_owned_state = {
								limit = {
									has_state_flag = is_cnt_state
									OR = {
										any_neighbor_state = {
											is_owned_by = SPR
											NOT = { has_state_flag = is_cnt_state }
											NOT = { has_state_flag = is_car_state }
										}
										AND = {
											is_owned_by = SPR
											is_one_state_island = yes
										}
									}
									NOT = { state = 165 }
									NOT = { state = 1313 }
								}
								clr_state_flag = is_cnt_state
							}
						}
					}
					if = {
						limit = {
							has_country_flag = SPR_right_republic_intro
						}
						custom_effect_tooltip = will_end_random_car_state
						hidden_effect = {
							add_to_variable = { SPR.num_of_car_states_cleared = 1 }
							random_owned_state = {
								limit = {
									has_state_flag = is_car_state
									OR = {
										any_neighbor_state = {
											is_owned_by = SPR
											NOT = { has_state_flag = is_cnt_state }
											NOT = { has_state_flag = is_car_state }
										}
										AND = {
											is_owned_by = SPR
											is_one_state_island = yes
										}
									}
									NOT = { state = 172 }
								}
								clr_state_flag = is_car_state
							}
						}
					}
				}
			}
		}
	}
	SCW_attack_opposing_side_buildings = {
		icon = generic_military
		target_root_trigger = {
			is_spanish_civil_war_tag_regardless_of_war = yes
		}
		priority = 10
		days_remove = 21
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 499 }
			has_manpower > 499
		}
		custom_cost_text = SPR_SCW_decision_cost_500_manpower_500_infa
		targets = { SPR CNT CAR }
		target_trigger = {
			FROM = {
				NOT = { tag = ROOT }
			}
		}
		visible = {
			is_spanish_civil_war_tag = yes
			has_war = yes
		}
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -500
				}
				add_manpower = -500
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SCW_attack_opposing_side_buildings"
			FROM = {
				random_owned_state = {
					limit = {
						arms_factory > 0
						is_owned_by = FROM
					}
					random_list = {
						33 = {
							damage_building = {
								type = arms_factory
								damage = 0.5
							}
						}
						33 = {
							damage_building = {
								type = arms_factory
								damage = 0.75
							}
						}
						33 = {
							damage_building = {
								type = arms_factory
								damage = 1
							}
						}
					}
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	SCW_ask_POR_to_join = {
		icon = generic_flags
		fire_only_once = yes
		priority = 15
		cost = 10
		available = {
			surrender_progress > 0.35
		}
		visible = {
			is_spanish_civil_war_tag = yes
			has_country_flag = SCW_can_ask_POR_to_join_flag
			has_war = yes
		}
		complete_effect = {
			POR = { country_event = sprc.14 }
		}
		ai_will_do = {
			base = 100
		}
	}
	SCW_build_mil = {
		icon = ger_military_buildup
		cost = 75
		days_remove = 14
		priority = 9
		available = {
			any_owned_state = { is_fully_controlled_by = ROOT }
		}
		visible = {
			hidden_trigger = {
				is_spanish_civil_war_tag = yes
				has_war = yes
				any_owned_state = { is_fully_controlled_by = ROOT }
				check_variable = { ROOT.SCW_Amount_Of_Mils_Built_Via_Decision < 5 }
				has_country_flag = SCW_can_now_build_mils_via_decisions_flag
			}
		}
		cancel_if_not_visible = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SCW_build_mil"
			random_owned_controlled_state = {
				prioritize = { 41 165 1344 }
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			hidden_effect = {
				add_to_variable = { ROOT.SCW_Amount_Of_Mils_Built_Via_Decision = 1 }
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SCW_desperate_measures = {
		icon = generic_ignite_civil_war
		priority = 8
		cost = 20
		days_re_enable = 180
		available = {
			surrender_progress > 0.3
		}
		visible = {
			is_spanish_civil_war_tag = yes
			has_war = yes
		}
		complete_effect = {
			add_timed_idea = {
				idea = SPR_desperate_measures_idea
				days = 120
			}
		}
		ai_will_do = {
			base = 100
		}
	}
}

SCW_military_decisions = {
	SCW_raise_militas = {
		icon = generic_military
		state_target = yes
		target_trigger = {
			FROM = {
				is_core_of = ROOT
				is_owned_by = ROOT
				NOT = {
					state = 118
					state = 1313
					state = 1316
				}
			}
		}
		target_root_trigger = {
			is_spanish_civil_war_tag_regardless_of_war = yes
		}
		cost = 15
		days_remove = 21
		fire_only_once = yes
		available = {
			FROM = {
				is_fully_controlled_by = ROOT
			}
		}
		cancel_trigger = {
			FROM = {
				NOT = { is_fully_controlled_by = ROOT }
			}
		}
		visible = {
			is_spanish_civil_war_tag = yes
			has_country_flag = SCW_can_now_raise_militias_flag
			has_war = yes
		}
		cancel_effect = {
			add_stability = -0.02
			army_experience = -5
		}
		remove_effect = {
			FROM = {
				create_unit = {
					division = "name = \"Milicia de Emergencia\" division_template = \"Milicia de Emergencia\" start_experience_factor = 0.1"
					owner = ROOT
					id = 15
					count = 2
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
}

SPR_foreign_decisions = {
	
	SPR_look_for_leftist_allies = {
		icon = investigation
		cost = 10
		days_remove = 7
		days_re_enable = 21
		
		priority = 9
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			is_in_faction = no
			has_completed_focus = SPR_Allign_With_Moderate_Leftists
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_look_for_leftist_allies"
			country_event = sprf.27
		}
		ai_will_do = {
			base = 15
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_RUSSIA
				}
				factor = 10
			}
		}
	}
	
	SPR_save_portugal = {
		icon = generic_prepare_civil_war
		
		cost = 15
		fire_only_once = yes
		days_remove = 7
		
		priority = 10

		available = {
			hidden_trigger = {
				has_war = no
				POR = {
					has_war = yes
					has_war_with = INT
					NOT = { has_war_with = SPR }
					OR = {
						NOT = { has_full_control_of_state = 180 }
						NOT = { has_full_control_of_state = 181 }
						NOT = { has_full_control_of_state = 112 }
						NOT = { has_full_control_of_state = 179 }
					}
				}
			}
		}
		
		visible = {
			has_war = no
			POR = {
				has_war = yes
				has_war_with = INT
				NOT = { has_war_with = SPR }
				OR = {
					NOT = { has_full_control_of_state = 180 }
					NOT = { has_full_control_of_state = 181 }
					NOT = { has_full_control_of_state = 112 }
					NOT = { has_full_control_of_state = 179 }
				}
			}
		}
		
		war_with_on_remove = FRA
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_save_portugal"
			add_to_war = {
				targeted_alliance = POR
				enemy = INT
				hostility_reason = asked_to_join
			}
			if = {
				limit = {
					is_in_faction = no
					POR = {
						is_in_faction_with = GER
					}
				}
				GER = {
					country_event = sprd.30
				}
			}
			if = {
				limit = {
					is_in_faction = no
					POR = {
						is_in_faction_with = ENT
					}
				}
				ENT = {
					country_event = sprd.31
				}
			}
		}
		ai_will_do = {
			base = 15
			modifier = {
				POR = { surrender_progress > 0.5 }
				factor = 10
			}
			modifier = {
				POR = { surrender_progress > 0.85 }
				factor = 5
			}
		}
	}
	SPR_buy_west_timor = {
		icon = generic_agreement
		cost = 50
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			always = yes
		}
		
		visible = {
			has_completed_focus = SPR_trade_focus
			HOL = {
				has_socialist_government = no
			}
			DEI = {
				is_subject_of = HOL
				NOT = { has_war_with = INS }
				OR = {
					has_full_control_of_state = 1018 
					has_full_control_of_state = 1017 
				}
			}
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_buy_west_timor"
			country_event = sprf.18
		}
		ai_will_do = {
			base = 5
		}
	}
	SPR_propose_iberia = {
		icon = generic_flags
		cost = 10
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			tag = SPR
		}
		
		visible = {
			tag = SPR
			is_in_faction_with = POR
			NOT = { has_country_flag = SPR_iberian_union }
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_propose_iberia"
			country_event = sprd.1133
		}
		ai_will_do = {
			base = 5
			modifier = {
				has_war_together_with = POR
				factor = 10
			}
		}
	}
	SPR_core_spanish_morocco = {
		cost = 30
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			has_full_control_of_state = 290
			has_full_control_of_state = 1318
		}
		
		visible = {
			has_completed_focus = SPR_focus_on_africa
			OR = {
				290 = { is_owned_by = SPR }
				1318 = { is_owned_by = SPR }
			}
			NOT = {
				AND = {
					290 = { is_core_of = SPR }
					1318 = { is_core_of = SPR }
				}
			}
		}
		
		highlight_states = {
			highlight_state_targets = {
				state = 290
				state = 1318
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_core_spanish_morocco"
			every_owned_state = {
				limit = {
					OR = {
						state = 290
						state = 1318
					}
				}
				add_dynamic_modifier = { modifier = SPR_morocco_modifier }
				add_core_of = SPR
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_core_spanish_sahara = {
		icon = infiltrate_state
		cost = 20
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			has_full_control_of_state = 699
		}
		
		visible = {
			has_completed_focus = SPR_focus_on_africa
			699 = { is_owned_by = SPR }
			NOT = {
				699 = { is_core_of = SPR }
			}
		}
		
		highlight_states = {
			highlight_state_targets = {
				state = 699
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_core_spanish_sahara"
			every_owned_state = {
				limit = {
					state = 699
				}
				add_dynamic_modifier = { modifier = SPR_sahara_modifier }
				add_core_of = SPR
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_core_equatorial_guinea = {
		icon = infiltrate_state
		cost = 10
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			owns_state = 297
			has_full_control_of_state = 297
			owns_state = 1335
			has_full_control_of_state = 1335
		}
		
		visible = {
			has_completed_focus = SPR_focus_on_africa
			NOT = {
				297 = { is_core_of = SPR }
				1335 = { is_core_of = SPR }
			}
		}
		
		highlight_states = {
			highlight_state_targets = {
				state = 297
				state = 1335
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_core_equatorial_guinea"
			every_owned_state = {
				limit = {
					OR = {
						state = 297
						state = 1335
					}
				}
				add_dynamic_modifier = { modifier = SPR_rio_muni_modifier }
				add_core_of = SPR
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_core_angola = {
		icon = infiltrate_state
		cost = 40
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			owns_state = 540
			has_full_control_of_state = 540
		}
		
		visible = {
			has_completed_focus = SPR_focus_on_africa
			has_country_flag = SPR_iberian_union
		}
		
		highlight_states = {
			highlight_states_trigger = {
				state = 540
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_core_angola"
			every_owned_state = {
				limit = {
					is_core_of = ANG
				}
				add_dynamic_modifier = { modifier = SPR_iberia_angola_modifier }
				add_core_of = SPR
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_core_mozambique = {
		icon = infiltrate_state
		cost = 40
		fire_only_once = yes
		days_remove = 7
		
		priority = 1
		
		available = {
			owns_state = 544
			has_full_control_of_state = 544
		}
		
		visible = {
			has_completed_focus = SPR_focus_on_africa
			has_country_flag = SPR_iberian_union
		}
		
		highlight_states = {
			highlight_states_trigger = {
				state = 544
			}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_core_mozambique"
			every_owned_state = {
				limit = {
					is_core_of = MZB
				}
				add_dynamic_modifier = { modifier = SPR_iberia_mozambique_modifier }
				add_core_of = SPR
			}
		}
		ai_will_do = {
			base = 100
		}
	}
	SPR_invite_into_soi = {
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			OR = {
				SPR_psoe_elected_flag = yes
				SPR_ps_elected_flag = yes
			}
			is_subject = no
			is_faction_leader = yes
			has_country_flag = SPR_SOI_Flag
		}
		fire_only_once = yes
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				SPR_can_join_soi_trigger = yes
			}
		}
		cost = 15
		complete_effect = {
			FROM = {
				country_event = {
					id = sprf.9
					days = 3
					random_days = 3
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_SOI
				}
				add = 5
			}
			modifier = {
				FROM = { is_major = yes }
				factor = 0
			}
		}
	}
	SPR_invite_into_intergralist_entente = {
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_integralist_entente
			is_faction_leader = yes
			is_subject = no
		}
		targets = { NFA POR BRA IRE BEL WLL MAG VIN ALA MAL MEX NFL NOR SWE SER SIC FIN PRU KOG }
		target_trigger = {
			FROM = {
				SPR_can_join_intr_entente_trigger = yes
			}
		}
		cost = 25
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_invite_into_intergralist_entente"
			FROM = {
				country_event = {
					id = sprd.1302
					days = 2
					random_days = 3
				}
			}
		}
		ai_will_do = {
			base = 0
		}
	}
	SPR_invite_into_liberal_entente = {
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_liberal_entente
			is_faction_leader = yes
			is_subject = no
		}
		targets = { IRE TXS ALB BRA AST ALO TEX SKM GRE KIV IRQ LUX NVN MON SOM SRI WLL CAF COL DOM NGR PER SCT USA YUC VEN VIN SWI URL SIC POL INC HOL BEL ARG CAL SIA AFG PAR ECU EST LEB CHL NZL LIB}
		target_trigger = {
			FROM = {
				SPR_can_join_lbr_entente_trigger = yes
			}
		}
		cost = 25
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_invite_into_liberal_entente"
			FROM = {
				country_event = {
					id = sprd.1305
					days = 2
					random_days = 3
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_RADICAL_ENTENTE
				}
				add = 5
			}
			modifier = {
				FROM = { is_major = yes }
				factor = 0
			}
		}
	}
	SPR_protect_south_american_nation = {
		icon = generic_prepare_civil_war
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_radical_entente_protect_south_america
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				any_enemy_country = {
					has_war_with = FROM
				}
			}
		}
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				has_idea = SPR_Protect_Latin_America_Idea
				has_defensive_war = yes
				NOT = {
					has_war_with = ROOT
					is_subject_of = ROOT
				}
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				FROM = {
					OR = {
						has_socialist_government = yes
						has_government = paternal_autocrat
						has_government = national_populist
						has_war_with = ROOT
						is_subject_of = ROOT
						exists = no
					}
				}
			}
		}
		cost = 10
		days_remove = 14
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_protect_south_american_nation"
			FROM = {
				every_enemy_country = {
					limit = {
						has_offensive_war_with = FROM
						NOT = { has_war_with = ROOT }
					}
					ROOT = {
						add_to_war = {
							targeted_alliance = FROM
							enemy = PREV
						}
					}
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_RADICAL_ENTENTE
				}
				add = 5
			}
			modifier = {
				FROM = { is_major = yes }
				factor = 0
			}
		}
	}
	SPR_kill_natpop_and_pataut_south_americans = {
		icon = generic_ignite_civil_war
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_radical_entente_protect_south_america
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		target_trigger = {
			FROM = {
				AND = {
					OR = {
						has_government = paternal_autocrat
						has_government = national_populist
					}
					is_in_south_america = yes
					is_subject = no
					is_ally_of_ROOT = no
					NOT = { has_idea = SPR_Protect_Latin_America_Idea }
				}
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				FROM = {
					OR = {
						NOT = { 
							has_government = paternal_autocrat
							has_government = national_populist
						}
						has_war_with = ROOT
						exists = no
					}
				}
			}
		}
		cost = 25
		days_remove = 14
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_kill_natpop_and_pataut_south_americans"
			ROOT = {
				declare_war_on = { type = annex_everything target = FROM }
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_RADICAL_ENTENTE
				}
				add = 5
			}
			modifier = {
				FROM = { is_major = yes }
				factor = 0
			}
		}
	}
	SPR_kill_every_natpop_and_pataut = {
		icon = generic_ignite_civil_war
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_radical_entente_kill_every_natpop_and_pataut_flag
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = ROOT
				}
			}
		}
		target_trigger = {
			FROM = {
				AND = {
					OR = {
						has_government = paternal_autocrat
						has_government = national_populist
					}
					is_in_south_america = no
					is_subject = no
					is_ally_of_ROOT = no
					NOT = { has_idea = SPR_Protect_Latin_America_Idea }
				}
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				FROM = {
					OR = {
						NOT = { 
							has_government = paternal_autocrat 
							has_government = national_populist
						}
						has_war_with = ROOT
						exists = no
					}
				}
			}
		}
		cost = 25
		days_remove = 14
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_kill_every_natpop_and_pataut"
			ROOT = {
				declare_war_on = { type = annex_everything target = FROM }
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_RADICAL_ENTENTE
				}
				add = 5
			}
			modifier = {
				FROM = { is_major = yes }
				factor = 0
			}
		}
	}
	SPR_kill_morocco = {
		icon = generic_military
		target_root_trigger = {
			tag = SPR
		}
		visible = {
			has_country_flag = SPR_kill_morocco_flag
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				owns_state = 461
				MOR = { is_subject_of = SPR }
			}
		}
		targets = { tag = MOR }
		cost = 25
		days_remove = 14
		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_kill_morocco"
			hidden_effect = {
				every_country = {
					limit = {
						OR = {
							tag = ROOT
							tag = FROM
						}
					}
					add_ideas = SPR_morocco_war
					activate_mission = SPR_kill_morocco_mission
				}
				FROM = {
					if = {
						limit = {
							OR = {
								is_subject = yes
								is_in_faction = yes
							}
						}
						set_variable = { FROM.previous_faction_leader = FROM.faction_leader }
						set_variable = { FROM.previous_overlord = FROM.overlord }
						remove_puppet_and_leave_faction = yes
					}
				}
			}
			ROOT = {
				declare_war_on = { type = annex_everything target = FROM }
				every_state = {
					limit = {
						is_core_of = FROM
						NOT = {
							is_core_of = ROOT
							is_claimed_by = ROOT
						}
					}
					add_claim_by = ROOT
				}
			}
		}
		ai_will_do = {
			base = 5
		}
	}
}

SPR_faction_decisions = {
	SPR_join_research_decision = {
		icon = generic_research

		available = {
			is_in_faction_with = SPR
		}
		visible = {
			is_in_faction_with = SPR
			has_global_flag = spain_research_established
			NOT = { is_in_tech_sharing_group = spain_research }
			FROM = {
				is_faction_leader = yes
				is_in_faction_with = ROOT
			}
		}

		fire_only_once = yes
		cost = 0

		target_root_trigger = { is_in_faction = yes }
		targets = { SPR }
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				is_in_faction_with = ROOT
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_join_research_decision target: [From.GetName]"
			add_to_tech_sharing_group = spain_research
			hidden_effect = {
				if = {
					limit = {
						SPR = { has_completed_focus = SPR_Economic_Freedom }
						NOT = { has_idea = SPR_Radical_Entente_Trade }
					}
					country_event = sprf.33
				}
			}
		}

		ai_will_do = {
			factor = 100
		}
	}
}

SPR_separatist_revolts = {
	SPR_battle_royale_prelude_countdown = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		is_good = no
		days_mission_timeout = 30
		selectable_mission = no
		priority = 100
		complete_effect = {}
		timeout_effect = {
			SPR = {
				country_event = sprd.117
			}
		}
	}
	SPR_battle_royale_countdown = {
		activation = {
			always = no
		}
		available = {
			always = no
		}
		cancel_trigger = {
			SPR_separatist_revolt_trigger = no
			if = {
				limit = {
					has_country_flag = GLC_in_separatist_revolt
				}
				GLC = { exists = no }
			}
			if = {
				limit = {
					has_country_flag = CAT_in_separatist_revolt
				}
				CAT = { exists = no }
			}
			if = {
				limit = {
					has_country_flag = BAS_in_separatist_revolt
				}
				BAS = { exists = no }
			}
			if = {
				limit = {
					has_country_flag = RIF_in_separatist_revolt
				}
				RIF = { exists = no }
			}
		}
		is_good = no
		days_mission_timeout = 200
		selectable_mission = no
		priority = 100
		complete_effect = {}
		cancel_effect = {
			SPR = {
				country_event = sprd.115
			}
		}
		timeout_effect = {
			SPR = {
				country_event = sprd.114
			}
		}
	}
}