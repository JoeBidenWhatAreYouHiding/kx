AZE_musavat_party_cat = {
	AZE_german_intervention_mission = {
		icon = GFX_decision_hol_war_on_pacifism
		allowed = {
			always = no
		}

		available = {
			hidden_trigger = { always = no }
		}
		cancel_trigger = {
			OR = {
				is_subject = yes
				has_war = yes
				has_global_flag = GER_withdrew_from_caucasus
			} 
		}

		days_mission_timeout = 250
		is_good = no
		fire_only_once = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout AZE_german_intervention_mission"
			country_event = azeterror.10
		}
	}
	AZE_launch_raid_in_the_mountains = {
		icon = GFX_decision_generic_military
		allowed = { always = no }

		available = {
			NOT = { has_war_with = ARM }
		}

		visible = {
			AZE_has_armenian_resistance = yes
		}

		cancel_if_not_visible = yes

		custom_cost_text = CP_10
		custom_cost_trigger = {
			command_power > 9.99
		}
		days_remove = 30
		days_re_enable = 45
		
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = AZE_path option = AZE_PATH_SOCDEM }
					has_game_rule = { rule = AZE_path option = AZE_PATH_SOCLIB }
					has_game_rule = { rule = AZE_path option = AZE_PATH_SOCCON }
					has_game_rule = { rule = AZE_path option = AZE_PATH_SOCCON_FED }
					has_game_rule = { rule = AZE_path option = AZE_PATH_AUTHDEM }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_launch_raid_in_the_mountains"
			hidden_effect = {
				add_command_power = -10
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_launch_raid_in_the_mountains"
			add_popularity = { ideology = market_liberal popularity = 0.02 }
			AZE_decrease_armenian_insurgency = yes
		}
	}
}

AZE_foreign_policy_decisions = {
	AZE_attack_armenia_getting_too_strong_decision = {
		icon = hol_war_on_pacifism
		allowed = { always = no } # Activated by event cp.1 End of an Era

		available = {
			NOT = { is_in_faction_with = GER }
		}

		visible = {
			can_declare_war_on = FROM
			OR = {
				1213 = { is_owned_and_controlled_by = FROM }
				1082 = { is_owned_and_controlled_by = FROM }
			}
			is_subject = no
		}

		cancel_trigger = {
			OR = {
				NOT = { can_declare_war_on = FROM }
				NOT = { 1213 = { is_owned_and_controlled_by = FROM } }
				NOT = { 1082 = { is_owned_and_controlled_by = FROM } } 
				is_subject = yes
				is_in_faction_with = GER
			}
		}

		target_trigger = {
			can_declare_war_on = FROM
			OR = {
				1213 = { is_owned_and_controlled_by = FROM }
				1082 = { is_owned_and_controlled_by = FROM }
			}
			is_subject = no
		}

		cost = 0
		days_remove = 30
		fire_only_once = yes
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened_cautious = yes
					FROM = { dont_start_major_faction_wars = yes }
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_attack_armenia_getting_too_strong_decision"
			set_country_flag = { flag = imminent_war days = 35 value = 1 }
			setup_decision_attack_AI = yes
			FROM = { country_event = kr.political.30 } #warning event
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_attack_armenia_getting_too_strong_decision"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	AZE_attack_georgia_decision = {
		icon = generic_prepare_civil_war
		allowed = { always = no }
		available = {
			has_war = no
			NOT = { 
				has_non_aggression_pact_with = FROM
			}
			can_declare_war_on = FROM
		}

		visible = {
			has_idea = AZE_pipeline_stopped
		}

		cost = 0
		days_remove = 15
		fire_only_once = yes
		war_with_target_on_remove = yes
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				FROM = {
					is_in_faction = no 
					has_war = yes
				}				
			}
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.8
			}
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 1.0 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = { tag = ROOT ratio > 0.8 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					faction_leader = {
						strength_ratio = { tag = ROOT ratio > 0.8 }
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel AZE_attack_georgia_decision"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_attack_georgia_decision"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_attack_georgia_decision"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = puppet_wargoal_focus
			}
			if = {
				limit = { has_country_flag = AZE_GEO_german_volunteers }
				save_global_event_target_as = volunteer_target
				AZE = { send_volunteers_to_TARGET = yes }
			}
		}
	}
	AZE_join_reichspakt = {
		name = GEO_join_reichspakt_decision
		icon = generic_agreement

		allowed = { always = no }

		available = {
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			AZE_musavat_in_power = yes
			NOT = { has_global_flag = GER_withdrew_from_caucasus }
			is_subject = no
			is_in_faction = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 25
			modifier = {
				factor = 0
				FROM = { surrender_progress > 0.3 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_join_reichspakt target: [From.GetName]"
			FROM = { country_event = sic.34 }
		}
	}
	AZE_join_ottomans = { # join the Ottomans
		name = TRK_join_ottomans
		icon = generic_agreement
		allowed = { always = no }
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			if = {
				limit = { has_government = social_liberal }
				TUR = { 
					OR = {
						has_government = social_liberal 
						has_government = market_liberal
					}
				}
			}
			else = {
				has_left_democratic_government = no
			}
		}
		visible = {
			is_subject = no
			is_in_faction = no
			has_socialist_government = no
			FROM = {
				is_subject = no
				NOT = { has_war_with = ROOT }
			}
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 15
		
		ai_will_do = { 
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete AZE_join_ottomans target: [From.GetName]"			
			FROM = { country_event = aze.100 }
		}
	}
	AZE_join_russia = { # join the Ottomans
		name = TRK_join_russia
		icon = generic_agreement
		allowed = { always = no }
		
		available = {
			at_peace_or_same_enemies_as_FROM = yes
		}
		visible = {
			is_in_faction = no
			is_subject = no
			FROM = {
				RUS_russian_monarch = no 
				is_subject = no
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
			OR = {
				AND = {
					has_socialist_government = yes
					RUS = { has_socialist_government = yes }
				}
				AND = {
					has_liberal_government = yes
					RUS = { has_democratic_government = yes }
				}
			}
			NOT = { has_country_flag = RUS_refused_AZE }
		}
		
		fire_only_once = yes
		cost = 0

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_join_russia target: [From.GetName]"
			FROM = { country_event = aze.106 }
		}
	}
	AZE_invite_to_qafqaz = { # join the Ottomans
		icon = generic_agreement
		allowed = { always = no }
		
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			hidden_trigger = {			
				NOT = { has_country_flag = AZE_invite_to_qafqaz_block }
			}
			if = {
				limit = {
					FROM = { original_tag = GEO }
				}
				FROM = {
					NOT = { 
						has_government = market_liberal
						has_country_leader = {
							name = "Ioakhim I"
							ruling_only = yes
						}
					}
				}
				NOT = { has_idea = AZE_pipeline_stopped }
			}
			if = {
				limit = {
					FROM = { original_tag = ABK }
				}
				OR = {
					NOT = { is_in_faction_with = GEO }
					GEO = { is_subject_of = ROOT }
				}
				FROM = {
					OR = { 
						has_completed_focus = ABK_Continue_Islamic_Tradition
						has_completed_focus = ABK_Avert_Georgian_Irridentism
					}
				}
				has_left_democratic_government = no
			}
		}
		visible = {
			is_faction_leader = yes
			is_subject = no
			FROM = {
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
				has_socialist_government = no
			}
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 15

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_invite_to_qafqaz target: [From.GetName]"
			set_country_flag = { flag = AZE_invite_to_qafqaz_block days = 15 value = 1 }
			if = {
				limit = { FROM = { original_tag = ABK } }
				FROM = { 
					country_event = {
						id = aze.128 
						days = 3
					}
				}
			}
			else = {
				FROM = { 
					country_event = {
						id = aze.118 
						days = 3
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_invite_to_qafqaz target: [From.GetName]"
			clr_country_flag = AZE_invite_to_qafqaz_block
		}
	}
	AZE_strike_at_persia = {
		icon = generic_prepare_civil_war
		name = RUS_Attack_Region
		
		available = {
			OR = {
                is_owner_neighbor_of = FROM
                any_allied_country = {
                    is_owner_neighbor_of = FROM
                }
            }
		}
		target_root_trigger = {
			is_subject = no
			has_completed_focus = AZE_Liberate_South_Azerbaijan
		}
		target_trigger = {
			can_declare_war_on = FROM
			OR = {
				417 = { is_owned_and_controlled_by = FROM }
				419 = { is_owned_and_controlled_by = FROM }
			}
		}
		
		cost = 0
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					FROM = { dont_start_major_faction_wars = yes }
					ROOT_is_threatened_cautious = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
		}
		cost = 25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_strike_at_persia target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes			
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_strike_at_persia target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	AZE_liberate_panturkist = {
		icon = generic_prepare_civil_war
		name = RUS_Attack_Region
		
		available = {
			OR = {
                is_owner_neighbor_of = FROM
                any_allied_country = {
                    is_owner_neighbor_of = FROM
                }
            }
		}
		target_array = AZE_liberate_panturkist_array
		target_root_trigger = {
			is_subject = no
			has_completed_focus = AZE_Brothers_Beyond_The_Aras
		}
		target_trigger = {
			if = {
				limit = { 
					FROM = { has_democratic_government = yes }
				}
				has_country_flag = @FROM_refused_alliance
			}
			else = {
				FROM = { has_democratic_government = no }
			}
			can_declare_war_on = FROM
			FROM = { is_turkic_tag = yes }
		}
		
		cost = 0
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					FROM = { dont_start_major_faction_wars = yes }
					ROOT_is_threatened_cautious = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
		}
		cost = 25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_liberate_panturkist target: [From.GetName]"
			FROM = { incoming_war_notification_effect = yes }
			setup_decision_attack_AI = yes			
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_liberate_panturkist target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	AZE_ally_panturkist = {
		name = RUS_Invite_Country
		icon = generic_agreement
		priority = 100
		
		available = {
			at_peace_or_same_enemies_as_FROM = yes
			OR = {
                is_owner_neighbor_of = FROM
                any_allied_country = {
                    is_owner_neighbor_of = FROM
                }
            }
			NOT = { has_country_flag = RUS_invited_country }
		}
		
		target_array = AZE_liberate_panturkist_array
		target_root_trigger = {
			is_subject = no
			has_completed_focus = AZE_Brothers_Beyond_The_Aras
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = { 
				is_subject = no
				has_democratic_government = yes
				is_turkic_tag = yes
			}
		}

		cost = 25
		days_remove = 15
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				FROM = { is_ai = no }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel AZE_ally_panturkist target: [From.GetName]"
			clr_country_flag = RUS_invited_country
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_ally_panturkist target: [From.GetName]"
			set_country_flag = { flag = RUS_invited_country days = 10 value = 1 }
			FROM = { country_event = turkestan.22 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_ally_panturkist target: [From.GetName]"
			clr_country_flag = RUS_invited_country
		}
	}
}

AZE_caspian_trade_decision_category = {
	AZE_trade_with_country = {
		name = TRK_trade_with_country
		icon = GFX_decision_global_trade
		allowed = { always = no }		
		available = {
			FROM = {
				is_subject = no
				NOT = { has_war_with = ROOT }
			}
		}
		cost = 35
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete AZE_trade_with_country target: [From.GetName]"
			FROM = {
				add_opinion_modifier = {
					modifier = KR_trade_agreement
					target = ROOT
				}
			}
			add_opinion_modifier = {
				target = FROM
				modifier = KR_trade_agreement
			}
		}

		ai_will_do = { 
			factor = 20 
		}
	}
}
economy_decisions = {
	AZE_Dam_mission = {
		icon = GFX_decision_electrify
		allowed = {
			always = no
		}

		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 730
		is_good = yes
		fire_only_once = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout AZE_Dam_mission"
			add_stability = 0.1
			1300 = {
				increase_state_category_by_two_levels = yes
				add_building_construction = {
					type = dam
					level = 1
					instant_build = yes
					province = {
						id = 11674
					}
				}
				custom_effect_tooltip = {
					localization_key = building_state_modifier|dam
					INDENT = "    "
				}
			}
			if = {
				limit = { has_idea = AZE_electrification_in_progress }
				effect_tooltip = {
					swap_ideas = {
						remove_idea = AZE_electrification_in_progress
						add_idea = AZE_electrification_done
					}
					every_owned_state = {
						limit = {
							is_rural_state = yes
							is_fully_controlled_by = ROOT						
						}
						increase_state_category_by_one_level = yes
					}
				}
				hidden_effect = {
					remove_ideas = AZE_electrification_in_progress
				}
			}
		}
	}
	AZE_upgrade_baku_batum_pipeline = {
		icon = GFX_decision_fortress
		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 2
			at_peace_or_same_enemies_as_FROM = yes
			1213 = { 
				OR = {
					is_controlled_by = FROM
					is_controlled_by = ROOT
				}
			}
			1000 = { 
				OR = {
					is_controlled_by = FROM
					is_controlled_by = ROOT
				}
			}
		}

		modifier = {
			civilian_factory_use = 3
		}

		cost = 120
		days_remove = 150
		fire_only_once = yes

		ai_will_do = {
			factor = 20
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AZE_upgrade_baku_batum_pipeline target: [From.GetName]"
			swap_ideas = {
				remove_idea = AZE_pipeline_stopped
				add_idea = AZE_pipeline_stopped_1
			}
			TUR = { 
				give_military_access = AZE 
				activate_mission = TUR_upgrade_baku_batum_pipeline
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_upgrade_baku_batum_pipeline target: [From.GetName]"
			remove_ideas = AZE_pipeline_stopped_1
			1298 = { prioritize_state = yes }
			add_one_random_infrastructure = yes
			effect_tooltip = {
				TUR = {
					1213 = { prioritize_state = yes }
					add_one_random_infrastructure = yes
					1000 = { prioritize_state = yes }
					add_one_random_infrastructure = yes
					add_ideas = AZE_oil_profits_from
				}
			}
		}
	}
	TUR_upgrade_baku_batum_pipeline = {
		icon = GFX_decision_fortress
		allowed = { always = no }
		
		available = {
			hidden_trigger = { always = no }
		}
		cancel_trigger = {
			OR = {
				1213 = { 
					NOT = {
						is_controlled_by = AZE
						is_controlled_by = ROOT
					}
				}
				1000 = { 
					NOT = {
						is_controlled_by = AZE
						is_controlled_by = ROOT
					}
				}
				has_war_with = AZE
			}			
		}

		days_mission_timeout = 150
		is_good = yes
		selectable_mission = no
		fire_only_once = yes

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout AZE_Dam_mission"
			add_political_power = 100
			add_ideas = AZE_oil_profits_from
			1213 = { prioritize_state = yes }
			add_one_random_infrastructure = yes
			1000 = { prioritize_state = yes }
			add_one_random_infrastructure = yes
		}
	}
}
AZE_army_decisions = {
	AZE_baku_fortifications = {
		icon = GFX_decision_fortress
		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 0
			FROM = { is_owned_and_controlled_by = ROOT }
		}

		modifier = {
			civilian_factory_use = 1
		}

		cost = 30
		days_remove = 150
		fire_only_once = yes
		state_target = yes

		ai_will_do = {
			factor = 20
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_baku_fortifications target: [From.GetName]"
			FROM = {
				add_building_construction = {
					type = bunker
					level = 3
					instant_build = yes
					province = 4458
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 4545
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 7495 
				}
				add_building_construction = {
					type = bunker
					level = 1
					instant_build = yes
					province = 1536
				}
			}
		}
	}
	AZE_invite_advisors_from = {
		icon = GFX_decision_generic_military
		available = {
			NOT = { 
				has_war_with = FROM 
				has_idea = AZE_german_advisors
				has_idea = AZE_ottoman_advisors
				has_idea = AZE_russian_advisors
				has_idea = AZE_ukrainian_advisors
			}
			FROM = {
				is_subject = no
			}
		}

		cost = 15
		days_remove = 14
		
		fire_only_once = yes
		
		targets = { GER TUR RUS UKR }
		target_root_trigger = {
			is_subject = no
			has_completed_focus = AZE_Invite_Foreign_Advisors
		}
		target_trigger = {
			if = {
				limit = { FROM = { tag = GER } }
				GER_is_in_mitteleuropa = yes
				has_socialist_government = no
				NOT = { has_government = social_democrat }
			}
			else_if = {
				limit = { FROM = { tag = TUR } }
				has_socialist_government = no
				NOT = { has_government = social_democrat }
			}
			else_if = {
				limit = { FROM = { tag = RUS } }
				OR = {
					AND = {
						has_socialist_government = yes
						FROM = { has_socialist_government = yes }
					}
					AND = {
						has_liberal_government = yes
						FROM = { has_democratic_government = yes }
					}
				}
				FROM = { 
					RUS_russian_monarch = no 
				}
				has_completed_focus = AZE_Resume_Partnership_With_Russia
				NOT = { has_country_flag = RUS_refused_AZE }
			}
			else_if = {
				limit = { FROM = { tag = UKR } }
				FROM = { country_is_not_unfriendly_towards_PREV = yes }
			}
		}
		
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove AZE_invite_advisors_from target: [From.GetName]"
			if = {
				limit = { FROM = { tag = GER } }
				add_ideas = AZE_german_advisors
			}
			else_if = {
				limit = { FROM = { tag = TUR } }
				add_ideas = AZE_ottoman_advisors
			}
			else_if = {
				limit = { FROM = { tag = RUS } }
				add_ideas = AZE_russian_advisors
			}
			else_if = {
				limit = { FROM = { tag = UKR } }
				add_ideas = AZE_ukrainian_advisors
			}
		}
	}
}
