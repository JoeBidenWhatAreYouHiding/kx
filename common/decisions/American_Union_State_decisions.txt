###########################################
# American Union States
# Decisions by Herkles
###########################################
TEX_manifest_destiny_decisions = {
	TEX_claim_canada_dec = {
		icon = generic_prepare_civil_war

		allowed = { original_tag = TEX }

		available = {
			TEX = {
				is_subject = no
				has_war = no
			}
			if = {
				limit = {
					CAN = {
						NOT = { is_subject_of = ROOT }
					}
				}
				can_declare_war_on = CAN
			}
			else_if = {
				limit = {
					CAN = {
						is_subject_of = ROOT
					}
				}
				CAN = {
					has_war = no
				}
			}
		}

		visible = {
			has_completed_focus = TEX_claim_canada
			if = {
				limit = { country_exists = CAN }
				CAN = {
					NOT = {
						has_war_with = ROOT
						has_war_together_with = ROOT
					}
					OR = {
						NOT = { is_in_faction_with = ROOT }
						is_subject_of = ROOT
					}
				}
			}
		}

		fire_only_once = yes
		cost = 100
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				country_exists = CAN
				strength_ratio = { tag = CAN ratio < 3.0 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TEX_claim_canada_dec"
			set_country_flag = CAN_CONQ
			every_state = {
				limit = {
					OR = {
						is_on_continent = north_america
						is_on_continent = central_america
					}
					is_not_claim_or_core_of_ROOT = yes
					is_core_of = CAN
					NOT = {
						state = 466
						state = 832
						state = 468
						state = 683
					}
				}
				add_claim_by = ROOT
			}
			if = {
				limit = {
					has_subject = CAN
				}
				annex_country = { target = CAN }
			}
			else_if = {
				limit = {
					can_declare_war_on = CAN
				}
				add_war_support = 0.10
				create_wargoal = {
					type = annex_everything
					target = CAN
				}
			}
		}
	}

	TEX_claim_mexico_dec = {
		icon = generic_prepare_civil_war

		allowed = { original_tag = TEX }

		available = {
			TEX = {
				is_subject = no
				has_war = no
			}
			if = {
				limit = {
					MEX = {
						NOT = { is_subject_of = ROOT }
					}
				}
				can_declare_war_on = MEX
			}
			else_if = {
				limit = {
					MEX = {
						is_subject_of = ROOT
					}
				}
				MEX = {
					has_war = no
				}
			}
		}

		visible = {
			has_completed_focus = TEX_claim_mexico
			if = {
				limit = { country_exists = MEX }
				MEX = {
					NOT = {
						has_war_with = ROOT
						has_war_together_with = ROOT
					}
					OR = {
						NOT = { is_in_faction_with = ROOT }
						is_subject_of = ROOT
					}
				}
			}
		}

		fire_only_once = yes
		cost = 100
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				country_exists = MEX
				strength_ratio = { tag = MEX ratio < 3.0 }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TEX_claim_mexico_dec"
			set_country_flag = MEX_CONQ
			every_state = {
				limit = {
					OR = {
						is_on_continent = north_america
						is_on_continent = central_america
					}
					is_not_claim_or_core_of_ROOT = yes
					is_core_of = MEX
				}
				add_claim_by = ROOT
			}
			if = {
				limit = {
					has_subject = MEX
				}
				annex_country = { target = MEX }
			}
			else_if = {
				limit = {
					can_declare_war_on = MEX
				}
				add_war_support = 0.10
				create_wargoal = {
					type = annex_everything
					target = MEX
				}
			}
		}
	}

	TEX_release_quebec = {
		icon = generic_flags
		allowed = { original_tag = TEX }
		available = {
			466 = { is_owned_and_controlled_by = ROOT }
			is_subject = no
		}
		visible = {
			has_completed_focus = TEX_claim_canada
			owns_state = 466
			NOT = { country_exists = QUE }
		}

		cost = 0
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TEX_release_quebec"
			add_stability = 0.05
			QUE = {
				add_state_core = 466
				add_state_core = 832
				add_state_core = 468
				add_state_core = 683
				add_state_core = 332
			}
			every_owned_state = {
				limit = {
					is_core_of = QUE
					is_owned_by = ROOT
					NOT = { is_core_of = ROOT }
				}
				if = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
				QUE = {
					transfer_state = PREV
				}
			}
			puppet = QUE
		}
	}

	TEX_defend_new_world = {
		icon = generic_prepare_civil_war
		allowed = { original_tag = TEX }
		available = {
			is_major = yes
			has_war = no
			is_subject = no
		}
		visible = {
			can_declare_war_on = FROM
			FROM = {
				OR = {
					any_neighbor_country = {
						OR = {
							tag = ROOT
							gives_military_access_to = ROOT
							is_in_faction_with = ROOT
							is_subject_of = ROOT
						}
					}
					tag = CUB
					tag = DOM
					tag = HAI
					tag = CAF
					tag = COL
					tag = VEN
				}
				has_socialist_government = yes
				OR = {
					NOT = { tag = MEX }
					has_government = social_democrat
				}
				OR = {
					NOT = { tag = FOP }
					NOT = { country_exists = ARG }
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = TEX_new_world_guardian
		}

		target_array = global.american_tags_array

		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				OR = {
					any_neighbor_country = {
						OR = {
							tag = ROOT
							gives_military_access_to = ROOT
							is_in_faction_with = ROOT
							is_subject_of = ROOT
						}
					}
					tag = CUB
					tag = DOM
					tag = HAI
					tag = CAF
					tag = COL
					tag = VEN
				}
				has_socialist_government = yes
				OR = {
					NOT = { tag = MEX }
					has_government = social_democrat
				}
				OR = {
					NOT = { tag = FOP }
					NOT = { country_exists = ARG }
				}
			}
		}

		cost = 50
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 5
				FROM = {
					OR = {
						tag = CAN
						tag = MEX
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_in_north_america = yes }
			}
			modifier = {
				factor = 0
				NOT = {
					is_neighbor_of = FROM
					has_navy_size = { size > 100 type = convoy }
				}
			}
			modifier = {
				factor = 0
				has_army_manpower = { size < 250000 }
			}
			# don't attack a faction leader Canada unless we're much stronger or they're at war
			modifier = {
				factor = 0
				FROM = { tag = CAN }
				CAN = { is_in_faction = yes }
				NOT = {
					strength_ratio = { tag = CAN ratio < 4.0 }
					CAN = { has_war_with = FRA }
					CAN = { has_war_with = ENG }
					CAN = { has_war_with = GER }
				}
			}
			# don't attack a non-neighboring target we can't overwhelm if Canada still exists
			modifier = {
				factor = 0
				FROM = {
					NOT = { tag = CAN }
					NOT = {
						is_neighbor_of = ROOT
						any_neighbor_country = { is_in_faction_with = ROOT }
						any_neighbor_country = { is_subject_of = ROOT }
						strength_ratio = { tag = ROOT ratio < 0.1 }
					}
				}
				CAN = {
					exists = yes
					is_subject = no
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = no
					strength_ratio = { tag = ROOT ratio > 0.5 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					OR = {
						strength_ratio = { tag = ROOT ratio > 0.5 }
						any_allied_country = {
							is_faction_leader = yes
							strength_ratio = { tag = ROOT ratio > 1.0 }
						}
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TEX_defend_new_world target: [From.GetName]"
			declare_war_on = {	type = annex_everything	target = FROM }
		}
	}
}

TEX_deal_with_terrorists_decisions = {# dealing with terrorists
	TEX_fight_socialist_terrorists = {# fight socialists
		icon = GFX_decision_generic_industry
		allowed = { original_tag = TEX }
		visible = {
			OR = {
				has_idea = USA_socialist_resistance1
				has_idea = USA_socialist_resistance2
				has_idea = USA_socialist_resistance3
				has_idea = USA_socialist_resistance4
			}
			OR = {
				has_completed_focus = TEX_root_out_out_traitors
				has_completed_focus = TEX_purge_dissidents
				has_completed_focus = TEX_crackdown_on_traitors
				has_completed_focus = TEX_knights_of_columbus

			}
		}

		cost = 20

		days_re_enable = 10
		days_remove = 100

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TEX_fight_socialist_terrorists"
			if = {
				limit = { has_idea = USA_socialist_resistance1 }
				swap_ideas = {
					remove_idea = USA_socialist_resistance1
					add_idea = USA_socialist_resistance2
				}
			}
			else_if = {
				limit = { has_idea = USA_socialist_resistance2 }
				swap_ideas = {
					remove_idea = USA_socialist_resistance2
					add_idea = USA_socialist_resistance3
				}
			}
			else_if = {
				limit = { has_idea = USA_socialist_resistance3 }
				swap_ideas = {
					remove_idea = USA_socialist_resistance3
					add_idea = USA_socialist_resistance4
				}
			}
			else_if = {
				limit = { has_idea = USA_socialist_resistance4 }
				remove_ideas = USA_socialist_resistance4
			}
		}
	}

	TEX_fight_federalist_terrorists = {# fight federalists
		icon = GFX_decision_generic_industry
		allowed = { original_tag = TEX }
		visible = {
			OR = {
				has_idea = USA_federalist_resistance1
				has_idea = USA_federalist_resistance2
				has_idea = USA_federalist_resistance3
				has_idea = USA_federalist_resistance4
			}
			OR = {
				has_completed_focus = TEX_root_out_out_traitors
				has_completed_focus = TEX_purge_dissidents
				has_completed_focus = TEX_crackdown_on_traitors
				has_completed_focus = TEX_knights_of_columbus
			}
		}

		cost = 20

		days_re_enable = 10
		days_remove = 100

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TEX_fight_federalist_terrorists"
			if = {
				limit = { has_idea = USA_federalist_resistance1 }
				swap_ideas = {
					remove_idea = USA_federalist_resistance1
					add_idea = USA_federalist_resistance2
				}
			}
			else_if = {
				limit = { has_idea = USA_federalist_resistance2 }
				swap_ideas = {
					remove_idea = USA_federalist_resistance2
					add_idea = USA_federalist_resistance3
				}
			}
			else_if = {
				limit = { has_idea = USA_federalist_resistance3 }
				swap_ideas = {
					remove_idea = USA_federalist_resistance3
					add_idea = USA_federalist_resistance4
				}
			}
			else_if = {
				limit = { has_idea = USA_federalist_resistance4 }
				remove_ideas = USA_federalist_resistance4
			}
		}
	}
}

