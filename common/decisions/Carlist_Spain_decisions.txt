###########################
# Carlist Spain Decisions
###########################
# By Todd Howard
###########################

CAR_viceroyalties = {

###Viceroyalties
	
	CAR_viceroy_colombia = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 306 } }
		
		available = {
			owns_state = 306
			has_completed_focus = CAR_conquer_colombia
			COL = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_colombia
		}
		
		allowed = {
			tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_colombia target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_colombia target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_colombia target: [From.GetName]"
			release_puppet = COL
			COL = {
				every_state = {
				limit = { is_core_of = VEN }
				add_core_of = COL
					}
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = COL
							}
						}
				set_state_owner_to = COL
				}
				set_cosmetic_tag = CAR_VICEROY_GRANADA
				}
			}
		}
	
	CAR_viceroy_ecuador = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 305 } }
		
		available = {
			owns_state = 305
			has_completed_focus = CAR_conquer_ecuador
			ECU = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_ecuador
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_ecuador target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_ecuador target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_ecuador target: [From.GetName]"
			release_puppet = ECU
			ECU = {
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = ECU
							}
						}
				set_state_owner_to = ECU
				}
				set_cosmetic_tag = CAR_AUDENCIA_QUITO
			}
		}
	}
	
	CAR_viceroy_peru = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 303 } }
		
		available = {
			owns_state = 303
			has_completed_focus = CAR_conquer_peru
			PRU = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_peru
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_peru target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_peru target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_peru target: [From.GetName]"
			release_puppet = PRU
			PRU = {
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = PRU
							}
						}
				set_state_owner_to = PRU
				}
				set_cosmetic_tag = CAR_VICEROY_PERU
				}
			}
		}
		
		CAR_viceroy_chile = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 279 } }
		
		available = {
			owns_state = 279
			has_completed_focus = CAR_conquer_chile
			CHL = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_chile
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_chile target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_chile target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_chile target: [From.GetName]"
			release_puppet = CHL
			CHL = {
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = CHL
							}
						}
				set_state_owner_to = CHL
				}
				set_cosmetic_tag = CAR_AUDENCIA_CHILE
				}
			}
		}
		
		CAR_viceroy_argentina = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 278 } }
		
		available = {
			owns_state = 278
			has_completed_focus = CAR_conquer_la_plata
			ARG = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_la_plata
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_argentina target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_argentina target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_argentina target: [From.GetName]"
			release_puppet = ARG
			ARG = {
				every_state = {
				limit = { is_core_of = FOP }
				add_core_of = ARG
					}
				every_state = {
				limit = { is_core_of = URG }
				add_core_of = ARG
					}
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = ARG
							}
						}
				set_state_owner_to = ARG
				}
				set_cosmetic_tag = CAR_VICEROY_LA_PLATA
			}
		}
	}
	
	CAR_viceroy_brazil = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 500 } }
		
		available = {
			owns_state = 500
			has_country_flag = CAR_Tordesillas
			BRA = {
				exists = no
			}
			has_completed_focus = CAR_conquer_la_plata
		}

		visible = {
			tag = CAR
			has_country_flag = CAR_Tordesillas
			has_completed_focus = CAR_conquer_la_plata
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_argentina target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_argentina target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_argentina target: [From.GetName]"
			release_puppet = BRA
			BRA = {
			create_country_leader = {
				name = "Pedro III"
				desc = "POLITICS_PEDRO_IV_BRA_DESC"
				picture = "gfx/leaders/BRA/Portrait_BRA_Pedro_Henrique.png"
				expire = "1965.1.1"
				ideology = absolute_monarchy_subtype
				traits = {
					nationalist_symbol
					}
				}
				create_country_leader = {
				name = "Pedro III"
				desc = "POLITICS_PEDRO_IV_BRA_DESC"
				picture = "gfx/leaders/BRA/Portrait_BRA_Pedro_Henrique.png"
				expire = "1965.1.1"
				ideology = integralism_subtype
				traits = {
					nationalist_symbol
					}
				}
				set_party_name = {
				ideology = paternal_autocrat
				long_name = "House of Bragança"
				name = "House of Bragança"
				}
				set_party_name = {
				ideology = national_populist
				long_name = "House of Bragança"
				name = "House of Bragança"
				}
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = BRA
							}
						}
				set_state_owner_to = BRA
				}
				set_cosmetic_tag = CAR_VICEROY_BRAZIL
			}
		}
	}
	
	CAR_viceroy_mexico = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 277 } }
		
		available = {
			owns_state = 277
			has_completed_focus = CAR_conquer_mexico
			MEX = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_mexico
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_mexico target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_mexico target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_mexico target: [From.GetName]"
			release_puppet = MEX
			MEX = {
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = MEX
							}
						}
				set_state_owner_to = MEX
				}
				create_country_leader = {
				name = "Moctezuma III"
				desc = "POLITICS_DON_LUIS"
				picture = "gfx/leaders/MEX/Portrait_Mexico_Luis_Moctezuma.png"
				expire = "1965.1.1"
				ideology = absolute_monarchy_subtype
				traits = {}
				}
				create_country_leader = {
				name = "Moctezuma III"
				desc = "POLITICS_DON_LUIS"
				picture = "gfx/leaders/MEX/Portrait_Mexico_Luis_Moctezuma.png"
				expire = "1965.1.1"
				ideology = integralism_subtype
				traits = {}
				}
				set_party_name = {
				ideology = paternal_autocrat
				long_name = Monárquicos
				name = Monárquicos
				}
				set_party_name = {
				ideology = national_populist
				long_name = Monárquicos
				name = Monárquicos
				}
				set_cosmetic_tag = CAR_VICEROY_NEW_SPAIN
			}
		}
	}
	
	CAR_viceroy_bolivia = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 302 } }
		
		available = {
			owns_state = 302
			has_completed_focus = CAR_conquer_bolivia
			BOL = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_bolivia
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_conquer_bolivia target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_conquer_bolivia target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_conquer_bolivia target: [From.GetName]"
			release_puppet = BOL
			BOL = {
				every_state = {
				limit = { is_core_of = PAR }
				add_core_of = BOL
					}
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = BOL
							}
						}
				set_state_owner_to = BOL
				}
				set_cosmetic_tag = CAR_AUDENCIA_BOLIVIA
			}
		}
	}
	
	CAR_viceroy_philippines = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 327 } }
		
		available = {
			owns_state = 327
			has_completed_focus = CAR_conquer_the_philippines
			PHI = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_the_philippines
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_philippines target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_philippines target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_philippines target: [From.GetName]"
			release_puppet = PHI
			PHI = {
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = PHI
							}
						}
				set_state_owner_to = PHI
				}
				set_cosmetic_tag = CAR_CAPTAINCY_PHILIPPINES
			}
		}
	}
	
	CAR_viceroy_centro = {
		icon = generic_form_nation
		highlight_states = { highlight_state_targets = { state = 313 } }
		
		available = {
			owns_state = 313
			has_completed_focus = CAR_conquer_centro
			GUA = {
				exists = no
			}
		}

		visible = {
			tag = CAR
			has_completed_focus = CAR_conquer_centro
		}
		
		allowed = {
		tag = CAR
		}
		fire_only_once = yes
		
		cost = 50
		days_remove = 0
		fire_only_once = yes
		
		cancel_if_not_visible = yes
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancelled CAR_viceroy_centro target: [From.GetName]"
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_viceroy_centro target: [From.GetName]"
		}
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_viceroy_centro target: [From.GetName]"
			release_puppet = CEN
			CEN = {
				every_state = {
				limit = { is_core_of = GUA }
				add_core_of = CEN
					}
				every_state = {
				limit = { is_core_of = ELS }
				add_core_of = CEN
					}
				every_state = {
				limit = { is_core_of = HON }
				add_core_of = CEN
					}
				every_state = {
				limit = { is_core_of = NIC }
				add_core_of = CEN
					}
				every_state = {
				limit = { is_core_of = COS }
				add_core_of = CEN
					}
				every_state = {
				limit = { is_core_of = PAN }
				add_core_of = CEN
					}
				1071 = { add_core_of = CEN }
				311 = { add_core_of = CEN }
				1253 = { add_core_of = CEN }
				475 = { add_core_of = CEN }
				every_core_state = {
				limit = {
				OR = {
						is_owned_by = CAR
						is_owned_by = CEN
							}
						}
				set_state_owner_to = CEN
				}
				set_cosmetic_tag = CAR_KINGDOM_GUATEMALA
			}
		}
	}
}