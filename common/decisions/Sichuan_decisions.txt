#######################
## Sichuan Decisions ##
## By Alpinia		##
#######################

Sichuan_Civil_War_decisions = {
	SZC_Break_Siege_Of_Chengdu = {
		icon = generic_scorched_earth
		priority = 100

		allowed = { always = no }

		available = {
			custom_trigger_tooltip = {
				tooltip = SZC_siege_broken
				has_variable = SZC_siege_broken
			}
		}

		days_mission_timeout = 40
		is_good = no

		cancel_trigger = {
			hidden_trigger = {
				NOT = { has_idea = SZC_civil_war_idea }
			}
		}

		highlight_states = { 
			highlight_provinces = { 4925 }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Break_Siege_Of_Chengdu"
			add_war_support = 0.05
			clear_variable = SZC_siege_broken
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SZC_Break_Siege_Of_Chengdu"
			set_country_flag = SZC_took_too_long
			country_event = sichuan.81
		}
	}

	SZC_Ask_for_Zhili_Support = {
		icon = generic_political_discourse

		visible = {
			has_government = authoritarian_democrat
			FROM = {
				exists = yes
				NOT = {
					has_war_with = ROOT
					has_country_flag = QIE_manchu_restoration
				}
			}
		}

		targets = { QIE }
		target_root_trigger = {
			has_government = authoritarian_democrat
		}
		target_trigger = {
			FROM = {
				NOT = {
					has_war_with = ROOT
					has_country_flag = QIE_manchu_restoration
				}
			}
		}

		cost = 0
		days_remove = 2
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SZC_path option = SZC_Industrial_LORD_OF_SICHUAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_GRANDIOSE_PLAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_NPA }
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Ask_for_Zhili_Support target: [From.GetName]"
			FROM = {
				country_event = sichuan.50
			}
		}
	}

	SZC_Mobilise_Our_Troops = {
		icon = eng_blackshirt_march

		available = {
			NOT = {
				has_decision = SZC_Conscript_Farmers
				has_decision = SZC_Hire_Bandits_For_The_Army
			}
		}

		visible = {
			has_active_mission = SZC_Break_Siege_Of_Chengdu
		}

		cost = 0
		days_remove = 7
		fire_only_once = yes

		ai_will_do = { factor = 1000 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Mobilise_Our_Troops"
			if = {
				limit = {
					has_government = authoritarian_democrat
				}
				country_event = sichuan.64
			}
			else = {
				country_event = sichuan.82
			}
		}
	}

	SZC_Conscript_Farmers = {
		icon = generic_civil_support

		available = {
			NOT = { has_decision = SZC_Hire_Bandits_For_The_Army }
		}

		cost = 80
		days_remove = 12
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SZC_path option = SZC_Industrial_LORD_OF_SICHUAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_GRANDIOSE_PLAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_NPA }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Conscript_Farmers"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Conscript_Farmers"
			custom_effect_tooltip = SZC_Recruitment_tooltip
			hidden_effect = {
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.03
				}
				add_popularity = {
					ideology = social_democrat
					popularity = -0.02
				}
				if = {
					limit = {
						has_government = authoritarian_democrat
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = 0.05
					}
				}
				else = {
					add_popularity = {
						ideology = social_conservative
						popularity = 0.05
					}
				}
			}
		}
	}

	SZC_Hire_Bandits_For_The_Army = {
		icon = soldierly_discipline

		available = {
			NOT = { has_decision = SZC_Conscript_Farmers }
		}

		cost = 60
		days_remove = 12
		fire_only_once = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_game_rule = { rule = SZC_path option = SZC_Industrial_LORD_OF_SICHUAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_GRANDIOSE_PLAN }
					has_game_rule = { rule = SZC_path option = SZC_Industrial_NPA }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Hire_Bandits_For_The_Army"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Hire_Bandits_For_The_Army"
			set_country_flag = SZC_bandits_hired
			custom_effect_tooltip = SZC_Recruitment_tooltip
			custom_effect_tooltip = SZC_Hire_Bandits_For_The_Army_tooltip
			hidden_effect = {
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.03
				}
				add_popularity = {
					ideology = social_democrat
					popularity = -0.02
				}
				if = {
					limit = {
						has_government = authoritarian_democrat
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = 0.05
					}
				}
				else = {
					add_popularity = {
						ideology = social_conservative
						popularity = 0.05
					}
				}
			}
		}
	}
}

Sichuan_Famine_decisions = {
	SZC_Service_For_Food = {
		icon = generic_army_support

		available = {
			NOT = { has_decision = SZC_Labour_Relief }
		}

		cost = 100
		days_remove = -1
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0.2
				OR = {
					has_government = social_democrat
					has_government = social_liberal
					has_government = paternal_autocrat
				}
			}
		}
		
		modifier = {
			conscription_factor = 0.3
			industrial_capacity_factory = 0.1
		}
	}
	SZC_Labour_Relief = {
		icon = generic_construction

		available = {
			NOT = { has_decision = SZC_Service_For_Food }
		}

		cost = 100
		days_remove = -1
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0.2
				OR = {
					has_government = market_liberal
					has_government = social_conservative
					has_government = authoritarian_democrat
				}
			}
		}
		
		modifier = {
			production_speed_buildings_factor = 0.2
			industrial_capacity_factory = 0.2
		}
	}
	SZC_Allocate_More_Government_Funds = {
		icon = hol_attract_foreign_investors

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		cost = 30
		days_remove = 5
		days_re_enable = 7

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.political_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Allocate_More_Government_Funds"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Allocate_More_Government_Funds"
			custom_effect_tooltip = SZC_famine_PP_plus_30
			add_to_variable = { SZC_famine_PP = 30 }
		}
	}
	SZC_Enact_Price_Controls = {
		icon = generic_inflation

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		cost = 40
		days_remove = -1
		fire_only_once = yes

		modifier = {
			political_power_cost = 0.1
		}

		ai_will_do = {
			factor = 20
			modifier = {
				add = ROOT.political_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Enact_Price_Controls"
			add_to_variable = { SZC_famine_PP = 120 }
			custom_effect_tooltip = SZC_famine_PP_plus_120
		}
	}
	SZC_Increase_Relief_Efforts = {
		icon = infiltrate_state

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		days_remove = 30
		days_re_enable = 7

		custom_cost_text = SZC_famine_PP_30_tooltip
		custom_cost_trigger = {
			check_variable = { SZC_famine_PP > 29.99 }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = SZC_famine_PP
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Increase_Relief_Efforts"
			subtract_from_variable = { SZC_famine_PP = 30 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Increase_Relief_Efforts"
			SZC_reduce_famine_medium = yes
		}
	}
	SZC_Food_Banks = {
		icon = eng_trade_unions_demand

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		days_remove = 30
		days_re_enable = 7

		custom_cost_text = SZC_famine_PP_60_tooltip
		custom_cost_trigger = {
			check_variable = { SZC_famine_PP > 59.99 }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = SZC_famine_PP
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Food_Banks"
			subtract_from_variable = { SZC_famine_PP = 60 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Food_Banks"
			SZC_reduce_famine_large = yes
		}
	}
	SZC_Subsidise_Food_Production = {
		icon = eng_trade_unions_support

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		days_remove = 30
		days_re_enable = 7

		custom_cost_text = SZC_famine_PP_60_tooltip
		custom_cost_trigger = {
			check_variable = { SZC_famine_PP > 59.99 }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = SZC_famine_PP
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Subsidise_Food_Production"
			subtract_from_variable = { SZC_famine_PP = 60 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Subsidise_Food_Production"
			SZC_reduce_famine_large = yes
		}
	}
	SZC_Child_Protection_Programme = {
		icon = ger_mefo_bills

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		visible = {
			has_variable = SZC_abandoned_children_event
		}

		days_remove = 40
		fire_only_once = yes

		custom_cost_text = SZC_famine_PP_80_tooltip
		custom_cost_trigger = {
			check_variable = { SZC_famine_PP > 79.99 }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = SZC_famine_PP
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Child_Protection_Programme"
			subtract_from_variable = { SZC_famine_PP = 80 }
			hidden_effect = {
				country_event = {
					id = sichuan.167
					days = 15
					random = 240
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Child_Protection_Programme"
			SZC_reduce_famine_large = yes
			clear_variable = SZC_abandoned_children_event
		}
	}
	SZC_International_Famine_Relief = {
		icon = eng_propaganda_campaigns

		available = {
			SZC_famine_relief_direction_chosen = yes
		}

		cost = 0
		days_remove = 14
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_International_Famine_Relief"
			news_event = sichuan.135
		}
	}

	SZC_Request_Aid = {
		icon = hol_radio_oranje

		available = {
			SZC_famine_relief_direction_chosen = yes
			NOT = { has_country_flag = SZC_seeking_help }
		}

		visible = {
			has_idea = SZC_famine_idea
			FROM = {
				exists = yes
				has_war = no
			}
			if = {
				limit = {
					FROM = { tag = QIE }
				}
				ROOT = {
					NOT = {
						has_focus_tree = Sichuan_Clique_Federalist
						has_focus_tree = Sichuan_Clique_Zhili
					}
					OR = {
						has_government = market_liberal
						has_government = social_conservative
						has_government = authoritarian_democrat
					}
				}
			}
			if = {
				limit = {
					FROM = { tag = FNG }
				}
				ROOT = {
					NOT = { has_focus_tree = Sichuan_Clique_Zhili }
					OR = {
						has_government = market_liberal
						has_government = social_conservative
						has_government = paternal_autocrat
					}
				}
			}
			if = {
				limit = {
					FROM = { original_tag = GXC }
				}
				ROOT = {
					NOT = {
						has_focus_tree = Sichuan_Clique_Federalist
						has_focus_tree = Sichuan_Clique_Zhili
						has_government = authoritarian_democrat
					}
				}
			}
		}

		targets = {	QIE FNG GXC LEC }
		target_root_trigger = {
			has_idea = SZC_famine_idea
		}
		target_trigger = {
			FROM = { has_war = no }
			if = {
				limit = {
					FROM = { tag = QIE }
				}
				ROOT = {
					NOT = {
						has_focus_tree = Sichuan_Clique_Federalist
						has_focus_tree = Sichuan_Clique_Zhili
					}
					OR = {
						has_government = market_liberal
						has_government = social_conservative
						has_government = authoritarian_democrat
					}
				}
			}
			else_if = {
				limit = {
					FROM = { tag = FNG }
				}
				ROOT = {
					NOT = { has_focus_tree = Sichuan_Clique_Zhili }
					OR = {
						has_government = market_liberal
						has_government = social_conservative
						has_government = paternal_autocrat
					}
				}
			}
			else_if = {
				limit = {
					FROM = { original_tag = GXC }
				}
				ROOT = {
					NOT = {
						has_focus_tree = Sichuan_Clique_Federalist
						has_focus_tree = Sichuan_Clique_Zhili
						has_government = authoritarian_democrat
					}
				}
			}
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_war = yes
					exists = no
				}
			}
		}

		cost = 0
		days_remove = 15
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Request_Aid target: [From.GetName]"
			set_country_flag = { flag = SZC_seeking_help days = 15 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Request_Aid target: [From.GetName]"
			FROM = {
				if = {
					limit = {
						tag = QIE
					}
					country_event = sichuan.128
				}
				else_if = {
					limit = {
						tag = FNG
					}
					country_event = sichuan.138
				}
				else_if = {
					limit = {
						original_tag = GXC
					}
					country_event = sichuan.151
				}
				else_if = {
					limit = {
						tag = LEC
					}
					custom_effect_tooltip = SZC_Ask_Legations_For_Help_tooltip
					LEC = { set_country_flag = sichuan_famine_help }
				}
			}
			hidden_effect = {
				remove_targeted_decision = { decision = SZC_Request_Aid target = FROM }
			}
		}
	}
	SZC_Import_Grain = {
		icon = ger_mefo_bills

		available = {
			SZC_famine_relief_direction_chosen = yes
			OR = {
				custom_trigger_tooltip = {
					tooltip = SZC_importing_grain
					NOT = { has_variable = SZC_importing_grain }
				}
				custom_trigger_tooltip = {
					tooltip = SZC_extra_import_unlocked
					has_variable = SZC_extra_import_unlocked
				}
			}
		}

		visible = {
			has_idea = SZC_famine_idea
			FROM = {
				exists = yes
				has_war = no
				if = {
					limit = { tag = GEA }
					owns_state = 286
					owns_state = 671
				}
				if = {
					limit = { original_tag = GXC }
					ROOT = {
						SZC_federalists_in_exile = no
					}
				}
			}
		}

		targets = {	USA GEA GXC AST CAN }
		target_root_trigger = {
			has_idea = SZC_famine_idea
		}
		target_trigger = {
			FROM = {
				has_war = no
				if = {
					limit = { tag = GEA }
					owns_state = 286
					owns_state = 671
				}
				if = {
					limit = { original_tag = GXC }
					ROOT = {
						SZC_federalists_in_exile = no
					}
				}
			}
		}

		cancel_trigger = {
			FROM = {
				if = {
					limit = { tag = GEA }
					OR = {
						NOT = { owns_state = 286 }
						NOT = { owns_state = 671 }
					}
				}
				OR = {
					has_war = yes
					exists = no
				}
			}
		}

		cost = 40
		days_remove = 20
		days_re_enable = 7
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Import_Grain target: [From.GetName]"
			if = {
				limit = {
					has_variable = SZC_importing_grain
					has_variable = SZC_extra_import_unlocked
				}
				clear_variable = SZC_extra_import_unlocked
			}
			set_variable = { SZC_importing_grain = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Import_Grain target: [From.GetName]"
			clear_variable = SZC_importing_grain
			SZC_reduce_famine_medium = yes
		}
	}
}

Sichuan_Opium_Monopoly_decisions = {
	SZC_Bureaucratic_Reforms = {
		icon = ger_mefo_bills
		
		visible = {
			check_variable = { SZC_opium_control < 0.98 }
		}

		cost = 20
		days_remove = 50
		days_re_enable = 7

		modifier = {
			political_power_cost = 0.1
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.political_power
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Bureaucratic_Reforms"
			set_temp_variable = { SZC_opium_control_change = 2.5 }
			SZC_increase_opium_control = yes
		}
	}
	SZC_Buy_Out_Merchants = {
		icon = hol_attract_foreign_investors
		
		visible = {
			check_variable = { SZC_opium_control < 0.95 }
		}

		cost = 40
		days_remove = 50
		days_re_enable = 10

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.political_power
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Buy_Out_Merchants"
			set_temp_variable = { SZC_opium_control_change = 5 }
			SZC_increase_opium_control = yes
		}
	}

	SZC_Forced_Acquisitions = {
		icon = generic_political_discourse
		
		visible = {
			check_variable = { SZC_opium_control < 0.95 }
		}

		custom_cost_text = SZC_30_CP
		custom_cost_trigger = {
			command_power > 29.99
		}

		days_remove = 50
		days_re_enable = 10

		modifier = {
			political_power_cost = 0.4
			stability_weekly = -0.01
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.command_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Forced_Acquisitions"
			hidden_effect = {
				add_command_power = -30
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Forced_Acquisitions"
			set_temp_variable = { SZC_opium_control_change = 5 }
			SZC_increase_opium_control = yes
		}
	}

	SZC_Tax_Harvesting_Scheme = {
		icon = eng_trade_unions_demand

		cost = 0
		days_remove = 50
		days_re_enable = 10

		modifier = {
			political_power_gain = 0.5
			stability_weekly = -0.005
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_stability < 0.2
			}
			modifier = {
				factor = 0
				has_political_power > 50
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Tax_Harvesting_Scheme"
			set_temp_variable = { ideology_change_var = -2.5 }
			change_ruling_party_popularity = yes
		}
	}

	SZC_Transit_Tariffs = {
		icon = infiltrate_state
		
		visible = {
			check_variable = { SZC_opium_control < 0.98 }
		}

		custom_cost_text = SZC_15_CP
		custom_cost_trigger = {
			command_power > 14.99
		}

		cost = 0
		days_remove = 50

		modifier = {
			political_power_gain = 0.25
			stability_weekly = -0.0025
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.command_power
			}
			modifier = {
				factor = 0
				has_stability < 0.2
			}
			modifier = {
				factor = 0
				has_political_power > 50
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Transit_Tariffs"
			hidden_effect = {
				add_command_power = -15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Transit_Tariffs"
			set_temp_variable = { SZC_opium_control_change = 2.5 }
			SZC_increase_opium_control = yes
		}
	}

	SZC_Farmer_Licensing = {
		icon = generic_inflation
		
		visible = {
			check_variable = { SZC_opium_control < 0.95 }
		}

		cost = 0
		days_remove = -1

		modifier = {
			political_power_gain = 0.2
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				check_variable = { party_popularity_100@ruling_party < 25 }
			}
			modifier = {
				factor = 0
				has_stability < 0.25
			}
			modifier = {
				factor = 0
				has_political_power > 50
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Farmer_Licensing"
			add_stability = -0.1
			set_temp_variable = { ideology_change_var = -5 }
			change_ruling_party_popularity = yes
			set_temp_variable = { SZC_opium_control_change = 5 }
			SZC_increase_opium_control = yes
		}
	}

	SZC_Uncontested_Monopoly = {
		icon = generic_nationalism
		priority = 10

		available = {
			NOT = {
				SZC_opium_corruption_active = yes
				SZC_opium_smuggling_active = yes
			}
		}

		custom_cost_text = SZC_control_95
		custom_cost_trigger = {
			check_variable = { SZC_opium_control > 0.94 }
		}

		ai_will_do = {
			factor = 1000
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Uncontested_Monopoly"
			custom_effect_tooltip = SZC_opium_crisis_over_tooltip
			swap_ideas = {
				remove_idea = SZC_opium_monopoly_4
				add_idea = SZC_opium_monopoly_5
			}
			set_variable = { SZC_opium_crisis_solved = 1 }
			SZC_end_opium_crisis = yes
		}
	}

	SZC_Combat_Corruption = {
		icon = generic_break_treaty

		visible = {
			SZC_opium_corruption_active = yes
		}

		cost = 20
		days_remove = 40

		modifier = {
			political_power_cost = 0.4
			consumer_goods_factor = 0.05
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.political_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Combat_Corruption"
			hidden_effect = {
				country_event = {
					id = sichuan.207
					days = 2
					random = 120
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Combat_Corruption"
			SZC_reduce_corruption = yes
		}
	}

	SZC_Combat_Smuggling = {
		icon = generic_prepare_civil_war

		visible = {
			SZC_opium_smuggling_active = yes
		}

		cost = 20
		days_remove = 40

		modifier = {
			political_power_cost = 0.4
			consumer_goods_factor = 0.05
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.political_power
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Combat_Smuggling"
			SZC_reduce_smuggling = yes
		}
	}
}

Sichuan_Opium_Removal_decisions = {
	SZC_Promote_Crop_Production = {
		icon = generic_agriculture
		
		visible = {
			check_variable = { SZC_opium_spread > 0.02 }
		}

		cost = 30
		days_remove = 50

		ai_will_do = {
			factor = 25
			modifier = {
				add = ROOT.political_power
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Promote_Crop_Production"
			set_temp_variable = { SZC_opium_spread_change = -3 }
			SZC_reduce_opium_spread = yes
		}
	}

	SZC_Poppy_Burning_Campaign = {
		icon = generic_ignite_civil_war
		
		visible = {
			check_variable = { SZC_opium_spread > 0.02 }
		}

		custom_cost_text = SZC_15_CP
		custom_cost_trigger = {
			command_power > 14.99
		}

		days_remove = 50

		ai_will_do = {
			factor = 25
			modifier = {
				add = ROOT.command_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Poppy_Burning_Campaign"
			hidden_effect = {
				add_command_power = -15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Poppy_Burning_Campaign"
			set_temp_variable = { SZC_opium_spread_change = -3 }
			SZC_reduce_opium_spread = yes
		}
	}

	SZC_Prohibitionist_Victory = {
		icon = generic_civil_support
		priority = 10

		available = {
			NOT = {
				SZC_opium_corruption_active = yes
				SZC_opium_smuggling_active = yes
				SZC_opium_addiction_active = yes
			}
		}

		custom_cost_text = SZC_spread_3
		custom_cost_trigger = {
			check_variable = { SZC_opium_spread < 0.04 }
		}

		ai_will_do = {
			factor = 1000
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Prohibitionist_Victory"
			custom_effect_tooltip = SZC_opium_crisis_over_tooltip
			remove_ideas = SZC_opium_spread_5
			add_ideas = SZC_a_province_free_from_opium
			set_variable = { SZC_opium_crisis_solved = 1 }
			SZC_end_opium_crisis = yes
		}
	}

	SZC_Anti_Corruption_Campaigns = {
		icon = generic_break_treaty

		visible = {
			SZC_opium_corruption_active = yes
		}

		cost = 20
		days_remove = 80

		modifier = {
			political_power_cost = 0.2
			consumer_goods_factor = 0.05
		}

		ai_will_do = {
			factor = 25
			modifier = {
				add = ROOT.political_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Anti_Corruption_Campaigns"
			hidden_effect = {
				country_event = {
					id = sichuan.207
					days = 2
					random = 120
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Anti_Corruption_Campaigns"
			SZC_reduce_corruption = yes
		}
	}

	SZC_Purge_The_Administration = {
		icon = generic_scorched_earth

		visible = {
			SZC_opium_corruption_active = yes
		}

		custom_cost_text = SZC_PP_50_CP_50
		custom_cost_trigger = {
			has_political_power > 49.99
			command_power > 49.99
		}

		days_remove = 40
		fire_only_once = yes

		modifier = {
			political_power_cost = 0.2
			consumer_goods_factor = 0.1
		}

		ai_will_do = {
			factor = 25
			modifier = {
				add = ROOT.command_power
			}
			modifier = {
				add = ROOT.political_power
			}
			modifier = {
				factor = 0
				has_stability < 0.3
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Purge_The_Administration"
			add_stability = -0.2
			hidden_effect = {
				add_political_power = -50
				add_command_power = -50
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Purge_The_Administration"
			remove_ideas = SZC_opium_corruption_1
			hidden_effect = {
				remove_ideas = {
					SZC_opium_corruption_2
					SZC_opium_corruption_3
					SZC_opium_corruption_4
					SZC_opium_corruption_5
				}
			}
		}
	}

	SZC_Anti_Smuggling_Measures = {
		icon = generic_army_support

		visible = {
			SZC_opium_smuggling_active = yes
		}

		custom_cost_text = SZC_30_CP
		custom_cost_trigger = {
			command_power > 29.99
		}

		days_remove = 50

		modifier = {
			army_org_factor = -0.15
		}

		ai_will_do = {
			factor = 25
			modifier = {
				add = ROOT.command_power
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Anti_Smuggling_Measures"
			hidden_effect = {
				add_command_power = -30
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Anti_Smuggling_Measures"
			SZC_reduce_smuggling = yes
		}
	}

	SZC_Break_The_Black_Market = {
		icon = generic_prepare_civil_war

		visible = {
			SZC_opium_smuggling_active = yes
		}

		custom_cost_text = SZC_200_inf_50_CP
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 199 }
			command_power > 49.99
		}

		days_remove = 30
		fixed_random_seed = no

		modifier = {
			army_org_factor = -0.15
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = ROOT.command_power
			}
			modifier = {
				add = ROOT.num_equipment@infantry_equipment
			}
			modifier = {
				factor = 0
				has_stability < 0.3
			}
			modifier = {
				factor = 0
				has_war = yes
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Break_The_Black_Market"
			hidden_effect = {
				add_command_power = -50
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -200
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Break_The_Black_Market"
			custom_effect_tooltip = SZC_Break_The_Black_Market_tooltip
			hidden_effect = {
				random_list = {
					70 = { #normal outcome
						country_event = sichuan.223
					}
					15 = { #pyrrhic success
						country_event = sichuan.224
					}
					10 = { #huge success
						country_event = sichuan.225
					}
					5 = { #failure
						country_event = sichuan.226
					}
				}
			}
		}
	}

	SZC_Set_Up_Treatment_Clinics = {
		icon = generic_healthcare

		visible = {
			SZC_opium_addiction_active = yes
		}

		cost = 50
		days_remove = 90

		modifier = {
			stability_weekly = 0.005
		}

		ai_will_do = {
			factor = 100
			modifier = {
				add = ROOT.political_power
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Set_Up_Treatment_Clinics"
			set_temp_variable = { ideology_change_var = 4 }
			change_ruling_party_popularity = yes
			SZC_reduce_addiction = yes
		}
	}
}

Sichuan_Diarchy_decisions = {
	SZC_Favour_The_Militarists = {
		icon = ger_military_buildup

		available = {
			custom_trigger_tooltip = {
				tooltip = SZC_diarchy_influence_tooltip
				NOT = { has_country_flag = SZC_diarchy_influence }
			}
		}

		visible = {
			NOT = { has_idea = SZC_diarchy_xihou_3 }
		}

		cost = 50
		days_remove = 30

		modifier = {
			army_org_factor = 0.05
			army_morale_factor = 0.05
			supply_consumption_factor = -0.05
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				has_war = yes
			}
			modifier = {
				add = -40
				has_idea = SZC_diarchy_wenhui_1
			}
			modifier = {
				add = -40
				has_idea = SZC_diarchy_wenhui_2
			}
			modifier = {
				add = 10
				has_political_power > 200
				OR = {
					has_idea = SZC_diarchy_wenhui_3
					has_idea = SZC_diarchy_wenhui_2
					has_idea = SZC_diarchy_wenhui_1
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Favour_The_Militarists"
			set_country_flag = { flag = SZC_diarchy_influence days = 60 value = 1 }
			add_popularity = {
				ideology = social_conservative
				popularity = 0.025
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Favour_The_Militarists"
			SZC_diarchy_increase_xihou = yes
		}
	}
	SZC_Favour_The_Bureaucrats = {
		icon = eng_trade_unions_support

		available = {
			custom_trigger_tooltip = {
				tooltip = SZC_diarchy_influence_tooltip
				NOT = { has_country_flag = SZC_diarchy_influence }
			}
		}

		visible = {
			NOT = { has_idea = SZC_diarchy_wenhui_3 }
		}

		cost = 50
		days_remove = 30

		modifier = {
			research_speed_factor = 0.05
			industrial_capacity_factory = 0.05
			production_factory_max_efficiency_factor = 0.05
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				has_war = no
			}
			modifier = {
				add = -40
				has_idea = SZC_diarchy_xihou_1
			}
			modifier = {
				add = -40
				has_idea = SZC_diarchy_xihou_2
			}
			modifier = {
				add = 10
				has_political_power > 200
				OR = {
					has_idea = SZC_diarchy_xihou_3
					has_idea = SZC_diarchy_xihou_2
					has_idea = SZC_diarchy_xihou_1
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Favour_The_Bureaucrats"
			set_country_flag = { flag = SZC_diarchy_influence days = 60 value = 1 }
			add_popularity = {
				ideology = market_liberal
				popularity = 0.025
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Favour_The_Bureaucrats"
			SZC_diarchy_increase_wenhui = yes
		}
	}
}

Sichuan_Foreign_Policy_decisions = {
	SZC_Intervene_In_Northwestern_War = {
		icon = eng_puppet_usa

		available = {
			if = {
				limit = { SZC_has_industrial_government = yes }
				has_completed_focus = SZC_Family_Matters
			}
		}

		visible = {
			has_global_flag = northwest_conflict_begun
			NOT = {
				is_in_faction_with = TIB
				has_global_flag = northwest_conflict_ended
			}
			can_declare_war_on = FROM
			FROM = {
				has_war_with = XSM
				owns_state = 693
			}
			if = {
				limit = { is_ruled_by_pro_zhili = yes }
				FROM = { is_ruled_by_pro_zhili = no }
			}
			else_if = {
				limit = { is_ruled_by_pro_kmt = yes }
				FROM = { is_ruled_by_pro_kmt = no }
			}
			else_if = {
				limit = { is_ruled_by_federalists = yes }
				FROM = { is_ruled_by_federalists = no }
			}
		}

		targets = { TIB }
		target_root_trigger = {
			has_global_flag = northwest_conflict_begun
			NOT = {
				is_in_faction_with = TIB
				has_global_flag = northwest_conflict_ended
			}
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				has_war_with = XSM
				owns_state = 693
			}
			if = {
				limit = { is_ruled_by_pro_zhili = yes }
				FROM = { is_ruled_by_pro_zhili = no }
			}
			else_if = {
				limit = { is_ruled_by_pro_kmt = yes }
				FROM = { is_ruled_by_pro_kmt = no }
			}
			else_if = {
				limit = { is_ruled_by_federalists = yes }
				FROM = { is_ruled_by_federalists = no }
			}
		}

		cost = 10
		days_remove = 7
		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Intervene_In_Northwestern_War target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Intervene_In_Northwestern_War target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			hidden_effect = {
				TIB = {
					country_event = { id = tib.124 days = 3 }
				}
			}
		}
	}
	SZC_End_The_Zhili_Hegemony = {
		icon = jap_conquer_china

		visible = {
			has_completed_focus = SZC_A_Grandiose_Plan
			has_government = paternal_autocrat
			can_declare_war_on = FROM
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		}

		targets = { QIE }
		target_root_trigger = {
			has_completed_focus = SZC_A_Grandiose_Plan
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 20
		days_remove = 14
		fire_only_once = yes
		cancel_if_not_visible = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				FROM = {
					has_war = yes
				}
			}
			modifier = {
				add = 90
				FROM = {
					has_war_with = FNG
				}
			}
			modifier = {
				add = -10
				FROM = { has_war = no }
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = {
				add = 20
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_End_The_Zhili_Hegemony target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_End_The_Zhili_Hegemony target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	
	SZC_Grand_Plan = {
		icon = jap_conquer_china

		visible = {
			has_completed_focus = SZC_A_Grandiose_Plan
			has_government = paternal_autocrat
			can_declare_war_on = FROM
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		}

		target_root_trigger = {
			has_completed_focus = SZC_A_Grandiose_Plan
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				exists = yes
				NOT = { is_subject_of = ROOT }
				any_neighbor_country = {
					OR = {
						tag = SZC
						is_subject_of = SZC
						is_in_faction_with = SZC
					}
				}
				OR = {
					tag = LEP
					tag = XSM
					tag = TAN
					tag = SIK
					tag = ETS
					tag = TIB
					tag = CHI
					tag = ANQ
					tag = HNN
					original_tag = GXC
					tag = YUN
					tag = MON
					tag = SHX
					tag = SQI
					tag = PRC
					tag = FNG
				}
			}
		}
		
		cost = 20
		days_remove = 14

		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				FROM = {
					has_war = yes
				}
			}
			modifier = {
				add = 90
				FROM = {
					has_war_with = FNG
				}
			}
			modifier = {
				add = -10
				FROM = { has_war = no }
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
			modifier = {
				add = 20
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		remove_effect = {
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	SZC_Negotiate_With_Faction = {
		name = SZC_Align_With_Faction
		icon = eng_trade_unions_support

		visible = {
			has_government = paternal_autocrat
			has_completed_focus = SZC_The_Lord_Of_Sichuan
			is_in_faction = no
			NOT = { has_variable = SZC_alliance }
			FROM = {
				exists = yes
				if = {
					limit = {
						original_tag = GXC
					}
					is_ruled_by_federalists = yes
				}
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}

		targets = {	FNG GXC }
		target_root_trigger = {
			has_completed_focus = SZC_The_Lord_Of_Sichuan
		}
		target_trigger = {
			FROM = {
				if = {
					limit = {
						original_tag = GXC
					}
					is_ruled_by_federalists = yes
				}
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}

		cost = 40
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 100
			#Will not join factions before solving internal issues
			modifier = {
				add = -1000
				NOT = { has_variable = SZC_opium_crisis_solved }
			}
			#Favours a deal with the Federalists before Fengtian
			modifier = {
				add = -80
				FROM = { tag = FNG }
				GXC = {
					is_ruled_by_federalists = yes
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Negotiate_With_Faction target: [From.GetName]"
			FROM = {
				country_event = sichuan.10
			}
		}
	}

	#Join faction if already aligned
	SZC_Join_Faction = {
		icon = generic_flags

		visible = {
			is_in_faction = no
			check_variable = { SZC_alliance = FROM }
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		targets = {	QIE FNG YUN GXC CHI }
		target_root_trigger = {
			is_in_faction = no
		}
		target_trigger = {
			check_variable = { SZC_alliance = FROM }
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		cost = 0
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 1000
			modifier = {
				factor = 0
				FROM = {
					surrender_progress > 0.2
				}
			}
			modifier = {
				factor = 0
				has_war = yes
				FROM = {
					has_war = yes
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Join_Faction target: [From.GetName]"
			FROM = {
				add_to_faction = ROOT
			}
		}
	}

	SZC_Declare_Loyalty_To_The_Zhili = {
		icon = generic_civil_support

		visible = {
			has_government = authoritarian_democrat
			has_completed_focus = SZC_Bring_Peace_to_Sichuan
			FROM = {
				exists = yes
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
				NOT = {
					has_country_flag = QIE_manchu_restoration
					has_war_with = ROOT
				}
			}
		}

		targets = {	QIE }
		target_root_trigger = {
			has_completed_focus = SZC_Bring_Peace_to_Sichuan
		}
		target_trigger = {
			FROM = {
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
				NOT = {
					has_country_flag = QIE_manchu_restoration
					has_war_with = ROOT
				}
			}
		}

		cost = 25
		days_remove = 7
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 1000
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Declare_Loyalty_To_The_Zhili target: [From.GetName]"
			set_variable = { SZC_alliance = QIE }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Declare_Loyalty_To_The_Zhili target: [From.GetName]"
			give_guarantee = FROM
			FROM = {
				country_event = sichuan.262
			}
			custom_effect_tooltip = SZC_Declare_Loyalty_To_The_Zhili_tooltip
		}
	}

	SZC_Help_The_LEP = {
		icon = infiltrate_state

		visible = {
			check_variable = { SZC_alliance = QIE }
			has_government = authoritarian_democrat
			FROM = {
				OR = {
					has_war_with = SQI
					has_war_with = CHI
					has_war_with = ANQ
					has_war_with = LEP
				}
				NOT = { has_war_with = ROOT }
				OR = {
					AND = {
						tag = LEP
						NOT = {
							QIE = { has_country_flag = wu_intervenes_proANQ }
						}
					}
					AND = {
						tag = ANQ
						QIE = { has_country_flag = wu_intervenes_proANQ }
					}
				}
			}
		}

		targets = {	ANQ LEP }
		target_root_trigger = {
			check_variable = { SZC_alliance = QIE }
		}
		target_trigger = {
			FROM = {
				OR = {
					has_war_with = SQI
					has_war_with = CHI
					has_war_with = ANQ
					has_war_with = LEP
				}
				NOT = { has_war_with = ROOT }
				OR = {
					AND = {
						tag = LEP
						NOT = {
							QIE = { has_country_flag = wu_intervenes_proANQ }
						}
					}
					AND = {
						tag = ANQ
						QIE = { has_country_flag = wu_intervenes_proANQ }
					}
				}
			}
		}

		cost = 20
		days_remove = 7
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Help_The_LEP target: [From.GetName]"
			add_ideas = SZC_support_the_zhili_idea
			FROM = {
				country_event = sichuan.263
			}
		}
	}

	SZC_Ask_To_Join_Faction = {
		name = SZC_Align_With_Faction
		icon = eng_trade_unions_support

		visible = {
			OR = {
				has_government = social_democrat
				has_government = social_liberal
			}
			is_subject = no
			is_in_faction = no
			has_completed_focus = SZC_Restore_The_Provincial_Assembly
			NOT = {
				has_variable = SZC_alliance
				has_war_with = FROM
			}
			FROM = {
				exists = yes
				if = {
					limit = {
						original_tag = GXC
					}
					is_ruled_by_federalists = yes
				}
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}

		targets = {	GXC CHI }
		target_root_trigger = {
			is_subject = no
			is_in_faction = no
			has_completed_focus = SZC_Restore_The_Provincial_Assembly
			NOT = { has_variable = SZC_alliance }
		}
		target_trigger = {
			NOT = { has_war_with = FROM }
			FROM = {
				if = {
					limit = {
						original_tag = GXC
					}
					is_ruled_by_federalists = yes
				}
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}

		cost = 40
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 30
			#Will not join factions before solving internal issues
			modifier = {
				add = -1000
				NOT = { has_variable = SZC_opium_crisis_solved }
			}
			#Xiong Kewu pushes for Federalist alignment
			modifier = {
				set_temp_variable = { SZC_federalist_faction_desire = party_popularity@social_democrat }
				multiply_temp_variable = { SZC_federalist_faction_desire = -100 }
				add = SZC_federalist_faction_desire

				FROM = {
					original_tag = GXC
					is_ruled_by_federalists = yes
				}
			}
			#Lu Chao pushes for KMT alignment
			modifier = {
				set_temp_variable = { SZC_kmt_faction_desire = party_popularity@social_liberal }
				multiply_temp_variable = { SZC_kmt_faction_desire = -100 }
				add = SZC_federalist_faction_desire

				FROM = {
					tag = CHI
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Ask_To_Join_Faction target: [From.GetName]"
			FROM = {
				country_event = sichuan.10
			}
		}
	}

	SZC_Align_With_Faction = {
		icon = eng_trade_unions_support

		visible = {
			is_subject = no
			is_in_faction = no
			FROM = {
				is_subject = no
				NOT = { has_war_with = ROOT }
				is_ruled_by_republicans = yes
				china_is_potential_government = yes
			}
		}

		targets = {	YUN GXC CHI }
		target_root_trigger = {
			has_completed_focus = SZC_The_Diarchy
			NOT = { has_variable = SZC_alliance }
		}
		target_trigger = {
			country_exists = FROM
			FROM = {
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
				NOT = { has_war_with = ROOT }
				if = {
					limit = {
						tag = YUN
					}
					is_ruled_by_kmt = yes
				}
				if = {
					limit = {
						original_tag = GXC
					}
					OR = {
						is_ruled_by_federalists = yes
						is_ruled_by_kmt = yes
					}
				}
			}
		}

		cost = 25
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = -30
			#Will not join factions before solving internal issues
			modifier = {
				add = -1000
				NOT = { has_variable = SZC_opium_crisis_solved }
			}
			#Deng Xihou and Xiong Kewu push for Federalist alignment
			modifier = {
				set_temp_variable = { SZC_federalist_faction_desire = party_popularity@social_conservative }
				add_to_temp_variable = { SZC_federalist_faction_desire = party_popularity@social_liberal }
				multiply_temp_variable = { SZC_federalist_faction_desire = 75 }
				add = SZC_federalist_faction_desire

				FROM = {
					original_tag = GXC
					is_ruled_by_federalists = yes
				}
			}
			#Liu Wenhui pushes for KMT alignment
			modifier = {
				set_temp_variable = { SZC_kmt_faction_desire = party_popularity@market_liberal }
				multiply_temp_variable = { SZC_kmt_faction_desire = 100 }
				add = SZC_kmt_faction_desire

				FROM = { tag = YUN }
			}
			modifier = {
				set_temp_variable = { SZC_kmt_faction_desire = party_popularity@market_liberal }
				multiply_temp_variable = { SZC_kmt_faction_desire = 100 }
				add = SZC_kmt_faction_desire

				FROM = {
					original_tag = GXC
					is_ruled_by_kmt = yes
				}
			}
			modifier = {
				set_temp_variable = { SZC_kmt_faction_desire = party_popularity@market_liberal }
				multiply_temp_variable = { SZC_kmt_faction_desire = 100 }
				add = SZC_kmt_faction_desire

				FROM = {
					tag = CHI
					is_ruled_by_kmt = yes
				}
			}
			#Prefers neighbours
			modifier = {
				add = -10
				NOT = { is_neighbor_of = FROM }
			}
			#Threatened by Yunnan
			modifier = {
				add = 40
				YUN = {
					OR = {
						focus_progress = {
							focus = YUN_go_after_Sichuan
							progress > 0
						}
						focus_progress = {
							focus = YUN_Ultimatium_To_Sichuan2
							progress > 0
						}
					}
				}
			}
			#Threatened by Qing
			modifier = {
				add = 40
				QIE = {
					OR = {
						has_decision = QIE_zhili_kill_SZC
						has_decision = QIE_manchu_attack_sichuan
					}
				}
			}
			#Threatened by the Kuomintang
			modifier = {
				add = 40
				CHI = { focus_progress = { focus = CHI_deal_with_warlords progress > 0 } }
			}
			#Threatened by Liangguang
			modifier = {
				add = 40
				GXC = { has_completed_focus = GXC_Military_Nationalization }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Align_With_Faction target: [From.GetName]"
			FROM = {
				country_event = sichuan.10
			}
		}
	}
}

Sichuan_Federalist_decisions = {
	SZC_Return_To_Guangdong = {
		icon = infiltrate_state

		available = {
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
			}
		}

		visible = {
			can_declare_war_on = FROM
			has_completed_focus = SZC_Recover_The_First_Province
		}

		targets = { GXC }
		target_root_trigger = {
			has_completed_focus = SZC_Recover_The_First_Province
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		fire_only_once = yes
		cost = 20
		days_remove = 7
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.4
			}
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 1 }
				FROM = { surrender_progress < 0.1 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					faction_leader = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = no
					has_guarantor = yes
					any_of_scopes = {
						array = guarantor_array
						has_guaranteed = PREV
						alliance_strength_ratio > 0.8
						surrender_progress < 0.1
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Return_To_Guangdong target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Return_To_Guangdong target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	SZC_Unify_The_South = {
		icon = generic_prepare_civil_war

		available = {
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
			}
		}

		visible = {
			can_declare_war_on = FROM
			has_completed_focus = SZC_Revive_The_Federal_Project
		}

		targets = { HNN CHI ANQ LEP SQI YUN }
		target_root_trigger = {
			has_completed_focus = SZC_Revive_The_Federal_Project
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		fire_only_once = yes
		cost = 20
		days_remove = 7
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.4
			}
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 1 }
				FROM = { surrender_progress < 0.1 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					faction_leader = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Unify_The_South target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			FROM = {
				if = {
					limit = { tag = CHI }
					country_event = lngupc.20
				}
				else = {
					hidden_effect = { country_event = sichuan.20 }
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Unify_The_South target: [From.GetName]"
			if = {
				limit = {
					FROM = { tag = CHI }
				}
				declare_war_on = {
					target = FROM
					type = annex_everything
				}
			}
			else = {
				FROM = { country_event = lngupc.17 }
			}
		}
	}

	SZC_Negotiate_With_The_North = {
		icon = eng_trade_unions_support

		available = {
			custom_trigger_tooltip = {
				tooltip = hunan_aligned_tt
				HNN = {
					OR = {
						exists = no
						is_in_faction_with = QIE
						is_in_faction_with = FNG
						is_in_faction_with = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = yunnan_aligned_tt
				YUN = {
					OR = {
						exists = no
						is_in_faction_with = QIE
						is_in_faction_with = FNG
						is_in_faction_with = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = liangguang_aligned_tt
				GXC = {
					OR = {
						exists = no
						is_in_faction_with = QIE
						is_in_faction_with = FNG
						is_in_faction_with = ROOT
					}
				}
			}
		}

		visible = {
			FROM = {
				exists = yes
				if = {
					limit = {
						tag = QIE
					}
					has_country_flag = QIE_coup_failed
				}
				if = {
					limit = {
						tag = FNG
					}
					owns_state = 608
				}
				has_war = no
				is_subject = no
			}
			has_completed_focus = SZC_Revive_The_Federal_Project
		}

		targets = { QIE FNG }
		target_root_trigger = {
			has_completed_focus = SZC_Revive_The_Federal_Project
		}
		target_trigger = {
			FROM = {
				if = {
					limit = {
						tag = QIE
					}
					has_country_flag = QIE_coup_failed
				}
				if = {
					limit = {
						tag = FNG
					}
					owns_state = 608
				}
				has_war = no
				is_subject = no
			}
		}

		fire_only_once = yes
		cost = 0
		days_remove = 14

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Negotiate_With_The_North target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Negotiate_With_The_North target: [From.GetName]"
			FROM = {
				country_event = lngupc.21
			}
		}
	}

	SZC_Attack_North = {
		icon = oppression

		available = {
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
			}
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 608
			}
			has_completed_focus = SZC_From_Chongqing_To_Beijing
		}

		targets = { QIE FNG SHX SQI }
		target_root_trigger = {
			has_completed_focus = SZC_From_Chongqing_To_Beijing
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 608
			}
		}

		fire_only_once = yes
		cost = 20
		days_remove = 7
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Attack_North target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Attack_North target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

Sichuan_Zhili_decisions = {
	SZC_Set_Up_Border_Defenses = {
		icon = fortress

		available = {
			has_full_control_of_state = 661
		}
		visible = {
			owns_state = 661
		}

		highlight_states = {
highlight_state_targets = {
			state = 661
		}
}

		days_remove = 60
		fire_only_once = yes

		modifier = {
			army_org_factor = -0.15
		}

		custom_cost_text = SZC_CP_60
		custom_cost_trigger = {
			command_power > 59.99
		}

		ai_will_do = {
			base = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Set_Up_Border_Defenses"
			hidden_effect = {
				add_command_power = -60
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Set_Up_Border_Defenses"
			661 = {
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 7256
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 2091
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 10144
				}
				add_building_construction = {
					type = bunker
					level = 2
					instant_build = yes
					province = 11865
				}
			}
			if = {
				limit = { has_full_control_of_state = 1049 }
				1049 = {
					add_building_construction = {
						type = bunker
						level = 2
						instant_build = yes
						province = 7948
					}
					add_building_construction = {
						type = bunker
						level = 2
						instant_build = yes
						province = 10757
					}
				}
			}
		}
	}
	SZC_Mobilise_Troop_Remnants = {
		icon = eng_blackshirt_march

		available = {
			has_completed_focus = SZC_Rally_The_Zhili_Remnants
		}
		visible = {
			check_variable = { SZC_zhili_mobilisation < 10 }
		}

		custom_cost_trigger = {
			command_power > 14.99
		}
		custom_cost_text = SZC_CP_15
		days_remove = 15
		days_re_enable = 7

		ai_will_do = {
			base = 200
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Mobilise_Troop_Remnants"
			if = {
				limit = {
					NOT = { has_variable = SZC_zhili_mobilisation }
				}
				set_variable = { SZC_zhili_mobilisation = 1 }
			}
			else = {
				add_to_variable = { SZC_zhili_mobilisation = 1 }
			}
			hidden_effect = {
				add_command_power = -15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Mobilise_Troop_Remnants"
			custom_effect_tooltip = SZC_Mobilise_Troop_Remnants_tooltip
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_template = "Zhili Remnant Division" }
					}
					division_template = {
						name = "Zhili Remnant Division"
						division_names_group = QIE_INF_01
						regiments = {
							militia = { x = 0 y = 0 }
							militia = { x = 0 y = 1 }
							militia = { x = 0 y = 2 }
						}
						support = {
							artillery = { x = 0 y = 0 }
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						OR = {
							state = 605 #Chengdu
							state = 650 #Chongqing
							state = 661 #Daxian
						}
					}
					create_unit = {
						division = "division_template = \"Zhili Remnant Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
					}
				}
			}
		}
	}
	SZC_Reorganise_The_Remnant_Divisions = {
		icon = generic_army_support

		visible = {
			check_variable = { SZC_zhili_mobilisation > 9 }
			NOT = { has_decision = SZC_Mobilise_Troop_Remnants }
		}

		cost = 100
		days_remove = 90
		fire_only_once = yes
		cancel_if_not_visible = yes

		modifier = {
			consumer_goods_factor = 0.05
			political_power_cost = 0.05
		}

		ai_will_do = {
			base = 300
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Reorganise_The_Remnant_Divisions"
			if = {
				limit = {
					has_template = "Zhili Remnant Division"
				}
				delete_unit_template_and_units = { division_template = "Zhili Remnant Division" }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Reorganise_The_Remnant_Divisions"
			custom_effect_tooltip = SZC_Reorganise_The_Remnant_Divisions_tooltip
			hidden_effect = {
				division_template = {
					name = "Zhili Division"
					division_names_group = "QIE_INF_01"
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
						recon = { x = 0 y = 1 }
					}
				}
			}
			hidden_effect = {
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Zhili Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
						prioritize_location = 6999
					}
					create_unit = {
						division = "division_template = \"Zhili Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
						prioritize_location = 1893
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Zhili Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
						prioritize_location = 4925
					}
					create_unit = {
						division = "division_template = \"Zhili Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
						prioritize_location = 1367
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Zhili Division\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
						owner = SZC
						prioritize_location = 11865
					}
				}
			}
		}
	}
	SZC_Ally_With_Warlord = {
		icon = generic_form_nation

		available = {
			if = {
				limit = {
					FROM = {
						NOT = { tag = LEP }
					}
				}
				OR = {
					is_neighbor_of = FROM
					any_allied_country = {
						is_neighbor_of = FROM
					}
				}
			}
		}

		visible = {
			has_completed_focus = SZC_Gather_Allies
			NOT = { has_war_with = FROM }
			FROM = {
				exists = yes
				is_in_faction = no
				is_ruled_by_pro_zhili = yes
				if = {
					limit = { tag = LEP }
					NOT = {
						has_war_with = ANQ
						has_war_with = CHI
						has_war_with = SQI
					}
				}
				if = {
					limit = { tag = XSM }
					has_global_flag = northwest_conflict_ended
				}
				if = {
					limit = { tag = TAN }
					NOT = {
						has_war_with = SIK
						has_war_with = ETS
					}
				}
			}
		}

		targets = { HNN XSM TAN LEP GXC }
		target_root_trigger = {
			has_completed_focus = SZC_Gather_Allies
		}
		target_trigger = {
			NOT = { has_war_with = FROM }
			FROM = {
				is_in_faction = no
				is_ruled_by_pro_zhili = yes
				if = {
					limit = { tag = LEP }
					NOT = {
						has_war_with = ANQ
						has_war_with = CHI
						has_war_with = SQI
					}
				}
				if = {
					limit = { tag = XSM }
					has_global_flag = northwest_conflict_ended
				}
				if = {
					limit = { tag = TAN }
					NOT = {
						has_war_with = SIK
						has_war_with = ETS
					}
				}
			}
		}

		cost = 20
		days_remove = 7
		fire_only_once = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				FROM = { has_war = yes }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Ally_With_Warlord target: [From.GetName]"
			FROM = {
				country_event = sichuan.270
			}
		}
	}

	SZC_Return_To_Beijing = {
		icon = jap_conquer_china

		visible = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 608
			}
			has_completed_focus = SZC_Shining_Republic
		}

		targets = { QIE }
		target_root_trigger = {
			has_completed_focus = SZC_Shining_Republic
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 608
			}
		}

		cost = 0
		days_remove = 10
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				enemies_strength_ratio > 0.4
			}
			modifier = {
				factor = 0
				surrender_progress > 0
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 1 }
				FROM = { surrender_progress < 0.1 }
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					faction_leader = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				has_war = yes
				FROM = {
					is_subject = yes
					overlord = {
						surrender_progress < 0.1
						strength_ratio = { tag = ROOT ratio > 0.7 }
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = no
					has_guarantor = yes
					any_of_scopes = {
						array = guarantor_array
						has_guaranteed = PREV
						alliance_strength_ratio > 0.8
						surrender_progress < 0.1
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Return_To_Beijing target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Return_To_Beijing target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
	SZC_Destroy_Warlord = {
		name = SZC_zhili_attack_decision
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
			has_completed_focus = SZC_One_China_One_Government
		}

		targets = { CHI FNG SHX GXC HNN YUN LEP ANQ SQI }
		target_root_trigger = {
			has_completed_focus = SZC_One_China_One_Government
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		cost = 20
		days_remove = 10
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				FROM = { is_guaranteed_by = JAP }
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.5
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Destroy_Warlord target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Destroy_Warlord target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	SZC_Destroy_Outlier = {
		name = SZC_zhili_attack_decision
		icon = hol_draw_up_staff_plans

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			has_completed_focus = SZC_Tie_Up_Loose_Ends
			can_declare_war_on = FROM
			FROM = {
				exists = yes
				is_in_faction = no
				is_subject = no
			}
		}

		targets = { XSM MON TIB SIK TAN ETS }
		target_root_trigger = {
			has_completed_focus = SZC_Tie_Up_Loose_Ends
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				is_in_faction = no
				is_subject = no
			}
		}

		fire_only_once = yes
		cost = 20
		days_remove = 10
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				MON_protected_by_russia_FROM = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Destroy_Outlier target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
			hidden_effect = {
				FROM = { country_event = sichuan.20 }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Destroy_Outlier target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	SZC_Integrate_Allies = {
		icon = generic_form_nation

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			is_faction_leader = yes
			has_completed_focus = SZC_Tie_Up_Loose_Ends
			FROM = {
				OR = {
					tag = TAN
					is_han_chinese_tag = yes
				}
			}
		}

		target_array = faction_members
		target_root_trigger = {
			has_completed_focus = SZC_Tie_Up_Loose_Ends
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				OR = {
					tag = TAN
					is_han_chinese_tag = yes
				}
			}
		}

		cost = 50
		days_remove = 40
		fire_only_once = yes

		modifier = {
			political_power_cost = 0.1
		}

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Integrate_Allies target: [From.GetName]"
			FROM = {
				country_event = { id = qiefor.49 hours = 12 }
			}
		}
	}
	SZC_Seize_Macau = {
		icon = infiltrate_state

		available = {
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
			}
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				has_war = yes
				owns_state = 729
			}
			has_completed_focus = SZC_Eradicate_The_Concessions
		}

		targets = { POR }
		target_root_trigger = {
			has_completed_focus = SZC_Eradicate_The_Concessions
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				has_war = yes
				owns_state = 729
			}
		}

		cost = 0
		days_remove = 10
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Seize_Macau target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 15 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Seize_Macau target: [From.GetName]"
			FROM = {
				country_event = { id = qiefor.50 hours = 6 }
			}
		}
	}
	SZC_Deal_With_LEC = {
		icon = eng_trade_unions_support

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
			has_completed_focus = SZC_Eradicate_The_Concessions
		}

		cost = 40
		days_remove = 30
		fire_only_once = yes
		war_with_target_on_remove = yes

		targets = { LEC }
		target_root_trigger = {
			has_completed_focus = SZC_Eradicate_The_Concessions
		}
		target_trigger = {
			can_declare_war_on = FROM
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				FROM = {
					is_in_faction = no
					LEC_is_guaranteed = no
				}
			}
			modifier = {
				add = 100
				FROM = {
					is_in_faction = yes
					var:faction_leader = {
						surrender_progress > 0.5
					}
				}
			}
			modifier = {
				add = 100 #Invaded directly
				FROM = { is_in_faction_with = ENT }
				any_of_scopes = {
					array = ENT.enemies
					is_neighbor_of = ENT
					OR = {
						is_american_tag = yes #vs CAN
						is_actual_major = yes #vs AST
						is_subject_of = GER #vs SAF
					}
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SZC_Deal_With_LEC target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 45 value = 1 }
			FROM = {
				if = {
					limit = {
						OR = {
							has_country_leader = { name = "Nelson T. Johnson" ruling_only = yes }
							AND = {
								has_government = paternal_autocrat
								ROOT = { has_completed_focus = SZC_Contact_An_Old_Ally }
							}
						}
					}
					country_event = { id = qiefor.114 days = 1 }
				}
				if = {
					limit = {
						is_in_faction_with = CAN
					}
					country_event = { id = qiefor.126 days = 1 }
				}
				else = {
					hidden_effect = { country_event = sichuan.20 }
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Deal_With_LEC target: [From.GetName]"
			if = {
				limit = {
					FROM = {
						NOT = {
							has_country_leader = { name = "Nelson T. Johnson" ruling_only = yes }
							AND = {
								has_government = paternal_autocrat
								ROOT = { has_completed_focus = SZC_Contact_An_Old_Ally }
							}
							is_in_faction_with = CAN
						}
					}
				}
				declare_war_on = {
					target = FROM
					type = annex_everything
				}
			}
		}
	}

	SZC_Seize_Hong_Kong = {
		icon = infiltrate_state

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 326
				has_war = yes
			}
			has_completed_focus = SZC_Eradicate_The_Concessions
		}

		targets = { AST }
		target_root_trigger = {
			has_completed_focus = SZC_Eradicate_The_Concessions
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				owns_state = 326
				has_war = yes
			}
		}

		cost = 20
		days_remove = 10
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 100 #Invaded directly
				FROM = { is_in_faction_with = ENT }
				any_of_scopes = {
					array = ENT.enemies
					is_neighbor_of = ENT
					OR = {
						is_american_tag = yes #vs CAN
						is_actual_major = yes #vs AST
						is_subject_of = GER #vs SAF
					}
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Seize_Hong_Kong target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Seize_Hong_Kong target: [From.GetName]"
			FROM = {
				country_event = { id = qiefor.126 hours = 6 }
			}
		}
	}

	SZC_Threaten_GEA = {
		icon = eng_trade_unions_demand

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				has_war = yes
				OR = {
					has_full_control_of_state = 966
					has_full_control_of_state = 744
					has_full_control_of_state = 728
				}
			}
			has_completed_focus = SZC_Eradicate_The_Concessions
			NOT = { has_completed_focus = SZC_Contact_An_Old_Ally }
		}

		cost = 20
		days_remove = 10
		fire_only_once = yes
		war_with_target_on_remove = yes

		targets = { GEA }
		target_root_trigger = {
			has_completed_focus = SZC_Eradicate_The_Concessions
			NOT = { has_completed_focus = SZC_Contact_An_Old_Ally }
		}
		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				has_war = yes
				OR = {
					has_full_control_of_state = 966
					has_full_control_of_state = 744
					has_full_control_of_state = 728
				}
			}
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 300
				GEA = { has_war = yes }
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Threaten_GEA target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Threaten_GEA target: [From.GetName]"
			FROM = {
				country_event = { id = qiefor.119 days = 3 }
			}
		}
	}

	SZC_Negotiate_With_GEA = {
		icon = eng_trade_unions_support

		available = {
			is_neighbor_of = FROM
		}

		visible = {
			FROM = {
				has_war = yes
				OR = {
					has_full_control_of_state = 966
					has_full_control_of_state = 744
					has_full_control_of_state = 728
				}
			}
			has_completed_focus = SZC_Eradicate_The_Concessions
			has_completed_focus = SZC_Contact_An_Old_Ally
		}

		targets = { GEA }
		target_root_trigger = {
			has_completed_focus = SZC_Eradicate_The_Concessions
			has_completed_focus = SZC_Contact_An_Old_Ally
		}
		target_trigger = {
			FROM = {
				has_war = yes
				OR = {
					has_full_control_of_state = 966
					has_full_control_of_state = 744
					has_full_control_of_state = 728
				}
			}
		}

		cost = 20
		days_remove = 30
		fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Negotiate_With_GEA target: [From.GetName]"
			FROM = {
				country_event = { id = qiefor.122 days = 1 }
			}
		}
	}
}

Sichuan_Arms_Purchases_decisions = {
	SZC_Purchase_Foreign_Guns = {
		icon = generic_prepare_civil_war

		visible = {
			OR = {
				has_completed_focus = SZC_German_Industrial_Expertise
				has_completed_focus = SZC_Foreign_Arms_And_Advisors
			}
		}

		cost = 50
		fire_only_once = no
		days_remove = 30
		days_re_enable = 60

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				stockpile_ratio = {
					archetype = infantry_equipment
					ratio < 0.8
				}
			}
			modifier = {
				add = -100
				has_political_power < 80
			}
			modifier = {
				add = -1000
				has_idea = SZC_famine_idea
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Purchase_Foreign_Guns"
			if = {
				limit = { has_completed_focus = SZC_German_Industrial_Expertise }
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
					producer = GER
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
					producer = CZE
				}
			}
		}
	}
	SZC_Purchase_Support_Equipment = {
		icon = generic_industry

		visible = {
			OR = {
				has_completed_focus = SZC_German_Industrial_Expertise
				has_completed_focus = SZC_Foreign_Arms_And_Advisors
			}
		}

		cost = 50
		fire_only_once = no
		days_remove = 30
		days_re_enable = 60

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				stockpile_ratio = {
					archetype = support_equipment
					ratio < 0.8
				}
			}
			modifier = {
				add = -100
				has_political_power < 100
			}
			modifier = {
				add = -1000
				has_idea = SZC_famine_idea
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Purchase_Support_Equipment"
			if = {
				limit = { has_completed_focus = SZC_German_Industrial_Expertise }
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 400
					producer = GER
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = support_equipment
					amount = 400
					producer = DEN
				}
			}
		}
	}
	SZC_Purchase_Artillery = {
		icon = ger_military_buildup

		visible = {
			OR = {
				has_completed_focus = SZC_German_Industrial_Expertise
				has_completed_focus = SZC_Foreign_Arms_And_Advisors
			}
		}

		cost = 40
		fire_only_once = no
		days_remove = 30
		days_re_enable = 60

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				stockpile_ratio = {
					archetype = artillery_equipment
					ratio < 0.8
				}
			}
			modifier = {
				add = -100
				has_political_power < 100
			}
			modifier = {
				add = -1000
				has_idea = SZC_famine_idea
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Purchase_Artillery"
			if = {
				limit = { has_completed_focus = SZC_German_Industrial_Expertise }
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 400
					producer = GER
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 400
					producer = AUS
				}
			}
		}
	}
	SZC_Hire_RCW_Veterans = {
		icon = generic_army_support

		visible = {
			has_completed_focus = SZC_Foreign_Arms_And_Advisors
		}

		cost = 50
		fire_only_once = yes
		days_remove = 35

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SZC_Hire_RCW_Veterans"
			army_experience = 15
			add_tech_bonus = {
				name = SZC_Hire_RCW_Veterans
				bonus = 1
				uses = 1
				category = land_doctrine
			}
		}
	}
}
