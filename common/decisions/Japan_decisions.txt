################################
# Japan Decisions
################################
# By Zankoas and The Alpha Dog
################################

@JAP_fading_sun_timeout = 180

JAP_fading_sun = {
	JAP_fading_sun_timer = {
		icon = revolt

		allowed = { always = no } #activated by japfor.229

		available = {
			KOR = { all_core_state = { owner = { has_full_control_of_state = PREV } } }
			if = {
				limit = { has_subject = MAN }
				MAN = { has_capitulated = yes }
			}
			else_if = {
				limit = { NOT = { has_war_with = FNG } }
				OR = {
					NOT = { country_exists = FNG }
					FNG = { has_capitulated = yes }
				}
			}
		}

		cancel_trigger = {
			OR = {
				has_war = no
				is_subject = yes
				has_capitulated = yes
				is_in_faction_but_not_leader = yes
				hidden_trigger = {
					is_ai = yes
					surrender_progress > 0.15
				}
			}
		}

		is_good = no
		days_mission_timeout = @JAP_fading_sun_timeout

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_fading_sun_timer"
			hidden_effect = {
				every_country = {
					limit = { has_active_mission = JAP_fading_sun_timer_enemy }
					remove_mission = JAP_fading_sun_timer_enemy
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_fading_sun_timer"
			hidden_effect = {
				every_country = {
					limit = { has_active_mission = JAP_fading_sun_timer_enemy }
					remove_mission = JAP_fading_sun_timer_enemy
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout JAP_fading_sun_timer"
			if = {
				limit = { is_ai = no }
				add_stability = -0.1
				add_war_support = -0.1
				hidden_effect = {
					activate_mission = JAP_fading_sun_timer
					every_enemy_country = {
						limit = {
							is_ai = no
							OR = {
								is_tag_in_china_area = yes
								is_russian_tag = yes
							}
						}
						activate_mission = JAP_fading_sun_timer_enemy
					}
				}
			}
			else = {
				set_global_flag = JAP_will_surrender
			}
		}
	}
	JAP_fading_sun_timer_enemy = {
		icon = revolt

		allowed = { always = no } #activated by japfor.229

		available = {
			KOR = { all_core_state = { owner = { has_full_control_of_state = PREV } } }
			if = {
				limit = {
					country_exists = MAN
					JAP = { is_ally_with = MAN }
				}
				MAN = { has_capitulated = yes }
			}
			if = {
				limit = { is_russian_tag = yes }
				if = {
					limit = { has_war_with = FNG }
					FNG = { has_capitulated = yes }
				}
				OR = {
					NOT = { country_exists = TRM }
					TRM = { has_capitulated = yes }
				}
			}
			else = {
				if = {
					limit = { NOT = { JAP = { has_war_with = FNG } } }
					OR = {
						NOT = { country_exists = FNG }
						FNG = { has_capitulated = yes }
					}
				}
				JAP = {
					custom_trigger_tooltip = {
						tooltip = JAP_all_chinese_allies_capitulated
						NOT = {
							any_allied_country = {
								is_tag_in_china_area = yes
								has_capitulated = no
							}
						}
					}
				}
				JAP = {
					custom_trigger_tooltip = {
						tooltip = JAP_all_owned_chinese_states_occupied
						NOT = {
							any_owned_state = {
								is_china_claim_area = yes
								NOT = { state = 524 } #Taiwan
								NOT = { state = 745 } #Kwantung
								is_controlled_by = ROOT
							}
						}
					}
				}
			}
		}

		cancel_trigger = {
			OR = {
				NOT = { has_war_with = JAP }
				JAP = { has_capitulated = yes }
				JAP = { is_subject = yes }
				JAP = { is_in_faction_but_not_leader = yes }
				JAP = { surrender_progress > 0.15 }
			}
		}

		is_good = yes
		days_mission_timeout = @JAP_fading_sun_timeout

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout JAP_fading_sun_timer_enemy"
			#no logging here - this mission is only meant to give a player information
			effect_tooltip = {
				if = {
					limit = { JAP = { is_ai = no } }
					JAP = {
						add_stability = -0.1
						add_war_support = -0.1
					}
				}
				else = {
					custom_effect_tooltip = JAP_will_surrender_if_forced_out_of_china
					country_event = japfor.230
				}
			}
		}
	}

	JAP_offer_peace_to_china = {
		icon = peace_dove

		available = {
			NOT = { KOR = { any_core_state = { controller = { is_ally_with = PREV.PREV } } } }
			if = {
				limit = {
					country_exists = MAN
					is_ally_with = MAN
				}
				MAN = { has_capitulated = yes }
			}
			else_if = {
				limit = { NOT = { has_war_with = FNG } }
				OR = {
					NOT = { country_exists = FNG }
					FNG = { has_capitulated = yes }
				}
			}
			if = {
				limit = {
					country_exists = LEC
					is_ally_with = LEC
				}
				LEC = { has_capitulated = yes }
			}
			custom_trigger_tooltip = {
				tooltip = JAP_all_chinese_allies_capitulated
				NOT = {
					any_allied_country = {
						is_tag_in_china_area = yes
						has_capitulated = no
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = JAP_all_owned_chinese_states_occupied
				NOT = {
					any_owned_state = {
						is_china_claim_area = yes
						NOT = { state = 524 } #Taiwan
						NOT = { state = 745 } #Kwantung
						is_controlled_by = ROOT
					}
				}
			}
		}

		visible = {
			any_enemy_country = {
				is_chinese_tag = yes
				OR = {
					china_is_potential_government = yes
					is_faction_leader = yes #United Front
				}
				is_valid_peace_target = yes
			}
			is_valid_peace_target = yes
			has_capitulated = no
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 1000
				OR = {
					has_global_flag = JAP_will_surrender
					surrender_progress > 0.15 #Japan was directly invaded
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_offer_peace_to_china"
			save_event_target_as = japan
			effect_tooltip = {
				every_enemy_country = {
					limit = {
						is_chinese_tag = yes
						is_valid_peace_target = yes
					}
					country_event = japfor.230
				}
			}
			hidden_effect = {
				random_enemy_country = {
					limit = {
						is_chinese_tag = yes
						is_valid_peace_target = yes
					}
					country_event = japfor.230
				}
			}
		}
	}

	JAP_offer_peace_to_russia = {
		icon = peace_dove

		available = {
			FROM = { surrender_progress < 0.2 }
			NOT = { KOR = { any_core_state = { controller = { is_ally_with = PREV.PREV } } } }
			if = {
				limit = {
					country_exists = MAN
					is_ally_with = MAN
				}
				MAN = { has_capitulated = yes }
			}
			if = {
				limit = { FNG = { has_war_with = FROM } }
				OR = {
					NOT = { country_exists = FNG }
					FNG = { has_capitulated = yes }
				}
			}
			OR = {
				NOT = { country_exists = TRM }
				TRM = { has_capitulated = yes }
			}
		}

		visible = {
			has_war_with = FROM
			is_valid_peace_target = yes
			has_capitulated = no
			FROM = { is_valid_peace_target = yes }
		}

		targets = { RUS SOV }
		target_root_trigger = {
			OR = {
				NOT = { country_exists = FNG }
				KOR = {
					any_core_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
			}
		}
		target_trigger = {
			has_war_with = FROM
			FROM = { is_valid_peace_target = yes }
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 1000
				OR = {
					has_global_flag = JAP_will_surrender
					surrender_progress > 0.15 #Japan was directly invaded
					strength_ratio = { tag = FROM ratio < 0.3 }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_offer_peace_to_russia target: [From.GetName]"
			FROM = { country_event = japfor.238 }
		}
	}
}

JAP_land_reform = {
	JAP_land_reform_1 = {
		icon = GFX_decision_generic_agriculture

		allowed = { always = no }

		available = {
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		cost = JAP_land_reform_pp_1
		days_remove = JAP_land_reform_cost_1
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				has_political_power < 25
				factor = 0
			}
			modifier = {
				has_political_power > 25
				add = 40
			}
			modifier = {
				has_political_power > 40
				add = 90
			}
		}

		priority = 100

		modifier = {
			war_support_factor = -0.10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_land_reform_1"
			set_country_flag = JAP_land_reform_in_progress
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_land_reform_1"
			set_country_flag = JAP_part_one_land_reform
			clr_country_flag = JAP_land_reform_in_progress
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 1
			}
			custom_effect_tooltip = JAP_land_reform_progress
		}
	}

	JAP_land_reform_2 = {
		icon = GFX_decision_generic_agriculture

		allowed = { always = no }

		available = {
			has_country_flag = JAP_part_one_land_reform
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		cost = JAP_land_reform_pp_2
		days_remove = JAP_land_reform_cost_2
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				has_political_power < 35
				factor = 0
			}
			modifier = {
				has_political_power > 35
				add = 40
			}
			modifier = {
				has_political_power > 60
				add = 90
			}
		}

		priority = 100

		modifier = {
			war_support_factor = -0.1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_land_reform_2"
			set_country_flag = JAP_land_reform_in_progress
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_land_reform_2"
			set_country_flag = JAP_part_two_land_reform
			clr_country_flag = JAP_land_reform_in_progress
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 1
			}
			custom_effect_tooltip = JAP_land_reform_progress
		}
	}

	JAP_land_reform_3 = {
		icon = GFX_decision_generic_agriculture

		allowed = { always = no }

		available = {
			has_country_flag = JAP_part_two_land_reform
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		cost = JAP_land_reform_pp_3
		days_remove = JAP_land_reform_cost_3
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				has_political_power < 60
				factor = 0
			}
			modifier = {
				has_political_power > 60
				add = 40
			}
			modifier = {
				has_political_power > 90
				add = 90
			}
		}

		priority = 100

		modifier = {
			war_support_factor = -0.1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_land_reform_3"
			set_country_flag = JAP_land_reform_in_progress
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_land_reform_3"
			clr_country_flag = JAP_land_reform_in_progress
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 2
			}
			custom_effect_tooltip = JAP_land_reform_progress_large
		}
	}

	JAP_land_adjustment = {
		icon = GFX_decision_generic_construction

		allowed = { always = no }

		available = {
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		days_remove = JAP_land_reform_cost_4
		fire_only_once = yes

		ai_will_do = { factor = 100 }

		priority = 100

		modifier = {
			war_support_factor = -0.05
			stability_factor = -0.05
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_land_adjustment"
			set_country_flag = JAP_land_reform_in_progress
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_land_adjustment"
			clr_country_flag = JAP_land_reform_in_progress
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 1
			}
			custom_effect_tooltip = JAP_land_reform_progress
		}
	}

	JAP_rent_control = {
		icon = GFX_decision_generic_civil_support

		allowed = { always = no }

		available = {
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		cost = JAP_land_reform_pp_3
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				has_political_power < 60
				factor = 0
			}
			modifier = {
				has_political_power > 60
				add = 40
			}
			modifier = {
				has_political_power > 90
				add = 90
			}
		}

		priority = 100

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_rent_control"
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 2
			}
			custom_effect_tooltip = JAP_land_reform_progress_large
		}
	}

	JAP_agriculture_land_control = {
		icon = GFX_decision_generic_decision

		allowed = { always = no }

		available = {
			NOT = { has_country_flag = JAP_land_reform_in_progress }
			has_stability > 0.05
		}

		cost = JAP_land_reform_pp_2
		fire_only_once = yes

		ai_will_do = {
			factor = 10
			modifier = {
				has_political_power < 35
				factor = 0
			}
			modifier = {
				has_political_power > 35
				add = 40
			}
			modifier = {
				has_political_power > 60
				add = 90
			}
		}

		priority = 100

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_agriculture_land_control"
			add_stability = -0.05
			add_to_variable = {
				var = JAP_land_reform_variable
				value = 1
			}
			custom_effect_tooltip = JAP_land_reform_progress
		}
	}

	JAP_finish_land_reform = {
		icon = GFX_decision_generic_operation

		allowed = { always = no }

		available = {
			custom_trigger_tooltip = {
				tooltip = JAP_land_reform_over_2
				check_variable = {
					JAP_land_reform_variable > 2
				}
			}
			NOT = { has_country_flag = JAP_land_reform_in_progress }
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 15
				check_variable = { JAP_land_reform_variable > 2 }
			}
			modifier = {
				add = 100
				check_variable = { JAP_land_reform_variable > 5 }
			}
			modifier = {
				add = 1000
				check_variable = { JAP_land_reform_variable > 7 }
			}
		}

		priority = 100

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_finish_land_reform"
			country_event = japdom.75
			custom_effect_tooltip = JAP_land_reform_idea
			if = {
				limit = {
					check_variable = { JAP_land_reform_variable < 3 }
				}
				custom_effect_tooltip = JAP_land_reform_fail
			}
			else_if = {
				limit = {
					check_variable = { JAP_land_reform_variable > 2 }
					check_variable = { JAP_land_reform_variable < 6 }
				}
				effect_tooltip = {
					if = {
						limit = { has_country_flag = JAP_seiyukai_land_reform }
						add_stability = 0.05
						add_war_support = 0.05
					}
					JAP_land_reform_reward_decent = yes
				}
			}
			else_if = {
				limit = {
					check_variable = { JAP_land_reform_variable > 5 }
					check_variable = { JAP_land_reform_variable < 8 }
				}
				effect_tooltip = {
					if = {
						limit = { has_country_flag = JAP_seiyukai_land_reform }
						add_stability = 0.1
						add_war_support = 0.1
					}
					JAP_land_reform_reward_good = yes
				}
			}
			else_if = {
				limit = {
					check_variable = { JAP_land_reform_variable > 7 }
				}
				effect_tooltip = {
					if = {
						limit = { has_country_flag = JAP_seiyukai_land_reform }
						add_stability = 0.15
						add_war_support = 0.15
					}
					JAP_land_reform_best = yes
				}
			}
			hidden_effect = { JAP_close_JAP_land_reform = yes }
		}
	}
}

JAP_influence_china = {
	JAP_china_army_training = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			FROM = {
				strength_ratio = {
					tag = JAP
					ratio < 0.35
				}
			}
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			FROM = {
				exists = yes
				is_working_with_JAP = yes
				NOT = {
					CHN = { is_ally_with = ROOT }
					has_war_with = JAP
					has_country_flag = JAP_no_training_help
				}
			}
		}

		custom_cost_trigger = {
			has_army_experience > 10
		}
		cancel_trigger = {
			FROM = { has_country_flag = JAP_no_training_help }
		}
		custom_cost_text = army_xp_more_than_10
		ai_will_do = { factor = 1 }
		modifier = {
			army_org_factor = -0.05
		}
		days_remove = 100
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_china_army_training target: [From.GetName]"
			FROM = {
				country_event = japfor.3
			}
			custom_effect_tooltip = chinese_tag_must_agree
			hidden_effect = {
				army_experience = -10
			}
			effect_tooltip = {
				FROM = {
					add_timed_idea = {
						idea = JAP_china_training
						days = 100
					}
				}
			}
			if = {
				limit = {
					FROM = { tag = FNG }
				}
				effect_tooltip = {
					FNG = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.04
						}
					}
				}
			}
		}
	}

	JAP_provide_arms_facilities = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			num_of_military_factories > 25
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			FROM = {
				exists = yes
				is_working_with_JAP = yes
				NOT = {
					has_country_flag = has_offsite_mils_from_JAP
					CHN = { is_ally_with = ROOT }
					has_country_flag = JAP_refused_offsite_mils
					has_war_with = JAP
				}
			}
		}

		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				FROM = {
					stockpile_ratio = {
						archetype = infantry_equipment
						ratio < 0.5
					}
				}
			}
			modifier = {
				has_war = yes
				factor = 0
			}
		}
		days_remove = 365

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_provide_arms_facilities target: [From.GetName]"
			custom_effect_tooltip = chinese_tag_must_agree
			FROM = {
				country_event = japfor.4
			}
			effect_tooltip = {
				FROM = {
					add_offsite_building = { type = arms_factory level = 3 }
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						arms_factory > 0
					}
					add_to_variable = { JAP_mils_to_china_state = 1 }
					remove_building = {
						type = arms_factory
						level = 1
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						arms_factory > 0
					}
					add_to_variable = { JAP_mils_to_china_state = 1 }
					remove_building = {
						type = arms_factory
						level = 1
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						arms_factory > 0
					}
					add_to_variable = { JAP_mils_to_china_state = 1 }
					remove_building = {
						type = arms_factory
						level = 1
					}
				}
			}
			if = {
				limit = {
					FROM = { tag = FNG }
				}
				effect_tooltip = {
					FNG = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.02
						}
					}
				}
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_provide_arms_facilities target: [From.GetName]"
			if = {
				limit = {
					FROM = {
						has_country_flag = has_offsite_mils_from_JAP
					}
				}
				FROM = {
					add_offsite_building = { type = arms_factory level = -3 }
					clr_country_flag = has_offsite_mils_from_JAP
				}
				every_owned_state = {
					limit = {
						has_variable = JAP_mils_to_china_state
					}
					add_building_construction = {
						type = arms_factory
						level = var:JAP_mils_to_china_state
						instant_build = yes
					}
					clear_variable = JAP_mils_to_china_state
				}
			}
			custom_effect_tooltip = JAP_you_get_the_mils_back
		}
	}

	JAP_support_offensive = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			FROM = {
				has_war = yes
			}
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			FROM = {
				exists = yes
				is_working_with_JAP = yes
				NOT = {
					CHN = { is_ally_with = ROOT }
					has_war_with = JAP
					has_country_flag = JAP_refused_offensive_help
				}
			}
		}

		cost = 30
		ai_will_do = {
			base = 0
			modifier = {
				add = 3
				FROM = {
					any_enemy_country = {
						has_war_with = JAP
					}
				}
			}
			modifier = {
				any_enemy_country = {
					strength_ratio = {
						tag = JAP
						ratio > 0.8
					}
				}
				factor = 0
			}
		}
		days_remove = 100

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_offensive target: [From.GetName]"
			FROM = {
				country_event = japfor.5
			}
			custom_effect_tooltip = chinese_tag_must_agree
			effect_tooltip = {
				FROM = {
					add_timed_idea = {
						idea = JAP_china_attack_support
						days = 100
					}
				}
			}
			if = {
				limit = {
					FROM = { tag = FNG }
				}
				effect_tooltip = {
					FNG = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.02
						}
					}
				}
			}
		}
	}

	JAP_provide_planes = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			if = {
				limit = { has_dlc_bba = yes }
				FROM = {
					NOT = {
						has_tech = basic_small_airframe
					}
				}
			}
			else = {
				FROM = {
					NOT = {
						has_tech = fighter2
					}
				}
			}
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			FROM = {
				exists = yes
				is_working_with_JAP = yes
				NOT = {
					CHN = { is_ally_with = ROOT }
					has_war_with = JAP
				}
			}
		}
		fire_only_once = yes

		cost = 100
		ai_will_do = { factor = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_provide_planes target: [From.GetName]"
			FROM = {
				country_event = japfor.6
			}
			if = {
				limit = { has_tech = jet_fighter2 }
				create_production_license = {
					target = FROM
					equipment = {
						type = jet_fighter_equipment_2
					}
					cost_factor = 0.5
				}
			}
			else_if = {
				limit = { has_tech = jet_fighter1 }
				create_production_license = {
					target = FROM
					equipment = {
						type = jet_fighter_equipment_1
					}
					cost_factor = 0.5
				}
			}
			else_if = {
				limit = { has_tech = fighter3 }
				create_production_license = {
					target = FROM
					equipment = {
						type = fighter_equipment_3
					}
					cost_factor = 0.5
				}
			}
			else_if = {
				limit = { has_tech = fighter2 }
				create_production_license = {
					target = FROM
					equipment = {
						type = fighter_equipment_2
					}
					cost_factor = 0.5
				}
			}
			else_if = {
				limit = { has_tech = fighter1 }
				create_production_license = {
					target = FROM
					equipment = {
						type = fighter_equipment_1
					}
					cost_factor = 0.5
				}
			}
			else_if = {
				limit = { has_dlc_bba = yes }
				create_production_license = {
					target = FROM
					equipment = {
						type = small_plane_airframe_0
					}
					cost_factor = 0
				}
			}
			else = {
				create_production_license = {
					target = FROM
					equipment = {
						type = fighter_equipment_0
					}
					cost_factor = 0.5
				}
			}
			if = {
				limit = {
					FROM = { tag = FNG }
				}
				effect_tooltip = {
					FNG = {
						add_popularity = {
							ideology = market_liberal
							popularity = 0.05
						}
					}
				}
			}
		}
	}

	support_chinese_separatists = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			FROM = {
				NOT = { has_war_with = FNG }
			}
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			can_declare_war_on = FROM
			FROM = {
				has_war = yes
				is_subject = no
				has_socialist_government = no
				NOT = {
					has_country_flag = japanese_independence_support
					has_country_flag = JAP_refused_independence_help
				}
				any_enemy_country = {
					is_chinese_tag = yes
					NOT = { is_working_with_JAP = yes }
				}
			}
		}

		cost = 50
		ai_will_do = { factor = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete support_chinese_separatists target: [From.GetName]"
			FROM = {
				country_event = japfor.7
			}
			custom_effect_tooltip = chinese_tag_must_agree
			effect_tooltip = {
				FROM = {
					add_ideas = JAP_chinese_separatist_support
				}
			}
		}
	}

	send_ETS_tartar_guy = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			NOT = { has_war_with = FROM }
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
			FROM = {
				exists = yes
				is_subject = no
				NOT = { has_war_with = JAP }
			}
		}
		fire_only_once = yes
		cost = 10
		ai_will_do = { factor = 4 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete send_ETS_tartar_guy target: [From.GetName]"
			ETS = {
				country_event = japfor.8
			}
			custom_effect_tooltip = ETS_will_discuss_this
		}
	}
	JAP_pan_asianism = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			has_war_with = CHN
			608 = { is_controlled_by_ROOT_or_ally = yes }
			613 = { is_controlled_by_ROOT_or_ally = yes }
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
		}

		cost = 40

		ai_will_do = { base = 100 }

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_pan_asianism"
			custom_effect_tooltip = JAP_peace_effects
			effect_tooltip = { add_ideas = JAP_sabotage_1 }
			hidden_effect = {
				every_enemy_country = {
					limit = {
						is_in_array = { global.china_tags_array = THIS }
					}
					country_event = japfor.604
				}
			}
		}
	}
	JAP_harmony_and_reconciliation = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			has_war_with = CHN
			608 = { is_controlled_by_ROOT_or_ally = yes }
			613 = { is_controlled_by_ROOT_or_ally = yes }
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
		}

		cost = 40

		ai_will_do = { base = 100 }

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_harmony_and_reconciliation"
			custom_effect_tooltip = JAP_peace_effects
			effect_tooltip = { add_ideas = JAP_sabotage_2 }
			hidden_effect = {
				every_enemy_country = {
					limit = {
						is_in_array = { global.china_tags_array = THIS }
					}
					country_event = japfor.605
				}
			}
		}
	}
	JAP_unity_through_peace = {
		icon = generic_prepare_civil_war

		allowed = { always = no }

		available = {
			has_war_with = CHN
			608 = { is_controlled_by_ROOT_or_ally = yes }
			613 = { is_controlled_by_ROOT_or_ally = yes }
		}
		visible = {
			is_faction_leader = yes
			JAP_chinese_enemy_exists = yes
		}

		cost = 40

		ai_will_do = { base = 100 }

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_unity_through_peace"
			custom_effect_tooltip = JAP_peace_effects
			effect_tooltip = { add_ideas = JAP_sabotage_3 }
			hidden_effect = {
				every_enemy_country = {
					limit = {
						is_in_array = { global.china_tags_array = THIS }
					}
					country_event = japfor.606
				}
			}
		}
	}
}

political_actions = {
	JAP_Flag_Picker = {
		icon = generic_agreement
		allowed = {
			original_tag = JAP
		}
		visible = {
			is_ai = no
		}
		cost = 0
		fire_only_once = no
		days_re_enable = 1
		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision JAP_Flag_Picker"
			country_event = japdom.3052
		}
	}
	JAP_the_great_struggle = {
		icon = generic_ignite_civil_war
		allowed = { always = no }

		visible = {
			is_puppet = no
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				has_war_with_major = yes
			}
		}

		fire_only_once = yes

		days_remove = 365

		modifier = {
			army_attack_against_major_factor = 0.1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_the_great_struggle"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_the_great_struggle"
		}
	}

	JAP_divert_workers_towards_production = {
		icon = GFX_decision_generic_merge_plant_materiel
		allowed = { always = no }

		visible = {
			is_puppet = no
		}

		ai_will_do = {
			base = 15
			modifier = {
				add = 30
				has_war = yes
			}
		}

		days_remove = 180
		days_re_enable = 200
		fire_only_once = no

		ai_hint_pp_cost = 40
		custom_cost_text = JAP_divert_workers_towards_production_cost_tt
		custom_cost_trigger = {
			has_political_power > 39.99
			has_manpower > 199999
		}

		modifier = {
			production_factory_efficiency_gain_factor = 0.1
			industrial_capacity_factory = 0.05
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_divert_workers_towards_production"
			add_political_power = -40
			add_manpower = -200000
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_divert_workers_towards_production"
			add_manpower = 180000
		}
	}
}

JAP_mantetsu_projects = {
	develop_fengtian = {
		icon = GFX_decision_generic_industry

		allowed = { always = no }

		available = {
			num_of_civilian_factories_available_for_projects > 10
		}
		visible = {
			FNG_JAP_hostile = no
			FROM = {
				num_of_military_factories < 12
				NOT = { has_war_with = JAP }
				controls_state = 885
				controls_state = 886
				controls_state = 714
			}
		}

		cost = 100

		ai_will_do = { factor = 10 }

		modifier = {
			civilian_factory_use = 10
		}

		days_remove = 150
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete develop_fengtian target: [From.GetName]"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_fengtian target: [From.GetName]"
			885 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			886 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			714 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			FNG = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
			}
		}
	}

	develop_generic_tag = {
		icon = GFX_decision_generic_industry

		allowed = { always = no }

		available = {
			num_of_civilian_factories_available_for_projects > 2
		}
		visible = {
			is_faction_leader = yes
			FROM = {
				num_of_military_factories < 10
				is_working_with_JAP = yes
				exists = yes
				NOT = {
					has_war_with = JAP
					CHN = { is_ally_with = ROOT }
				}
			}
		}

		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				FROM = {
					AND = {
						OR = {
							is_in_faction_with = JAP
							is_in_faction_with = FNG
						}
						NOT = {
							has_war_with = JAP
						}
					}
				}
				add = 10
			}
			modifier = {
				factor = 0
				has_political_power < 100
			}
		}
		modifier = {
			civilian_factory_use = 3
		}
		days_remove = 75

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete develop_generic_tag target: [From.GetName]"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove develop_generic_tag target: [From.GetName]"
			FROM = {
				add_one_random_military_factory = yes
				add_one_random_military_factory = yes
			}
		}
	}

	major_railroad_investment = {
		icon = GFX_decision_train

		allowed = { always = no }

		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			is_faction_leader = yes
			FROM = {
				is_working_with_JAP = yes
				exists = yes
				NOT = {
					has_war_with = JAP
					CHN = { is_ally_with = ROOT }
				}
				any_owned_state = {
					is_core_of = PREV
					is_controlled_by = PREV
					free_building_slots = { building = infrastructure size > 0  }
				}
			}
		}

		modifier = {
			civilian_factory_use = 2
		}
		cost = 30
		ai_will_do = {
			base = 0
			modifier = {
				FROM = {
					AND = {
						OR = {
							is_in_faction_with = JAP
							is_in_faction_with = FNG
						}
						NOT = {
							has_war_with = JAP
						}
					}
				}
				add = 5
			}
			modifier = {
				factor = 0
				has_political_power < 50
			}
		}
		days_remove = 60
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove major_railroad_investment target: [From.GetName]"
			FROM = {
				add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
				random_owned_controlled_state = {
					limit = {
						is_core_of = PREV
						free_building_slots = { building = infrastructure size > 0  }
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = PREV
						free_building_slots = { building = infrastructure size > 0  }
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	minor_railroad_investment = {
		icon = GFX_decision_train

		allowed = { always = no }

		available = {
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			is_faction_leader = yes
			FROM = {
				is_working_with_JAP = yes
				exists = yes
				NOT = {
					has_war_with = JAP
					CHN = { is_ally_with = ROOT }
				}
				any_owned_state = {
					is_core_of = PREV
					free_building_slots = { building = infrastructure size > 0  }
				}
			}
		}

		modifier = {
			civilian_factory_use = 1
		}
		cost = 20
		ai_will_do = {
			base = 0
			modifier = {
				FROM = {
					AND = {
						OR = {
							is_in_faction_with = JAP
							is_in_faction_with = FNG
						}
						NOT = {
							has_war_with = JAP
						}
					}
				}
				add = 5
			}
			modifier = {
				factor = 0
				has_political_power < 50
			}
		}
		days_remove = 40
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove minor_railroad_investment target: [From.GetName]"
			FROM = {
				ROOT = { activate_targeted_decision = { target = PREV decision = major_railroad_investment } }
				add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
				random_owned_controlled_state = {
					limit = {
						is_core_of = PREV
						free_building_slots = { building = infrastructure size > 0  }
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	harbin_chemical_research = {
		icon = GFX_decision_generic_construction

		allowed = { always = no }

		available = {
			885 = {
				is_owned_and_controlled_by = FNG
			}
			has_tech = synth_oil_experiments
			num_of_civilian_factories_available_for_projects > 2
		}
		visible = {
			FNG_JAP_hostile = no
			FNG = {
				owns_state = 885
				NOT = {
					has_war_with = JAP
				}
			}
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 5
				FNG = { is_in_faction_with = JAP }
			}
		}
		modifier = {
			civilian_factory_use = 3
		}
		days_remove = 100
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove harbin_chemical_research"
			FNG = {
				if = {
					limit = {
						NOT = {
							has_tech = synth_oil_experiments
						}
					}
					set_technology = { synth_oil_experiments = 1 }
				}
				885 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
				add_popularity = {
					ideology = market_liberal
					popularity = 0.03
				}
			}
		}
	}

	changchun_industry_investment = {
		icon = GFX_decision_generic_industry

		allowed = { always = no }

		available = {
			886 = {
				is_owned_and_controlled_by = FNG
			}
			num_of_civilian_factories_available_for_projects > 8
		}
		visible = {
			FNG_JAP_hostile = no
			FNG = {
				owns_state = 886
				NOT = { has_war_with = JAP }
			}
		}
		cost = 100
		ai_will_do = { factor = 10 }
		modifier = {
			civilian_factory_use = 8
		}
		days_remove = 150
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove changchun_industry_investment"
			FNG = {
				886 = {
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				}
			}
			FNG = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.05
				}
			}
		}
	}
}

JAP_economy_cat = {
	# Activated by JAP_create_five_year_plan
	JAP_support_yokohama_auto_industries = {
		icon = GFX_decision_factories

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 282 }
		}

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 25
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_yokohama_auto_industries"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_yokohama_auto_industries"
			282 = { prioritize_state = yes } # Tokyo
			add_one_random_civilian_factory = yes
		}
	}

	JAP_support_ota_jidosha = {
		icon = GFX_decision_factories

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 533 }
		}

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 25
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_ota_jidosha"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_ota_jidosha"
			533 = { prioritize_state = yes } # South Tohoku
			add_one_random_civilian_factory = yes
		}
	}

	JAP_support_kurasiki_kensyoku = {
		icon = GFX_decision_factories

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 531 }
		}

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 25
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_kurasiki_kensyoku"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_kurasiki_kensyoku"
			531 = { prioritize_state = yes } # Kansai
			add_one_random_civilian_factory = yes
		}
	}

	JAP_support_mitsubishi = {
		icon = GFX_decision_generic_merge_plant_aircraft

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 1104 }
		}

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_mitsubishi"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_mitsubishi"
			1104 = { prioritize_state = yes } # Hyogo
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
	}

	JAP_subisidies_for_nakajima = {
		icon = GFX_decision_ger_military_buildup

		allowed = { always = no }

		highlight_states = {
			highlight_state_targets = { state = 528 }
		}

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_subisidies_for_nakajima"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_subisidies_for_nakajima"
			528 = { prioritize_state = yes } # North Kyushu
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
	}

	# Activated by JAP_ties_to_the_zaibatsu
	JAP_support_nissan = {
		icon = GFX_decision_ger_military_buildup
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_nissan"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_nissan"
			282 = { prioritize_state = yes } # Tokyo
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
	}

	JAP_industrial_partnership_with_sumitomo = {
		icon = GFX_decision_ger_military_buildup
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_industrial_partnership_with_sumitomo"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_industrial_partnership_with_sumitomo"
			282 = { prioritize_state = yes } # Tokyo
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
	}

	JAP_support_nichitsu_expansion = {
		icon = GFX_decision_generic_construction
		allowed = { always = no }

		available = {
			has_tech = synth_oil_experiments
			num_of_civilian_factories_available_for_projects > 2
			527 = { is_owned_by_ROOT_or_subject = yes }
			525 = { is_owned_by_ROOT_or_subject = yes }
		}

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		cancel_trigger = {
			NOT = {
				OR = {
					527 = { is_owned_by_ROOT_or_subject = yes }
					525 = { is_owned_by_ROOT_or_subject = yes }
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_nichitsu_expansion"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_nichitsu_expansion"
			527 = { # Yangseo
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
			525 = { # Gwanbuk
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}
	}

	# Activated by JAP_foster_technological_innovation
	JAP_back_isuzu = {
		icon = GFX_decision_generic_motorized
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 10 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_back_isuzu"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_back_isuzu"
			528 = { prioritize_state = yes } # North Kyushu
			add_one_random_military_factory = yes
			add_tech_bonus = {
				name = JAP_back_isuzu
				bonus = 0.75
				uses = 1
				category = cat_mechanized_equipment
			}
		}
	}

	JAP_aid_toyo_rayon = {
		icon = GFX_decision_generic_construction
		allowed = { always = no }

		available = {
			num_of_civilian_factories_available_for_projects > 2
			has_tech = synth_oil_experiments
		}

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_aid_toyo_rayon"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_aid_toyo_rayon"
			531 = { prioritize_state = yes } # Kansai
			add_one_random_synthetic_refinery = yes
			add_one_random_synthetic_refinery = yes
		}
	}

	JAP_fund_nec_plant = {
		icon = GFX_decision_electrify
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 40
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_fund_nec_plant"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_fund_nec_plant"
			1101 = { prioritize_state = yes } # North Kanto
			add_one_random_civilian_factory = yes
			add_tech_bonus = {
				name = JAP_fund_nec_plant
				bonus = 0.5
				uses = 2
				category = electronics
			}
		}
	}

	JAP_invest_in_mitsui = {
		icon = GFX_decision_factories
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 1 }

		cost = 40
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_mitsui"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_invest_in_mitsui"
			1104 = { prioritize_state = yes } # Hyogo
			add_one_random_civilian_factory = yes
			add_tech_bonus = {
				name = JAP_invest_in_mitsui
				bonus = 0.5
				uses = 1
				category = cat_production
			}
		}
	}

	JAP_kawasaki_aircraft_plant = {
		icon = GFX_decision_generic_merge_plant_aircraft
		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_kawasaki_aircraft_plant"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_kawasaki_aircraft_plant"
			532 = { prioritize_state = yes } # Tokai
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
			air_experience = 25
		}
	}

	JAP_aid_for_chugoku_arms_industries = {
		icon = GFX_decision_ger_military_buildup

		allowed = { always = no }

		available = { num_of_civilian_factories_available_for_projects > 2 }

		cost = 40
		fire_only_once = yes

		days_remove = 90

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_aid_for_chugoku_arms_industries"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_aid_for_chugoku_arms_industries"
			529 = { prioritize_state = yes } # San'yo
			1103 = { prioritize_state = yes } # San'in
			add_one_random_military_factory = yes
			add_one_random_military_factory = yes
		}
	}

	# Activated by JAP_prioritise_military_oil
	JAP_support_nippon_soda = {
		icon = GFX_decision_generic_construction

		allowed = { always = no }

		state_target = yes

		available = {
			num_of_civilian_factories_available_for_projects > 2
			has_tech = synth_oil_experiments
		}

		cost = 40
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		modifier = { civilian_factory_use = 3 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_support_nippon_soda target: [From.GetName]"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_support_nippon_soda target: [From.GetName]"
			532 = { prioritize_state = yes } # Tokai
			add_one_random_synthetic_refinery = yes
			add_one_random_synthetic_refinery = yes
		}
	}

	# Activated by JAP_scrap_and_build_program
	JAP_expand_tamano_shipyards = {
		icon = GFX_decision_generic_naval

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			controls_state = 529
		}

		highlight_states = {
			highlight_state_targets = { state = 529 } # Chugoku
		}

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		priority = 50

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_expand_tamano_shipyards"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_expand_tamano_shipyards"
			529 = { prioritize_state = yes }
			add_one_random_dockyard = yes
		}
	}
	JAP_expand_kure_naval_arsenal = {
		icon = GFX_decision_generic_naval

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			controls_state = 529
		}

		highlight_states = {
			highlight_state_targets = { state = 529 } # Chugoku
		}

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		priority = 50

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_expand_kure_naval_arsenal"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_expand_kure_naval_arsenal"
			529 = { prioritize_state = yes }
			add_one_random_dockyard = yes
		}
	}
	JAP_expand_yokosuka_naval_arsenal = {
		icon = GFX_decision_generic_naval

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			controls_state = 282
		}

		highlight_states = {
			highlight_state_targets = { state = 282 } # Kanto
		}

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		priority = 50

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_expand_yokosuka_naval_arsenal"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_expand_yokosuka_naval_arsenal"
			282 = { prioritize_state = yes }
			add_one_random_dockyard = yes
		}
	}
	JAP_expand_sasebo_naval_arsenal = {
		icon = GFX_decision_generic_naval

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			controls_state = 528
		}

		highlight_states = {
			highlight_state_targets = { state = 528 } # Kyushu
		}

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		priority = 50

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_expand_sasebo_naval_arsenal"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_expand_sasebo_naval_arsenal"
			528 = { prioritize_state = yes }
			add_one_random_dockyard = yes
		}
	}
	JAP_expand_maizuru_naval_arsenal = {
		icon = GFX_decision_generic_naval

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			controls_state = 531
		}

		highlight_states = {
			highlight_state_targets = { state = 531 } # Kansai
		}

		cost = 30
		fire_only_once = yes

		days_remove = 60

		ai_will_do = { factor = 100 }

		priority = 50

		modifier = { civilian_factory_use = 2 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_expand_maizuru_naval_arsenal"
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_expand_maizuru_naval_arsenal"
			531 = { prioritize_state = yes }
			add_one_random_dockyard = yes
		}
	}

	## Navy; Activated by JAP_start_the_fourth_circle_plan
	JAP_complete_the_fourth_circle_plan = {
		icon = GFX_decision_generic_merge_plant_ship

		allowed = { always = no }

		available = {
			has_navy_size = {
				unit = battleship
				size > 7
			}
			has_navy_size = {
				unit = carrier
				size > 7
			}
			has_navy_size = {
				unit = battle_cruiser
				size > 5
			}
			has_navy_size = {
				unit = heavy_cruiser
				size > 19
			}
			has_navy_size = {
				unit = light_cruiser
				size > 19
			}
			has_navy_size = {
				unit = destroyer
				size > 149
			}
		}

		priority = 51
		days_mission_timeout = 1450
		is_good = no

		cancel_trigger = {
			is_puppet = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_complete_the_fourth_circle_plan"
			swap_ideas = {
				remove_idea = JAP_mass_shipbuilding_2
				add_idea = JAP_mass_shipbuilding_3
			}
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout JAP_complete_the_fourth_circle_plan"
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_complete_the_fourth_circle_plan"
		}
	}
}

JAP_co_prosperity_decisions = {
	JAP_invite_into_faction = {
		icon = generic_flags
		allowed = { tag = JAP }
		available = {
			has_capitulated = no
			FROM = {
				has_capitulated = no
				at_peace_or_same_enemies_as_ROOT = yes
				NOT = { is_guaranteed_by = GER }
			}
		}
		visible = {
			NOT = { has_war_with = FROM }
			FROM = {
				exists = yes
				is_in_faction = no
				is_subject = no
				NOT = { has_country_flag = JAP_invited_to_sphere }
			}
		}

		cost = 0
		fire_only_once = yes

		priority = 10
		target_array = global.JAP_possible_allies_array
		target_trigger = {
			FROM = {
				exists = yes
				is_in_faction = no
				is_subject = no
				NOT = { has_country_flag = JAP_invited_to_sphere }
				NOT = { original_tag = FNG } # Only joins through other means
			}
		}

		ai_will_do = { factor = 10 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invite_into_faction target: [From.GetName]"
			FROM = {
				set_country_flag = JAP_invited_to_sphere
				country_event = japfor.342
			}
		}
	}

	JAP_invite_into_economic_sphere = {
		icon = generic_agreement

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			FROM = { surrender_progress < 0.30 }
			NOT = { GER = { has_guaranteed = FROM } }
		}

		visible = {
			is_faction_leader = yes
			FROM = { japan_tag_can_be_invited_to_economic_sphere = yes }
		}

		cost = 25
		fire_only_once = no

		priority = 5
		targets = { ANQ AST BRM CAM CEY ETS MAN GXC HAW INC INS KAC KOR LAO LEC MLY MON NZL PHI PNG SAR SHA SHX SIA SQI SZC TIB TRM XSM VIN NEP AFG ALO TRK BUK UZB }
		target_array = subjects
		target_array = faction_members
		target_array = global.indian_tags_array
		target_root_trigger = { has_completed_focus = JAP_osaka_conference }
		target_trigger = {
			is_faction_leader = yes
			FROM = { japan_tag_can_be_invited_to_economic_sphere = yes }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invite_into_economic_sphere target: [From.GetName]"
			FROM = {
				set_country_flag = JAP_was_invited_into_sphere
				country_event = { id = japfor.401 days = 2 }
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				FROM = {
					NOT = { is_in_faction_with = ROOT }
					any_owned_state = { is_claim_or_core_of_ROOT = yes }
				}
			}
			modifier = {
				factor = 0
				FROM = { NOT = { has_country_flag = tokyo_conference_trade_ally } }
				is_in_array = { global.JAP_possible_allies_array = FROM }
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = { is_subject_of = ROOT }
					is_in_faction_with = ROOT
				}
			}
			modifier = {
				factor = 5
				FROM = {
					OR = {
						is_subject_of = ROOT
						has_country_flag = tokyo_conference_trade_ally
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_invest_in_sphere_member1 = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			num_of_controlled_factories > FROM.num_of_controlled_factories
			FROM = {
				surrender_progress < 0.30
				NOT = { has_country_flag = JAP_invest_timer }
			}
		}

		visible = {
			FROM = {
				is_subject = no
				NOT = {
					has_idea = JAP_member_integration_1
					has_idea = JAP_member_integration_2
					has_idea = JAP_member_integration_3
				}
			}
		}

		cost = JAP_eco_cost_1
		fire_only_once = no

		priority = 1
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_integrate_asian_economies }
		target_trigger = {
			FROM = {
				is_subject = no
				NOT = {
					has_idea = JAP_member_integration_1
					has_idea = JAP_member_integration_2
					has_idea = JAP_member_integration_3
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_member1 target: [From.GetName]"
			FROM = {
				set_country_flag = { flag = JAP_invest_timer days = 365 value = 1 }
				effect_tooltip = { add_ideas = JAP_member_integration_1 }
				country_event = japfor.405
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_invest_in_sphere_member2 = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			set_temp_variable = { from_fact = FROM.num_of_controlled_factories }
			multiply_temp_variable = { from_fact = 2 }
			num_of_controlled_factories > from_fact
			FROM = {
				surrender_progress < 0.30
				NOT = { has_country_flag = JAP_invest_timer }
			}
		}

		visible = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_1
			}
		}

		cost = JAP_eco_cost_1
		fire_only_once = no

		priority = 2
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_integrate_asian_economies }
		target_trigger = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_1
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_member2 target: [From.GetName]"
			FROM = {
				set_country_flag = { flag = JAP_invest_timer days = 365 value = 1 }
				effect_tooltip = {
					swap_ideas = {
						remove_idea = JAP_member_integration_1
						add_idea = JAP_member_integration_2
					}
				}
				country_event = japfor.405
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_invest_in_sphere_member3 = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			set_temp_variable = { from_fact = FROM.num_of_controlled_factories }
			multiply_temp_variable = { from_fact = 3 }
			num_of_controlled_factories > from_fact
			FROM = {
				surrender_progress < 0.30
				NOT = { has_country_flag = JAP_invest_timer }
			}
		}

		visible = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_2
			}
		}

		cost = JAP_eco_cost_1
		fire_only_once = no

		priority = 3
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_integrate_asian_economies }
		target_trigger = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_2
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_member3 target: [From.GetName]"
			FROM = {
				set_country_flag = { flag = JAP_invest_timer days = 365 value = 1 }
				effect_tooltip = {
					swap_ideas = {
						remove_idea = JAP_member_integration_2
						add_idea = JAP_member_integration_3
					}
				}
				country_event = japfor.405
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_economic_sphere_takeover = {
		icon = oppression

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			set_temp_variable = { from_fact = FROM.num_of_controlled_factories }
			multiply_temp_variable = { from_fact = 3 }
			num_of_controlled_factories > from_fact
			FROM = {
				surrender_progress < 0.30
				NOT = { has_country_flag = JAP_invest_timer }
			}
		}

		visible = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_3
			}
		}

		cost = JAP_eco_cost_2
		fire_only_once = no

		priority = 4
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_integrate_asian_economies }
		target_trigger = {
			FROM = {
				is_subject = no
				has_idea = JAP_member_integration_3
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_economic_sphere_takeover target: [From.GetName]"
			effect_tooltip = { puppet = FROM }
			FROM = { country_event = japfor.407 }
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_invest_in_sphere_member_docks = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			num_of_naval_factories > FROM.num_of_naval_factories
			FROM = {
				surrender_progress < 0.30
				num_of_naval_factories > 0
				NOT = { has_country_flag = JAP_invest_timer }
			}
		}

		cost = 50
		fire_only_once = yes

		priority = 1
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_copro_development_plan }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_member_docks target: [From.GetName]"
			FROM = {
				set_country_flag = { flag = JAP_invest_timer days = 365 value = 1 }
				set_country_flag = JAP_invest_docks
				country_event = japfor.420
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
			modifier = {
				factor = 0.5
				FROM = { num_of_civilian_factories < 4 }
			}
			modifier = {
				factor = 3
				FROM = { num_of_civilian_factories > 6 }
			}
		}
	}

	JAP_invest_in_sphere_naval_advisors = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			FROM = {
				surrender_progress < 0.30
				num_of_naval_factories > 0
			}
		}

		cost = 20
		fire_only_once = yes

		priority = 1
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_naval_engineering_assistance }
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_naval_advisors target: [From.GetName]"
			FROM = {
				country_event = japfor.421
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
		}
	}

	JAP_invest_in_sphere_prosperity_ships = {
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			FROM = {
				surrender_progress < 0.30
				num_of_naval_factories > 0
			}
		}

		cost = 20
		fire_only_once = yes

		priority = 1
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_prosperity_ships }
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_prosperity_ships target: [From.GetName]"
			FROM = {
				country_event = japfor.422
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				FROM = { tag = SIA }
			}
			modifier = {
				factor = 2
				FROM = { is_in_faction_with = ROOT }
			}
		}
	}

	JAP_invest_in_sphere_take_dockyards = { #took over dockyards
		icon = hol_attract_foreign_investors

		allowed = { tag = JAP }

		available = {
			surrender_progress < 0.30
			FROM = {
				OR = {
					is_subject_of = ROOT
					surrender_progress < 0.30
				}
				num_of_naval_factories > 2
				NOT = { has_country_flag = JAP_refused_dockyards }
			}
		}

		visible = {
			FROM = {
				has_country_flag = JAP_invest_docks
			}
		}

		days_remove = 365
		cost = 50

		priority = 1
		target_array = global.asian_economic_sphere
		target_root_trigger = { has_completed_focus = JAP_unified_production }
		target_trigger = {
			FROM = {
				has_country_flag = JAP_invest_docks
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invest_in_sphere_take_dockyards target: [From.GetName]"
			add_offsite_building = { type = dockyard level = 3 }
			FROM = {
				country_event = japfor.423
				effect_tooltip = {
					random_owned_controlled_state = {
						limit = {
							is_core_of = ROOT
							dockyard > 0
						}
						add_to_variable = { JAP_dockyards_under_japanese_control = 1 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
					random_owned_controlled_state = {
						limit = {
							is_core_of = ROOT
							dockyard > 0
						}
						add_to_variable = { JAP_dockyards_under_japanese_control = 1 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
					random_owned_controlled_state = {
						limit = {
							is_core_of = ROOT
							dockyard > 0
						}
						add_to_variable = { JAP_dockyards_under_japanese_control = 1 }
						remove_building = {
							type = dockyard
							level = 1
						}
					}
				}
			}
		}

		remove_trigger = {
			NOT = { is_in_faction_with = FROM }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_invest_in_sphere_take_dockyards target: [From.GetName]"
			add_offsite_building = { type = dockyard level = -3 }
			FROM = {
				country_event = japfor.424
				effect_tooltip = {
					every_owned_state = {
						limit = { has_variable = JAP_dockyards_under_japanese_control }
						add_building_construction = {
							type = dockyard
							level = var:JAP_dockyards_under_japanese_control
							instant_build = yes
						}
						clear_variable = JAP_dockyards_under_japanese_control
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				any_enemy_country = { num_of_naval_factories > ROOT.num_of_naval_factories }
			}
		}
	}
}

JAP_long_war_cat = { #Long War decisions
	JAP_development_target = {
		icon = GFX_decision_generic_factory

		allowed = { always = no }

		priority = 998

		days_mission_timeout = 486

		is_good = no

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout JAP_development_target"
			add_to_variable = { JAP_long_war_plan_year = 1 }
			hidden_effect = {
				if = {
					limit = { check_variable = { JAP_long_war_plan_year < 5 } }
					activate_mission = JAP_development_target
				}
				else = {
					set_country_flag = JAP_lw_plans_complete
				}
			}
		}
	}
	JAP_modernization_complete = {
		icon = GFX_decision_eng_trade_unions_demand

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
		}

		available = {
			has_country_flag = JAP_war_ready_industries_3_complete
			has_country_flag = JAP_war_ready_soldiers_3_complete
			has_country_flag = JAP_war_ready_equipment_3_complete
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_modernization_complete"
			hidden_effect = {
				remove_ideas = {
					JAP_equipment_lw_3
					JAP_research_modernisation_lw_3
					JAP_staff_modernisation_lw_3
				}
				add_ideas = JAP_long_war_army_lw
			}
			custom_effect_tooltip = JAP_merge_into_modern_army
		}
	}
	JAP_war_ready_industries_1 = {
		icon = GFX_decision_generic_research

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
		}

		available = {
			num_of_military_factories > 21
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_industries_1"
			set_country_flag = JAP_war_ready_industries_1_complete
			add_ideas = JAP_research_modernisation_lw_1
		}
	}
	JAP_war_ready_industries_2 = {
		icon = GFX_decision_generic_research

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_industries_1_complete
		}

		available = {
			num_of_military_factories > 26
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_industries_2"
			set_country_flag = JAP_war_ready_industries_2_complete
			swap_ideas = {
				remove_idea = JAP_research_modernisation_lw_1
				add_idea = JAP_research_modernisation_lw_2
			}
		}
	}
	JAP_war_ready_industries_3 = {
		icon = GFX_decision_generic_research

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_industries_2_complete
		}

		available = {
			num_of_military_factories > 38
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_industries_3"
			set_country_flag = JAP_war_ready_industries_3_complete
			swap_ideas = {
				remove_idea = JAP_research_modernisation_lw_2
				add_idea = JAP_research_modernisation_lw_3
			}
		}
	}
	JAP_war_ready_soldiers_1 = {
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
		}

		available = {
			set_temp_variable = { JAP_mil_foci_to_do = 4 }
			custom_trigger_tooltip = {
				check_variable = {
					var = JAP_compled_mil_focuses
					value = JAP_mil_foci_to_do
					compare = greater_than_or_equals
				}
				tooltip = JAP_has_completed_x_mil
			}
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_soldiers_1"
			set_country_flag = JAP_war_ready_soldiers_1_complete
			add_ideas = JAP_staff_modernisation_lw_1
		}
	}
	JAP_war_ready_soldiers_2 = {
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_soldiers_1_complete
		}

		available = {
			set_temp_variable = { JAP_mil_foci_to_do = 8 }
			custom_trigger_tooltip = {
				check_variable = {
					var = JAP_compled_mil_focuses
					value = JAP_mil_foci_to_do
					compare = greater_than_or_equals
				}
				tooltip = JAP_has_completed_x_mil
			}
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_soldiers_2"
			set_country_flag = JAP_war_ready_soldiers_2_complete
			swap_ideas = {
				remove_idea = JAP_staff_modernisation_lw_1
				add_idea = JAP_staff_modernisation_lw_2
			}
		}
	}
	JAP_war_ready_soldiers_3 = {
		icon = GFX_decision_hol_draw_up_staff_plans

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_soldiers_2_complete
		}

		available = {
			set_temp_variable = { JAP_mil_foci_to_do = 12 }
			custom_trigger_tooltip = {
				check_variable = {
					var = JAP_compled_mil_focuses
					value = JAP_mil_foci_to_do
					compare = greater_than_or_equals
				}
				tooltip = JAP_has_completed_x_mil
			}
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_soldiers_3"
			set_country_flag = JAP_war_ready_soldiers_3_complete
			swap_ideas = {
				remove_idea = JAP_staff_modernisation_lw_2
				add_idea = JAP_staff_modernisation_lw_3
			}
		}
	}
	JAP_war_ready_equipment_1 = {
		icon = GFX_decision_generic_industry

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
		}

		available = {
			custom_trigger_tooltip = {
				has_tech = support_weapons
				tooltip = JAP_has_researched_support_weapons
			}
			has_tech = interwar_artillery
			has_tech = tech_logistics_company
			has_tech = radio
			land_doctrine_level > 0
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_equipment_1"
			set_country_flag = JAP_war_ready_equipment_1_complete
			add_ideas = JAP_equipment_lw_1
		}
	}
	JAP_war_ready_equipment_2 = {
		icon = GFX_decision_generic_industry

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_equipment_1_complete
		}

		available = {
			custom_trigger_tooltip = {
				has_tech = infantry_weapons2
				tooltip = JAP_has_researched_infantry_weapons2
			}
			has_template_containing_unit = artillery_brigade
			if = {
				limit = { has_dlc_nsb = yes }
				has_tech = basic_medium_tank_chassis
			}
			else = {
				custom_trigger_tooltip = {
					has_tech = basic_medium_tank
					tooltip = JAP_has_researched_basic_medium_tank
				}
			}
			land_doctrine_level > 3
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_equipment_2"
			set_country_flag = JAP_war_ready_equipment_2_complete
			swap_ideas = {
				remove_idea = JAP_equipment_lw_1
				add_idea = JAP_equipment_lw_2
			}
		}
	}
	JAP_war_ready_equipment_3 = {
		icon = GFX_decision_generic_industry

		allowed = { tag = JAP }

		visible = {
			has_completed_focus = JAP_long_war_doctrine
			has_country_flag = JAP_war_ready_equipment_2_complete
		}

		available = {
			custom_trigger_tooltip = {
				has_tech = improved_infantry_weapons
				tooltip = JAP_has_researched_improved_infantry_weapons
			}
			custom_trigger_tooltip = {
				has_tech = artillery2
				tooltip = JAP_has_researched_artillery1
			}
			custom_trigger_tooltip = {
				has_tech = mechanised_infantry
				tooltip = JAP_has_researched_mechanised_infantry
			}
			land_doctrine_level > 6
		}

		ai_will_do = { factor = 1000 }

		priority = 101

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_ready_equipment_3"
			set_country_flag = JAP_war_ready_equipment_3_complete
			swap_ideas = {
				remove_idea = JAP_equipment_lw_2
				add_idea = JAP_equipment_lw_3
			}
		}
	}
}

JAP_short_war_cat = { # Short war decisions
	JAP_war_planning_against_from = {
		icon = GFX_decision_hol_draw_up_staff_plans

		visible = {
			has_completed_focus = JAP_short_war_doctrine
			NOT = {
				FROM = { is_ally_of_ROOT = yes }
				FROM = { has_war_with = ROOT }
				check_variable = { JAP_preparing_war_plan_var = 1 }
			}
		}

		highlight_states = {
			highlight_state_targets = { state = FROM.Capital }
		}

		custom_cost_text = JAP_CP_cost_tt
		custom_cost_trigger = {
			if = {
				limit = { has_completed_focus = JAP_plan_edit_1 }
				command_power > 19
			}
			else = { command_power > 49 }
		}

		ai_will_do = { factor = 10 }

		priority = 100

		on_map_mode = map_only

		cancel_trigger = {
			OR = {
				FROM = { is_ally_of_ROOT = yes }
				FROM = { has_war_with = ROOT }
				FROM = { has_capitulated = yes }
			}
		}

		target_trigger = {
			FROM = {
				OR = {
					tag = PHI
					tag = SIA
					tag = AST
					tag = GEA
					AND = {
						is_chinese_tag = yes
						any_owned_state = { is_coastal = yes }
					}
					AND = {
						is_indian_tag = yes
						owns_state = 427 #Hyderabad
						owns_state = 431 #West Bengal
						owns_state = 433 #Rajputana
					}
					AND = {
						is_russian_tag = yes
						owns_state = 219 #Moscow
					}
					AND = {
						owns_state = 361 #Maryland
						is_american_tag = yes
					}
					AND = {
						owns_state = 1020 #Residency of Batavia
						OR = {
							original_tag = HOL
							original_tag = DEI
							original_tag = INS
						}
					}
				}
			}
		}

		days_remove = JAP_sw_warplan_research_time?365
		fire_only_once = yes

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_war_planning_against_from target: [From.GetName]"
			clear_variable = JAP_preparing_war_plan_var
			if = {
				limit = { has_completed_focus = JAP_plan_edit_1 }
				add_command_power = 20
			}
			else = { add_command_power = 50 }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_war_planning_against_from target: [From.GetName]"
			set_variable = { JAP_preparing_war_plan_var = 1 }
			if = {
				limit = { has_completed_focus = JAP_plan_edit_1 }
				add_command_power = -20
			}
			else = { add_command_power = -50 }
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_war_planning_against_from target: [From.GetName]"
			clear_variable = JAP_preparing_war_plan_var
			activate_targeted_decision = { target = FROM decision = JAP_strike_against_from_i }
			hidden_effect = {
				activate_targeted_decision = { target = FROM decision = JAP_strike_against_from_ii }
			}
			custom_effect_tooltip = JAP_decision_unlocked_during_war
			custom_effect_tooltip = tooltip_white_line
		}
	}
	JAP_strike_against_from_i = {
		name = JAP_strike_against_from
		icon = GFX_decision_generic_ignite_civil_war

		allowed = { always = no }

		visible = {
			NOT = { has_completed_focus = JAP_plan_edit_3 }
			has_war_with = FROM
		}

		ai_will_do = { factor = 1000 }

		priority = 100

		targeted_modifier = {
			tag = FROM
			attack_bonus_against = 0.1
			breakthrough_bonus_against = 0.1
		}

		days_remove = JAP_sw_length_var?365
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_strike_against_from_i target: [From.GetName]"
		}
	}
	JAP_strike_against_from_ii = {
		name = JAP_strike_against_from
		icon = GFX_decision_generic_ignite_civil_war

		allowed = { always = no }

		visible = {
			has_completed_focus = JAP_plan_edit_3
			has_war_with = FROM
		}

		ai_will_do = { factor = 1000 }

		priority = 100

		targeted_modifier = {
			tag = FROM
			attack_bonus_against = 0.15
			breakthrough_bonus_against = 0.15
		}

		days_remove = JAP_sw_length_var?365
		fire_only_once = yes

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_strike_against_from_ii target: [From.GetName]"
			if = {
				limit = { has_dlc_lar = yes }
				add_intel = {
					target = FROM
					army_intel = 15
				}
			}
			else = {
				add_decryption = {
					target = FROM
					ratio = 0.15
				}
			}
		}
	}

	JAP_battle_for_production = {
		icon = GFX_decision_generic_prepare_civil_war

		allowed = { always = no }

		cost = 50
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		priority = 99

		modifier = {
			industrial_capacity_factory = 0.10
			industrial_capacity_dockyard = 0.10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_battle_for_production"
		}
	}
	JAP_battle_for_morale = {
		icon = GFX_decision_generic_prepare_civil_war

		allowed = { always = no }

		cost = 50
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		priority = 99

		modifier = {
			command_power_gain = 0.5
			breakthrough_factor = 0.1
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_battle_for_morale"
		}
	}
	JAP_battle_for_defence = {
		icon = GFX_decision_generic_prepare_civil_war

		allowed = { always = no }

		cost = 50
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		priority = 99

		modifier = {
			army_defence_factor = 0.10
			dig_in_speed_factor = 0.25
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_battle_for_defence"
		}
	}
	JAP_battle_for_the_skies = {
		icon = GFX_decision_generic_prepare_civil_war

		allowed = { always = no }

		cost = 50
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		priority = 99

		modifier = {
			army_bonus_air_superiority_factor = 0.20
			air_superiority_efficiency = 0.10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_battle_for_the_skies"
		}
	}
	JAP_battle_for_harmony = {
		icon = GFX_decision_generic_prepare_civil_war

		allowed = { always = no }

		cost = 50
		fire_only_once = yes

		days_remove = 100

		ai_will_do = { factor = 100 }

		priority = 99

		modifier = {
			stability_weekly = 0.005
			consumer_goods_factor = -0.05
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_battle_for_harmony"
		}
	}
}

JAP_co_prosperity_member_decisions = {
	JAP_join_rikagaku_kenkyusho = {
		icon = generic_research

		allowed = {
			NOT = {
				tag = JAP
				tag = GER #always hostile
				tag = MAF
				tag = GEA
				tag = BAT
				tag = RUS
				tag = FRA
				tag = ENG
				tag = CSA
				tag = SRI
				tag = CNT
				tag = SOV
				tag = FOP
				tag = BHC
				tag = USA #can't join
				tag = TEX
				tag = NEE
				tag = DEH
				tag = DEI
			}
			OR = {
				tag = FNG
				original_tag = GXC
				tag = SQI
				is_chinese_tag = no #others can't join
			}
		}

		targets = { JAP }
		target_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_country_flag = JAP_economic_sphere_member
			}
			NOT = { is_in_tech_sharing_group = japan_research }
			FROM = {
				is_in_tech_sharing_group = japan_research
				is_faction_leader = yes
			}
		}

		fire_only_once = yes
		cost = 0

		ai_will_do = { factor = 100 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_join_rikagaku_kenkyusho target: [From.GetName]"
			add_to_tech_sharing_group = japan_research
		}
	}

	JAP_request_nav_advisors = {
		icon = generic_research

		allowed = {
			NOT = {
				tag = JAP
				tag = GER #always hostile
				tag = MAF
				tag = GEA
				tag = BAT
				tag = RUS
				tag = FRA
				tag = ENG
				tag = CSA
				tag = SRI
				tag = CNT
				tag = SOV
				tag = FOP
				tag = BHC
				tag = USA #can't join
				tag = TEX
				tag = NEE
				tag = DEH
				tag = DEI
			}
			OR = {
				tag = FNG
				original_tag = GXC
				tag = SQI
				is_chinese_tag = no #others can't join
			}
		}

		targets = { JAP }
		target_root_trigger = {
			JAP = { has_completed_focus = JAP_naval_engineering_assistance }
			num_of_naval_factories > 0
		}
		target_trigger = {
			OR = {
				is_in_faction_with = FROM
				has_country_flag = JAP_economic_sphere_member
			}
			FROM = { is_faction_leader = yes }
			NOT = { has_war_with = FROM }
		}

		cost = 20
		fire_only_once = yes

		ai_will_do = { factor = 10 }

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_request_nav_advisors target: [From.GetName]"
			JAP = { country_event = japfor.425 }
		}
	}

	JAP_withdraw_from_alliance = {
		icon = generic_army_support

		allowed = {
			NOT = { tag = JAP }
		}

		available = {
			has_war = no
			is_subject = no
		}

		visible = {
			is_ai = no
			is_in_faction_with = JAP
			JAP = { is_faction_leader = yes }
			NOT = {
				OR = {
					has_country_leader = {
						name = "Yang Yuting "
						ruling_only = yes
					}
					has_country_leader = {
						name = "Yang Yuting"
						ruling_only = yes
					}
				}
			}
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_withdraw_from_alliance"
			JAP = {
				effect_tooltip = { remove_from_faction = ROOT }
				add_opinion_modifier = { target = ROOT modifier = KR_hates_govt }
				country_event = japfor.408
			}
		}

		ai_will_do = { base = 0 }
	}

	JAP_withdraw_from_sphere = {
		icon = generic_break_treaty

		allowed = {
			NOT = { tag = JAP }
		}

		available = {
			is_subject = no
			if = {
				limit = { has_war = yes }
				controls_all_owned_states = yes
			}
		}

		visible = {
			has_country_flag = JAP_economic_sphere_member
			NOT = {
				has_idea = JAP_member_integration_1
				has_idea = JAP_member_integration_2
				has_idea = JAP_member_integration_3
			}
		}

		cost = 50
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_withdraw_from_sphere"
			custom_effect_tooltip = JAP_withdraws_from_sphere
			hidden_effect = { country_event = japfor.404 }
			JAP = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
				country_event = japfor.409
			}
			remove_ideas = JAP_nav_tra_idea
		}

		ai_will_do = { base = 0 }
	}

	JAP_nationalize_japanese_investments = {
		icon = generic_break_treaty

		allowed = {
			NOT = { tag = JAP }
		}

		available = {
			is_subject = no
			if = {
				limit = { has_war = yes }
				controls_all_owned_states = yes
			}
		}

		visible = {
			has_country_flag = JAP_economic_sphere_member
			OR = {
				has_idea = JAP_member_integration_1
				has_idea = JAP_member_integration_2
				has_idea = JAP_member_integration_3
			}
		}

		cost = JAP_investment_buyout?100
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_nationalize_japanese_investments"
			custom_effect_tooltip = JAP_withdraws_from_sphere
			hidden_effect = { country_event = japfor.404 }
			JAP = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
				country_event = { id = japfor.410 days = 1 }
			}
		}

		ai_will_do = { base = 0 }
	}
}

JAP_foreign_policy_decisions = {
	JAP_threaten_philippines = {
		icon = generic_tank
		allowed = { always = no }

		visible = {
			can_declare_war_on = FROM
			NOT = {
				has_country_flag = JAP_has_threatened_philippines
				FROM = { has_country_flag = JAP_economic_sphere_member }
			}
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				is_in_array = { global.JAP_possible_allies_array = FROM }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						any_home_area_neighbor_country = {
							is_owner_neighbor_of = PREV
							is_ally_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_threaten_philippines target: [From.GetName]"
			FROM = {
				country_event = japfor.55
			}
		}
	}

	JAP_attack_indochina = {
		icon = generic_tank
		allowed = { always = no }

		visible = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = JAP_economic_sphere_member } }
		}

		cost = 25
		fire_only_once = yes
		days_remove = 30
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				is_in_array = { global.JAP_possible_allies_array = FROM }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						any_home_area_neighbor_country = {
							is_owner_neighbor_of = PREV
							is_ally_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { has_war_with = GER }
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
			modifier = {
				factor = 0
				FROM = { tag = INC }
				INC = { is_in_faction = no }
				NOT = { has_game_rule = { rule = INC_forpol option = DEFAULT } }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_attack_indochina target: [From.GetName]"
			clear_decision_attack_AI = yes
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_attack_indochina target: [From.GetName]"
			add_war_support = 0.05
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_attack_indochina target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	JAP_attack_siam = {
		icon = generic_tank
		allowed = { always = no }

		visible = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = JAP_economic_sphere_member } }
		}

		cost = 50
		fire_only_once = yes
		days_remove = 30
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				is_in_array = { global.JAP_possible_allies_array = FROM }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						any_home_area_neighbor_country = {
							is_owner_neighbor_of = PREV
							is_ally_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_attack_siam target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_attack_siam target: [From.GetName]"
			add_war_support = 0.05
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_attack_siam target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	JAP_attack_india = {
		icon = generic_tank
		allowed = { always = no }

		available = {
			OR = {
				is_neighbor_of = FROM
				any_allied_country = { is_neighbor_of = FROM }
				FROM = { any_owned_state = { is_coastal = yes } }
			}
		}

		visible = {
			can_declare_war_on = FROM
			NOT = { FROM = { has_country_flag = JAP_economic_sphere_member } }
		}

		cost = 50
		fire_only_once = yes
		days_remove = 30
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						original_tag = CEY
						any_home_area_neighbor_country = {
							is_owner_neighbor_of = PREV
							is_ally_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = { tag = BHU } # Ffs stop killing an observer tag
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_attack_india target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_attack_india target: [From.GetName]"
			add_war_support = 0.05
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_attack_india target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	JAP_attack_australia = {
		icon = generic_tank

		allowed = { always = no }

		available = {
			OR = {
				327 = { is_controlled_by_ROOT_or_ally = yes } #Luzon
				1020 = { is_controlled_by_ROOT_or_ally = yes } #Batavia
			}
		}

		visible = {
			can_declare_war_on = FROM
			FROM = {
				NOT = { has_country_flag = JAP_economic_sphere_member }
				NOT = { has_country_flag = AST_has_ties_with_japan }
			}
		}

		cost = 50
		fire_only_once = yes
		days_remove = 30
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_attack_australia target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_attack_australia target: [From.GetName]"
			add_war_support = 0.05
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_attack_australia target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}

	JAP_invade_manchuria = {
		icon = generic_tank
		allowed = { always = no }

		visible = {
			FROM = {
				exists = yes
				NOT = {
					has_war_with = JAP
					has_capitulated = yes
				}
			}
		}

		cost = 0
		days_remove = 30
		fire_only_once = yes
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				608 = {
					owner = {
						has_war_with = FROM
					}
				}
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 1.0 }
			}
			modifier = {
				factor = 0.1
				has_war = yes
				any_enemy_country = { is_actual_major = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_invade_manchuria target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_invade_manchuria target: [From.GetName]"
			add_war_support = 0.05
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_invade_manchuria target: [From.GetName]"
			clear_decision_attack_AI = yes
			clear_JAP_FNG_hostile_AI = yes
			if = {
				limit = { is_in_faction_with = FROM }
				remove_from_faction = FROM
			}
			if = {
				limit = { has_guaranteed = FROM }
				diplomatic_relation = {
					country = FROM
					relation = guarantee
					active = no
				}
			}
			if = {
				limit = { has_non_aggression_pact_with = FROM }
				diplomatic_relation = {
					country = FROM
					relation = non_aggression_pact
					active = no
				}
			}
			if = {
				limit = { has_military_access_to = FROM }
				diplomatic_relation = {
					country = FROM
					relation = military_access
					active = no
				}
			}
			if = {
				limit = { gives_military_access_to = FROM }
				FROM = {
					diplomatic_relation = {
						country = ROOT
						relation = military_access
						active = no
					}
				}
			}
			if = {
				limit = { FROM = { is_subject_of = ROOT } }
				set_autonomy = {
					target = FROM
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { is_in_faction_with = FROM }
				remove_from_faction = FROM
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			hidden_effect = {
				FROM = {
					country_event = fngconf.36
				}
			}
		}
	}

	JAP_demand_hawaii = {
		icon = GFX_decision_jap_pacific_guardian

		allowed = { tag = JAP }

		available = {
			can_declare_war_on = FROM
		}

		targets = { CSA NEE CAL TEX USA }
		target_trigger = {
			FROM = {
				is_american_tag = yes
				is_ally_of_ROOT = no
				owns_state = 629 #Hawaii
			}
			ROOT = { has_country_flag = JAP_has_claimed_pacific }
			has_global_flag = USA_civil_war_over_flag
		}

		cost = 35
		fire_only_once = yes
		days_remove = 15
		cancel_trigger = {
			FROM = {
				OR = {
					has_war_with = JAP
					is_ally_with = JAP
				}
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 0
				FROM = { tag = CAL }
				OR = {
					has_country_flag = ACW_supported_PSA
					has_game_rule = { rule = CAL_political option = CAL_POLITICAL_PATH_JAPAN }
					has_game_rule = { rule = CAL_political option = CAL_POLITICAL_PATH_AISO }
					has_game_rule = { rule = CAL_political option = CAL_POLITICAL_PATH_AISO_YAMAGUCHI }
				}			
			}
			modifier = {
				factor = 5
				GEA = { exists = no }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_demand_hawaii target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_demand_hawaii target: [From.GetName]"
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_demand_hawaii target: [From.GetName]"
			clear_decision_attack_AI = yes
			FROM = { country_event = japfor.316 }
			set_country_flag = JAP_demanding_hawaii_flag
		}
	}

	JAP_attack_russia = {
		icon = generic_tank

		allowed = { always = no }

		available = {
			can_declare_war_on = FROM
		}

		visible = {
			can_declare_war_on = FROM
		}

		cost = 50
		fire_only_once = yes
		days_remove = 30
		war_with_target_on_remove = yes
		cancel_if_not_visible = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					ROOT_is_threatened = yes
					FROM = { default_attack_AI_trigger_FROM = yes }
				}
			}
			modifier = {
				factor = 5
				FROM = { has_socialist_government = yes }
			}
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel JAP_attack_russia target: [From.GetName]"
			clear_decision_attack_AI = yes
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_attack_russia target: [From.GetName]"
			setup_decision_attack_AI = yes
			FROM = { incoming_war_notification_effect = yes }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_attack_russia target: [From.GetName]"
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

prospect_for_resources = {
	JAP_develop_chosen_tungsten_mines1 = {
		name = JAP_develop_chosen_tungsten_mines
		icon = tungsten

		highlight_states = {
			highlight_state_targets = { state = 527 }
		}

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 3
			controls_state = 527
			has_tech = excavation1
		}

		visible = {
			527 = {
				is_owned_by = ROOT
				NOT = { has_state_flag = JAP_chosen_tungsten_mines_developed1 }
			}
		}

		fire_only_once = yes

		cost = 40
		days_remove = 180

		modifier = {
			civilian_factory_use = 4
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_develop_chosen_tungsten_mines1"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_develop_chosen_tungsten_mines1"
			527 = {
				set_state_flag = JAP_chosen_tungsten_mines_developed1
				add_resource = {
					type = tungsten
					amount = 22
				}
			}
			activate_targeted_decision = { decision = JAP_develop_chosen_tungsten_mines2 target = JAP }
		}
		ai_will_do = { factor = 50 }
	}

	JAP_develop_chosen_tungsten_mines2 = {
		name = JAP_develop_chosen_tungsten_mines
		icon = tungsten

		highlight_states = {
			highlight_state_targets = { state = 527 }
		}

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 3
			controls_state = 527
			has_tech = excavation2
		}

		visible = {
			527 = {
				is_owned_by = ROOT
				has_state_flag = JAP_chosen_tungsten_mines_developed1
				NOT = { has_state_flag = JAP_chosen_tungsten_mines_developed2 }
			}
		}

		fire_only_once = yes

		cost = 40
		days_remove = 180

		modifier = {
			civilian_factory_use = 4
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_develop_chosen_tungsten_mines2"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_develop_chosen_tungsten_mines2"
			527 = {
				set_state_flag = JAP_chosen_tungsten_mines_developed2
				add_resource = {
					type = tungsten
					amount = 20
				}
			}
			activate_targeted_decision = { decision = JAP_develop_chosen_tungsten_mines3 target = JAP }
		}
		ai_will_do = { factor = 50 }
	}
	JAP_develop_chosen_tungsten_mines3 = {
		name = JAP_develop_chosen_tungsten_mines
		icon = tungsten

		highlight_states = {
			highlight_state_targets = { state = 527 }
		}

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 3
			controls_state = 527
			has_tech = excavation3
		}

		visible = {
			527 = {
				is_owned_by = ROOT
				has_state_flag = JAP_chosen_tungsten_mines_developed2
				NOT = { has_state_flag = JAP_chosen_tungsten_mines_developed3 }
			}
		}

		fire_only_once = yes

		cost = 40
		days_remove = 180

		modifier = {
			civilian_factory_use = 4
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_develop_chosen_tungsten_mines3"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_develop_chosen_tungsten_mines3"
			527 = {
				set_state_flag = JAP_chosen_tungsten_mines_developed3
				add_resource = {
					type = tungsten
					amount = 23
				}
			}
			activate_targeted_decision = { decision = JAP_develop_chosen_tungsten_mines4 target = JAP }
		}
		ai_will_do = { factor = 50 }
	}
	JAP_develop_chosen_tungsten_mines4 = {
		name = JAP_develop_chosen_tungsten_mines
		icon = tungsten

		highlight_states = {
			highlight_state_targets = { state = 527 }
		}

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 5
			controls_state = 527
			has_tech = excavation4
		}

		visible = {
			527 = {
				is_owned_by = ROOT
				has_state_flag = JAP_chosen_tungsten_mines_developed3
				NOT = { has_state_flag = JAP_chosen_tungsten_mines_developed4 }
			}
		}

		fire_only_once = yes

		cost = 60
		days_remove = 180

		modifier = {
			civilian_factory_use = 6
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_develop_chosen_tungsten_mines4"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_develop_chosen_tungsten_mines4"
			527 = {
				set_state_flag = JAP_chosen_tungsten_mines_developed4
				add_resource = {
					type = tungsten
					amount = 25
				}
			}
			525 = {
				set_state_flag = JAP_prepared_south_chosen_tungsten_mine
			}
			activate_targeted_decision = { decision = JAP_develop_chosen_tungsten_mines5 target = JAP }
		}
		ai_will_do = { factor = 50 }
	}
	JAP_develop_chosen_tungsten_mines5 = {
		name = JAP_develop_chosen_tungsten_mines
		icon = tungsten

		highlight_states = {
			highlight_state_targets = { state = 527 state = 525 }
		}

		allowed = { always = no }
		available = {
			num_of_civilian_factories_available_for_projects > 5
			controls_state = 527
			controls_state = 525
			has_tech = excavation5
		}

		visible = {
			527 = {
				is_owned_by = ROOT
				has_state_flag = JAP_chosen_tungsten_mines_developed4
				NOT = { has_state_flag = JAP_chosen_tungsten_mines_developed5 }
			}
			525 = {
				is_owned_by = ROOT
				has_state_flag = JAP_prepared_south_chosen_tungsten_mine
				NOT = { has_state_flag = JAP_developed_south_chosen_tungsten_mine }
			}
		}

		fire_only_once = yes

		cost = 75
		days_remove = 220

		modifier = {
			civilian_factory_use = 6
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete JAP_develop_chosen_tungsten_mines5"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove JAP_develop_chosen_tungsten_mines5"
			527 = {
				set_state_flag = JAP_chosen_tungsten_mines_developed5
				add_resource = {
					type = tungsten
					amount = 20
				}
			}
			525 = {
				set_state_flag = JAP_developed_south_chosen_tungsten_mine
				add_resource = {
					type = tungsten
					amount = 16
				}
			}
		}
		ai_will_do = { factor = 50 }
	}
}
