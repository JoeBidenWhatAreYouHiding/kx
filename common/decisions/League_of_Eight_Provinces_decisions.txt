###########################
# League of Eight Provinces Decisions
###########################
# By Erag, Flamefang, WordZero
###########################
LEP_governor_contacts_missions = {
	LEP_jiangxi_governor = {
		icon = generic_flags
		activation = {
			has_country_flag = LEP_qi_takes_control
			has_war_with = CHI
		}
		selectable_mission = yes
		fire_only_once = yes
		days_mission_timeout = 36
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_jiangxi_governor"
			add_political_power = -50
			random_list = {
				25 = { country_event = lepcollapse.102 }
				75 = {
					custom_effect_tooltip = LEP_deng_ruzhou_dies
					hidden_effect = {
						every_unit_leader = {
							limit = {
								has_id = 1114 # Jiangxi/Deng Ruzhou
							}
							retire = yes
						}
						country_event = lepcollapse.109
					}
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_jiangxi_governor"
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = -50
			random_list = {
				75 = { country_event = lepcollapse.101 }
				25 = {
					custom_effect_tooltip = LEP_deng_ruzhou_dies
					hidden_effect = {
						every_unit_leader = {
							limit = {
								has_id = 1114 # Jiangxi/Deng Ruzhou
							}
							retire = yes
						}
						country_event = lepcollapse.109
					}
				}
			}
		}
	}
	LEP_jiangsu_governor = {
		icon = generic_flags
		activation = {
			has_country_flag = LEP_qi_takes_control
			has_war_with = SQI
		}
		selectable_mission = yes
		fire_only_once = yes
		days_mission_timeout = 36
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_jiangsu_governor"
			add_political_power = -50
			random_list = {
				25 = { country_event = lepcollapse.104 }
				75 = {
					custom_effect_tooltip = LEP_zheng_junyan_dies
					hidden_effect = {
						every_unit_leader = {
							limit = { has_id = 1113 }
							retire = yes
						}
						country_event = lepcollapse.110
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_jiangsu_governor"
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = -50
			random_list = {
				75 = { country_event = lepcollapse.103 }
				25 = {
					custom_effect_tooltip = LEP_zheng_junyan_dies
					hidden_effect = {
						every_unit_leader = {
							limit = { has_id = 1113 }
							retire = yes
						}
						country_event = lepcollapse.110
					}
				}
			}
		}
	}
	LEP_zhejiang_governor = {
		icon = generic_flags
		activation = {
			has_country_flag = LEP_qi_takes_control
			has_war_with = ANQ
			NOT = { ANQ = { has_country_flag = ANQ_is_profengtian } }
		}
		selectable_mission = yes
		fire_only_once = yes
		days_mission_timeout = 36
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_zhejiang_governor"
			add_political_power = -50
			random_list = {
				25 = { country_event = lepcollapse.106 }
				75 = {
					custom_effect_tooltip = LEP_chen_yi_dies
					hidden_effect = {
						every_unit_leader = {
							limit = { has_id = 1112 }
							retire = yes
						}
						country_event = lepcollapse.111
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_zhejiang_governor"
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = -50
			random_list = {
				75 = { country_event = lepcollapse.105 }
				25 = {
					custom_effect_tooltip = LEP_chen_yi_dies
					hidden_effect = {
						every_unit_leader = {
							limit = { has_id = 1112 }
							retire = yes
						}
						country_event = lepcollapse.111
					}
				}
			}
		}
	}
	LEP_zhejiang_governor_chen_traitor = {
		icon = generic_flags
		activation = {
			has_country_flag = LEP_qi_takes_control
			has_war_with = ANQ
			ANQ = { has_country_flag = ANQ_is_profengtian }
		}
		selectable_mission = yes
		fire_only_once = yes
		days_mission_timeout = 36
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_zhejiang_governor_chen_traitor"
			add_political_power = -50
			random_list = {
				25 = { country_event = lepcollapse.108 }
				75 = {
					custom_effect_tooltip = LEP_shangguan_yunxiang_dies
					hidden_effect = {
						every_unit_leader = {
							limit = { has_id = 1505 }
							retire = yes
						}
						country_event = lepcollapse.112
					}
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_zhejiang_governor_chen_traitor"
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = -50
			random_list = {
				75 = {
					country_event = lepcollapse.107
				}
				25 = {
					custom_effect_tooltip = LEP_shangguan_yunxiang_dies
					hidden_effect = {
						every_unit_leader = {
							limit = {
								has_id = 1505 #
							}
							retire = yes
						}
						country_event = lepcollapse.112
					}
				}
			}
		}
	}
}

LEP_reconstruction_decisions = {
	LEP_road_reconstruction_decision = {
		icon = GFX_decision_generic_construction
		available = {
			controls_state = 596
			controls_state = 1014
		}
		visible = {
			LEP_has_widespread_destruction = yes
			NOT = {
				has_country_flag = LEP_in_destruction_lvl3
				has_country_flag = LEP_in_destruction_lvl4
			}
		}
		fire_only_once = yes
		cost = 20
		days_remove = 60
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_road_reconstruction_decision"
			LEP_reduce_widespread_destruction = yes
			596 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			1014 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	LEP_invest_in_armaments_industry_decision = {
		icon = GFX_decision_ger_military_buildup
		available = { controls_state = 596 }
		visible = { LEP_has_widespread_destruction = yes }
		fire_only_once = yes
		cost = 20
		days_remove = 60
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_invest_in_armaments_industry_decision"
			LEP_reduce_widespread_destruction = yes
			596 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	LEP_repair_the_machinery_decision = {
		icon = GFX_decision_generic_industry
		visible = { LEP_has_damaged_industry = yes }
		fire_only_once = yes
		cost = 20
		days_remove = 40
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_repair_the_machinery_decision"
			LEP_reduce_damaged_industry = yes
		}
	}
	LEP_factory_repair_teams_decision = {
		icon = GFX_decision_eng_blackshirt_march
		visible = {
			OR = {
				AND = {
					NOT = { has_country_flag = LEP_in_destruction_lvl4 }
					LEP_has_widespread_destruction = yes
				}
				LEP_has_damaged_industry = yes
			}
		}
		fire_only_once = yes
		cost = 25
		days_remove = 60
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_factory_repair_teams_decision"
			if = {
				limit = { NOT = { has_country_flag = LEP_in_destruction_lvl4 } }
				LEP_reduce_widespread_destruction = yes
			}
			LEP_reduce_damaged_industry = yes
		}
	}
	LEP_new_industrial_investments_decision = {
		icon = GFX_decision_eng_trade_unions_support
		available = { controls_state = 613 }
		visible = {
			OR = {
				AND = {
					NOT = {
						has_country_flag = LEP_in_destruction_lvl2
						has_country_flag = LEP_in_destruction_lvl3
						has_country_flag = LEP_in_destruction_lvl4
					}
					LEP_has_widespread_destruction = yes
				}
				LEP_has_damaged_industry = yes
			}
		}
		fire_only_once = yes
		cost = 50
		days_remove = 90
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_new_industrial_investments_decision"
			LEP_reduce_damaged_industry = yes
			if = {
				limit = {
					NOT = {
						has_country_flag = LEP_in_destruction_lvl2
						has_country_flag = LEP_in_destruction_lvl3
						has_country_flag = LEP_in_destruction_lvl4
					}
				}
				LEP_reduce_widespread_destruction = yes
			}
			613 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	LEP_village_reconstruction_decision = {
		icon = GFX_decision_generic_political_discourse
		visible = { LEP_has_widespread_destruction = yes }
		fire_only_once = yes
		cost = 20
		days_remove = 45
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_village_reconstruction_decision"
			LEP_reduce_widespread_destruction = yes
			add_stability = 0.05
		}
	}
}

LEP_redoubts_for_revenue_decisions = {
	LEP_fortify_xuzhou = {
		icon = GFX_decision_generic_construction
		visible = { owns_state = 1047 }
		available = {
			num_of_civilian_factories_available_for_projects > 2
			controls_state = 1047
		}
		highlight_states = { highlight_state_targets = { state = 1047 } }
		fire_only_once = yes
		cost = 0
		days_remove = 80
		ai_will_do = { factor = 50 }
		modifier = { civilian_factory_use = 2 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_fortify_xuzhou"
			add_political_power = 25
			1047 = {
				add_building_construction = {
					type = bunker
					level = 3
					province = 12055
					instant_build = yes
				}
			}
		}
	}
	LEP_fujian_inland_defences = {
		icon = GFX_decision_generic_construction
		visible = {
			owns_state = 802
			owns_state = 1046
			owns_state = 1066
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			controls_state = 802
			controls_state = 1046
			controls_state = 1066
		}
		fire_only_once = yes
		cost = 0
		days_remove = 80
		ai_will_do = { factor = 50 }
		modifier = { civilian_factory_use = 2 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_fujian_inland_defences"
			add_political_power = 25
			802 = {
				add_building_construction = {
					type = coastal_bunker
					level = 2
					province = 7071
					instant_build = yes
				}
			}
			1066 = {
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 11986
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 7027
					instant_build = yes
				}
			}
			1046 = {
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 10010
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 10093
					instant_build = yes
				}
			}
		}
	}
	LEP_fortify_hangzhou_bay = {
		icon = GFX_decision_generic_construction
		visible = { owns_state = 596 }
		available = {
			num_of_civilian_factories_available_for_projects > 2
			controls_state = 596
		}
		highlight_states = { highlight_state_targets = { state = 596 } }
		fire_only_once = yes
		cost = 0
		days_remove = 80
		ai_will_do = { factor = 50 }
		modifier = { civilian_factory_use = 2 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_fortify_hangzhou_bay"
			add_political_power = 25
			596 = {
				add_building_construction = {
					type = coastal_bunker
					level = 3
					province = 7191
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 4042
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 1
					province = 11991
					instant_build = yes
				}
			}
		}
	}
	LEP_jiangxi_mountain_strongholds = {
		icon = GFX_decision_generic_construction
		visible = { owns_state = 1044 }
		available = {
			num_of_civilian_factories_available_for_projects > 2
			controls_state = 1044
		}
		highlight_states = { highlight_state_targets = { state = 1044 } }
		fire_only_once = yes
		cost = 0
		days_remove = 80
		ai_will_do = { factor = 50 }
		modifier = { civilian_factory_use = 2 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_jiangxi_mountain_strongholds"
			add_political_power = 25
			1044 = {
				add_building_construction = {
					type = bunker
					level = 3
					province = 3992
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 4038
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 7054
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 7007
					instant_build = yes
				}
			}
		}
	}
	LEP_anhui_border_forts = {
		icon = GFX_decision_generic_construction
		visible = {
			owns_state = 606
			owns_state = 1050
		}
		available = {
			num_of_civilian_factories_available_for_projects > 2
			controls_state = 606
			controls_state = 1050
		}
		fire_only_once = yes
		cost = 0
		days_remove = 80
		ai_will_do = { factor = 50 }
		modifier = { civilian_factory_use = 2 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_anhui_border_forts"
			add_political_power = 25
			606 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = 1083
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 4203
					instant_build = yes
				}
			}
			1050 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = 10064
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 4079
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 9937
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 10079
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 10040
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 1
					province = 11973
					instant_build = yes
				}
			}
		}
	}
}

LEP_reestablish_control = {
	LEP_temp_suppress_kmt = {
		icon = generic_ignite_civil_war
		allowed = { always = no } #manually activated
		cost = 30
		days_remove = LEP_temp_suppress_kmt_remove?0
		selectable_mission = yes
		days_mission_timeout = lep_suppress_kmt_mission_timeout?50
		ai_will_do = { factor = 640 }
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_temp_suppress_kmt"
			custom_effect_tooltip = lep_increase_kmt_unrest_tt
			hidden_effect = {
				LEP_increase_kmt_unrest_level = yes
				activate_mission = LEP_temp_suppress_kmt
				LEP_negative_kmt_event = yes
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_temp_suppress_kmt"
			set_variable = { LEP_temp_suppress_kmt_remove = days_mission_timeout@LEP_temp_suppress_kmt }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_temp_suppress_kmt"
			clear_variable = LEP_temp_suppress_kmt_remove
			hidden_effect = { activate_mission = LEP_temp_suppress_kmt }
		}
	}

	LEP_decision_lower_kmt_unrest = {
		icon = generic_ignite_civil_war
		visible = {
			has_completed_focus = LEP_track_down_kmt
			has_idea = LEP_kuomintang
		}
		cost = 45
		days_remove = 50
		days_re_enable = 5
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_decision_lower_kmt_unrest"
			if = {
				limit = { check_variable = { lep_kmt_unrest_level < 1 } }
				custom_effect_tooltip = lep_remove_kmt_unrest_tt
				remove_ideas = LEP_kuomintang
				hidden_effect = {
					country_event = {
						id = lep.50
						days = 1
					}
				}
			}
			else = {
				custom_effect_tooltip = lep_decrease_kmt_unrest_tt
				LEP_decrease_kmt_unrest_level = yes
			}
		}
	}

	LEP_temp_suppress_yiguandao = {
		icon = generic_ignite_civil_war
		allowed = { always = no } #manually activated
		selectable_mission = yes
		cost = 20
		days_remove = LEP_temp_suppress_yiguandao_remove?0
		days_mission_timeout = lep_suppress_yiguandao_mission_timeout?50
		ai_will_do = { factor = 640 }
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout LEP_temp_suppress_yiguandao"
			hidden_effect = {
				LEP_increase_yiguandao_unrest_level = yes
				activate_mission = LEP_temp_suppress_yiguandao
				LEP_negative_yiguandao_event = yes
			}
			custom_effect_tooltip = lep_increase_yiguandao_unrest_tt
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_temp_suppress_yiguandao"
			set_variable = { LEP_temp_suppress_yiguandao_remove = days_mission_timeout@LEP_temp_suppress_yiguandao }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_temp_suppress_yiguandao"
			clear_variable = LEP_temp_suppress_yiguandao_remove
			hidden_effect = { activate_mission = LEP_temp_suppress_yiguandao }
		}
	}

	LEP_decision_lower_yiguandao_unrest = {
		icon = generic_ignite_civil_war
		visible = {
			has_completed_focus = LEP_crack_down_yiguandao_sects
			has_idea = LEP_yiguandao
		}
		cost = 30
		days_remove = 40
		days_re_enable = 5
		ai_will_do = { factor = 640 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_decision_lower_yiguandao_unrest"
			if = {
				limit = { check_variable = { lep_yiguandao_unrest_level < 1 } }
				custom_effect_tooltip = lep_remove_yiguandao_unrest_tt
				remove_ideas = LEP_yiguandao
				hidden_effect = {
					country_event = {
						id = lep.58
						days = 1
					}
				}
			}
			else = {
				custom_effect_tooltip = lep_decrease_yiguandao_unrest_tt
				LEP_decrease_yiguandao_unrest_level = yes
			}
		}
	}
}

LEP_governor_replace_decisions = {
	#LEP_toast_to_departed_friends_fujian = {
	#	icon = decision_generic_political_discourse
	#	allowed = { tag = LEP }
	#	visible = {
	#		tag = LEP
	#	}
	#	fire_only_once = yes
	#	cost = 10
	#
	#	complete_effect = {
	#	}
	#}
	LEP_send_shangguan_back_to_zhejiang_decision = {
		icon = decision_generic_political_discourse
		visible = {
			has_country_flag = LEP_chen_yi_gone
			NOT = {
				has_country_flag = LEP_shangguan_yunxiang_dies
			}
		}
		fire_only_once = yes
		cost = 25
		days_remove = 15
		ai_will_do = { factor = 25 }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_send_shangguan_back_to_zhejiang_decision"
			add_stability = 0.02
			add_war_support = 0.02
			set_country_flag = LEP_zhejiang_gov_done
		}
	}
	LEP_send_chen_yi_back_to_zhejiang_decision = {
		icon = decision_generic_political_discourse
		visible = {
			has_country_flag = LEP_shangguang_yunxiang_gone
			NOT = {
				has_country_flag = LEP_chen_yi_dies
			}
		}
		fire_only_once = yes
		cost = 25
		days_remove = 15
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_send_chen_yi_back_to_zhejiang_decision"
			add_stability = 0.02
			add_war_support = 0.02
			set_country_flag = LEP_zhejiang_gov_done
		}
	}
	LEP_new_governor_zhejiang_decision = {
		icon = decision_generic_political_discourse
		visible = {
			tag = LEP
			AND = {
				OR = {
					has_country_flag = LEP_chen_yi_dies
					has_country_flag = LEP_chen_yi_gone
				}
				OR = {
					has_country_flag = LEP_shangguan_yunxiang_dies
					has_country_flag = LEP_shangguang_yunxiang_gone
				}
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = { factor = 25 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_new_governor_zhejiang_decision"
			country_event = lep.114
		}
	}
	LEP_new_governor_fujian_decision = {
		icon = decision_generic_political_discourse
		visible = {
			tag = LEP
			has_country_flag = LEP_zhejiang_gov_done
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = { factor = 25 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_new_governor_fujian_decision"
			country_event = lep.115
		}
	}
	LEP_new_governor_jiangxi_decision = {
		icon = decision_generic_political_discourse
		visible = {
			tag = LEP
			has_country_flag = LEP_zhejiang_gov_done
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = { factor = 25 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_new_governor_jiangxi_decision"
			if = {
				limit = { has_country_flag = LEP_deng_ruzhou_dies }
				country_event = lep.116
			}
			else = { country_event = lep.117 }
		}
	}
}

LEP_collapse_war_decisions = {
	LEP_emergency_troop_training_decision = {
		icon = eng_blackshirt_march
		custom_cost_trigger = { command_power > 25 }
		custom_cost_text = LEP_CP_25
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_emergency_troop_training_decision"
			hidden_effect = { add_command_power = -25 }
			add_timed_idea = {
				idea = LEP_Emergency_Troop_Training
				days = 100
			}
		}
	}
	LEP_emergency_evaluate_doctrines_decision = {
		icon = hol_draw_up_staff_plans
		custom_cost_trigger = { command_power > 25 }
		custom_cost_text = LEP_CP_25
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_emergency_evaluate_doctrines_decision"
			hidden_effect = { add_command_power = -25 }
			add_tech_bonus = {
				name = LEP_emergency_evaluate_doctrines_decision
				bonus = 2
				uses = 1
				category = land_doctrine
			}
		}
	}
	LEP_seize_the_heartland_decision = {
		icon = oppression
		custom_cost_trigger = { command_power > 25 }
		custom_cost_text = LEP_CP_25
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_seize_the_heartland_decision"
			hidden_effect = { add_command_power = -25 }
			add_timed_idea = {
				idea = LEP_seize_the_heartland_idea
				days = 50
			}
		}
	}
}

LEP_foreign_policy_decisions = {
	LEP_send_guns_to_XSM_decision = {
		icon = GFX_decision_eng_trade_unions_support
		available = { has_war = no }
		visible = {
			FROM = {
				NOT = { has_government = authoritarian_democrat }
				OR = {
					has_war_with = TIB
					has_war_with = MON
				}
			}
		}
		targets = { XSM }
		target_trigger = {
			FROM = {
				NOT = { has_government = authoritarian_democrat }
				OR = {
					has_war_with = TIB
					has_war_with = MON
				}
			}
		}
		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 249 }
			has_political_power > 24.99
		}
		custom_cost_text = LEP_INF_250_PP_25
		fire_only_once = yes
		days_remove = 60
		ai_will_do = { factor = 50 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_send_guns_to_XSM_decision target: [From.GetName]"
			send_equipment = {
				type = infantry_equipment
				amount = 250
				target = FROM
			}
			FROM = {
				country_event = {
					id = lep.202
					days = 1
				}
			}
		}
	}
	LEP_send_guns_to_SIK_decision = {
		icon = GFX_decision_eng_trade_unions_support
		available = { has_war = no }
		visible = {
			FROM = {
				has_government = paternal_autocrat
				OR = {
					has_war_with = TAN
					has_war_with = ETS
				}
			}
		}
		targets = { SIK }
		target_trigger = {
			FROM = {
				has_government = paternal_autocrat
				OR = {
					has_war_with = TAN
					has_war_with = ETS
				}
			}
		}

		custom_cost_trigger = {
			has_equipment = { infantry_equipment > 249 }
			has_political_power > 24.99
		}
		custom_cost_text = LEP_INF_250_PP_25
		fire_only_once = yes
		days_remove = 60
		ai_will_do = { factor = 50 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_send_guns_to_SIK_decision target: [From.GetName]"
			send_equipment = {
				type = infantry_equipment
				amount = 250
				target = FROM
			}
			FROM = {
				country_event = {
					id = lep.202
					days = 1
				}
			}
		}
	}
	LEP_war_league_breakaways_decision = {
		icon = GFX_decision_generic_prepare_civil_war
		available = {
			has_stability > 0.5
			has_war_support > 0.5
		}
		visible = {
			has_completed_focus = LEP_pacification_commissioner_qi
			can_declare_war_on = FROM
		}
		targets = { HNN GXC }
		target_trigger = { can_declare_war_on = FROM }
		cost = 25
		days_remove = 25
		fire_only_once = yes
		war_with_target_on_remove = yes

		ai_will_do = {
			factor = 35
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				FROM = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				FROM = {
					is_subject = yes
					overlord = {
						strength_ratio = {
							tag = ROOT
							ratio > 0.6
						}
					}
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.7
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_war_league_breakaways_decision target: [From.GetName]"
			set_country_flag = { flag = imminent_war days = 25 value = 1 }
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_war_league_breakaways_decision target: [From.GetName]"
			if = {
				limit = { FROM = { tag = HNN } }
				country_event = lepfp.1
			}
			else_if = {
				limit = { FROM = { tag = GXC } }
				country_event = lepfp.2
			}
		}
	}
	LEP_AOG_war_league_breakaways_decision = {
		icon = GFX_decision_generic_prepare_civil_war
		available = {
			OR = {
				can_declare_war_on = HNN
				can_declare_war_on = 602.owner
			}
			OR = {
				can_declare_war_on = GXC
				can_declare_war_on = 593.owner
			}
		}
		visible = {
			has_completed_focus = LEP_securing_our_grip
			NOT = {
				owns_state = 602
				owns_state = 593
				owns_state = 592
			}
		}
		cost = 25
		days_remove = 14
		fire_only_once = yes
		war_with_on_remove = HNN
		war_with_on_remove = GXC
		ai_will_do = {
			factor = 35
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 0.7
				}
			}
			modifier = {
				factor = 0
				has_country_flag = imminent_war
			}
		}
		complete_effect = { log = "[GetDateText]: [Root.GetName]: Decision LEP_war_league_breakaways_decision target: [From.GetName]" }
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_war_league_breakaways_decision target: [From.GetName]"
			if = {
				limit = { country_exists = HNN }
				declare_war_on = {
					type = annex_everything
					target = HNN
				}
			}
			else_if = {
				limit = { can_declare_war_on = 602.owner }
				declare_war_on = {
					type = annex_everything
					target = 602.owner
				}
			}
			if = {
				limit = { country_exists = GXC }
				declare_war_on = {
					type = annex_everything
					target = GXC
				}
			}
			else_if = {
				limit = { can_declare_war_on = 593.owner }
				declare_war_on = {
					type = annex_everything
					target = 593.owner
				}
			}
		}
	}
	LEP_league_of_5_decision = {
		icon = GFX_decision_generic_nationalism
		visible = {
			NOT = {
				has_country_flag = LEP_AOG_rule
				country_exists = ANQ
				country_exists = CHI
				owns_state = 592 #Guangzhou
				owns_state = 602 #Changsha
				owns_state = 597 #Jinan
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 500
			modifier = {
				factor = 0
				OR = {
					has_war_with = SQI
					has_war_with = GXC
					has_war_with = HNN
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_league_of_5_decision"
			set_cosmetic_tag = LEP_LFP
		}
	}
	LEP_league_of_6_decision = {
		icon = GFX_decision_generic_nationalism
		visible = {
			owns_state = 597 #Jinan
			NOT = {
				has_country_flag = LEP_AOG_rule
				country_exists = ANQ
				country_exists = CHI
				country_exists = SQI
				owns_state = 592 #Guangzhou
				owns_state = 602 #Changsha
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 500
			modifier = {
				factor = 0
				OR = {
					has_war_with = GXC
					has_war_with = HNN
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_league_of_6_decision"
			set_cosmetic_tag = LEP_LSP
		}
	}
	LEP_league_back_to_normal_decision = {
		icon = GFX_decision_generic_nationalism
		visible = {
			owns_state = 592 #Guangzhou
			owns_state = 602 #Changsha
			NOT = {
				has_country_flag = LEP_AOG_rule
				country_exists = ANQ
				country_exists = CHI
				country_exists = GXC
				country_exists = HNN
				owns_state = 597 #Jinan
			}
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = {
			factor = 500
			modifier = {
				factor = 0
				has_war_with = SQI
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_league_back_to_normal_decision"
			set_cosmetic_tag = LEP_LEP
		}
	}
	LEP_league_of_9_decision = {
		icon = GFX_decision_generic_nationalism
		visible = {
			owns_state = 592 #Guangzhou
			owns_state = 602 #Changsha
			owns_state = 597 #Jinan
			NOT = {
				has_country_flag = LEP_AOG_rule
				country_exists = ANQ
				country_exists = CHI
				country_exists = SQI
				country_exists = GXC
				country_exists = HNN
			}
		}
		available = {
			has_full_control_of_state = 592
			has_full_control_of_state = 1012
			has_full_control_of_state = 800
			has_full_control_of_state = 599
			has_full_control_of_state = 594
			has_full_control_of_state = 1055
			has_full_control_of_state = 1054
			has_full_control_of_state = 1053
			has_full_control_of_state = 1056
			has_full_control_of_state = 591
			has_full_control_of_state = 597
			has_full_control_of_state = 1065
			has_full_control_of_state = 1064
			has_full_control_of_state = 602
			has_full_control_of_state = 1013
		}
		fire_only_once = yes
		cost = 25
		ai_will_do = { factor = 500 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_league_of_9_decision"
			set_cosmetic_tag = LEP_LNP
		}
	}

	AOG_establish_sino_german_puppet = {
		icon = generic_flags
		allowed = { tag = LEP }
		visible = {
			has_completed_focus = LEP_way_down_south
			NOT = { GER = { any_subject_country = { has_cosmetic_tag = AOG_CHINA_PUPPET } } }
		}
		available = {
			any_owned_state = {
				OR = {
					is_mainland_china = yes
					state = 524 #Taiwan
				}
				NOT = {
					is_core_of = LEP
					is_claimed_by = LEP
				}
			}
		}
		ai_will_do = { factor = 1000 }
		cost = 25
		targets = { QIE }
		target_non_existing = yes
		complete_effect = {
			custom_effect_tooltip = LEP_establish_cuck_state_tooltip
			add_stability = 0.10
			hidden_effect = {
				create_dynamic_country = {
					original_tag = QIE
					GER = { puppet = PREV }
					every_state = {
						limit = {
							owner = {
								is_chinese_tag = yes
								OR = {
									is_subject_of = LEP
									is_subject_of = GEA
									is_subject_of = GER
								}
							}
							OR = {
								is_mainland_china = yes
								state = 524 #Taiwan
							}
							NOT = {
								is_core_of = LEP
								is_claimed_by = LEP
							}
						}
						PREV = { add_state_core = PREV }
					}
					every_other_country = {
						limit = {
							is_chinese_tag = yes
							OR = {
								is_subject_of = LEP
								is_subject_of = GEA
								is_subject_of = GER
							}
						}
						PREV = {
							annex_country = {
								target = PREV
								transfer_troops = yes
							}
						}
					}
					### Politics
					set_party_name = {
						ideology = authoritarian_democrat
						name = "Sino-German Administration"
						long_name = "The Administration of the Empire of China"
					}
					add_ideas = LEP_german_yoke_puppet
					set_popularities = {
						totalist = 5
						radical_socialist = 15
						syndicalist = 5
						social_democrat = 5
						social_liberal = 5
						market_liberal = 0
						social_conservative = 5
						authoritarian_democrat = 50
						paternal_autocrat = 0
						national_populist = 10
					}
					set_politics = {
						ruling_party = authoritarian_democrat
						elections_allowed = no
					}
					set_cosmetic_tag = AOG_CHINA_PUPPET
					#Units
					division_template = {
						name = "Shibing"
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
						priority = 1
					}
					every_state = {
						limit = {
							is_owned_by = LEP
							OR = {
								is_mainland_china = yes
								state = 524 #Taiwan
							}
							NOT = {
								is_core_of = LEP
								is_claimed_by = LEP
							}
						}
						PREV = { transfer_state = PREV }
					}
					set_country_flag = china_integration_unlocked
					set_variable = { kr_china_provinceintegration_cost_small = 25 }
					set_variable = { kr_china_provinceintegration_cost_medium = 50 }
					set_variable = { kr_china_provinceintegration_cost_large = 75 }
					set_variable = { kr_china_provinceintegration_speed = 50 }
					set_variable = { kr_china_concessionintegration_cost = 5 }
					set_variable = { kr_china_concessionintegration_speed = 7 }
				}
			}
		}
	}
	
	AOG_feed_sino_german_puppet = {
		icon = generic_flags
		allowed = { tag = LEP }
		visible = {
			has_completed_focus = LEP_way_down_south
			GER = { any_subject_country = { has_cosmetic_tag = AOG_CHINA_PUPPET } }
		}
		available = {
			any_owned_state = {
				OR = {
					is_mainland_china = yes
					state = 524 #Taiwan
				}
				NOT = {
					is_core_of = LEP
					is_claimed_by = LEP
				}
			}
		}
		target_trigger = {
			has_cosmetic_tag = AOG_CHINA_PUPPET
			is_subject_of = GER
		}
		ai_will_do = { factor = 1000 }
		complete_effect = {
			add_political_power = 25
			every_state = {
				limit = {
					is_owned_by = LEP
					OR = {
						is_mainland_china = yes
						state = 524 #Taiwan
					}
					NOT = {
						is_core_of = LEP
						is_claimed_by = LEP
					}
				}
				FROM = { transfer_state = PREV }
			}
		}
	}
	AOG_take_over_eastern_front = {
		icon = GFX_decision_generic_army_support
		allowed = { tag = LEP }
		visible = { has_completed_focus = AOG_look_outward }
		available = { GEA = { is_subject_of = GER } }
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		cost = 50
		targets = { GEA }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision AOG_take_over_eastern_front"
			navy_experience = 30
			GEA = { army_experience = 30 }
			effect_tooltip = { puppet = GEA }
			hidden_effect = {
				GEA = { get_current_government_type = yes }
				set_autonomy = {
					target = GEA
					autonomy_state = kr_colonial_government
				}
				GEA = { restore_previous_government_type = yes }
			}
		}
	}
	AOG_QIE_activite_unity_mission = {
		icon = GFX_decision_generic_army_support
		allowed = { tag = LEP }
		visible = {
			has_completed_focus = LEP_frens
			QIE = {
				exists = yes
				is_subject = no
			}
		}
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		cost = 100
		targets = { QIE }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_bribe_lobbyists"
			activate_mission = AOG_influence_QIE_timer
			hidden_effect = { QIE = { country_event = allost.5 } }
			add_political_power = 100
		}
	}
	AOG_revive_QIE = {
		icon = GFX_decision_generic_army_support
		allowed = { tag = LEP }
		visible = {
			has_completed_focus = LEP_frens
			QIE = { exists = no }
		}
		fire_only_once = yes
		ai_will_do = { factor = 1000 }
		cost = 0
		targets = { QIE }
		target_non_existing = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_bribe_lobbyists"
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = QIE
						is_claimed_by = QIE
					}
					NOT = {
						is_core_of = LEP
						is_claimed_by = LEP
					}
				}
				FROM = { transfer_state = PREV }
			}
			puppet = QIE
		}
	}
	AOG_fading_falkenhausen = {
		icon = revolt
		allowed = {
			OR = {
				tag = GER
				tag = GEA
				is_chinese_tag = yes
			}
		}
		activation = {
			GER = { AOG_fading_falkenhausen_trigger = yes }
			NOT = {
				any_state = {
					controller = { is_in_faction_with = GER }
					custom_trigger_tooltip = {
						tooltip = "Is part of recognized Chinese Claims"
						is_claims_china = yes
					}
				}
			}
		}
		available = {
			GER = { AOG_fading_falkenhausen_trigger = no }
			any_state = {
				controller = { is_in_faction_with = GER }
				custom_trigger_tooltip = {
					tooltip = "Is part of recognized Chinese Claims"
					is_claims_china = yes
				}
			}
		}
		days_mission_timeout = 90
		is_good = no
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout AOG_fading_falkenhausen"
			if = {
				limit = { tag = GER }
				country_event = allost.1
			}
			else = { effect_tooltip = { GER = { country_event = allost.1 } } }
		}
	}
}
LEP_AOG_decisions = {
	LEP_AOG_factories_civ = {
		icon = GFX_decision_generic_construction
		targets = { GEA }
		cost = 35
		days_remove = 180
		days_re_enable = 100
		ai_will_do = {
			factor = 10
			modifier = {
				set_temp_variable = { LEP_influence_decrease_desire = party_popularity@market_liberal }
				multiply_temp_variable = { LEP_influence_decrease_desire = -25 }
				add = LEP_influence_decrease_desire
			}
		}
		modifier = { market_liberal_drift = 0.01 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_AOG_factories_civ target: [From.GetName]"
			add_offsite_building = { type = industrial_complex level = 3 }
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_AOG_factories_civ target: [From.GetName]"
			add_offsite_building = { type = industrial_complex level = -3 }
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
	}
	LEP_AOG_factories_mil = {
		icon = GFX_decision_generic_industry
		targets = { GEA }
		cost = 35
		days_remove = 180
		days_re_enable = 100
		ai_will_do = {
			factor = 10
			modifier = {
				set_temp_variable = { LEP_influence_decrease_desire = party_popularity@market_liberal }
				multiply_temp_variable = { LEP_influence_decrease_desire = -25 }
				add = LEP_influence_decrease_desire
			}
		}
		modifier = { market_liberal_drift = 0.01 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_AOG_factories_mil target: [From.GetName]"
			add_offsite_building = { type = arms_factory level = 3 }
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_AOG_factories_mil target: [From.GetName]"
			add_offsite_building = { type = arms_factory level = -3 }
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
	}
	LEP_AOG_training = {
		icon = GFX_decision_generic_army_support
		targets = { GEA }
		cost = 35
		days_remove = 120
		days_re_enable = 60
		ai_will_do = {
			factor = 25
			modifier = {
				set_temp_variable = { LEP_influence_decrease_desire = party_popularity@market_liberal }
				multiply_temp_variable = { LEP_influence_decrease_desire = -50 }
				add = LEP_influence_decrease_desire
			}
		}
		modifier = {
			command_power_gain_mult = 0.25
			experience_gain_army_factor = 0.1
			market_liberal_drift = 0.01
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_AOG_training target: [From.GetName]"
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes

		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_AOG_training target: [From.GetName]"
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
	}
	LEP_AOG_decrease_influence = {
		targets = { GEA }
		cost = 100
		days_remove = 60
		days_re_enable = 120
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 0
				OR = {
					has_idea = LEP_Tsingtau_Collaboration
					has_idea = LEP_Tsingtau_Collaboration1
					has_idea = LEP_Tsingtau_Collaboration2
					has_idea = LEP_Tsingtau_Collaboration3
					has_idea = LEP_Tsingtau_Collaboration4
					has_idea = LEP_Tsingtau_Collaboration5
					has_idea = LEP_Tsingtau_Collaboration6
				}
			}
			modifier = {
				set_temp_variable = { LEP_influence_decrease_desire = party_popularity@market_liberal }
				multiply_temp_variable = { LEP_influence_decrease_desire = 100 }
				add = LEP_influence_decrease_desire
			}
		}
		modifier = { market_liberal_drift = -0.05 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision LEP_AOG_decrease_influence target: [From.GetName]"
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove LEP_AOG_decrease_influence target: [From.GetName]"
			LEP_remove_tsingtau_spirit = yes
			LEP_calculate_tsingtau_level = yes
			LEP_add_tsingtau_spirit = yes
		}
	}
}

AOG_influence_QIE = { #ways to buy down german support or gain PP by selling out
	AOG_QIE_bribe_state_officials = { #lose PP, lose MarLib popularity
		icon = generic_flags
		fire_only_once = no
		days_re_enable = 50
		ai_will_do = { factor = 0 }
		cost = 50
		targets = { QIE }
		target_root_trigger = { has_active_mission = AOG_influence_QIE_timer }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_bribe_lobbyists"
			QIE = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.05
				}
				QIE_recalculate_peking_commission = yes
			}
		}
	}
	AOG_QIE_encourage_german_production = { #get spirit that lowers civ factory for 60 days, at end get drop in MarLib popularity
		icon = GFX_decision_generic_industry
		fire_only_once = no
		days_re_enable = 60
		targets = { QIE }
		target_root_trigger = { has_active_mission = AOG_influence_QIE_timer }
		ai_will_do = { factor = 0 }
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision QIE_encourage_domestic_production"
			QIE = {
				add_popularity = {
					ideology = market_liberal
					popularity = 0.08
				}
				add_timed_idea = {
					idea = AOG_QIE_encourage_german_production_idea2
					days = 60
				}
				QIE_recalculate_peking_commission = yes
			}
			add_timed_idea = {
				idea = AOG_QIE_encourage_german_production_idea
				days = 60
			}
		}
	}
	AOG_influence_QIE_timer = {
		icon = ger_mefo_bills
		allowed = { always = no } #manually activated
		available = { QIE = { market_liberal > 0.7 } }
		cancel_trigger = {
			QIE = {
				OR = {
					has_war_with = GER
					has_war_with = AOG
				}
				exists = no
			}
		}
		is_good = yes
		fire_only_once = yes
		days_mission_timeout = 465
		complete_effect = { #WINNER
			log = "[GetDateText]: [Root.GetName]: Decision timeout BAT_duke_timer"
			QIE = { get_current_government_type = yes }
			puppet = QIE
			QIE = { restore_previous_government_type = yes }
			hidden_effect = {
				country_event = allost.6
				QIE = { country_event = allost.8 }
			}
		}
		timeout_effect = { #BOO
			log = "[GetDateText] [Root.GetName]: decision BAT_defeat_brothers"
			effect_tooltip = {
				QIE = {
					annex_country = {
						target = PREV
						transfer_troops = yes
					}
				}
			}
			hidden_effect = {
				country_event = allost.7
				QIE = { country_event = allost.9 }
				GEA = { country_event = allost.10 }
				GER = { country_event = allost.10 }
				MAF = { country_event = allost.10 }
			}
		}
	}
}
