NEP_ranas_in_power = {
	custom_trigger_tooltip = {
		tooltip = NEP_has_ranas
		OR = {
			AND = {
				has_government = paternal_autocrat
				has_idea = NEP_Mohan_Shumsher_Rana_hog_pau
			}
			AND = {
				has_government = paternal_autocrat
				has_idea = NEP_Juddha_Shumsher_Rana_hog_ade
			}
			AND = {
				has_government = authoritarian_democrat
				has_idea = NEP_Juddha_Shumsher_Rana_hog_ade
			}
			AND = {
				has_government = social_conservative
				has_idea = NEP_Padma_Shumsher_Rana_hog_sco
			}
		}
	}
}

NEP_NEP_is_monarchy = {
	OR = {
		has_country_leader = {
			name = "Tribhuvan"
			ruling_only = yes
		}
		has_country_leader = {
			name = "Samrajya"
			ruling_only = yes
		}
		has_country_leader = {
			name = "Mahendra"
			ruling_only = yes
		}
	}
}

NEP_conspiracy_ai_trigger = {
	NEP = { is_ai = yes }
	BHC = { is_ai = yes }
	DEH = { is_ai = yes }
}

NEP_BHC_influence_winning = {
	NOT = { check_variable = { NEP.NEP_relative_BHC_influence < 25 } }
}

NEP_BHC_influence_winning_extra = {
	NOT = { check_variable = { NEP.NEP_relative_BHC_influence < 30 } }
}

NEP_BHC_influence_higher = {
	check_variable = { NEP.NEP_relative_BHC_influence > 0 }
}

NEP_DEH_influence_winning = {
	NOT = { check_variable = { NEP.NEP_relative_DEH_influence < 25 } }
}

NEP_DEH_influence_winning_extra = {
	NOT = { check_variable = { NEP.NEP_relative_DEH_influence < 30 } }
}

NEP_DEH_influence_higher = {
	check_variable = { NEP.NEP_relative_DEH_influence > 0 }
}

NEP_increase_BHC_trigger = {
	OR = {
		has_country_flag = NEP_conspiracy_BHC_ai
		AND = {
			has_country_flag = NEP_conspiracy_player_BHC_ai
			NEP_BHC_influence_winning_extra = no
		}
#		AND = {
#			has_country_flag = NEP_conspiracy_player_DEH_ai
#			NEP_DEH_influence_winning_extra = yes
#		}
		AND = {
			has_country_flag = NEP_conspiracy_NEP_ai
			NEP_BHC_influence_winning = yes
		}
	}
}

NEP_increase_DEH_trigger = {
	OR = {
		has_country_flag = NEP_conspiracy_DEH_ai
		AND = {
			has_country_flag = NEP_conspiracy_player_DEH_ai
			NEP_DEH_influence_winning_extra = no
		}
#		AND = {
#			has_country_flag = NEP_conspiracy_player_BHC_ai
#			NEP_BHC_influence_winning_extra = yes
#		}
		AND = {
			has_country_flag = NEP_conspiracy_NEP_ai
			NEP_DEH_influence_winning = yes
		}
	}
}

NEP_NEP_influence_winning = {
	NEP_BHC_influence_winning = no
	NEP_DEH_influence_winning = no
}

NEP_conspiracy_near_end = {
	NEP = {	# Stops AI from pipping close to the end
		has_country_flag = {
			flag = NEP_conspiracy_ongoing_flag
			days > 280
		}
	}
}

NEP_conspiracy_ongoing = {
	NEP = { has_country_flag = NEP_conspiracy_ongoing_flag }
}

NEP_has_five_year_plan = {
	OR = {
		has_idea = NEP_an_economy_of_corruption_and_stagnation #Initial tooltip
		has_idea = NEP_an_economy_of_corruption_and_stagnation_bnia
		has_idea = NEP_an_economy_of_corruption_and_stagnation_bnia_10
		has_idea = NEP_an_economy_of_corruption_and_stagnation_bnia_01
		has_idea = NEP_an_economy_of_corruption_and_stagnation_bnia_11
	}
}

NEP_british_india_is_valid_relation_target = {
	country_exists = DEH
	DEH = {
		is_subject = no
		has_capitulated = no
		NOT = { has_war_with = ROOT }
	}
}

NEP_republican_india_is_valid_relation_target = {
	if = {
		limit = {
			NOT = { country_exists = BHC }
			country_exists = PRF
		}
		country_exists = PRF #repeated for the sake of player clarity
		PRF = {
			is_subject = no
			has_capitulated = no
			NOT = { has_war_with = ROOT }
		}
	}
	else = {
		country_exists = BHC
		BHC = {
			is_subject = no
			has_capitulated = no
			NOT = { has_war_with = ROOT }
		}
	}
}

NEP_royal_restoration_focus_valid_government = {
	has_government = authoritarian_democrat
}

NEP_democratic_revolution_focus_valid_government = {
	if = {
		limit = { NEP_is_monarchy = yes }
		has_elected_government = yes
	}
	else = {
		has_democratic_government = yes
	}
}

NEP_socialist_revolution_focus_valid_government = {
	has_socialist_government = yes
}

NEP_shared_revolution_focus_valid_government = {
	if = {
		limit = { NEP_is_monarchy = yes }
		has_authoritarian_government = no
	}
	else = {
		has_dictatorship_government = no
	}
}
