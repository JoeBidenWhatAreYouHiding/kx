scripted_gui = {


	
	austria_ausgleich = {
		context_type = decision_category
		window_name = "ausgleich_box"
		
		visible = {
			OR = {
				has_country_flag = AUS_gleich_participant
				tag = AUS
			}
			#has_global_flag = AUS_gleich_begins
		}
		
	}

	austria_open_subjects_view = {
		context_type = decision_category
		window_name = "austria_open_subjects_view_container"
		
		visible = {
			OR = {
				tag = AUS
				tag = HUN
				tag = CRO
				tag = CZE
				tag = GAL
				tag = SVK
				tag = SLO
				tag = BOS
				tag = SKS
				tag = WSU
				tag = BUK
				tag = TRS
				tag = BAN
				tag = CPU
				tag = HSR
				tag = HNR
				tag = AWR
				tag = TYR
				tag = ITA
				tag = SRI
				tag = GER
				tag = POL
				tag = UKR
				tag = FRA
				tag = ENG
				tag = RUS
				tag = SOV
				tag = BUL
				tag = SER
				tag = ROM
				tag = SWI
				tag = RRM
				tag = GRE
				tag = HNZ
				tag = CRR
				tag = SRC
				tag = MNT
				tag = VNC
				tag = LIC
			}
			
		}
		
		effects = {
			austria_open_click = {
				for_each_loop = {
					array = global.constituents_array
					var:v = {
						if = {
							limit = {
								exists = yes
								#has_variable = subject_revolt_progress
								AUS_is_constituent = yes
								OR = {
									tag = AUS
									is_in_faction_with = AUS
								}
							}
							add_to_array = { ROOT.austria_subject_array = v }
						}
					}
				}
				
				if = {
					limit = {
						NOT = {
							country_exists = SVK
						}
					}
					add_to_array = { ROOT.austria_minority_array = SVK }
				}
				if = {
					limit = {
						NOT = {
							country_exists = CPU
						}
					}
					add_to_array = { ROOT.austria_minority_array = CPU }
				}
				if = {
					limit = {
						NOT = {
							country_exists = TRS
						}
					}
					add_to_array = { ROOT.austria_minority_array = TRS }
				}
				if = {
					limit = {
						NOT = {
							country_exists = BAN
						}
						has_global_flag = BAN_on_array
					}
					add_to_array = { ROOT.austria_minority_array = BAN }
				}
				if = {
					limit = {
						NOT = {
							country_exists = SLO
						}
					}
					add_to_array = { ROOT.austria_minority_array = SLO }
				}
				if = {
					limit = {
						NOT = {
							country_exists = BOS
						}
					}
					add_to_array = { ROOT.austria_minority_array = BOS }
				}
				if = {
					limit = {
						NOT = {
							country_exists = SKS
						}
					}
					add_to_array = { ROOT.austria_minority_array = SKS }
				}
				if = {
					limit = {
						NOT = {
							country_exists = WSU
						}
					}
					add_to_array = { ROOT.austria_minority_array = WSU }
				}
				if = {
					limit = {
						NOT = {
							country_exists = KRK
						}
						has_global_flag = KRK_on_array
					}
					add_to_array = { ROOT.austria_minority_array = KRK }
				}
				if = {
					limit = {
						NOT = {
							country_exists = BUK
						}
					}
					add_to_array = { ROOT.austria_minority_array = BUK }
				}
				if = {
					limit = {
						NOT = {
							country_exists = PGU
						}
						has_global_flag = PGU_on_array
					}
					add_to_array = { ROOT.austria_minority_array = PGU }
				}
				if = {
					limit = {
						NOT = {
							country_exists = VNC
						}
						#has_global_flag = VNC_on_array
					}
					add_to_array = { ROOT.austria_minority_array = VNC }
				}
				set_global_flag = AUS_clickme_flag
				set_country_flag = subject_unrest_window_open
				
				
				
				# a little trolling
				if = {
					limit = {
						has_country_flag = schizo_value_enabled
					}
					random_list = {
						40 = {
							set_country_flag = schizo_value_on
						}
						60 = {
						
						}
					}
					if = {
						limit = {
							has_country_flag = schizo_value_on
						}
						randomize_temp_variable = {
							var = schizo_value
							distribution = uniform
							min = -0.15
							max = 0.15
						}
						set_variable = {
							var = global.schizo_value_var
							value = schizo_value
						}
						random_list = {
							1 = {
								modifier = {
									factor = 0
									NOT = {
										has_global_flag = AUS_collapsed
									}
								}
								set_variable = { schizophrenic = AUS }
							}
							1 = {
								modifier = {
									factor = 0
									NOT = {
										HUN = {
											is_in_faction_with = AUS
										}
									}
								}
								set_variable = { schizophrenic = HUN }
							}
							1 = {
								modifier = {
									factor = 0
									NOT = {
										CZE = {
											is_in_faction_with = AUS
										}
									}
								}
								set_variable = { schizophrenic = CZE }
							}
							1 = {
								modifier = {
									factor = 0
									NOT = {
										CRO = {
											is_in_faction_with = AUS
										}
									}
								}
								set_variable = { schizophrenic = CRO }
							}
							1 = {
								modifier = {
									factor = 0
									NOT = {
										GAL = {
											is_in_faction_with = AUS
										}
									}
								}
								set_variable = { schizophrenic = GAL }
							}
						}
						AUS_do_schizo_test = yes
						var:schizophrenic = {
							add_to_variable = {
								var = THIS.subject_revolt_progress
								value = schizo_value
							}
						}
					}
				}
			}
			
			austria_help_click = {
				country_event = {
					id = austriaintro.3
				}
				set_country_flag = AUS_help_page_open
			}
		}
		
		triggers = {
			austria_open_click_enabled = {
				NOT = { has_country_flag = subject_unrest_window_open }
			}
			tutorial_visible =  {
				NOT = { has_global_flag = AUS_clickme_flag }
			}
			austria_help_click_enabled = {
				NOT = {
					has_country_flag = AUS_help_page_open
				}
			}
			austrian_warning_subject_entry_visible = {
				country_exists = v
			}
			ausflag2_frame_red_visible = {
				var:v = {
					check_variable = {
						var = subject_revolt_progress
						value = 0.90
						compare = greater_than_or_equals
					}
				}
			}
			ausflag2_frame_yellow_visible = {
				var:v = {
					check_variable = {
						var = subject_revolt_progress
						value = 0.90
						compare = less_than_or_equals
					}
					check_variable = {
						var = subject_revolt_progress
						value = 0.80
						compare = greater_than_or_equals
					}
				}
			}
			ausflag2_frame_green_visible = {
				var:v = {
					check_variable = {
						var = subject_revolt_progress
						value = 0.80
						compare = less_than_or_equals
					}
				}
			}
		}
		
		dynamic_lists = {
			austrian_warning_subjects_grid = {
				array = austria_warning_subject_array
				entry_container = austrian_warning_subject_entry
				change_scope = yes

				
			}
		}
		
		properties = {
			ausflag2 = {
				image = "[THIS.GetFlag]"
			}
		}
	}
	
	austrian_subjects = {
		context_type = player_context
		window_name = "austria_subjects_master"

		visible = {
			has_country_flag = subject_unrest_window_open
		}

		dynamic_lists = {
			austrian_subjects_grid = {
				array = austria_subject_array
				change_scope = yes

				entry_container = austrian_subject_entry
			}
			
			
			austrian_minorities_grid = {
				array = austria_minority_array
				change_scope = yes

				entry_container = austrian_minority_entry
			}
		}

		triggers = {
			austrian_subject_entry_visible = {
				country_exists = v
			}
			austrian_minority_entry_visible = {
				NOT = {
					country_exists = THIS
				}
			}
			
			CONST_placate_visible = {
				NOT = {
					tag = AUS
				}
				ROOT = {
					tag = AUS
				}
			}
			
			CONST_placate_click_enabled = {
				AUS = {
					has_political_power > 14
				}
				NOT = {
					has_country_flag = AUS_placate_flag
				}
			}
			
			CONST_suppress_visible = {
				NOT = {
					tag = AUS
				}
			}
			
			CONST_suppress_click_enabled = {
				AUS = {
					has_equipment = {
						infantry_equipment > 300
					}
					
				}
				NOT = {
					has_country_flag = AUS_suppress_flag
				}
			}
			
			CONST_factory_visible = {
				NOT = {
					tag = AUS
				}
			}
			
			CONST_factory_click_enabled = {
				AUS = {
					num_of_civilian_factories_available_for_projects > 2
					
				}
				NOT = {
					has_country_flag = AUS_factory_flag
					check_variable = {
						var = global.industrial_stuff
						value = 2
						compare = greater_than_or_equals
					}
				}
				
			}
			
			CONST_visit_visible = {
				NOT = {
					tag = AUS
				}
			}
			
			CONST_visit_click_enabled = {
				AUS = {
					has_political_power > 39
				}
				NOT = {
					has_country_flag = AUS_visit_flag
				}
			}
				
			
			CONST_evidenz_visible = {
				NOT = {
					tag = AUS
				}
				has_country_flag = AUS_evidenzbureau_focus
			}
			
			
			
			AUS_outing_visible = {
				tag = AUS
			}
			
			AUS_outing_click_enabled = {
				tag = AUS
				has_political_power > 19
				NOT = {
					has_country_flag = AUS_public_outing_flag
				}
			}
			
			AUS_appearance_visible = {
				tag = AUS
			}
			
			AUS_appearance_click_enabled = {
				tag = AUS
				has_political_power > 29
				NOT = {
					has_country_flag = AUS_appearance_flag
				}
			}
			
			AUS_speech_visible = {
				tag = AUS
			}
			
			AUS_speech_click_enabled = {
				tag = AUS
				has_political_power > 59
				NOT = {
					has_country_flag = AUS_speech_flag
				}
			}
			
			AUS_flag_crest_background_visible = {
				tag = AUS
				has_global_flag = AUS_federalized
			}
			
			MINOR_culture_visible = {
				NOT = {
					tag = AUS
					AUS_is_constituent = yes
					exists = yes
				}
			}
			
			MINOR_culture_click_enabled = {
				ROOT = {
					tag = AUS
				}
				NOT = {
					capital_scope = {
						resistance > 10
					}
					has_global_flag = AUS_culture_flag_global
				}
				AUS = {
					has_stability > 0
				}
			}
			
			MINOR_crush_visible = {
				NOT = {
					tag = AUS
					AUS_is_constituent = yes
					exists = yes
				}
			}
			
			MINOR_crush_click_enabled = {
				ROOT = {
					tag = AUS
				}
				NOT = {
					has_country_flag = AUS_crush_flag
				}
				AUS = {
					has_equipment = {
						infantry_equipment > 300
					}
				}
			}
			
		}
		
		effects = {
			austria_close_click = {
				clear_array = austria_subject_array
				clear_array = austria_minority_array
				clr_country_flag = subject_unrest_window_open
				if = {
					limit = {
						has_country_flag = schizo_value_on
					}
					var:schizophrenic = {
						subtract_from_variable = {
							var = THIS.subject_revolt_progress
							value = global.schizo_value_var
						}
					}
					
					clr_country_flag = schizo_value_on
					clr_country_flag = no_schizo
					clear_variable = schizophrenic
				}
			}
			
			
			
			
			CONST_placate_click = {
				ROOT = {
					add_political_power = -15
					
				}
				set_country_flag = AUS_placate_flag
				THIS_subtract_five_collapse = yes
				country_event = {
					id = bdeaus.6
					days = 10
				}
			}
			
			CONST_suppress_click = {
				ROOT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -300
					}
					add_war_support = -0.02
				}
				set_country_flag = AUS_suppress_flag
				THIS_subtract_three_collapse = yes
				country_event = {
					id = bdeaus.7
					days = 20
				}
			}
			
			CONST_factory_click = {
				set_country_flag = AUS_factory_flag
				add_to_variable = {
					var = global.industrial_stuff
					value = 1
				}
				add_to_variable = {
					var = THIS.industrial_stuff_local
					value = 1
				}
				country_event = {
					id = bdeaus.8
					days = 20
				}
			}
			
			CONST_visit_click = {
				ROOT = {
					add_political_power = -40
				}
				set_country_flag = AUS_visit_flag
				country_event = {
					id = bdeaus.9
					days = 14
				}
			}
			
			AUS_outing_click = {
				add_political_power = -20
				add_stability = 0.02
				set_country_flag = AUS_public_outing_flag
				AUS_subtract_three_collapse = yes
				country_event = {
					id = bdeaus.10
					days = 15
				}
			}
			
			AUS_appearance_click = {
				add_political_power = -30
				add_stability = 0.05
				set_country_flag = AUS_appearance_flag
				AUS_subtract_five_collapse = yes
				country_event = {
					id = bdeaus.11
					days = 20
				}
			}
			
			AUS_speech_click = {
				add_political_power = -60
				add_stability = 0.1
				set_country_flag = AUS_speech_flag
				AUS_subtract_ten_collapse = yes
				country_event = {
					id = bdeaus.12
					days = 30
				}
			}
			
			MINOR_culture_click = {
				ROOT = {
					add_stability = -0.02
				}
				set_country_flag = AUS_culture_flag
				set_global_flag = AUS_culture_flag_global
				AUS = {
					country_event = {
						id = bdeaus.13
						days = 10
					}
				}
			}
			
			MINOR_crush_click = {
				ROOT = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -200
					}
					add_manpower = -50
				}
				set_country_flag = AUS_crush_flag
				THIS_subtract_eight_collapse = yes
				THIS = {
					country_event = {
						id = bdeaus.14
					}
				}
			}
			
		}

		properties = {
			ausflag = {
				image = "[THIS.GetFlag]"
			}
			ausflag_frame = {
				image = "[THIS.GetFlagFrame]"
			}
			minorityflag = {
				image = "[THIS.GetFlag]"
			}
		}
	}
	
	
}