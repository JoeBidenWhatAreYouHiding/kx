##############################
#   Left KMT Focus Tree      #
##############################
# By DSFDarker and Spiderfist#
##############################
# KMT - ESTABLISH BASE TREE ##
##############################

shared_focus = {
	id = CHI_jiangfu
	icon = GFX_goal_generic_fortify_city
	x = 8
	y = 0

	cost = 2

	ai_will_do = {
		factor = 100
		modifier = {
			factor = 0
			NOT = { has_country_flag = choice_made }
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangfu"
		add_political_power = 50
		1046 = {
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 250
			producer = LEP
		}
	}
}

shared_focus = {
	id = CHI_ruijin_arsenal
	icon = GFX_collective_housing
	prerequisite = { focus = CHI_jiangfu }
	x = -3
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 4

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = yes
		}
		modifier = {
			factor = 10
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ruijin_arsenal"
		add_tech_bonus = {
			name = CHI_ruijin_arsenal
			bonus = 1
			uses = 1
			category = industry
		}
		add_offsite_building = { type = arms_factory level = 1 }
	}
}

shared_focus = {
	id = CHI_literacy_programs
	icon = GFX_focus_research
	prerequisite = { focus = CHI_jiangfu }
	x = -5
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 3
			has_war = no
		}
	}

	available = {
		LEP = { exists = no }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_literacy_programs"
		add_research_slot = 1
	}
}

shared_focus = {
	id = CHI_strike_AOG
	icon = GFX_goal_LEC_strikeAOG
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = -1
	y = 1
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 802 # Xiamen
		}
		modifier = {
			factor = 2
			controls_state = 803 # Wenzhou
		}
		modifier = {
			factor = 2
			controls_state = 1075 # Nantong
		}
	}

	available = {
		OR = {
			controls_state = 592 # Guangzhou
			controls_state = 744 # Qingdao
			controls_state = 802 # Xiamen
			controls_state = 803 # Wenzhou
			controls_state = 1075 # Nantong

			controls_state = 728 # Guangzhouwan
			controls_state = 996 # Weihaiwei
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = yes
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_strike_AOG"
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 1000
			producer = GEA
		}
		GER = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
		GEA = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
		AOG = {
			add_opinion_modifier = {
				target = CHI
				modifier = KR_CHI_violated_AOG
			}
		}
	}
}

shared_focus = {
	id = CHI_consolidate_control
	icon = GFX_Goal_Kuomintang_Government_Initiative
	prerequisite = { focus = CHI_ruijin_arsenal }
	x = 0
	y = 2
	relative_position_id = CHI_ruijin_arsenal

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 1.5
			controls_state = 1044 # Nanchang
		}
		modifier = {
			factor = 2
			controls_state = 596 # Qiantang
		}
		modifier = {
			factor = 2
			controls_state = 606 # Anqing
		}
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	bypass = {
		controls_state = 613 # Nanjing
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_consolidate_control"
		add_political_power = 50
		add_war_support = 0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 500
			producer = LEP
		}
	}
}

shared_focus = {
	id = CHI_est_navy
	icon = GFX_goal_generic_navy_cruiser
	prerequisite = {
		focus = CHI_consolidate_control
		focus = CHI_strike_AOG
	}
	x = -1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		OR = {
			has_full_control_of_state = 743
			has_full_control_of_state = 744
			has_full_control_of_state = 746
			has_full_control_of_state = 747
			has_full_control_of_state = 801
			has_full_control_of_state = 802
			has_full_control_of_state = 803
			has_full_control_of_state = 996
			has_full_control_of_state = 1075
		}
	}

	bypass = {
		has_equipment = {
			convoy_1 > 100
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_navy"
		add_equipment_to_stockpile = {
			type = convoy_1
			amount = 30
			producer = GEA
		}
	}
}

shared_focus = {
	id = CHI_jiangxi_rail
	icon = GFX_goal_generic_seize_railway
	prerequisite = { focus = CHI_consolidate_control }
	x = 1
	y = 1
	relative_position_id = CHI_consolidate_control

	cost = 4

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 20
			ANQ = { exists = no }
			LEP = { exists = no }
			SQI = {
				OR = {
					exists = no
					has_government = authoritarian_democrat
				}
			}
		}
	}

	available = {
		owns_state = 1067
		owns_state = 1044
		owns_state = 1045
		owns_state = 596
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_jiangxi_rail"
		add_political_power = 50
		1067 = {
			if = {
				limit = {
					free_building_slots = { building = infrastructure size > 0 }
				}
				add_extra_state_shared_building_slots = 1
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			} # Jinhua

		1044 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			} # Yuzhang
		1045 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			} # Xunyang
		1067 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			} # Jinhua, 1014 Wuhu
		596 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			} # Qiantang
			
		build_railway = {
			path = { 7191 11991 12059 11920 9944 1066 7054 4038 3992 7653 1628 }
		}
	}
}

shared_focus = {
	id = CHI_warlord_research_group
	icon = GFX_goal_generic_scientific_exchange
	prerequisite = {
		focus = CHI_chen_mingshu_reconcile
		focus = CHI_mingshu
		focus = CHI_regional_militias
	}
	x = 4
	y = 2
	relative_position_id = CHI_jiangfu

	cost = 7.25

	ai_will_do = {
		factor = 3
		modifier = {
			factor = 5
			amount_research_slots < 3
		}
		modifier = {
			factor = 2.5
			amount_research_slots < 4
		}
		modifier = {
			factor = 0.5
			amount_research_slots < 5
		}
	}

	available = {
		NOT = { is_in_tech_sharing_group = CHI_KR_research_tech_group }
	}

	bypass = {
		is_in_tech_sharing_group = CHI_KR_research_tech_group
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_warlord_research_group"
		add_to_tech_sharing_group = CHI_KR_research_tech_group
	}
}

	###########################################
	## KMT - Provisional Civil Admin Subtree ##
	
shared_focus = {
	id = CHI_provisional_code
	icon = GFX_focus_generic_treaty
	prerequisite = { focus = CHI_jiangfu }
	x = -7
	y = 1
	relative_position_id = CHI_jiangfu

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_code"
		custom_effect_tooltip = CHI_integration_time_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_speed = -20 }
			add_to_variable = { CHI.kr_china_concessionintegration_speed = -15 }
		}
	}
}

shared_focus = {
	id = CHI_expropriate_landlords
	icon = GFX_goal_LEP_repression
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_land_rent_caps }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		OR = {
			has_war_with = QIE
			has_war_with = FNG
			has_war_with = JAP
			AND = {
				LEP = { exists = no }
				ANQ = { exists = no }
				if = {
					limit = { SQI = { NOT = { has_government = authoritarian_democrat } } }
					SQI = { exists = no }
				}
			}
			QIE = { exists = no }
			FNG = { exists = no }
			JAP = { exists = no }
			has_global_flag = second_weltkrieg_has_started
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expropriate_landlords"
		add_ideas = KR_focus_CHI_land_rent1
	}
}

shared_focus = {
	id = CHI_land_rent_caps
	icon = GFX_goal_generic_forceful_treaty
	prerequisite = { focus = CHI_provisional_code }
	mutually_exclusive = { focus = CHI_expropriate_landlords }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	available = {
		OR = {
			has_war_with = QIE
			has_war_with = FNG
			has_war_with = JAP
			AND = {
				LEP = { exists = no }
				ANQ = { exists = no }
				if = {
					limit = { SQI = { NOT = { has_government = authoritarian_democrat } } }
					SQI = { exists = no }
				}
			}
			QIE = { exists = no }
			FNG = { exists = no }
			JAP = { exists = no }
			has_global_flag = second_weltkrieg_has_started
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_rent_caps"
		add_ideas = KR_focus_CHI_land_rent2
	}
}

shared_focus = {
	id = CHI_land_tax
	icon = GFX_landtax
	prerequisite = {
		focus = CHI_expropriate_landlords
		focus = CHI_land_rent_caps
	}
	x = 0
	y = 2
	relative_position_id = CHI_provisional_code

	cost = 6

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_tax"
		decrease_CHI_popular_support = yes

		add_political_power = 25

		add_ideas = KR_focus_CHI_land_tax

	}
}

shared_focus = {
	id = CHI_opium_prohibition
	icon = GFX_goal_generic_political_pressure
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_tax }
	x = -1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_prohibition"
		add_ideas = KR_focus_CHI_opium1
	}
}

shared_focus = {
	id = CHI_opium_tax
	icon = GFX_goal_opium
	prerequisite = { focus = CHI_land_tax }
	mutually_exclusive = { focus = CHI_opium_prohibition }
	x = 1
	y = 1
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_tax"
		decrease_CHI_popular_support = yes
		add_ideas = KR_focus_CHI_opium2
	}
}

shared_focus = {
	id = CHI_gannan_deal
	icon = GFX_goal_generic_construct_civ_factory
	prerequisite = {
		focus = CHI_opium_tax
		focus = CHI_opium_prohibition
	}
	x = 0
	y = 2
	relative_position_id = CHI_land_tax

	cost = 6

	ai_will_do = {
		factor = 15
	}

	available = {
		has_full_control_of_state = 600
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_gannan_deal"
		increase_CHI_popular_support = yes
		600 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			} # Yuzhang
		custom_effect_tooltip = CHI_integration_cost_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_cost_small = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_medium = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_large = -10 }
			add_to_variable = { CHI.kr_china_concessionintegration_cost = -5 }
		}
	}
}


	#####################################
	## KMT - Warlord Diplomacy Subtree ##

shared_focus = {
	id = CHI_yangste_offensive
	icon = GFX_goal_CHI_choose_capital
	prerequisite = { focus = CHI_jiangfu }
	relative_position_id = CHI_jiangfu
	x = -1
	y = 1

	cost = 2

	ai_will_do = {
		factor = 45
		modifier = {
			factor = 2
			OR = {
				ANQ = { has_war_with = SQI }
				LEP = { has_war_with = SQI }
			}
		}
	}

	available = {
		OR = {
			country_exists = LEP
			country_exists = ANQ
		}
	}

	bypass = {
		OR = {
			AND = {
				has_war_with = LEP
				has_war_with = ANQ
			}
			NOT = {
				country_exists = LEP
				country_exists = ANQ
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_yangste_offensive"
		if = {
			limit = { country_exists = LEP }
			custom_effect_tooltip = CHI_dec_LEP_expedition_tt1
		}
		if = {
			limit = { country_exists = ANQ }
			custom_effect_tooltip = CHI_dec_LEP_expedition_tt2
		}
	}
}

shared_focus = {
	id = CHI_contact_cells
	icon = GFX_goal_conspiracy
	prerequisite = { focus = CHI_yangste_offensive }
	x = -1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 5

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 5
			OR = {
				has_government = social_democrat
				has_government = social_liberal
			}
		}
	}

	available = {
		NOT = {
			country_exists = LEP
			country_exists = ANQ
		}
		owns_state = 613 # Nanjing
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_contact_cells"
		add_political_power = 50
		add_war_support = 0.05
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
			producer = LEP
		}
	}
}

shared_focus = {
	id = CHI_handle_SQI
	icon = GFX_SQI_Two_Zhangs_Enter
	prerequisite = { focus = CHI_yangste_offensive }
	x = 1
	y = 1
	relative_position_id = CHI_yangste_offensive

	cost = 2

	ai_will_do = {
		factor = 35
	}

	available = {
		country_exists = SQI
		OR = {
			SQI = { NOT = { has_government = authoritarian_democrat } }
			has_completed_focus = CHI_northern_expedition
		}
	}

	bypass = {
		OR = {
			has_war_with = SQI
			NOT = { country_exists = SQI }
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_handle_SQI"
		custom_effect_tooltip = CHI_dec_SQI_expedition_tt
	}
}

shared_focus = {
	id = CHI_VNQDD_liasons
	icon = GFX_INC_female_soldiers
	prerequisite = { focus = CHI_handle_SQI focus = CHI_contact_cells }
	relative_position_id = CHI_yangste_offensive

	x = 0
	y = 2

	cost = 6

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 2
			INC = { has_same_government_as_ROOT = yes }
		}
		modifier = {
			factor = 0.5
			INC = { has_same_government_as_ROOT = no }
		}
	}

	available = {
		country_exists = INC
		NOT = { has_war_with = INC }
	}

	bypass = {
		has_war_with = INC
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_VNQDD_liasons"
		country_event = { id = chi_for.54 days = 1 }
	}
}

shared_focus = {
	id = CHI_HNN_intervention
	icon = GFX_goal_CHI_cheng_qian_reconcile
	prerequisite = { focus = CHI_jiangfu }
	relative_position_id = CHI_jiangfu
	x = 1
	y = 1

	cost = 2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1936.9.1
		}
	}

	available = {
		HNN = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		HNN = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	bypass = {
		HNN = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_HNN_intervention"
		custom_effect_tooltip = CHI_dec_negotiate_with_HNN_tt
		custom_effect_tooltip = CHI_Negotiation_WIP_tt
	}
}

shared_focus = {
	id = CHI_chen_mingshu_reconcile
	icon = GFX_goal_CHI_chen_mingshu_reconcile
	prerequisite = { focus = CHI_jiangfu }
	relative_position_id = CHI_jiangfu
	x = 3
	y = 1

	cost = 2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 3.5
			GXC = { has_country_flag = GXC_had_civil_war }
		}
	}

	available = {
		GXC = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		GXC = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	bypass = {
		GXC = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_chen_mingshu_reconcile"
		custom_effect_tooltip = CHI_dec_negotiate_with_GXC_tt
		custom_effect_tooltip = CHI_Negotiation_WIP_tt
	}
}

shared_focus = {
	id = CHI_plan_southern
	icon = GFX_focus_prc_infiltration
	prerequisite = { focus = CHI_HNN_intervention focus = CHI_chen_mingshu_reconcile }
	relative_position_id = CHI_jiangfu

	x = 2
	y = 2

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			GXC = { kmt_failure = no }
		}
		modifier = {
			factor = 0
			HNN = { kmt_failure = no }
		}
		modifier = {
			factor = 10
			GXC = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			HNN = { kmt_failure = yes }
		}
	}

	available = {
		date > 1937.6.1
		OR = {
			has_completed_focus = CHI_1st_congress
		}
		OR = {
			GXC = {
				exists = yes
				NOT = { has_war_with = ROOT }
				if = {
					limit = { CHI = { NOT = { has_socialist_government = yes } } }
					kmt_failure = yes
				}
			}
			HNN = {
				exists = yes
				NOT = { has_war_with = ROOT }
				if = {
					limit = { CHI = { NOT = { has_socialist_government = yes } } }
					kmt_failure = yes
				}
			}
		}
	}

	bypass = {
		GXC = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
		HNN = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_southern"
		if = {
			limit = { country_exists = HNN }
			custom_effect_tooltip = CHI_dec_south_warlord_expedition_tt1
		}
		if = {
			limit = { country_exists = GXC }
			custom_effect_tooltip = CHI_dec_south_warlord_expedition_tt2
		}
	}
}

shared_focus = {
	id = CHI_SZC_intervention
	icon = GFX_goal_CHI_SZC_lu_chao
	prerequisite = { focus = CHI_HNN_intervention }
	prerequisite = { focus = CHI_chen_mingshu_reconcile }
	relative_position_id = CHI_HNN_intervention
	x = 0
	y = 2

	cost = 2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1937.1.1
		}
	}

	available = {
		SZC = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		SZC = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	bypass = {
		SZC = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_SZC_intervention"
		custom_effect_tooltip = CHI_dec_negotiate_with_SZC_tt
		custom_effect_tooltip = CHI_Negotiation_WIP_tt
	}
}

shared_focus = {
	id = CHI_YUN_reconcile
	icon = GFX_goal_CHI_YUN_zhu_peide
	prerequisite = { focus = CHI_HNN_intervention }
	prerequisite = { focus = CHI_chen_mingshu_reconcile }
	relative_position_id = CHI_chen_mingshu_reconcile
	x = 0
	y = 2

	cost = 2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1937.1.1
		}
	}

	available = {
		YUN = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		YUN = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	bypass = {
		YUN = {
			OR = {
				has_war_with = ROOT
				exists = no
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_YUN_reconcile"
		custom_effect_tooltip = CHI_dec_negotiate_with_YUN_tt
		custom_effect_tooltip = CHI_Negotiation_WIP_tt
	}
}

shared_focus = {
	id = CHI_plan_western
	icon = GFX_goal_CHI_plan_western
	prerequisite = { focus = CHI_SZC_intervention focus = CHI_YUN_reconcile }

	relative_position_id = CHI_plan_southern
	x = 0
	y = 2

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			YUN = { kmt_failure = no }
		}
		modifier = {
			factor = 0
			SZC = { kmt_failure = no }
		}
		modifier = {
			factor = 10
			YUN = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			SZC = { kmt_failure = yes }
		}
	}

	available = {
		date > 1937.6.1
		has_completed_focus = CHI_1st_congress
		OR = {
			YUN = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
			SZC = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
		}
	}

	bypass = {
		YUN = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
		SZC = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_western"
		if = {
			limit = { country_exists = SZC }
			custom_effect_tooltip = CHI_dec_west_warlord_expedition_tt1
		}
		if = {
			limit = { country_exists = YUN }
			custom_effect_tooltip = CHI_dec_west_warlord_expedition_tt2
		}
	}
}

	###############################
	## KMT - MILITARY FOCUS TREE ##
	###############################

	########################
	## KMT - Army Subtree ##

shared_focus = {
	id = CHI_form_army
	icon = GFX_goal_chinese_national_nrmy
	x = 17
	y = 0

	cost = 2

	ai_will_do = {
		factor = 95
		modifier = {
			factor = 0
			NOT = { has_country_flag = choice_made }
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_army"
		add_command_power = 25
		add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
		}
		if = {
			limit = { CHI = { NOT = { has_country_flag = CHI_mingshu_lkmt } } }
			custom_effect_tooltip = CHI_2nd_NRA_units_tt
			hidden_effect = { load_oob = "CHI_2nd_NRA_units" }
		}
	}
}

shared_focus = {
	id = CHI_regional_militias
	icon = GFX_goal_agrarian_soldiers
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_one_army }
	x = -3
	y = 1
	relative_position_id = CHI_form_army

	cost = 6

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_regional_militias"

		if = {
			limit = { CHI = { has_country_flag = CHI_mingshu_lkmt } }
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 1000
				producer = GXC
			}
			army_experience = 15
		}
		else_if = {
			limit = { CHI = { NOT = { has_country_flag = CHI_mingshu_lkmt } } }
			custom_effect_tooltip = CHI_regional_militias_units_tt
			hidden_effect = { load_oob = CHI_integrate_bandits }
		}
	}
}

shared_focus = {
	id = CHI_one_army
	icon = GFX_goal_CHI_form_2nd_NRA
	prerequisite = { focus = CHI_form_army }
	mutually_exclusive = { focus = CHI_regional_militias }
	x = -1
	y = 1
	relative_position_id = CHI_form_army

	cost = 6

	ai_will_do = {
		factor = 60
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_one_army"
		army_experience = 15
		add_tech_bonus = {
			name = CHI_one_army
			bonus = 1
			uses = 1
			category = infantry_weapons
		}
	}
}

shared_focus = {
	id = CHI_tigress_battalions
	icon = GFX_focus_generic_female_soldiers
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	x = -2
	y = 2
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 4
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_tigress_battalions"
		country_event = { id = chi_dom.3 days = 7 }
		add_offsite_building = { type = industrial_complex level = 1 }
	}
}

shared_focus = {
	id = CHI_peoples_army
	icon = GFX_human_tsunami
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_modern_divisions }
	x = 0
	y = 2
	relative_position_id = CHI_regional_militias

	cost = 8

	ai_will_do = {
		factor = 66
	}

	available = {
		OR = {
			has_war_with = QIE
			has_war_with = FNG
			has_war_with = JAP
			has_country_flag = CHI_prioritize_manpower
			QIE = { exists = no }
			FNG = { exists = no }
			JAP = { exists = no }
			has_global_flag = second_weltkrieg_has_started
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_peoples_army"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
			custom_effect_tooltip = CHI_start_army_tt
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Jiang_Bocheng_dead
			clr_country_flag = Zuo_Quan_dead
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Liao_Yaoxiang_dead
			clr_country_flag = Pan_Wenzhi_dead
			clr_country_flag = Lin_Zun_dead
			clr_country_flag = Liang_Xuzhao_dead
			clr_country_flag = Deng_Zhaoxiang_dead
			clr_country_flag = Chen_Jiliang_dead
			clr_country_flag = Lin_Jilu_dead
			clr_country_flag = Fang_Ziyi_dead
			clr_country_flag = Ba_Yuzao_dead
			clr_country_flag = Huang_Guangrui_dead
			clr_country_flag = Zhou_Zhirou_dead
		}
		add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
		}
		custom_effect_tooltip = CHI_peoples_army_units_tt
		custom_effect_tooltip = CHI_new_general_tt_Du_Yuming
		hidden_effect = {
			load_oob = "CHI_new_infantry_unit_one"
			create_corps_commander = {
				name = "Du Yuming"
				desc = "POLITICS_CHI_DU_YUMING_ARMY_DESC"
				portrait_path = "gfx/leaders/CHI/Portrait_CHI_Du_Yuming.png"
				traits = {
					inflexible_strategist
					armor_officer
					organizer
					career_officer
				}
				skill = 3
				attack_skill = 2
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
			}
		}
		custom_effect_tooltip = CHI_NRA_peoples_army_tt
		add_to_variable = { CHI_NRA_training_time_factor = -0.05 }
		add_to_variable = { CHI_NRA_conscription = 0.005 }
		add_ideas = KR_focus_CHI_mass_production1

		if = {
			limit = { has_country_flag = CHI_prioritize_modernization }
			custom_effect_tooltip = CHI_choose_modernization_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.05 }
		}
	}
}

shared_focus = {
	id = CHI_modern_divisions
	icon = GFX_goal_generic_army_doctrines
	prerequisite = { focus = CHI_regional_militias focus = CHI_one_army }
	mutually_exclusive = { focus = CHI_peoples_army }
	x = 0
	y = 2
	relative_position_id = CHI_one_army

	cost = 8

	ai_will_do = {
		factor = 66
	}

	available = {
		OR = {
			has_war_with = QIE
			has_war_with = FNG
			has_war_with = JAP
			has_country_flag = CHI_prioritize_modernization
			QIE = { exists = no }
			FNG = { exists = no }
			JAP = { exists = no }
			has_global_flag = second_weltkrieg_has_started
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_divisions"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
			custom_effect_tooltip = CHI_start_army_tt
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Jiang_Bocheng_dead
			clr_country_flag = Zuo_Quan_dead
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Liao_Yaoxiang_dead
			clr_country_flag = Pan_Wenzhi_dead
			clr_country_flag = Lin_Zun_dead
			clr_country_flag = Liang_Xuzhao_dead
			clr_country_flag = Deng_Zhaoxiang_dead
			clr_country_flag = Chen_Jiliang_dead
			clr_country_flag = Lin_Jilu_dead
			clr_country_flag = Fang_Ziyi_dead
			clr_country_flag = Ba_Yuzao_dead
			clr_country_flag = Huang_Guangrui_dead
			clr_country_flag = Zhou_Zhirou_dead
		}
		add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
		}
		custom_effect_tooltip = CHI_modern_divisions_units_tt
		custom_effect_tooltip = CHI_new_general_tt_Dai_Anlan
		hidden_effect = {
			load_oob = "CHI_new_infantry_unit_two"
			create_corps_commander = {
				name = "Dai Anlan"
				desc = "POLITICS_CHI_DAI_ANLAN_ARMY_DESC"
				portrait_path = "gfx/leaders/CHI/Portrait_CHI_Dai_Anlan.png"
				traits = {
					trait_reckless
					armor_officer
					career_officer
					brilliant_strategist
				}
				skill = 3
				attack_skill = 3
				defense_skill = 1
				planning_skill = 3
				logistics_skill = 2
			}
		}
		custom_effect_tooltip = CHI_NRA_modern_divisions_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.05 }
		add_to_variable = { CHI_NRA_max_planning = 0.05 }
		add_to_variable = { CHI_NRA_experience_gain_factor = 0.05 }
		add_ideas = KR_focus_CHI_modern_art_of_war1

		if = {
			limit = { has_country_flag = CHI_prioritize_manpower }
			custom_effect_tooltip = CHI_choose_manpower_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
			add_popularity = { ideology = totalist popularity = 0.05 }
		}
	}
}

shared_focus = {
	id = CHI_asymmetrical_warfare
	icon = GFX_SIA_Urban_Warfare_NF
	prerequisite = { focus = CHI_peoples_army }
	x = -1
	y = 1
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_asymmetrical_warfare"
		custom_effect_tooltip = SIA_asymmetrical_warfare_effect
		hidden_effect = {
			set_technology = { asymmetrical_warfare = 1 }
		}
	}
}

shared_focus = {
	id = CHI_dare_to_die
	icon = GFX_goal_CHI_peoples_army
	prerequisite = { focus = CHI_peoples_army focus = CHI_modern_divisions }
	x = 0
	y = 2
	relative_position_id = CHI_tigress_battalions

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dare_to_die"
		add_war_support = 0.01
		custom_effect_tooltip = CHI_NRA_dare_to_die_tt
		add_to_variable = { CHI_NRA_army_org_factor = 0.05 }
		add_to_variable = { CHI_NRA_recon_factor = 0.05 }
		add_to_variable = { CHI_NRA_partisan_effect = 0.15 }
	}
}

shared_focus = {
	id = CHI_airborne_corps
	icon = GFX_focus_generic_paratrooper
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	prerequisite = { focus = CHI_modern_divisions }
	x = 1
	y = 1
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_airborne_corps"
		if = {
			limit = { NOT = { has_tech = paratroopers } }
			set_technology = { paratroopers = 1 }
		}
		else = {
			add_tech_bonus = {
				name = CHI_airborne_corps
				bonus = 1
				uses = 1
				category = para_tech
			}
		}
	}
}

shared_focus = {
	id = CHI_conscription
	icon = GFX_goal_conscription
	prerequisite = { focus = CHI_peoples_army }
	prerequisite = { focus = CHI_asymmetrical_warfare focus = CHI_dare_to_die }
	x = 0
	y = 2
	relative_position_id = CHI_peoples_army

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_conscription"
		army_experience = 5
		custom_effect_tooltip = CHI_NRA_conscription_tt
		add_to_variable = { CHI_NRA_conscription = 0.005 }
		add_to_variable = { CHI_NRA_training_time_factor = -0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production1
			add_idea = KR_focus_CHI_mass_production2
		}
	}
}

shared_focus = {
	id = CHI_mechanized
	icon = GFX_goal_generic_army_motorized
	prerequisite = { focus = CHI_modern_divisions }
	prerequisite = { focus = CHI_dare_to_die focus = CHI_airborne_corps }
	x = 0
	y = 2
	relative_position_id = CHI_modern_divisions

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mechanized"
		add_command_power = 15
		add_tech_bonus = {
			name = CHI_mechanized
			bonus = 1
			uses = 1
			category = motorized_equipment
		}
		custom_effect_tooltip = CHI_NRA_mechanized_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.1 }
		add_to_variable = { CHI_NRA_max_planning = 0.1 }
		add_to_variable = { CHI_NRA_max_command_power = 10 }
		add_to_variable = { CHI_NRA_experience_gain_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war1
			add_idea = KR_focus_CHI_modern_art_of_war2
		}
		hidden_effect = {
			country_event = chi_dom.22
		}
	}
}

shared_focus = {
	id = CHI_stratified
	icon = GFX_goal_army_guy_2
	prerequisite = { focus = CHI_conscription }
	x = -1
	y = 1
	relative_position_id = CHI_conscription

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_stratified"
		army_experience = 5
		custom_effect_tooltip = CHI_NRA_stratified_tt
		add_to_variable = { CHI_NRA_training_time_factor = -0.1 }
		add_to_variable = { CHI_NRA_planning_speed = 0.1 }
		add_to_variable = { CHI_NRA_max_planning = 0.1 }
		add_to_variable = { CHI_NRA_conscription = 0.01 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_mass_production2
			add_idea = KR_focus_CHI_mass_production3
		}
	}
}

shared_focus = {
	id = CHI_blocking_detachments
	icon = GFX_goal_generic_special_forces
	prerequisite = { focus = CHI_conscription focus = CHI_mechanized }
	x = 0
	y = 2
	relative_position_id = CHI_dare_to_die

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_blocking_detachments"
		add_tech_bonus = {
			name = CHI_blocking_detachments
			bonus = 1
			uses = 1
			category = mountaineers_tech
		}
		custom_effect_tooltip = CHI_NRA_blocking_detachments_tt
		add_to_variable = { CHI_NRA_special_forces_cap = 0.02 }
	}
}

shared_focus = {
	id = CHI_modern_combined_arms
	icon = GFX_focus_generic_combined_arms
	prerequisite = { focus = CHI_mechanized }
	x = 1
	y = 1
	relative_position_id = CHI_mechanized

	cost = 8

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_modern_combined_arms"
		add_command_power = 15
		custom_effect_tooltip = CHI_NRA_modern_combined_arms_tt
		add_to_variable = { CHI_NRA_planning_speed = 0.1 }
		add_to_variable = { CHI_NRA_max_planning = 0.1 }
		add_to_variable = { CHI_NRA_training_time_factor = -0.05 }
		add_to_variable = { CHI_NRA_experience_gain_factor = 0.1 }
		swap_ideas = {
			remove_idea = KR_focus_CHI_modern_art_of_war2
			add_idea = KR_focus_CHI_modern_art_of_war3
		}
	}
}

	##################################
	## KMT - Army Structure Subtree ##

shared_focus = {
	id = CHI_restore_whampoa
	icon = GFX_focus_chi_whampoa_military_academy
	prerequisite = { focus = CHI_form_army }
	x = 5
	y = 1
	relative_position_id = CHI_form_army

	cost = 5

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		OR = {
			has_war_with = QIE
			has_war_with = FNG
			has_war_with = JAP
			has_country_flag = CHI_whampoa_academy
			QIE = { exists = no }
			FNG = { exists = no }
			JAP = { exists = no }
			has_global_flag = second_weltkrieg_has_started
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_restore_whampoa"
		if = {
			limit = { has_idea = KR_CHI_start_army }
			remove_ideas = KR_CHI_start_army
			custom_effect_tooltip = CHI_start_army_tt
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Jiang_Bocheng_dead
			clr_country_flag = Zuo_Quan_dead
			clr_country_flag = Xu_Tingyao_dead
			clr_country_flag = Liao_Yaoxiang_dead
			clr_country_flag = Pan_Wenzhi_dead
			clr_country_flag = Lin_Zun_dead
			clr_country_flag = Liang_Xuzhao_dead
			clr_country_flag = Deng_Zhaoxiang_dead
			clr_country_flag = Chen_Jiliang_dead
			clr_country_flag = Lin_Jilu_dead
			clr_country_flag = Fang_Ziyi_dead
			clr_country_flag = Ba_Yuzao_dead
			clr_country_flag = Huang_Guangrui_dead
			clr_country_flag = Zhou_Zhirou_dead
		}
		add_command_power = 25
		army_experience = 15
		custom_effect_tooltip = CHI_NRA_restore_whampoa_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
	}
}

shared_focus = {
	id = CHI_nat_air_army
	icon = GFX_goal_chinese_national_air_force
	prerequisite = { focus = CHI_restore_whampoa }
	x = -3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_nat_air_army"
		air_experience = 20
		custom_effect_tooltip = CHI_NRA_nat_air_army_tt
		add_to_variable = { CHI_NRA_experience_gain_air_factor = 0.1 }
		if = {
			limit = { controls_state = 613 } #Nanjing
			613 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 596 } #Qiantang
			596 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1044 } #Yuzhang
			1044 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else_if = {
			limit = { controls_state = 1046 } #Tingzhang
			1046 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_controlled_state = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
}

shared_focus = {
	id = CHI_flexible_aircraft
	icon = GFX_goal_generic_air_fighter
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_heavy_airframes }
	x = -1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_flexible_aircraft"
		add_tech_bonus = {
			name = CHI_flexible_aircraft
			bonus = 1
			uses = 1
			category = light_air
		}
	}
}

shared_focus = {
	id = CHI_heavy_airframes
	icon = GFX_goal_generic_air_bomber
	prerequisite = { focus = CHI_nat_air_army }
	mutually_exclusive = { focus = CHI_flexible_aircraft }
	x = 1
	y = 1
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_heavy_airframes"
		add_tech_bonus = {
			name = CHI_heavy_airframes
			bonus = 1
			uses = 1
			category = medium_air
			category = heavy_air
		}
	}
}

shared_focus = {
	id = CHI_build_airfields
	icon = GFX_goal_generic_air_production
	prerequisite = {
		focus = CHI_flexible_aircraft
		focus = CHI_heavy_airframes
	}
	x = 0
	y = 2
	relative_position_id = CHI_nat_air_army

	cost = 8

	ai_will_do = {
		factor = 2
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_airfields"
		air_experience = 25
		add_doctrine_cost_reduction = {
				name = air_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
		}
	}
}

shared_focus = {
	id = CHI_naval_aviation
	icon = GFX_goal_generic_air_naval_bomber
	prerequisite = { focus = CHI_build_airfields }
	prerequisite = { focus = CHI_coastal_defenses }
	x = 1
	y = 1
	relative_position_id = CHI_build_airfields

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_aviation"
		add_tech_bonus = {
			name = CHI_naval_aviation
			bonus = 1
			uses = 2
			category = naval_air
		}
	}
}

shared_focus = {
	id = CHI_separate_naval_command
	icon = GFX_goal_chinese_national_navy
	prerequisite = { focus = CHI_restore_whampoa }
	x = 0
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	available = {
		any_owned_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_separate_naval_command"
		navy_experience = 15
		custom_effect_tooltip = CHI_NRA_separate_naval_command_tt
		add_to_variable = { CHI_NRA_experience_gain_navy_factor = 0.05 }
		if = {
			limit = {
				NOT = {
					any_owned_state = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				any_owned_state = {
					is_coastal = yes
				}
			}
			random_owned_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

shared_focus = {
	id = CHI_coastal_fleets
	icon = GFX_focus_generic_destroyer
	prerequisite = { focus = CHI_separate_naval_command }
	x = 0
	y = 1
	relative_position_id = CHI_separate_naval_command

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			all_owned_state = {
				OR = {
					is_coastal = no
					dockyard < 1
				}
			}
		}
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_fleets"
		add_tech_bonus = {
			name = CHI_coastal_fleets
			bonus = 1
			uses = 1
			category = dd_tech
		}
		add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
		}
	}
}

shared_focus = {
	id = CHI_coastal_defenses
	icon = GFX_focus_generic_coastal_fort
	prerequisite = { focus = CHI_coastal_fleets }
	x = -1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			all_owned_state = {
				OR = {
					is_coastal = no
					dockyard < 1
				}
			}
		}
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_coastal_defenses"
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				is_in_home_area = yes
				is_coastal = yes
			}
			add_building_construction = {
				type = coastal_bunker
				province = {
					all_provinces = yes
					limit_to_coastal = yes
				}
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_NRA_coastal_defenses_tt
		add_to_variable = { CHI_NRA_production_speed_coastal_bunker_factor = 0.05 }
	}
}

shared_focus = {
	id = CHI_integrate_beiyang_navy
	icon = GFX_goal_navy_decision
	prerequisite = { focus = CHI_sanmin_commissars }
	prerequisite = { focus = CHI_coastal_fleets }
	x = 1
	y = 1
	relative_position_id = CHI_coastal_fleets

	cost = 8

	available = {
		OR = {
			AND = {
				QIE = { exists = no }
				controls_state = 608 #Beijing
			}
			AND = {
				FNG = { exists = no }
				controls_state = 716 #Fengtian
			}
		}
	}

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_integrate_beiyang_navy"
		navy_experience = 50
		add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
		}
	}
}

shared_focus = {
	id = CHI_submarine_doctrine
	icon = GFX_goal_generic_navy_submarine
	prerequisite = { focus = CHI_coastal_fleets }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_fleets

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			all_owned_state = {
				OR = {
					is_coastal = no
					dockyard < 1
				}
			}
		}
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_submarine_doctrine"
		add_doctrine_cost_reduction = {
	name = naval_doc_bonus
	cost_reduction = 0.5
	uses = 2
	category = cat_trade_interdiction
		}
		add_tech_bonus = {
			name = CHI_submarine_doctrine
			bonus = 1
			uses = 1
			category = ss_tech
		}
	}
}

shared_focus = {
	id = CHI_naval_infantry
	icon = GFX_goal_generic_amphibious_assault
	prerequisite = { focus = CHI_coastal_defenses }
	x = 0
	y = 2
	relative_position_id = CHI_coastal_defenses

	cost = 8

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 0
			all_owned_state = {
				OR = {
					is_coastal = no
					dockyard < 1
				}
			}
		}
		modifier = {
			factor = 1.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_naval_infantry"
		add_tech_bonus = {
			name = CHI_naval_infantry
			bonus = 1
			uses = 1
			category = marine_tech
		}
	}
}

shared_focus = {
	id = CHI_military_affairs_cmsn
	icon = GFX_goal_CHI_military_affairs_cmsn
	prerequisite = { focus = CHI_restore_whampoa }
	x = 3
	y = 1
	relative_position_id = CHI_restore_whampoa

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_military_affairs_cmsn"
		army_experience = 10
		add_doctrine_cost_reduction = {
				name = land_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
		}
		custom_effect_tooltip = CHI_NRA_military_affairs_cmsn_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
		add_to_variable = { CHI_NRA_army_leader_cost_factor = -0.25 }
	}
}

shared_focus = {
	id = CHI_sanmin_commissars
	icon = GFX_goal_generic_join_faction
	prerequisite = { focus = CHI_military_affairs_cmsn }
	x = 0
	y = 1
	relative_position_id = CHI_military_affairs_cmsn

	cost = 8

	ai_will_do = {
		factor = 16
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_sanmin_commissars"
		add_political_power = 10
		custom_effect_tooltip = CHI_NRA_sanmin_commissars_tt
		add_to_variable = { CHI_NRA_experience_gain_army_factor = 0.1 }
		add_to_variable = { CHI_NRA_command_power_gain_mult = 0.25 }
	}
}

shared_focus = {
	id = CHI_special_methods_division
	icon = GFX_goal_secret_agents
	prerequisite = {
		focus = CHI_sanmin_commissars
	}
	x = 0
	y = 1
	relative_position_id = CHI_sanmin_commissars

	cost = 8

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 1.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_special_methods_division"
		if = {
			limit = { NOT = { has_tech = tech_military_police } }
			set_technology = { tech_military_police = 1 }
		}
		else = {
			add_tech_bonus = {
				name = CHI_special_methods_division
				bonus = 1
				uses = 1
				technology = tech_military_police2
				technology = tech_military_police3
				technology = tech_military_police4
			}
		}
		add_tech_bonus = {
			name = CHI_special_methods_division
			bonus = 1
			uses = 1
			category = radar_tech
		}
	}
}

shared_focus = {
	id = CHI_retake_taiwan
	icon = GFX_goal_Taiwan_Colony
	prerequisite = { focus = CHI_integrate_beiyang_navy }
	prerequisite = { focus = CHI_special_methods_division }
	x = 0
	y = 2
	relative_position_id = CHI_sanmin_commissars

	cost = 8

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0.5
			JAP = { is_stronger_than_ROOT = yes }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = QIE }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = FNG }
		}
	}

	available = {
		country_exists = JAP
		NOT = { has_war_with = JAP }
		naval_strength_ratio = { tag = JAP ratio > 0.75 }
	}

	bypass = {
		OR = {
			NOT = { country_exists = JAP }
			has_war_with = JAP
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_retake_taiwan"

		create_wargoal = {
			type = annex_everything
			target = JAP
		}
	}
}

	#####################################################
	## KMT - TRANSITION TO REGIONAL POWER MISC FOCUSES ##
	#####################################################

shared_focus = {
	id = CHI_1st_congress
	icon = GFX_goal_CHI_YUN_reconcile
	prerequisite = { focus = CHI_est_navy }
	prerequisite = { focus = CHI_jiangxi_rail }
	x = 5
	y = 6

	cost = 6

	ai_will_do = {
		factor = 120
	}

	available = {
		LEP = { exists = no }
		ANQ = { exists = no }
		if = {
			limit = { SQI = { NOT = { has_government = authoritarian_democrat } } }
			SQI = { exists = no }
		}
	}
	
	select_effect = {
		country_event = { id = chi_cng.1 days = 3 }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_congress"
		custom_effect_tooltip = CHI_1st_congress_tt
	}
}

	#############################
	## KMT - REVIVE CHINA TREE ##
	#############################

shared_focus = {
	id = CHI_revive_china
	icon = GFX_goal_CHI_revive_china
	prerequisite = {
		focus = CHI_1st_congress
		focus = CHI_1st_congress_GXC
			#focus from the GXC tree
	}
	x = 1
	y = 7

	cost = 6.5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_revive_china"
		add_tech_bonus = {
			name = CHI_revive_china
			bonus = 1
			uses = 2
			category = industry
		}
	}
}

shared_focus = {
	id = CHI_national_RC
	icon = GFX_goal_generic_construct_public_housing
	prerequisite = { focus = CHI_revive_china }
	x = -1
	y = 1
	relative_position_id = CHI_revive_china

	cost = 6.5

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_RC"
		custom_effect_tooltip = CHI_national_RC_category_tt
		add_tech_bonus = {
			name = CHI_national_RC
			bonus = 1
			uses = 1
			category = industry
		}
		capital_scope = {
			if = {
				limit = {
					free_building_slots = { building = infrastructure size > 0 }
				}
				add_extra_state_shared_building_slots = 1
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = CHI_natl_dockyard
	icon = GFX_goal_generic_construct_naval_dockyard
	prerequisite = { focus = CHI_national_RC }
	x = 0
	y = 1
	relative_position_id = CHI_national_RC

	cost = 6.5

	ai_will_do = {
		factor = 25
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_natl_dockyard"
		custom_effect_tooltip = CHI_national_RC_category_tt
	}
}

shared_focus = {
	id = CHI_standard_rail_gauges
	icon = GFX_goal_generic_construct_infrastructure
	prerequisite = { focus = CHI_natl_dockyard }
	x = 0
	y = 1
	relative_position_id = CHI_natl_dockyard

	cost = 6.5

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_standard_rail_gauges"

		if = {
			limit = {
				608 = { is_owned_and_controlled_by = CHI }
			}
			608 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}

		if = {
			limit = {
				613 = { is_owned_and_controlled_by = CHI }
			}
			613 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}

		if = {
			limit = {
				650 = { is_owned_and_controlled_by = CHI }
			}
			650 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}

		if = {
			limit = {
				620 = { is_owned_and_controlled_by = CHI }
			}
			620 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}

		if = {
			limit = {
				602 = { is_owned_and_controlled_by = CHI }
			}
			602 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}

		if = {
			limit = {
				593 = { is_owned_and_controlled_by = CHI }
			}
			593 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
}

shared_focus = {
	id = CHI_academica_sinica
	icon = GFX_focus_research2
	prerequisite = { focus = CHI_revive_china }
	x = 1
	y = 1
	relative_position_id = CHI_revive_china

	cost = 6.5

	ai_will_do = {
		factor = 50
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_academica_sinica"
		add_research_slot = 1
	}
}

shared_focus = {
	id = CHI_bopomofo
	icon = GFX_focus_generic_military_academy
	prerequisite = { focus = CHI_academica_sinica }
	x = 0
	y = 1
	relative_position_id = CHI_academica_sinica

	cost = 6.5

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_bopomofo"
		add_tech_bonus = {
			name = CHI_bopomofo
			bonus = 1
			uses = 2
			category = electronics
		}
	}
}

shared_focus = {
	id = CHI_foreign_research
	icon = GFX_goal_generic_scientific_exchange
	prerequisite = { focus = CHI_bopomofo }
	x = 0
	y = 2
	relative_position_id = CHI_bopomofo

	cost = 6.5

	ai_will_do = {
		factor = 40
		modifier = {
			factor = 0.5
			has_war = yes
		}
		modifier = {
			factor = 0.25
			country_exists = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_foreign_research"
		country_event = { id = chi_dom.24 days = 1 }
	}
}

	######################################
	## KMT - PROCLAIM NEW REPUBLIC TREE ##
	######################################

shared_focus = {
	id = CHI_proclaim_new_republic
	icon = GFX_goal_COS_Ferrer_Coup
	prerequisite = {
		focus = CHI_1st_congress
		focus = CHI_1st_congress_GXC
			#focus from the GXC tree
	}

	x = 5
	y = 7

	cost = 5

	ai_will_do = {
		factor = 40
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_proclaim_new_republic"
		add_political_power = 75
	}
}

shared_focus = {
	id = CHI_choose_capital
	icon = GFX_focus_generic_china1
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = -1
	y = 1
	relative_position_id = CHI_proclaim_new_republic
	cost = 8

	ai_will_do = {
		factor = 5
	}

	available = {
		has_country_flag = CHI_republic_proclaimed
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_choose_capital"
		custom_effect_tooltip = CHI_capital_relocation_category_tt
	}
}

shared_focus = {
	id = CHI_build_national_mausoleum
	icon = GFX_focus_prc_remove_chiang_kai_shek
	prerequisite = { focus = CHI_choose_capital }
	x = 0
	y = 1
	relative_position_id = CHI_choose_capital

	cost = 5

	ai_will_do = {
		factor = 5
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_build_national_mausoleum"

		add_war_support = 0.05

		add_stability = 0.05

		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_new_culture_movement
	icon = GFX_goal_KTG_Bookstack
	prerequisite = {
		focus = CHI_build_national_mausoleum
		focus = CHI_bopomofo
	}
	x = -1
	y = 1
	relative_position_id = CHI_build_national_mausoleum

	cost = 6.5

	ai_will_do = {
		factor = 5
	}

	available = {
		OR = {
			has_completed_focus = CHI_1st_national_elections
			has_completed_focus = CHI_sanmin_study
			has_completed_focus = CHI_chiangsbennevolentdictatorship
			has_completed_focus = CHI_daisruleoftheironfist
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_new_culture_movement"

		if = {
			limit = {
				has_government = radical_socialist
			}
			add_ideas = KR_focus_new_culture1
		}

		if = {
			limit = {
				has_government = social_democrat
			}
			add_ideas = KR_focus_new_culture2
		}

		if = {
			limit = {
				has_government = totalist
			}
			add_ideas = KR_focus_new_culture3
		}

		if = {
			limit = {
				has_government = social_liberal
			}
			add_ideas = KR_focus_new_culture4
		}

		if = {
			limit = {
				has_government = market_liberal
			}
			add_ideas = KR_focus_new_culture5
		}

	}
}

shared_focus = {
	id = CHI_est_civil_service
	icon = GFX_focus_chi_examination_yuan
	prerequisite = { focus = CHI_proclaim_new_republic }
	x = 1
	y = 1
	relative_position_id = CHI_proclaim_new_republic

	cost = 6

	ai_will_do = {
		factor = 5
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_est_civil_service"
		custom_effect_tooltip = CHI_integration_time_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_speed = -20 }
			add_to_variable = { CHI.kr_china_concessionintegration_speed = -15 }
		}
	}
}

shared_focus = {
	id = CHI_provisional_legislature
	icon = GFX_focus_chi_legislative_yuan
	prerequisite = { focus = CHI_est_civil_service }
	x = 0
	y = 1
	relative_position_id = CHI_est_civil_service

	cost = 5

	ai_will_do = {
		factor = 5
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_provisional_legislature"
		increase_CHI_popular_support = yes
	}
}

shared_focus = {
	id = CHI_ethnic_autonomy
	icon = GFX_focus_generic_self_management
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_unitary_state }
	x = -1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_ethnic_autonomy
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_ethnic_autonomy"
		if = {
			limit = { has_country_flag = choose_CHI_unitary_state }
			custom_effect_tooltip = CHI_choose_CHI_unitary_state_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = choose_CHI_unitary_state }
				add_popularity = { ideology = totalist popularity = 0.08 }
			}
		}
		if = {
			limit = {
				NOT = {
					has_country_flag = choose_CHI_unitary_state
				}
			}
			add_political_power = 100
		}
	}
}

shared_focus = {
	id = CHI_unitary_state
	icon = GFX_goal_Centralised_Government
	prerequisite = { focus = CHI_provisional_legislature }
	mutually_exclusive = { focus = CHI_ethnic_autonomy }
	x = 1
	y = 1
	relative_position_id = CHI_provisional_legislature

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_unitary_state
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_unitary_state"
		if = {
			limit = { has_country_flag = choose_CHI_ethnic_autonomy }
			custom_effect_tooltip = CHI_choose_CHI_ethnic_autonomy_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = choose_CHI_ethnic_autonomy }
				add_popularity = { ideology = totalist popularity = 0.08 }
			}
		}

		if = {
			limit = {
				NOT = {
					has_country_flag = choose_CHI_ethnic_autonomy
				}
			}
			add_political_power = 100
		}
	}
}
shared_focus = {
	id = CHI_rec_syndies
	icon = GFX_goal_tblra_union_agreement
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_national_labor }
	x = 0
	y = 1
	relative_position_id = CHI_ethnic_autonomy

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_rec_syndies
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_rec_syndies"
		if = {
			limit = { has_country_flag = choose_CHI_national_labor }
			custom_effect_tooltip = CHI_choose_CHI_national_labor_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = choose_CHI_national_labor }
				add_popularity = { ideology = totalist popularity = 0.08 }
			}
		}

		if = {
			limit = {
				NOT = {
					has_country_flag = choose_CHI_national_labor
				}
			}
			add_popularity = { ideology = syndicalist popularity = 0.05 }
			add_popularity = { ideology = social_democrat popularity = 0.05 }
		}
	}
}

shared_focus = {
	id = CHI_national_labor
	icon = GFX_goal_syndicalist_workers
	prerequisite = {
		focus = CHI_ethnic_autonomy
		focus = CHI_unitary_state
	}
	mutually_exclusive = { focus = CHI_rec_syndies }
	x = 0
	y = 1
	relative_position_id = CHI_unitary_state

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			has_country_flag = choose_CHI_national_labor
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_national_labor"
		if = {
			limit = { has_country_flag = choose_CHI_rec_syndies }
			custom_effect_tooltip = CHI_choose_CHI_rec_syndies_tt
			custom_effect_tooltip = CHI_ZhongTeJu_will_be_angry_tt
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = choose_CHI_rec_syndies }
				add_popularity = { ideology = totalist popularity = 0.08 }
			}
		}

		if = {
			limit = {
				NOT = {
					has_country_flag = choose_CHI_rec_syndies
				}
			}
			add_popularity = { ideology = radical_socialist popularity = 0.05 }
			add_popularity = { ideology = social_liberal popularity = 0.05 }
		}
	}
}

shared_focus = {
	id = CHI_local_democracy
	icon = GFX_goal_generic_national_unity
	prerequisite = { focus = CHI_rec_syndies }
	mutually_exclusive = { focus = CHI_continued_tutelage }
	x = -1
	y = 1
	relative_position_id = CHI_rec_syndies

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_local_democracy"

		add_popularity = { ideology = syndicalist popularity = 0.05 }

		add_popularity = { ideology = social_democrat popularity = 0.05 }

		add_ideas = KR_focus_local_democracy1
	}
}

shared_focus = {
	id = CHI_continued_tutelage
	icon = GFX_focus_usa_voter_registration_act
	prerequisite = {
		focus = CHI_rec_syndies
		focus = CHI_national_labor
	}
	mutually_exclusive = { focus = CHI_local_democracy }
	mutually_exclusive = { focus = CHI_dais_coup }
	x = 0
	y = 3
	relative_position_id = CHI_provisional_legislature

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_continued_tutelage"

		add_popularity = { ideology = radical_socialist popularity = 0.05 }

		add_popularity = { ideology = social_liberal popularity = 0.05 }

		add_ideas = KR_focus_tutelage1
	}
}

shared_focus = {
	id = CHI_dais_coup
	icon = GFX_goal_KMT_Dais_Coup
	prerequisite = { focus = CHI_unitary_state focus = CHI_ethnic_autonomy }
	prerequisite = { focus = CHI_national_labor focus = CHI_rec_syndies }
	mutually_exclusive = { focus = CHI_continued_tutelage }
	x = 1
	y = 1
	relative_position_id = CHI_national_labor

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
		has_government = totalist
	}
	
	select_effect = {
		country_event = { id = chi_dom.28 days = 3 }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_dais_coup"
		custom_effect_tooltip = CHI_dais_coup_tt
		custom_effect_tooltip = CHI_new_general_tt_Hu_Zongnan
		hidden_effect = {
			create_field_marshal = {
				name = "Hu Zongnan"
				desc = "POLITICS_CHI_HU_ZONGNAN_ARMY_DESC"
				portrait_path = "gfx/leaders/CHI/Portrait_CHI_Hu_Zongnan.png"
				traits = {
					politically_connected
					media_personality
					defensive_doctrine
				}
				skill = 2
				attack_skill = 1
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
				id = 2201
			}

		}
	}
}

shared_focus = {
	id = CHI_legalize_parties
	icon = GFX_goal_constitutional_guarantees
	prerequisite = { focus = CHI_local_democracy }
	x = 0
	y = 1
	relative_position_id = CHI_local_democracy

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_legalize_parties"
		swap_ideas = {
			remove_idea = KR_focus_local_democracy1
			add_idea = KR_focus_local_democracy2
		}
	}
}

shared_focus = {
	id = CHI_sanmin_study
	icon = GFX_goal_brain
	prerequisite = { focus = CHI_continued_tutelage }
	x = 0
	y = 1
	relative_position_id = CHI_continued_tutelage

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_sanmin_study"

		swap_ideas = {
			remove_idea = KR_focus_tutelage1
			add_idea = KR_focus_tutelage2
		}
	}
}

shared_focus = {
	id = CHI_gov_by_shadow
	icon = GFX_goal_KMT_Government_by_Shadows
	prerequisite = { focus = CHI_dais_coup }
	x = 0
	y = 1
	relative_position_id = CHI_dais_coup

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_gov_by_shadow"

		add_popularity = { ideology = totalist popularity = 0.10 }

		add_ideas = KR_focus_dais_rule1

	}
}

shared_focus = {
	id = CHI_consultative_conf
	icon = GFX_goal_HOL_progressive_tax
	prerequisite = { focus = CHI_legalize_parties focus = CHI_sanmin_study }
	x = 0
	y = 3
	relative_position_id = CHI_rec_syndies

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_consultative_conf"
		add_stability = 0.05

		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_new_life
	icon = GFX_goal_KMT_New_Life_Movement
	prerequisite = { focus = CHI_gov_by_shadow }
	x = 0
	y = 1
	relative_position_id = CHI_gov_by_shadow

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_new_life"

		add_stability = 0.05

		add_popularity = { ideology = totalist popularity = 0.05 }
	}
}

shared_focus = {
	id = CHI_1st_national_elections
	icon = GFX_goal_generic_elections
	prerequisite = { focus = CHI_consultative_conf }
	prerequisite = { focus = CHI_legalize_parties }
	x = 0
	y = 2
	relative_position_id = CHI_legalize_parties

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = {
			has_government = totalist
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_national_elections"

		country_event = { id = chi_dom.35 days = 1 }

	}
}

shared_focus = {
	id = CHI_deepen_party_state
	icon = GFX_goal_KMT_Deepen_the_Party_State
	prerequisite = {
		focus = CHI_sanmin_study
		focus = CHI_new_life
	}
	x = -1
	y = 1
	relative_position_id = CHI_new_life

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deepen_party_state"
		hidden_effect = {
			if = {
				limit = {
					has_idea = KR_focus_tutelage2
				}
				swap_ideas = {
					remove_idea = KR_focus_tutelage2
					add_idea = KR_focus_tutelage3
				}
			}

			if = {
				limit = {
					has_idea = KR_focus_dais_rule1
				}
				swap_ideas = {
					remove_idea = KR_focus_dais_rule1
					add_idea = KR_focus_dais_rule2
				}
			}
		}

		custom_effect_tooltip = CHI_party_state_tt
	}
}

shared_focus = {
	id = CHI_autarky
	icon = GFX_autarky
	prerequisite = { focus = CHI_new_life }
	x = 1
	y = 1
	relative_position_id = CHI_new_life

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = { has_war = yes }
		QIE = { exists = no }
		#FNG = { exists = no }
		GXC = { exists = no }
		YUN = { exists = no }
		HNN = { exists = no }
		SQI = { exists = no }
		ANQ = { exists = no }
		#XSM = { exists = no }
		SZC = { exists = no }
		SHX = { exists = no }
		#TAN = { exists = no }
		#SIK = { exists = no }
		#has_global_flag = JAP_Fading_Sun
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_autarky"
		custom_effect_tooltip = CHI_Autarky_tt
		hidden_effect = {
			add_ideas = command_economy
			add_political_power = 50
			country_event = { id = chi_tot.1 days = 7 }
		}
	}
}

shared_focus = {
	id = CHI_meetingofseniorzhongtejumembers
	icon = GFX_meetingofseniorzhongtejumembers
	prerequisite = { focus = CHI_autarky }
	x = -1
	y = 1
	relative_position_id = CHI_autarky

	cost = 3

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_Dai_Meeting
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_meetingofseniorzhongtejumembers"

		add_political_power = 50

		country_event = { id = chi_tot.2 days = 0 }
	}
}

shared_focus = {
	id = CHI_lijianzhiye
	icon = GFX_lijianzhiye
	prerequisite = { focus = CHI_autarky }
	x = 1
	y = 1
	relative_position_id = CHI_autarky

	cost = 14.30

	ai_will_do = {
		factor = 1
	}

	available = {
	has_completed_focus = CHI_meetingofseniorzhongtejumembers
	has_country_flag = KMT_Dai_vs_Chiang_flag
	}
	
	select_effect = { 
		add_political_power = 1
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_lijianzhiye"

		custom_effect_tooltip = KMT_Coup_tt
	}
}

shared_focus = {
	id = CHI_daiconsolidateshispower
	icon = GFX_daiconsolidateshispower
	prerequisite = { focus = CHI_meetingofseniorzhongtejumembers }
	prerequisite = { focus = CHI_lijianzhiye }
	x = -2
	y = 2
	relative_position_id = CHI_autarky

	cost = 2

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_Dai_Rules
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_daiconsolidateshispower"

		country_event = { id = chi_tot.14 days = 0 }
	}
}

shared_focus = {
	id = CHI_partymonument
	icon = GFX_partymonument
	prerequisite = { focus = CHI_meetingofseniorzhongtejumembers }
	prerequisite = { focus = CHI_lijianzhiye }
	x = 0
	y = 2
	relative_position_id = CHI_autarky

	cost = 3

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_Build_the_Monument
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_partymonument"

		country_event = { id = chi_tot_monument.1 days = 0 }
	}
}

shared_focus = {
	id = CHI_thegeneralissimohasrisenfromthedead
	icon = GFX_thegeneralissimohasrisenfromthedead
	prerequisite = { focus = CHI_meetingofseniorzhongtejumembers }
	prerequisite = { focus = CHI_lijianzhiye }
	x = 2
	y = 2
	relative_position_id = CHI_autarky

	cost = 2

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_Chiang_Rules
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_thegeneralissimohasrisenfromthedead"

		country_event = { id = chi_tot.15 days = 0 }
		hidden_effect = {
		country_event = { id = chi_tot_flavour.6 days = 10 }
		}
	}
}

shared_focus = {
	id = CHI_expandthepowerofthezhongteju
	icon = GFX_expandthepowerofthezhongteju
	prerequisite = { focus = CHI_daiconsolidateshispower }
	x = -3
	y = 3
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expandthepowerofthezhongteju"
		swap_ideas = {
			remove_idea = KR_focus_dais_rule3
			add_idea = KR_focus_dais_rule4
		}
	}
}

shared_focus = {
	id = CHI_thefateofdaichunfeng
	icon = GFX_thefateofdaichunfeng
	prerequisite = { focus = CHI_thegeneralissimohasrisenfromthedead }
	x = 3
	y = 3
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_thefateofdaichunfeng"

		country_event = {
			id = chi_tot.19
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_eliminateinternaltroublemakers
	icon = GFX_eliminateinternaltroublemakers
	prerequisite = { focus = CHI_daiconsolidateshispower focus = CHI_thegeneralissimohasrisenfromthedead }
	x = 0
	y = 3
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_eliminateinternaltroublemakers"

		country_event = {
			id = chi_tot_dc_shared.1
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_abolishthelegislativeyuan
	icon = GFX_abolishthelegislativeyuan
	prerequisite = { focus = CHI_expandthepowerofthezhongteju }
	x = -4
	y = 4
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_abolishthelegislativeyuan"

		country_event = {
			id = chi_tot.16
		}
	}
}

shared_focus = {
	id = CHI_startatruthandreconciliationcampaign
	icon = GFX_startatruthandreconciliationcampaign
	prerequisite = { focus = CHI_expandthepowerofthezhongteju }
	x = -2
	y = 4
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_startatruthandreconciliationcampaign"

		country_event = {
			id = chi_tot.17
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_establishmentofreeducationcamps
	icon = GFX_establishmentofreeducationcamps
	prerequisite = { focus = CHI_eliminateinternaltroublemakers }
	prerequisite = { focus = CHI_expandthepowerofthezhongteju focus = CHI_thefateofdaichunfeng }
	x = 0
	y = 4
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_establishmentofreeducationcamps"

		country_event = {
			id = chi_tot_dc_shared.2
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_chiangsnewnra
	icon = GFX_chiangsnewnra
	prerequisite = { focus = CHI_thefateofdaichunfeng }
	x = 2
	y = 4
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_chiangsnewnra"

		add_war_support = 0.05
		army_experience = 20
		air_experience = 15
		navy_experience = 10
		swap_ideas = {
			remove_idea = KR_focus_chiangs_rule1
			add_idea = KR_focus_chiangs_rule2
		}

	}
}

shared_focus = {
	id = CHI_aradicalchangeofcourse
	icon = GFX_aradicalchangeofcourse
	prerequisite = { focus = CHI_thefateofdaichunfeng }
	x = 4
	y = 4
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_aradicalchangeofcourse"

		country_event = {
			id = chi_tot.20
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_anintelligenceagencywithastate
	icon = GFX_anintelligenceagencywithastate
	prerequisite = { focus = CHI_abolishthelegislativeyuan }
	prerequisite = { focus = CHI_startatruthandreconciliationcampaign }
	x = -3
	y = 5
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_BQ_end
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_anintelligenceagencywithastate"

		swap_ideas = {
			remove_idea = KR_focus_dais_rule4
			add_idea = KR_focus_dais_rule5
		}
	}
}

shared_focus = {
	id = CHI_anewinterpretationofthethreeprinciples
	icon = GFX_anewinterpretationofthethreeprinciples
	prerequisite = { focus = CHI_establishmentofreeducationcamps }
	prerequisite = { focus = CHI_startatruthandreconciliationcampaign focus = CHI_chiangsnewnra }
	x = 0
	y = 5
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
		OR = {
			has_completed_focus = CHI_expandthenewlifemovement
			has_completed_focus = CHI_anintelligenceagencywithastate
		}
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_anewinterpretationofthethreeprinciples"

		country_event = {
			id = chi_tot_dc_shared.3
			days = 0
		}
	}
}

shared_focus = {
	id = CHI_expandthenewlifemovement
	icon = GFX_expandthenewlifemovement
	prerequisite = { focus = CHI_chiangsnewnra }
	prerequisite = { focus = CHI_aradicalchangeofcourse }
	x = 3
	y = 5
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	has_country_flag = KMT_Chiang_Gov
	has_country_flag = KMT_Chiang_Family
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expandthenewlifemovement"

		swap_ideas = {
			remove_idea = KR_focus_chiangs_rule2
			add_idea = KR_focus_chiangs_rule3
		}

		hidden_effect = {
			country_event = {
				id = chi_tot_flavour.1
				days = 60
			}
		}
	}
}

shared_focus = {
	id = CHI_daisruleoftheironfist
	icon = GFX_daisruleoftheironfist
	prerequisite = { focus = CHI_anintelligenceagencywithastate }
	prerequisite = { focus = CHI_anewinterpretationofthethreeprinciples }
	x = -2
	y = 6
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_daisruleoftheironfist"

		add_political_power = 200
		add_stability = 0.10
		add_war_support = 0.10
		country_event = {
			id = chi_tot.18
			days = 0
		}
		custom_effect_tooltip = KMT_Dai_Iron_Fist
		hidden_effect = {
		set_country_flag = KMT_Build_the_Monument
		}
	}
}

shared_focus = {
	id = CHI_chiangsbennevolentdictatorship
	icon = GFX_chiangsbennevolentdictatorship
	prerequisite = { focus = CHI_expandthenewlifemovement }
	prerequisite = { focus = CHI_anewinterpretationofthethreeprinciples }
	x = 2
	y = 6
	relative_position_id = CHI_autarky

	cost = 5

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_chiangsbennevolentdictatorship"

		add_political_power = 200
		add_stability = 0.10
		add_war_support = 0.10
		country_event = {
			id = chi_tot.21
			days = 0
		}
		custom_effect_tooltip = KMT_Chiang_Benevolent_Dictatorship
		hidden_effect = {
		add_popularity = { ideology = totalist popularity = -0.05 }
		add_popularity = { ideology = social_liberal popularity = 0.10 }
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		add_popularity = { ideology = radical_socialist popularity = 0.02 }
		set_country_flag = KMT_Build_the_Monument
		}
	}
}

	##################################
	## KMT - MAJOR UNIFICATION TREE ##
	##################################

shared_focus = {
	id = CHI_northern_expedition
	icon = GFX_goal_CHI_northern_expedition
	prerequisite = {
		focus = CHI_1st_congress
		focus = CHI_1st_congress_GXC
			#focus from the GXC tree
	}

	x = 10
	y = 7

	cost = 8

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 5
			QIE = { has_war_with = FNG }
		}
	}

	available = {
		country_exists = QIE
		NOT = { has_war_with = QIE }
	}

	bypass = {
		OR = {
			NOT = { country_exists = QIE }
			has_war_with = QIE
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_northern_expedition"
		custom_effect_tooltip = CHI_dec_2nd_northern_expedition_tt1
	}
}

shared_focus = {
	id = CHI_deal_with_north_warlords
	icon = GFX_goal_LEP_patronize_xiangshen
	prerequisite = { focus = CHI_northern_expedition }
	x = 0
	y = 1
	relative_position_id = CHI_northern_expedition

	cost = 5

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			QIE = { exists = yes }
		}
	}

	available = {
		country_exists = SHX
		NOT = { has_war_with = SHX }
	}

	bypass = {
		OR = {
			NOT = { country_exists = SHX }
			has_war_with = SHX
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_deal_with_north_warlords"
		custom_effect_tooltip = CHI_dec_SHX_expedition_tt
	}
}

shared_focus = {
	id = CHI_negotiate_FNG
	icon = GFX_goal_ANQ_fengtian_loyalty
	prerequisite = {
		focus = CHI_northern_expedition
	}
	x = -1
	y = 1
	mutually_exclusive = { focus = CHI_invade_FNG }
	relative_position_id = CHI_deal_with_north_warlords

	cost = 5

	ai_will_do = {
		factor = 20
	}

	available = {
		country_exists = FNG
		country_exists = QIE
		is_neighbor_of = QIE
		NOT = {
			FNG = {
				has_war_with = QIE
				has_war_with = ROOT
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_negotiate_FNG"
		custom_effect_tooltip = CHI_dec_negotiate_with_FNG_tt
	}
}

shared_focus = {
	id = CHI_invade_FNG
	icon = GFX_focus_jap_cast_the_die
	prerequisite = { focus = CHI_northern_expedition }
	x = 1
	y = 1
	mutually_exclusive = { focus = CHI_negotiate_FNG }
	relative_position_id = CHI_deal_with_north_warlords

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0
			has_socialist_government = no
			NOT = { has_war_with = FNG }
		}
	}

	available = {
		country_exists = FNG
		NOT = { has_war_with = FNG }
	}

	bypass = {
		OR = {
			NOT = { country_exists = FNG }
			has_war_with = FNG
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_invade_FNG"
		custom_effect_tooltip = CHI_dec_2nd_northern_expedition_tt2
	}
}

shared_focus = {
	id = CHI_anti_JAP
	icon = GFX_focus_AST_war_japan
	prerequisite = {
		focus = CHI_invade_FNG
		focus = CHI_negotiate_FNG
	}
	x = 0
	y = 2
	relative_position_id = CHI_deal_with_north_warlords

	cost = 7

	ai_will_do = {
		factor = 35
		modifier = {
			factor = 0.5
			JAP = { is_stronger_than_ROOT = yes }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = QIE }
		}
		modifier = {
			factor = 1.5
			NOT = { country_exists = FNG }
		}
	}

	available = {
		country_exists = JAP
		CHI = { has_war_with = JAP }
	}

	bypass = {
		OR = {
			NOT = { country_exists = JAP }
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_anti_JAP"

		add_war_support = 0.1

	}
}

	####################################
	## KMT - OTHER SHENANIGANS TREE ##
	####################################

shared_focus = {
	id = CHI_reorder_north_china
	icon = GFX_goal_china_deal
	prerequisite = { focus = CHI_northern_expedition }
	x = 3
	y = 4
	relative_position_id = CHI_northern_expedition

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		has_country_flag = CHI_republic_proclaimed
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_reorder_north_china"
		increase_CHI_popular_support = yes

		custom_effect_tooltip = CHI_Integration_tt
	}
}

shared_focus = {
	id = CHI_fate_LEC
	icon = GFX_goal_LEC_establish
	prerequisite = { focus = CHI_reorder_north_china focus = CHI_anti_JAP }
	x = -3
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 2

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 0
			NOT = { has_global_flag = second_weltkrieg_has_started }
		}
	}

	available = {
		country_exists = LEC
	}

	bypass = {
		NOT = { country_exists = LEC }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_fate_LEC"
		custom_effect_tooltip = CHI_dec_seize_treaty_ports_tt
	}
}

shared_focus = {
	id = CHI_secure_northwest
	icon = GFX_goal_OTT_Abolish_Mecelle
	prerequisite = { focus = CHI_reorder_north_china }
	x = -1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
	}

	available = {
		OR = {
			country_exists = XSM
			country_exists = SIK
			country_exists = TAN
			country_exists = ETS
		}
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = {
			country_exists = XSM
			country_exists = SIK
			country_exists = TAN
			country_exists = ETS
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_secure_northwest"
		if = {
			limit = { country_exists = XSM }
			if = {
				limit = { has_completed_focus = CHI_ethnic_autonomy }
				custom_effect_tooltip = CHI_dec_negotiate_with_XSM_tt
			}
			else = {
				custom_effect_tooltip = CHI_dec_XSM_expedition_tt
			}
		}
		if = {
			limit = { country_exists = SIK }
			if = {
				limit = { has_completed_focus = CHI_ethnic_autonomy }
				custom_effect_tooltip = CHI_dec_negotiate_with_SIK_tt
			}
			else = {
				custom_effect_tooltip = CHI_dec_xinjiang_expedition_tt1
			}
		}
		if = {
			limit = { country_exists = TAN }
			custom_effect_tooltip = CHI_dec_xinjiang_expedition_tt2
		}
		if = {
			limit = { country_exists = ETS }
			custom_effect_tooltip = CHI_dec_xinjiang_expedition_tt3
		}
	}
}

shared_focus = {
	id = CHI_authority_TIB
	icon = YUN_GFX_Goal_Secure_Tibet
	prerequisite = { focus = CHI_reorder_north_china }
	x = 1
	y = 1
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 15
	}

	available = {
		country_exists = TIB
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = { country_exists = TIB }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_authority_TIB"
		if = {
			limit = { has_completed_focus = CHI_ethnic_autonomy }
			unlock_decision_tooltip = CHI_offer_autonomy_TIB
		}
		else = {
			unlock_decision_tooltip = CHI_dec_TIB_expedition
		}
	}
}

shared_focus = {
	id = CHI_retake_MON
	icon = GFX_goal_MON_mongolia_flag
	prerequisite = { focus = CHI_reorder_north_china }
	x = 0
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 7

	ai_will_do = {
		factor = 10
		modifier = {
			factor = 2
			NOT = {
				country_exists = RUS
				soviets_exist = yes
			}
		}
	}

	available = {
		country_exists = MON
		OR = {
			has_completed_focus = CHI_ethnic_autonomy
			has_completed_focus = CHI_unitary_state
		}
	}

	bypass = {
		NOT = { country_exists = MON }
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_retake_MON"
		if = {
			limit = { has_completed_focus = CHI_ethnic_autonomy }
			unlock_decision_tooltip = CHI_offer_autonomy_MON
		}
		else = {
			unlock_decision_tooltip = CHI_dec_MON_expedition
		}
	}
}

shared_focus = {
	id = CHI_neutralize_RUS
	icon = GFX_focus_eng_expose_the_belly_of_the_bear
	prerequisite = { focus = CHI_secure_northwest }
	prerequisite = { focus = CHI_retake_MON }
	x = -1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 7

	ai_will_do = {
		factor = 1
	}

	available = {
		OR = {
			owns_state = 617
			617 = {
				owner = {
					is_subject_of = ROOT
				}
			}
		}
		OR = {
			owns_state = 330
			330 = {
				owner = {
					is_subject_of = ROOT
				}
			}
		}
		can_declare_war_on = RUS
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_neutralize_RUS"
		unlock_decision_tooltip = CHI_dec_RUS_expedition
	}
}

shared_focus = {
	id = CHI_renounce_mcmahon
	icon = GFX_focus_generic_provoke_border_clashes
	prerequisite = { focus = CHI_authority_TIB }
	mutually_exclusive = { focus = CHI_mission_red_india }
	x = 1
	y = 1
	relative_position_id = CHI_retake_MON

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		OR = {
			owns_state = 322
			322 = {
				owner = { is_subject_of = ROOT }
			}
		}
		OR = {
			owns_state = 693
			693 = {
				owner = { is_subject_of = ROOT }
			}
		}
		OR = {
			owns_state = 748
			748 = {
				owner = { is_subject_of = ROOT }
			}
		}
		can_declare_war_on = 858.owner
	}

	bypass = {
		owns_state = 858
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_renounce_mcmahon"
		add_state_claim = 858
		unlock_decision_tooltip = CHI_dec_BHC_expedition
	}
}

shared_focus = {
	id = CHI_repay_syndicalists
	icon = GFX_focus_ger_great_red_menace
	prerequisite = { focus = CHI_reorder_north_china }
	x = 3
	y = 1
	mutually_exclusive = { focus = CHI_independent_FP }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 1
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_repay_syndicalists"

		add_political_power = -50

		add_command_power = -10

		reverse_add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND
		}

		add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND
		}

		FRA = {
			country_event = {
				id = chi_for.66
				days = 3
			}
		}

	}
}

shared_focus = {
	id = CHI_independent_FP
	icon = GFX_goal_liberty
	prerequisite = { focus = CHI_reorder_north_china }
	x = 5
	y = 1
	mutually_exclusive = { focus = CHI_repay_syndicalists }
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 1
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_independent_FP"

		add_political_power = 50

		reverse_add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}

		add_opinion_modifier = {
			target = FRA
			modifier = CHI_SYND_MAD
		}
	}
}

shared_focus = {
	id = CHI_volunteer_army
	icon = GFX_goal_volunteer_alliance
	prerequisite = { focus = CHI_repay_syndicalists }
	x = -1
	y = 1
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_global_flag = second_weltkrieg_has_started
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_volunteer_army"
		add_ideas = CHI_chinese_expeditionary_force
		FRA = { save_event_target_as = volunteer_target }
		send_volunteers_to_TARGET = yes
		ENG = { save_event_target_as = volunteer_target }
		send_volunteers_to_TARGET = yes
	}
}

shared_focus = {
	id = CHI_intervene_VIE
	icon = GFX_BHC_indochina_revolution
	prerequisite = {
		focus = CHI_independent_FP
		focus = CHI_repay_syndicalists
	}
	x = 4
	y = 2
	relative_position_id = CHI_reorder_north_china

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_completed_focus = CHI_VNQDD_liasons
		OR = {
			has_country_flag = CHI_INC_refuse
			has_country_flag = CHI_refuse_INC
		}
	}

	bypass = {
		has_country_flag = CHI_support_INC
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_intervene_VIE"
		custom_effect_tooltip = CHI_intervene_VIN_tt
	}
}

shared_focus = {
	id = CHI_USA_diplo
	icon = GFX_focus_usa_build_the_pentagon
	prerequisite = {
		focus = CHI_independent_FP
	}
	x = 1
	y = 1
	relative_position_id = CHI_independent_FP

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		has_global_flag = USA_civil_war_over_flag
		OR = {
			AND = {
				country_exists = USA
				has_completed_focus = USA_back_in_business
				NOT = {
					has_war_with = CHI
				}
			}
			AND = {
				country_exists = CAL
				has_completed_focus = CAL_back_in_business
				NOT = {
					has_war_with = CHI
				}
			}
			AND = {
				country_exists = CSA
				has_completed_focus = CSA_back_in_business
				NOT = {
					has_war_with = CHI
				}
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_USA_diplo"
		if = {
			limit = {
				USA = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = USA
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = USA
				modifier = CHI_WSH
			}
		}
		if = {
			limit = {
				CAL = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = CAL
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = CAL
				modifier = CHI_WSH
			}
		}
		if = {
			limit = {
				CSA = {
					exists = yes
				}
			}
			reverse_add_opinion_modifier = {
				target = CSA
				modifier = CHI_WSH
			}
			add_opinion_modifier = {
				target = CSA
				modifier = CHI_WSH
			}
		}
		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_mission_red_india
	icon = GFX_goal_india_commune
	prerequisite = { focus = CHI_repay_syndicalists }
	x = 0
	y = 2
	mutually_exclusive = { focus = CHI_renounce_mcmahon }
	relative_position_id = CHI_repay_syndicalists

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		country_exists = BHC
		NOT = {
			has_war_with = BHC
		}
	}

	bypass = {
		OR = {
			has_war_with = BHC
			NOT = {
				country_exists = BHC
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mission_red_india"
		BHC = {
			country_event = {
				id = chi_for.42
				days = 5
			}
		}
	}
}

shared_focus = {
	id = CHI_form_eastasia_faction
	icon = GFX_goal_chi_international_revolution
	prerequisite = { focus = CHI_independent_FP }
	x = 0
	y = 2
	relative_position_id = CHI_independent_FP

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
		is_subject = no
		is_in_faction = no
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_form_eastasia_faction"
		create_faction = "East Asian National League"
		custom_effect_tooltip = CHI_east_asian_league_category_tt
	}
}

shared_focus = {
	id = CHI_support_INS_independence
	icon = GFX_focus_jap_strike_south
	prerequisite = {
		focus = CHI_form_eastasia_faction
		focus = CHI_mission_red_india
	}
	x = 0
	y = 2
	relative_position_id = CHI_intervene_VIE

	cost = 8

	ai_will_do = {
		factor = 1
	}

	available = {
	}

	bypass = {
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_support_INS_independence"
	}
}

	###############################
	## KMT - Mingshu Focus Tree  ##
	###############################

shared_focus = {
	id = CHI_mingshu
	icon = GFX_goal_CHI_chen_mingshu_reconcile
	x = 6
	y = 0

	cost = 2

	ai_will_do = {
		factor = 100
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	available = {
		has_country_flag = CHI_mingshu_lkmt
	}

	bypass = {
		has_country_flag = CHI_mingshu_lkmt
	}

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_mingshu"
		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_National_Plan
	icon = GFX_focus_generic_treaty
	prerequisite = { focus = CHI_mingshu }
	x = -5
	y = 1
	relative_position_id = CHI_mingshu

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_National_Plan"

		add_political_power = 50

		add_popularity = { ideology = social_democrat popularity = 0.03 }
		add_popularity = { ideology = social_liberal popularity = 0.02 }
	}
}

shared_focus = {
	id = CHI_Respect_Chen_Jiongming
	icon = GFX_goal_china_federalism
	prerequisite = { focus = CHI_National_Plan }
	x = 0
	y = 1
	relative_position_id = CHI_National_Plan

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Respect_Chen_Jiongming"
		custom_effect_tooltip = CHI_integration_time_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_speed = -20 }
			add_to_variable = { CHI.kr_china_concessionintegration_speed = -15 }
		}
	}
}

shared_focus = {
	id = CHI_opium_prohibition2
	icon = GFX_goal_generic_political_pressure
	prerequisite = { focus = CHI_Respect_Chen_Jiongming }
	mutually_exclusive = { focus = CHI_opium_tax2 }
	x = -1
	y = 2
	relative_position_id = CHI_National_Plan

	cost = 6.5

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_prohibition2"
		add_ideas = KR_focus_CHI_opium1
	}
}

shared_focus = {
	id = CHI_opium_tax2
	icon = GFX_goal_opium
	prerequisite = { focus = CHI_Respect_Chen_Jiongming }
	mutually_exclusive = { focus = CHI_opium_prohibition2 }
	x = 1
	y = 2
	relative_position_id = CHI_National_Plan

	cost = 6.5

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_opium_tax2"
		decrease_CHI_popular_support = yes
		add_ideas = KR_focus_CHI_opium2
	}
}

shared_focus = {
	id = CHI_guangdong_deal
	icon = GFX_goal_generic_construct_civ_factory
	prerequisite = {
		focus = CHI_opium_tax2
		focus = CHI_opium_prohibition2
	}
	x = 0
	y = 3
	relative_position_id = CHI_National_Plan

	cost = 6.5

	ai_will_do = {
		factor = 15
	}

	available = {
		has_full_control_of_state = 592
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_guangdong_deal"
		592 = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}
		custom_effect_tooltip = CHI_integration_cost_down_tt
		hidden_effect = {
			add_to_variable = { CHI.kr_china_provinceintegration_cost_small = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_medium = -10 }
			add_to_variable = { CHI.kr_china_provinceintegration_cost_large = -10 }
			add_to_variable = { CHI.kr_china_concessionintegration_cost = -5 }
		}
	}
}

shared_focus = {
	id = CHI_Consolidate_Liangguang
	icon = YUN_GFX_Goal_Deal_with_the_Left_KMT
	prerequisite = { focus = CHI_mingshu }
	x = -1
	y = 1
	relative_position_id = CHI_mingshu

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Consolidate_Liangguang"

		add_popularity = { ideology = social_democrat popularity = 0.03 }

		add_popularity = { ideology = social_liberal popularity = 0.03 }

		add_popularity = { ideology = radical_socialist popularity = 0.03 }
	}
}

shared_focus = {
	id = CHI_Manage_Unrest_In_Guangdong
	icon = GFX_goal_generic_imprison_people
	prerequisite = { focus = CHI_Consolidate_Liangguang }
	x = 1
	y = 1
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Manage_Unrest_In_Guangdong"

		add_war_support = 0.05

		add_popularity = { ideology = paternal_autocrat popularity = -0.1 }
	}
}

shared_focus = {
	id = CHI_Manage_Unrest_In_Guangxi
	icon = GFX_goal_imprison_opposition1
	prerequisite = { focus = CHI_Consolidate_Liangguang }
	x = -1
	y = 1
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Manage_Unrest_In_Guangxi"

		add_stability = 0.05

		add_popularity = { ideology = national_populist popularity = -0.05 }


	}
}

shared_focus = {
	id = CHI_expropriate_landlords2
	icon = GFX_goal_LEP_repression
	prerequisite = {
		focus = CHI_Manage_Unrest_In_Guangxi
		focus = CHI_Manage_Unrest_In_Guangdong
	}
	mutually_exclusive = { focus = CHI_land_rent_caps2 }
	x = -1
	y = 2
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 6.5

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_expropriate_landlords2"
		add_ideas = KR_focus_CHI_land_rent1
	}
}

shared_focus = {
	id = CHI_land_rent_caps2
	icon = GFX_goal_generic_forceful_treaty
	prerequisite = {
		focus = CHI_Manage_Unrest_In_Guangxi
		focus = CHI_Manage_Unrest_In_Guangdong
	}
	mutually_exclusive = { focus = CHI_expropriate_landlords2 }
	x = 1
	y = 2
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 6.5

	ai_will_do = {
		factor = 8
		modifier = {
			factor = 0.5
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_land_rent_caps2"
		add_ideas = KR_focus_CHI_land_rent2
	}
}

shared_focus = {
	id = CHI_Gentry_Concession
	icon = GFX_goal_generic_controlled_board
	prerequisite = { focus = CHI_Consolidate_Liangguang }
	mutually_exclusive = { focus = CHI_Gentry_Force }
	x = 3
	y = 1
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 7.2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Gentry_Concession"
		add_timed_idea = {
			idea = KR_focus_gentry1
			days = 180
		}

		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_Gentry_Force
	icon = GFX_goal_generic_tackle_corruption
	prerequisite = { focus = CHI_Consolidate_Liangguang }
	mutually_exclusive = { focus = CHI_Gentry_Concession }
	x = 5
	y = 1
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 7.2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Gentry_Force"

		add_timed_idea = {
			idea = KR_focus_gentry2
			days = 180
		}

		add_stability = 0.05

		decrease_ruling_party_popularity_by_5 = yes

		add_popularity = { ideology = authoritarian_democrat popularity = -0.05 }
	}
}

shared_focus = {
	id = CHI_Merchants_Concession
	icon = GFX_goal_generic_civilian_oversight
	prerequisite = {
		focus = CHI_Gentry_Concession
		focus = CHI_Gentry_Force
	}
	mutually_exclusive = { focus = CHI_Merchants_Force }
	x = 3
	y = 2
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 7.2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Merchants_Concession"
		add_timed_idea = {
			idea = KR_focus_merchants1
			days = 180
		}

		add_political_power = 50
	}
}

shared_focus = {
	id = CHI_Merchants_Force
	icon = GFX_goal_generic_crush_unions
	prerequisite = {
		focus = CHI_Gentry_Concession
		focus = CHI_Gentry_Force
	}
	mutually_exclusive = { focus = CHI_Merchants_Concession }
	x = 5
	y = 2
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 7.2

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Merchants_Force"

		add_timed_idea = {
			idea = KR_focus_merchants2
			days = 180
		}

		decrease_ruling_party_popularity_by_5 = yes

		add_popularity = { ideology = authoritarian_democrat popularity = -0.05 }
	}
}

shared_focus = {
	id = CHI_Revoloution_Secured
	icon = GFX_goal_LKMT_A_New_China_shine
	prerequisite = {
		focus = CHI_expropriate_landlords2
		focus = CHI_land_rent_caps2
	}
	prerequisite = {
		focus = CHI_Merchants_Concession
		focus = CHI_Merchants_Force
	}
	x = 0
	y = 3
	relative_position_id = CHI_Consolidate_Liangguang

	cost = 5

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 0.25
			has_war = yes
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Revoloution_Secured"

		increase_CHI_popular_support = yes

	}
}

shared_focus = {
	id = CHI_1st_congress_GXC
	icon = GFX_goal_CHI_YUN_reconcile
	prerequisite = { focus = CHI_Revoloution_Secured }
	x = 0
	y = 5

	relative_position_id = CHI_Consolidate_Liangguang

	cost = 6

	ai_will_do = {
		factor = 120
	}

	available = {
		has_country_flag = CHI_mingshu_lkmt
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_1st_congress_GXC"
		custom_effect_tooltip = CHI_1st_congress_tt
		hidden_effect = {
			country_event = { id = chi_cng.1 days = 3 }
		}
	}
}

shared_focus = {
	id = CHI_plan_east
	icon = GFX_focus_prc_infiltration
	prerequisite = {
		focus = CHI_expropriate_landlords2
		focus = CHI_land_rent_caps2
	}
	prerequisite = {
		focus = CHI_Merchants_Concession
		focus = CHI_Merchants_Force
	}
	relative_position_id = CHI_Consolidate_Liangguang

	x = 5
	y = 3

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			has_war = yes
		}
	}

	available = {
		date > 1938.6.1
		OR = {
			has_completed_focus = CHI_1st_congress_GXC
		}
		OR = {
			ANQ = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
			LEP = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
			if = {
				limit = { SQI = { NOT = { has_government = authoritarian_democrat } } }
				SQI = { exists = yes }
				NOT = { has_war_with = ROOT }
			}
		}
	}

	bypass = {
		ANQ = {
			OR = {
				exists = no
				has_war_with = ROOT
			}
		}
		LEP = {
			OR = {
				exists = no
				has_war_with = ROOT
			}
		}
		SQI = {
			OR = {
				exists = no
				has_war_with = ROOT
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_east"
		if = {
			limit = { country_exists = ANQ }
			custom_effect_tooltip = CHI_dec_east_warlord_expedition_tt1
		}
		if = {
			limit = { country_exists = LEP }
			custom_effect_tooltip = CHI_dec_east_warlord_expedition_tt2
		}
		if = {
			limit = { country_exists = SQI }
			custom_effect_tooltip = CHI_dec_east_warlord_expedition_tt3
		}
	}
}

shared_focus = {
	id = CHI_plan_west
	icon = GFX_focus_prc_infiltration
	prerequisite = {
		focus = CHI_expropriate_landlords2
		focus = CHI_land_rent_caps2
	}
	prerequisite = {
		focus = CHI_Merchants_Concession
		focus = CHI_Merchants_Force
	}

	relative_position_id = CHI_Consolidate_Liangguang
	x = 3
	y = 3

	cost = 8

	ai_will_do = {
		factor = 5
		modifier = {
			factor = 0
			has_war = yes
		}
		modifier = {
			factor = 0
			YUN = { kmt_failure = no }
		}
		modifier = {
			factor = 0
			SZC = { kmt_failure = no }
		}
		modifier = {
			factor = 0
			HNN = { kmt_failure = no }
		}
		modifier = {
			factor = 10
			YUN = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			SZC = { kmt_failure = yes }
		}
		modifier = {
			factor = 10
			HNN = { kmt_failure = yes }
		}
	}

	available = {
		date > 1938.6.1
		OR = {
			has_completed_focus = CHI_1st_congress_GXC
		}
		OR = {
			YUN = {
				exists = yes
				NOT = { has_war_with = ROOT }
				if = {
					limit = { CHI = { NOT = { has_socialist_government = yes } } }
					kmt_failure = yes
				}
			}
			SZC = {
				exists = yes
				NOT = { has_war_with = ROOT }
				if = {
					limit = { CHI = { NOT = { has_socialist_government = yes } } }
					kmt_failure = yes
				}
			}
			HNN = {
				exists = yes
				NOT = { has_war_with = ROOT }
				if = {
					limit = { CHI = { NOT = { has_socialist_government = yes } } }
					kmt_failure = yes
				}
			}
		}
	}

	bypass = {
		YUN = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
		SZC = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
		HNN = {
			OR = {
				exists = no
				kmt_success = yes
				has_war_with = ROOT
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_plan_west"
		if = {
			limit = { country_exists = SZC }
			custom_effect_tooltip = CHI_dec_west_warlord_expedition_tt1
		}
		if = {
			limit = { country_exists = YUN }
			custom_effect_tooltip = CHI_dec_west_warlord_expedition_tt2
		}
		if = {
			limit = { country_exists = HNN }
			custom_effect_tooltip = CHI_dec_west_warlord_expedition_tt3
		}
	}
}

shared_focus = {
	id = CHI_Dealing_With_HNN
	icon = GFX_goal_CHI_cheng_qian_reconcile
	prerequisite = { focus = CHI_mingshu }
	relative_position_id = CHI_mingshu
	x = 3
	y = 1

	cost = 4

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1938.1.1
		}
	}

	available = {
		HNN = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		HNN = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	bypass = {
		HNN = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Dealing_With_HNN"
		custom_effect_tooltip = CHI_dec_negotiate_with_HNN_tt
	}
}

shared_focus = {
	id = CHI_Dealing_With_SZC
	icon = GFX_goal_CHI_SZC_lu_chao
	prerequisite = { focus = CHI_mingshu }
	relative_position_id = CHI_mingshu
	x = 1
	y = 1

	cost = 4

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1938.1.1
		}
	}

	available = {
		SZC = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		SZC = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	bypass = {
		SZC = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Dealing_With_SZC"
		custom_effect_tooltip = CHI_dec_negotiate_with_SZC_tt
	}
}

shared_focus = {
	id = CHI_Dealing_With_YUN
	icon = GFX_goal_CHI_YUN_zhu_peide
	prerequisite = { focus = CHI_mingshu }
	relative_position_id = CHI_mingshu
	x = 5
	y = 1

	cost = 4

	ai_will_do = {
		factor = 20
		modifier = {
			factor = 2
			date > 1938.1.1
		}
	}

	available = {
		YUN = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}

	cancel = {
		YUN = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	bypass = {
		YUN = {
			NOT = {
				exists = yes
			}
			has_war_with = ROOT
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus CHI_Dealing_With_YUN"
		custom_effect_tooltip = CHI_dec_negotiate_with_YUN_tt
	}
}
