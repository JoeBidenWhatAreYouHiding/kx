##################################
# Galicia Focus Tree
# Made by Immortal JÃ¶rmund
##################################

focus_tree = {
	id = RIF_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = RIF
		}
	}
	continuous_focus_position = { x = 2200 y = 800 }
	
	shared_focus = SCW_Joint_the_final_fall

	focus = {
		id = RIF_Abd_El_Krim_Returns
		icon = GFX_goal_NVN_Return_Chiefdom
		x = 10
		y = 0
		cost = 1
		available = {
			RIF_el_krim_trigger = yes
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.1
				division_template = {
				name = "Haraka"
				division_names_group = SPR_INF_01  
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
					militia = { x = 1 y = 0 }
					militia = { x = 1 y = 1 }
					militia = { x = 1 y = 2 }
					militia = { x = 2 y = 0 }
					militia = { x = 2 y = 1 }
					militia = { x = 2 y = 2 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 290 }
				create_unit = {
					division = "division_template = \"Haraka\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 6966
				}
				create_unit = {
					division = "division_template = \"Haraka\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 6906
				}
				create_unit = {
					division = "division_template = \"Haraka\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 3799
				}
			}
		}
	}
	focus = {
		id = RIF_Put_Minas_del_Rif_to_Use
		icon = GFX_goal_UMN_mine_expansion
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = -3
		y = 1
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Abd_El_Krim_Returns
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			290 = {
				add_extra_state_shared_building_slots = 2	
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			290 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}
	}
	focus = {
		id = RIF_Convert_Regulares_to_Our_Side
		icon = GFX_goal_AFG_ottoman_army_arrival
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = -2
		y = 3
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Arms_from_the_Internationale
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			division_template = {
			name = "Regulares Deserters"
				division_names_group = SPR_INF_01  
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 290 }
				create_unit = {
					division = "division_template = \"Regulares Deserters\" start_experience_factor = 0.3"
					owner = RIF
					prioritize_location = 6966
				}
			}	
		}
	}
	focus = {
		id = RIF_Temporary_Alliance_with_Pretender
		icon = GFX_goal_SOM_A_New_Sultanate
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = -1
		y = 1
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Abd_El_Krim_Returns
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 80
		}
		completion_reward = {
			add_stability = -0.1
			division_template = {
				name = "Rifian Raiders"
				division_names_group = SPR_INF_01  
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
					cavalry = { x = 1 y = 2 }
					cavalry = { x = 2 y = 0 }
					cavalry = { x = 2 y = 1 }
					cavalry = { x = 2 y = 2 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 290 }
				create_unit = {
					division = "division_template = \"Rifian Raiders\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 6966
				}
			}	
		}
	}
	focus = {
		id = RIF_Arms_from_the_Internationale
		icon = GFX_goal_FRA_Modernize_Militia_Arsenal
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = -3
		y = 2
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Put_Minas_del_Rif_to_Use
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2000
				producer = FRA
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 150
				producer = ENG
			}
		}
	}
	focus = {
		id = RIF_Contact_Cairo_and_Istanbul
		icon = GFX_goal_AFG_ottoman_restoration_sublime_porte
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 3
		y = 1
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Abd_El_Krim_Returns
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = convoy
				amount = 100
				producer = OTT
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 500
				producer = EGY
			}
		}
	}
	focus = {
		id = RIF_True_Moroccan_Republicanism
		icon = GFX_goal_SOM_Islamic_Liberalism
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 3
		y = 2
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_Contact_Cairo_and_Istanbul
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_command_power = 60
			add_stability = 0.08
			add_war_support = 0.08
		}
	}
	focus = {
		id = RIF_Remembering_Annual
		icon = GFX_goal_SOM_Arabic_Primacy
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 2
		y = 3
		available = {
			RIF_el_krim_trigger = yes
		}
		cost = 1
		prerequisite = {
			focus = RIF_True_Moroccan_Republicanism
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			army_experience = 60
			add_command_power = 100
			add_war_support = 0.05
		}
	}
	focus = {
		id = RIF_Proclaim_the_Jihad
		icon = GFX_goal_OTT_Association_of_Muslim_Nations
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 1
		y = 1
		cost = 1
		available = {
			RIF_el_krim_trigger = yes
		}
		prerequisite = {
			focus = RIF_Abd_El_Krim_Returns
		}
		bypass = {
			has_country_flag = RIF_secured_its_independence
		}
		ai_will_do = {
			factor = 1000
		}
		completion_reward = {
			add_manpower = 10000
			division_template = {
				name = "Cabila Militia"
				division_names_group = SPR_MIL_01 
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
				}
			}
			random_owned_controlled_state = {
				prioritize = { 290 }
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 729
				}
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 729
				}
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 729
				}
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 3761
				}
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 3761
				}
				create_unit = {
					division = "division_template = \"Cabila Militia\" start_experience_factor = 0.1"
					owner = RIF
					prioritize_location = 3761
				}
			}
		}
	}
	focus = {
		id = RIF_Contact_Red_Cross
		icon = GFX_AFG_The_Gold_Must_Flow
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 1
		y = 2
		available = {
			RIF_el_krim_trigger = yes
		}
		prerequisite = {
			focus = RIF_Temporary_Alliance_with_Pretender
		}
		prerequisite = {
			focus = RIF_Proclaim_the_Jihad
		}
		cost = 1
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			RIF = {
				transfer_state = 699
				add_state_core = 699
			}
			MOR = {
				transfer_state = 1318
				add_state_core = 1318
			}
		}
	}
	focus = {
		id = RIF_Reorganize_Rif_Government
		icon = GFX_goal_SOM_True_Islamic_Republicanism
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = -1
		y = 2
		available = {
			RIF_el_krim_trigger = yes
		}
		prerequisite = {
			focus = RIF_Temporary_Alliance_with_Pretender
		}
		prerequisite = {
			focus = RIF_Proclaim_the_Jihad
		}
		cost = 1
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_command_power = -75
			add_manpower = 5000
			add_stability = 0.06
		}
	}
	focus = {
		id = RIF_Enforce_Tribe_Loyalty
		icon = GFX_goal_SOM_Destroy_Tribal_Ambitions
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 0
		y = 3
		available = {
			RIF_el_krim_trigger = yes
		}
		prerequisite = {
			focus = RIF_Contact_Red_Cross
		}	
		prerequisite = {
			focus = RIF_Reorganize_Rif_Government
		}
		cost = 1
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_manpower = 1500
			290 = {
				add_extra_state_shared_building_slots = 3	
			}
		}
	}
	focus = {
		id = RIF_The_Republic_Lives_On
		icon = GFX_goal_EGY_Anti_European_Sentiment
		relative_position_id = RIF_Abd_El_Krim_Returns
		x = 0
		y = 4
		prerequisite = {
			focus = RIF_Remembering_Annual
		}
		prerequisite = {
			focus = RIF_Enforce_Tribe_Loyalty
		}
		prerequisite = {
			focus = RIF_Convert_Regulares_to_Our_Side
		}
		available = {
			has_war = no
			RIF_el_krim_trigger = yes
		}
		cost = 1
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.20
		}
	}
	focus = {
		id = RIF_The_Protectorate
		icon = GFX_goal_RIF_The_Protectorate
		x = 0
		y = 0
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.2
		}
	}
	focus = {
		id = RIF_Question_of_Jalifa
		icon = GFX_goal_SOM_Law_And_Order
		x = -2
		y = 1
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_The_Protectorate
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.9
		}
	}
	focus = {
		id = RIF_Secure_Ifni
		icon = GFX_goal_AFG_Expand_Port_Karachi
		x = 2
		y = 1
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_The_Protectorate
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.4
		}
	}
	focus = {
		id = RIF_Rally_the_Regulares
		icon = GFX_goal_KIV_askari_dominance
		x = 0
		y = 1
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_The_Protectorate
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.3
		}
	}
	focus = {
		id = RIF_Bribe_Krims_Allies
		icon = GFX_goal_AFG_ottoman_rewarding_loyalty
		x = 3
		y = 2
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Rally_the_Regulares
		}
		prerequisite = {
			focus = RIF_Secure_Ifni
		}
		prerequisite = {
			focus = RIF_Question_of_Jalifa
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			add_political_power = -50
			add_popularity = {
				ideology = national_populist
				popularity = 0.06
			}
			add_popularity = {
				ideology = market_liberal
				popularity = -0.06
			}
		}
	}
	focus = {
		id = RIF_Hunt_for_Raisuli
		icon = GFX_goal_FIU_pirates
		x = -3
		y = 2
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Rally_the_Regulares
		}
		prerequisite = {
			focus = RIF_Secure_Ifni
		}
		prerequisite = {
			focus = RIF_Question_of_Jalifa
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.6
		}
	}
	focus = {
		id = RIF_Crack_Down_on_Smuggling
		icon = GFX_UKR_Strike_Organized_Crime
		x = -1
		y = 2
		cost = 5
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Rally_the_Regulares
		}
		prerequisite = {
			focus = RIF_Secure_Ifni
		}
		prerequisite = {
			focus = RIF_Question_of_Jalifa
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
				}
				prioritize = { 290 }
				add_extra_state_shared_building_slots = 5
				add_building_construction = { type = industrial_complex level = 2 instant_build = yes }
				add_building_construction = { type = arms_factory level = 2 instant_build = yes }
				add_building_construction = { type = dockyard level = 1 instant_build = yes }
			}
			add_equipment_to_stockpile = {
				type = convoy
				amount = 10
			}
		}
	}
	focus = {
		id = RIF_Petition_French_Aid
		icon = GFX_goal_NFA_Petain_Prolific_Ideologue
		x = 1
		y = 2
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Rally_the_Regulares
		}
		prerequisite = {
			focus = RIF_Secure_Ifni
		}
		prerequisite = {
			focus = RIF_Question_of_Jalifa
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.13
		}
	}
	focus = {
		id = RIF_Tropas_Nomadas
		icon = GFX_goal_OTT_camels
		x = 1
		y = 3
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Petition_French_Aid
		}
		prerequisite = {
			focus = RIF_Crack_Down_on_Smuggling
		}
		prerequisite = {
			focus = RIF_Hunt_for_Raisuli
		}
		prerequisite = {
			focus = RIF_Bribe_Krims_Allies
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.5
		}
	}
	focus = {
		id = RIF_Fate_of_the_Canary
		icon = GFX_goal_POR_capeverde
		x = -1
		y = 3
		cost = 1
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Petition_French_Aid
		}
		prerequisite = {
			focus = RIF_Crack_Down_on_Smuggling
		}
		prerequisite = {
			focus = RIF_Hunt_for_Raisuli
		}
		prerequisite = {
			focus = RIF_Bribe_Krims_Allies
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			country_event = RIF.12
		}
	}
	focus = {
		id = RIF_True_Loyalties
		icon = {
			trigger = {
				SPR = { exists = no }
				CAR = { exists = no }
				CNT = { exists = yes }
			}
			value = GFX_goal_RIF_True_Loyalties_Kill_CNT
		}
		icon = GFX_goal_RIF_True_Loyalties
		x = 0
		y = 4
		cost = 1
		dynamic = yes
		available = {
			RIF_legion_trigger = yes
		}
		prerequisite = {
			focus = RIF_Fate_of_the_Canary
		}
		prerequisite = {
			focus = RIF_Tropas_Nomadas
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			if = {
				limit = {
					SPR = { exists = no }
					CAR = { exists = no }
					CNT = { exists = yes }
				}
				declare_war_on = {
					target = CNT
					type = annex_everything
				}
				hidden_effect = {
					set_country_flag = SCW_RIF_inervention
				}
			}
			else = {
				country_event = RIF.100
			}
		}
		search_filters = { FOCUS_FILTER_SPR_CIVILWAR }
	}