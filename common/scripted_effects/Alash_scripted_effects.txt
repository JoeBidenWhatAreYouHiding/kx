ALO_setup_initial_variables = {
	set_variable = { ALO_ush_zhus_deputies = 2 }
	set_variable = { ALO_zhas_azamat_deputies = 11 }
	set_variable = { ALO_azat_deputies = 9 }
	set_variable = { ALO_zhanar_deputies = 8 }
	set_variable = { ALO_alash_deputies = 20 }
	set_variable = { ALO_national_deputies = 8 }
	set_variable = { ALO_cossack_deputies = 8 }
	set_variable = { ALO_russian_deputies = 6 }
	set_variable = { ALO_total_deputies = 72 }
	set_variable = { ALO_ush_zhus_deputies_support = 0 }
	set_variable = { ALO_zhas_azamat_deputies_support = 1 }
	set_variable = { ALO_azat_deputies_support = 9 }
	set_variable = { ALO_zhanar_deputies_support = 8 }
	set_variable = { ALO_alash_deputies_support = 20 }
	set_variable = { ALO_national_deputies_support = 8 }
	set_variable = { ALO_cossack_deputies_support = 1 }
	set_variable = { ALO_russian_deputies_support = 4 }
	ALO_calculate_support = yes
	
	set_variable = { ALO_azat_loyalty = 5 }
	set_variable = { ALO_zhanar_loyalty = 10 }
	set_variable = { ALO_alash_loyalty = 10 }
	set_variable = { ALO_national_loyalty = 7 }
	ALO_calculate_alash_party_unity = yes 
	
	set_variable = { ALO_modernization_political_power_cost = 0.05 }
	set_variable = { ALO_modernization_stability_factor = -0.05 }
	
	set_variable = { 406.ALO_cossack_strength = 0.45 }
	set_variable = { 1208.ALO_cossack_strength = 0.75 }
	set_variable = { 589.ALO_cossack_strength = 0.25 }
}

ALO_setup_initial_popularities = {
	every_state = {
		limit = {
			is_owned_by = ALO
		}
		set_variable = { ALO_state_general_turnout = 0.7 }
		
		set_variable = { ALO_state_ush_zhus_pop = ALO.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = ALO.party_popularity@national_populist }
		
		set_variable = { ALO_state_zhas_azamat_pop = ALO.party_popularity@social_democrat }
		
		set_variable = { ALO_state_azat_pop = ALO.party_popularity@social_liberal }
		set_variable = { ALO_state_zhanar_pop = ALO.party_popularity@social_liberal }
		
		set_variable = { ALO_state_alash_pop = ALO.party_popularity@market_liberal }
		
		set_variable = { ALO_state_national_pop = ALO.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = ALO.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = ALO.party_popularity@paternal_autocrat }
		
		set_variable = { ALO_state_cossack_pop = ALO.party_popularity@paternal_autocrat }
		divide_variable = { ALO_state_cossack_pop = 3 }
		
		set_variable = { ALO_state_russian_pop = ALO.party_popularity@paternal_autocrat }
		divide_variable = { ALO_state_russian_pop = 3 }
				
		#Defining temporary state pop variables (to be reset by election)
		set_variable = { ALO_state_ush_zhus_temp_pop = 0 }
		set_variable = { ALO_state_zhas_azamat_temp_pop = 0 }
		set_variable = { ALO_state_azat_temp_pop = 0 }
		set_variable = { ALO_state_zhanar_temp_pop = 0 }
		set_variable = { ALO_state_alash_temp_pop = 0 }
		set_variable = { ALO_state_national_temp_pop = 0 }
		set_variable = { ALO_state_cossack_temp_pop = 0 }
		set_variable = { ALO_state_russian_temp_pop = 0 }
		
		if = {
			limit = { state = 1208 }
			add_to_variable = { ALO_state_cossack_pop = 0.681 }
			add_to_variable = { ALO_state_russian_pop = 0.281 }
		}
		if = {
			limit = { state = 406 }
			add_to_variable = { ALO_state_cossack_pop = 0.351 }
			add_to_variable = { ALO_state_russian_pop = 0.151 }
			add_to_variable = { ALO_state_azat_pop = 0.351 }
		}
		if = {
			limit = { state = 402 }
			add_to_variable = { ALO_state_alash_pop = 0.351 }
		}
		if = {
			limit = { 
				OR = {
					state = 404
					state = 810
				}
			}
			add_to_variable = { ALO_state_zhanar_pop = 0.251 }
			add_to_variable = { ALO_state_zhas_azamat_pop = 0.251 }
			add_to_variable = { ALO_state_ush_zhus_pop = 0.251 }
			add_to_variable = { ALO_state_russian_pop = 0.05 }
		}
		if = {
			limit = {
				NOT = {
					OR = {
						state = 1208
						state = 406
						state = 589
						state = 583
						state = 588
					}
				}
			}
			add_to_variable = { ALO_state_cossack_pop = -0.08 }
			add_to_variable = { ALO_state_russian_pop = -0.08 }
		}
	}
}
ALO_get_final_popularities = {
	set_variable = { ALO_state_alash_final_pop = ALO_state_alash_pop }
	set_variable = { ALO_state_azat_final_pop = ALO_state_azat_pop }
	set_variable = { ALO_state_cossack_final_pop = ALO_state_cossack_pop }
	set_variable = { ALO_state_national_final_pop = ALO_state_national_pop }
	set_variable = { ALO_state_ush_zhus_final_pop = ALO_state_ush_zhus_pop }
	set_variable = { ALO_state_zhanar_final_pop = ALO_state_zhanar_pop }
	set_variable = { ALO_state_zhas_azamat_final_pop = ALO_state_zhas_azamat_pop }
	set_variable = { ALO_state_russian_final_pop = ALO_state_russian_pop }

	add_to_variable = { ALO_state_alash_final_pop = ALO_state_alash_temp_pop }
	add_to_variable = { ALO_state_azat_final_pop = ALO_state_azat_temp_pop }
	add_to_variable = { ALO_state_cossack_final_pop = ALO_state_cossack_temp_pop }
	add_to_variable = { ALO_state_national_final_pop = ALO_state_national_temp_pop }
	add_to_variable = { ALO_state_ush_zhus_final_pop = ALO_state_ush_zhus_temp_pop }
	add_to_variable = { ALO_state_zhanar_final_pop = ALO_state_zhanar_temp_pop }
	add_to_variable = { ALO_state_zhas_azamat_final_pop = ALO_state_zhas_azamat_temp_pop }	
	add_to_variable = { ALO_state_russian_final_pop = ALO_state_russian_temp_pop }	
}
ALO_set_new_popularities_after_election = {
	set_variable = { ALO_state_alash_pop = ALO_state_alash_final_pop }
	set_variable = { ALO_state_azat_pop = ALO_state_azat_final_pop }
	set_variable = { ALO_state_cossack_pop = ALO_state_cossack_final_pop }
	set_variable = { ALO_state_national_pop = ALO_state_national_final_pop }
	set_variable = { ALO_state_ush_zhus_pop = ALO_state_ush_zhus_final_pop }
	set_variable = { ALO_state_zhanar_pop = ALO_state_zhanar_final_pop }
	set_variable = { ALO_state_zhas_azamat_pop = ALO_state_zhas_azamat_final_pop }
	set_variable = { ALO_state_russian_pop = ALO_state_russian_final_pop }
}
ALO_get_polls = {
	ALO_get_final_popularities = yes
	
	set_variable = { ALO_state_alash_final_poll_pop = ALO_state_alash_final_pop }
	set_variable = { ALO_state_azat_final_poll_pop = ALO_state_azat_final_pop }
	set_variable = { ALO_state_cossack_final_poll_pop = ALO_state_cossack_final_pop }
	set_variable = { ALO_state_national_final_poll_pop = ALO_state_national_final_pop }
	set_variable = { ALO_state_ush_zhus_final_poll_pop = ALO_state_ush_zhus_final_pop }
	set_variable = { ALO_state_zhanar_final_poll_pop = ALO_state_zhanar_final_pop }
	set_variable = { ALO_state_zhas_azamat_final_poll_pop = ALO_state_zhas_azamat_final_pop }
	set_variable = { ALO_state_russian_final_poll_pop = ALO_state_russian_final_pop }

}
ALO_clear_polls = {
	set_variable = { ALO_state_alash_final_poll_pop = 0 }
	set_variable = { ALO_state_azat_final_poll_pop = 0 }
	set_variable = { ALO_state_cossack_final_poll_pop = 0 }
	set_variable = { ALO_state_national_final_poll_pop = 0 }
	set_variable = { ALO_state_ush_zhus_final_poll_pop = 0 }
	set_variable = { ALO_state_zhanar_final_poll_pop = 0 }
	set_variable = { ALO_state_zhas_azamat_final_poll_pop = 0 }
	set_variable = { ALO_state_russian_final_poll_pop = 0 }
}
ALO_ruling_party_pop = {
	if = {
		limit = { ROOT = { has_government = radical_socialist } }
		set_temp_variable = { ush_zhus_pop = ruling_party_pop }
		ALO_ush_zhus_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_democrat } }
		set_temp_variable = { zhas_azamat_pop = ruling_party_pop }
		ALO_zhas_azamat_pop = yes
	}
	else_if = {
		limit = { ROOT = { ALO_dulatov_in_power = yes } }
		set_temp_variable = { zhanar_pop = ruling_party_pop }
		ALO_zhanar_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_liberal } }
		set_temp_variable = { azat_pop = ruling_party_pop }
		ALO_azat_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = market_liberal } }
		set_temp_variable = { alash_pop = ruling_party_pop }
		ALO_alash_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_conservative } }
		set_temp_variable = { national_pop = ruling_party_pop }
		ALO_national_pop = yes
	}
}
ALO_ush_zhus_pop = {
	divide_temp_variable = { ush_zhus_pop = 100 }
	add_to_variable = { ALO_state_ush_zhus_temp_pop = ush_zhus_pop }
	custom_effect_tooltip = ALO_ush_zhus_pop
	hidden_effect = {
		divide_temp_variable = { ush_zhus_pop = -7 }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_azat_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_alash_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_national_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_russian_temp_pop = ush_zhus_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = ush_zhus_pop }	
	}
}
ALO_zhas_azamat_pop = {
	divide_temp_variable = { zhas_azamat_pop = 100 }
	add_to_variable = { ALO_state_zhas_azamat_temp_pop = zhas_azamat_pop }
	custom_effect_tooltip = ALO_zhas_azamat_pop
	hidden_effect = {
		divide_temp_variable = { zhas_azamat_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_azat_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_alash_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_national_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_russian_temp_pop = zhas_azamat_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = zhas_azamat_pop }	
	}
}
ALO_azat_pop = {
	divide_temp_variable = { azat_pop = 100 }
	add_to_variable = { ALO_state_azat_temp_pop = azat_pop }
	custom_effect_tooltip = ALO_azat_pop
	hidden_effect = {
		divide_temp_variable = { azat_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = azat_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = azat_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = azat_pop }
		add_to_variable = { ALO_state_alash_temp_pop = azat_pop }
		add_to_variable = { ALO_state_national_temp_pop = azat_pop }
		add_to_variable = { ALO_state_russian_temp_pop = azat_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = azat_pop }	
	}
}
ALO_zhanar_pop = {
	divide_temp_variable = { zhanar_pop = 100 }
	add_to_variable = { ALO_state_zhanar_temp_pop = zhanar_pop }
	custom_effect_tooltip = ALO_zhanar_pop
	hidden_effect = {
		divide_temp_variable = { zhanar_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = zhanar_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = zhanar_pop }
		add_to_variable = { ALO_state_azat_temp_pop = zhanar_pop }
		add_to_variable = { ALO_state_alash_temp_pop = zhanar_pop }
		add_to_variable = { ALO_state_national_temp_pop = zhanar_pop }
		add_to_variable = { ALO_state_russian_temp_pop = zhanar_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = zhanar_pop }	
	}
}
ALO_alash_pop = {
	divide_temp_variable = { alash_pop = 100 }
	add_to_variable = { ALO_state_alash_temp_pop = alash_pop }
	custom_effect_tooltip = ALO_alash_pop
	hidden_effect = {
		divide_temp_variable = { alash_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = alash_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = alash_pop }
		add_to_variable = { ALO_state_azat_temp_pop = alash_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = alash_pop }
		add_to_variable = { ALO_state_national_temp_pop = alash_pop }
		add_to_variable = { ALO_state_russian_temp_pop = alash_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = alash_pop }	
	}
}
ALO_national_pop = {
	divide_temp_variable = { national_pop = 100 }
	add_to_variable = { ALO_state_national_temp_pop = national_pop }
	custom_effect_tooltip = ALO_national_pop
	hidden_effect = {
		divide_temp_variable = { national_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = national_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = national_pop }
		add_to_variable = { ALO_state_azat_temp_pop = national_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = national_pop }
		add_to_variable = { ALO_state_alash_temp_pop = national_pop }
		add_to_variable = { ALO_state_russian_temp_pop = national_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = national_pop }	
	}
}
ALO_cossack_pop = {
	divide_temp_variable = { cossack_pop = 100 }
	add_to_variable = { ALO_state_cossack_temp_pop = cossack_pop }
	custom_effect_tooltip = ALO_cossack_pop
	hidden_effect = {
		divide_temp_variable = { cossack_pop = -6 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_azat_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_alash_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_national_temp_pop = cossack_pop }	
	}
}
ALO_cossack_pop = {
	divide_temp_variable = { russian_pop = 100 }
	add_to_variable = { ALO_state_russian_temp_pop = russian_pop }
	custom_effect_tooltip = ALO_russian_pop
	hidden_effect = {
		divide_temp_variable = { russian_pop = -6 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = russian_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = russian_pop }
		add_to_variable = { ALO_state_azat_temp_pop = russian_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = russian_pop }
		add_to_variable = { ALO_state_alash_temp_pop = russian_pop }
		add_to_variable = { ALO_state_national_temp_pop = russian_pop }	
	}
}
ALO_run_election = {
	clr_country_flag = ALO_ELECTION_ALASH_VICTORY
	clr_country_flag = ALO_ELECTION_AZAT_VICTORY
	clr_country_flag = ALO_ELECTION_NATIONAL_VICTORY
	clr_country_flag = ALO_ELECTION_DEADLOCK
	clr_country_flag = ALO_ELECTION_NATIONAL_VICTORY
	clr_country_flag = ALO_ELECTION_USH_ZHUS_VICTORY
	clr_country_flag = ALO_ELECTION_ZHANAR_VICTORY
	clr_country_flag = ALO_ELECTION_ZHAS_AZAMAT_VICTORY
	
	set_variable = { ALO_ush_zhus_deputies_old = ALO_ush_zhus_deputies }
	set_variable = { ALO_zhas_azamat_deputies_old = ALO_zhas_azamat_deputies }
	set_variable = { ALO_azat_deputies_old = ALO_azat_deputies }
	set_variable = { ALO_zhanar_deputies_old = ALO_zhanar_deputies }
	set_variable = { ALO_alash_deputies_old = ALO_alash_deputies }
	set_variable = { ALO_national_deputies_old = ALO_national_deputies }
	set_variable = { ALO_cossack_deputies_old = ALO_cossack_deputies }
	set_variable = { ALO_russian_deputies_old = ALO_russian_deputies }
	
	set_variable = { ALO_ush_zhus_votes = 0 }
	set_variable = { ALO_zhas_azamat_votes = 0 }
	set_variable = { ALO_azat_votes = 0 }
	set_variable = { ALO_zhanar_votes = 0 }
	set_variable = { ALO_alash_votes = 0 }
	set_variable = { ALO_national_votes = 0 }
	set_variable = { ALO_cossack_votes = 0 }
	set_variable = { ALO_russian_votes = 0 }

	set_variable = { ALO_total_votes = 0 }

	every_owned_state = {
		ALO_get_final_popularities = yes

		set_variable = { ALO_vote_count_state = state_population_k }
		multiply_variable = { ALO_vote_count_state = ALO_state_general_turnout }

		set_variable = { ALO_ush_zhus_state_votes = ALO_state_ush_zhus_final_pop }
		set_variable = { ALO_zhas_azamat_state_votes = ALO_state_zhas_azamat_final_pop }
		set_variable = { ALO_azat_state_votes = ALO_state_azat_final_pop }
		set_variable = { ALO_zhanar_state_votes = ALO_state_zhanar_final_pop }
		set_variable = { ALO_alash_state_votes = ALO_state_alash_final_pop }
		set_variable = { ALO_national_state_votes = ALO_state_national_final_pop }
		set_variable = { ALO_cossack_state_votes = ALO_state_cossack_final_pop }
		set_variable = { ALO_russian_state_votes = ALO_state_russian_final_pop }

		multiply_variable = { ALO_ush_zhus_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_zhas_azamat_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_azat_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_zhanar_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_alash_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_national_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_cossack_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_russian_state_votes = ALO_vote_count_state }

		divide_variable = { ALO_ush_zhus_state_votes = 50 }
		divide_variable = { ALO_zhas_azamat_state_votes = 50 }
		divide_variable = { ALO_azat_state_votes = 50 }
		divide_variable = { ALO_zhanar_state_votes = 50 }
		divide_variable = { ALO_alash_state_votes = 50 }
		divide_variable = { ALO_national_state_votes = 50 }
		divide_variable = { ALO_cossack_state_votes = 50 }
		divide_variable = { ALO_russian_state_votes = 50 }
		
		if = {
			limit = { check_variable = { ALO_ush_zhus_state_votes < 0 } }
			set_variable = { ALO_ush_zhus_state_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_zhas_azamat_state_votes < 0 } }
			set_variable = { ALO_zhas_azamat_state_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_azat_state_votes < 0 } }
			set_variable = { ALO_azat_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_zhanar_state_votes < 0 } 
					ROOT = { has_country_flag = zhanar_faction_banned }
				}
			}
			set_variable = { ALO_zhanar_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_alash_state_votes < 0 } 
					ROOT = { has_country_flag = alash_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_national_state_votes < 0 } 
					ROOT = { has_country_flag = national_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_cossack_state_votes < 0 } }
			set_variable = { ALO_cossack_state_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_russian_state_votes < 0 } }
			set_variable = { ALO_russian_state_votes = 0 }
		}

		set_variable = { ALO_total_state_votes = ALO_ush_zhus_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_zhas_azamat_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_azat_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_zhanar_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_alash_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_national_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_cossack_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_russian_state_votes }

		add_to_variable = { PREV.ALO_ush_zhus_votes = ALO_ush_zhus_state_votes }
		add_to_variable = { PREV.ALO_zhas_azamat_votes = ALO_zhas_azamat_state_votes }
		add_to_variable = { PREV.ALO_azat_votes = ALO_azat_state_votes }
		add_to_variable = { PREV.ALO_zhanar_votes = ALO_zhanar_state_votes }
		add_to_variable = { PREV.ALO_alash_votes = ALO_alash_state_votes }
		add_to_variable = { PREV.ALO_national_votes = ALO_national_state_votes }
		add_to_variable = { PREV.ALO_cossack_votes = ALO_cossack_state_votes }
		add_to_variable = { PREV.ALO_russian_votes = ALO_russian_state_votes }

		
		#Resetting temp popularity
		set_variable = { ALO_state_ush_zhus_temp_pop = 0 }
		set_variable = { ALO_state_zhas_azamat_temp_pop = 0 }
		set_variable = { ALO_state_azat_temp_pop = 0 }
		set_variable = { ALO_state_zhanar_temp_pop = 0 }
		set_variable = { ALO_state_alash_temp_pop = 0 }
		set_variable = { ALO_state_national_temp_pop = 0 }
		set_variable = { ALO_state_cossack_temp_pop = 0 }
		set_variable = { ALO_state_russian_temp_pop = 0 }
		#Setting new popularities
		ALO_set_new_popularities_after_election = yes
	}
	round_variable = ALO_ush_zhus_votes
	round_variable = ALO_zhas_azamat_votes
	round_variable = ALO_azat_votes
	round_variable = ALO_zhanar_votes
	round_variable = ALO_alash_votes
	round_variable = ALO_national_votes
	round_variable = ALO_cossack_votes
	round_variable = ALO_russian_votes

	add_to_variable = { ALO_total_votes = ALO_ush_zhus_votes }
	add_to_variable = { ALO_total_votes = ALO_zhas_azamat_votes }
	add_to_variable = { ALO_total_votes = ALO_azat_votes }
	add_to_variable = { ALO_total_votes = ALO_zhanar_votes }
	add_to_variable = { ALO_total_votes = ALO_alash_votes }
	add_to_variable = { ALO_total_votes = ALO_national_votes }
	add_to_variable = { ALO_total_votes = ALO_cossack_votes }
	add_to_variable = { ALO_total_votes = ALO_russian_votes }

	set_variable = { ALO_ush_zhus_percentage_vote = ALO_ush_zhus_votes }
	set_variable = { ALO_zhas_azamat_percentage_vote = ALO_zhas_azamat_votes }
	set_variable = { ALO_azat_percentage_vote = ALO_azat_votes }
	set_variable = { ALO_zhanar_percentage_vote = ALO_zhanar_votes }
	set_variable = { ALO_alash_percentage_vote = ALO_alash_votes }
	set_variable = { ALO_national_percentage_vote = ALO_national_votes }
	set_variable = { ALO_cossack_percentage_vote = ALO_cossack_votes }
	set_variable = { ALO_russian_percentage_vote = ALO_russian_votes }

	divide_variable = { ALO_ush_zhus_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_zhas_azamat_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_azat_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_zhanar_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_alash_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_national_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_cossack_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_russian_percentage_vote = ALO_total_votes }

	set_variable = { ALO_ush_zhus_deputies = ALO_ush_zhus_percentage_vote }
	set_variable = { ALO_zhas_azamat_deputies = ALO_zhas_azamat_percentage_vote }
	set_variable = { ALO_azat_deputies = ALO_azat_percentage_vote }
	set_variable = { ALO_zhanar_deputies = ALO_zhanar_percentage_vote }
	set_variable = { ALO_alash_deputies = ALO_alash_percentage_vote }
	set_variable = { ALO_national_deputies = ALO_national_percentage_vote }
	set_variable = { ALO_cossack_deputies = ALO_cossack_percentage_vote }
	set_variable = { ALO_russian_deputies = ALO_russian_percentage_vote }

	multiply_variable = { ALO_ush_zhus_deputies = 72 }
	multiply_variable = { ALO_zhas_azamat_deputies = 72 }
	multiply_variable = { ALO_azat_deputies = 72 }
	multiply_variable = { ALO_zhanar_deputies = 72 }
	multiply_variable = { ALO_alash_deputies = 72 }
	multiply_variable = { ALO_national_deputies = 72 }
	multiply_variable = { ALO_cossack_deputies = 72 }
	multiply_variable = { ALO_russian_deputies = 72 }

	round_variable = ALO_ush_zhus_deputies
	round_variable = ALO_zhas_azamat_deputies
	round_variable = ALO_azat_deputies
	round_variable = ALO_zhanar_deputies
	round_variable = ALO_alash_deputies
	round_variable = ALO_national_deputies
	round_variable = ALO_cossack_deputies
	round_variable = ALO_russian_deputies
	
	set_variable = { ALO_total_deputies = ALO_ush_zhus_deputies }
	add_to_variable = { ALO_total_deputies = ALO_zhas_azamat_deputies }
	add_to_variable = { ALO_total_deputies = ALO_azat_deputies }
	add_to_variable = { ALO_total_deputies = ALO_zhanar_deputies }
	add_to_variable = { ALO_total_deputies = ALO_alash_deputies }
	add_to_variable = { ALO_total_deputies = ALO_national_deputies }
	add_to_variable = { ALO_total_deputies = ALO_cossack_deputies }
	add_to_variable = { ALO_total_deputies = ALO_russian_deputies }
	
	set_variable = { ALO_ush_zhus_deputies_support = 0 }
	set_variable = { ALO_zhas_azamat_deputies_support = 0 }
	set_variable = { ALO_azat_deputies_support = 0 }
	set_variable = { ALO_zhanar_deputies_support = 0 }
	set_variable = { ALO_alash_deputies_support = 0 }
	set_variable = { ALO_national_deputies_support = 0 }
	set_variable = { ALO_cossack_deputies_support = 0 }
	set_variable = { ALO_russian_deputies_support = 0 }

	multiply_variable = { ALO_ush_zhus_percentage_vote = 100 }
	multiply_variable = { ALO_zhas_azamat_percentage_vote = 100 }
	multiply_variable = { ALO_azat_percentage_vote = 100 }
	multiply_variable = { ALO_zhanar_percentage_vote = 100 }
	multiply_variable = { ALO_alash_percentage_vote = 100 }
	multiply_variable = { ALO_national_percentage_vote = 100 }
	multiply_variable = { ALO_cossack_percentage_vote = 100 }
	multiply_variable = { ALO_russian_percentage_vote = 100 }

	if = {
		limit = { has_country_flag = ALO_political_crisis }
		set_variable = { ALO_alash_united_percentage_vote = ALO_zhanar_percentage_vote }
		add_to_variable = { ALO_alash_united_percentage_vote = ALO_alash_percentage_vote }
		add_to_variable = { ALO_alash_united_percentage_vote = ALO_national_percentage_vote }
		if = {
			limit = {
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_zhas_azamat_percentage_vote }
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_alash_united_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_USH_ZHUS_VICTORY
		}
		else_if = {
			limit = {
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_ush_zhus_percentage_vote }
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_alash_united_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_ZHAS_AZAMAT_VICTORY
		}
		else = {
			set_country_flag = ALO_ELECTION_ALASH_VICTORY
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_zhas_azamat_percentage_vote }
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_azat_percentage_vote }
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_zhanar_percentage_vote }
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_alash_percentage_vote }
				check_variable = { ALO_ush_zhus_percentage_vote > ALO_national_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_USH_ZHUS_VICTORY
		}
		else_if = {
			limit = {
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_ush_zhus_percentage_vote }
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_azat_percentage_vote }
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_zhanar_percentage_vote }
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_alash_percentage_vote }
				check_variable = { ALO_zhas_azamat_percentage_vote > ALO_national_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_ZHAS_AZAMAT_VICTORY
		}
		else_if = {
			limit = {
				check_variable = { ALO_zhanar_percentage_vote > ALO_ush_zhus_percentage_vote }
				check_variable = { ALO_zhanar_percentage_vote > ALO_zhas_azamat_percentage_vote }
				check_variable = { ALO_zhanar_percentage_vote > ALO_azat_percentage_vote }
				check_variable = { ALO_zhanar_percentage_vote > ALO_alash_percentage_vote }
				check_variable = { ALO_zhanar_percentage_vote > ALO_national_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_ZHANAR_VICTORY
		}
		else_if = {
			limit = {
				check_variable = { ALO_alash_percentage_vote > ALO_ush_zhus_percentage_vote }
				check_variable = { ALO_alash_percentage_vote > ALO_zhas_azamat_percentage_vote }
				check_variable = { ALO_alash_percentage_vote > ALO_azat_percentage_vote }
				check_variable = { ALO_alash_percentage_vote > ALO_zhanar_percentage_vote }
				check_variable = { ALO_alash_percentage_vote > ALO_national_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_ALASH_VICTORY
		}
		else_if = {
			limit = {
				check_variable = { ALO_national_percentage_vote > ALO_ush_zhus_percentage_vote }
				check_variable = { ALO_national_percentage_vote > ALO_zhas_azamat_percentage_vote }
				check_variable = { ALO_national_percentage_vote > ALO_azat_percentage_vote }
				check_variable = { ALO_national_percentage_vote > ALO_zhanar_percentage_vote }
				check_variable = { ALO_national_percentage_vote > ALO_alash_percentage_vote }
			}
			set_country_flag = ALO_ELECTION_NATIONAL_VICTORY
		}
		else = {
			set_country_flag = ALO_ELECTION_DEADLOCK
		}
	}
	round_variable = ALO_total_votes
	ALO_clear_polls = yes
	log = "[GetDateText]: [THIS.GetName]: FINAL ELECTION RESULTS - RSO VOTES ([?ALO_ush_zhus_votes]) - SDE VOTES ([?ALO_zhas_azamat_votes]) - AZAT VOTES ([?ALO_azat_votes])"
	log = "SLI VOTES ([?ALO_zhanar_votes]) - MLI VOTES ([?ALO_alash_votes]) - SCO VOTES ([?ALO_national_votes]) - COS VOTES ([?ALO_cossack_votes]) - RUS VOTES ([?ALO_russian_votes]) - TOTAL VOTES ([?ALO_total_votes])"
}
ALO_calculate_support = {
	set_variable = { ALO_total_support = ALO_ush_zhus_deputies_support }
	add_to_variable = { ALO_total_support = ALO_zhas_azamat_deputies_support }
	add_to_variable = { ALO_total_support = ALO_azat_deputies_support }
	add_to_variable = { ALO_total_support = ALO_zhanar_deputies_support }
	add_to_variable = { ALO_total_support = ALO_alash_deputies_support }
	add_to_variable = { ALO_total_support = ALO_national_deputies_support }
	add_to_variable = { ALO_total_support = ALO_cossack_deputies_support }
	add_to_variable = { ALO_total_support = ALO_russian_deputies_support }
}
# Requires temp variable party_support
ALO_change_ush_zhus_support = {
	if = {
		limit = {
			check_variable = { ALO_ush_zhus_deputies_support > 0 }
			check_variable = { ALO_ush_zhus_deputies_support < ALO_ush_zhus_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_ush_zhus_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_ush_zhus_support
			clamp_variable = {
				var = ALO_ush_zhus_deputies_support
				min = 0
				max = ALO_ush_zhus_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_zhas_azamat_support = {
	if = {
		limit = {
			check_variable = { ALO_zhas_azamat_deputies_support > 0 }
			check_variable = { ALO_zhas_azamat_deputies_support < ALO_zhas_azamat_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_zhas_azamat_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_zhas_azamat_support
			clamp_variable = {
				var = ALO_zhas_azamat_deputies_support
				min = 0
				max = ALO_zhas_azamat_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_azat_support = {
	if = {
		limit = {
			check_variable = { ALO_azat_deputies_support > 0 }
			check_variable = { ALO_azat_deputies_support < ALO_azat_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_azat_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_azat_support
			clamp_variable = {
				var = ALO_azat_deputies_support
				min = 0
				max = ALO_azat_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_zhanar_support = {
	if = {
		limit = {
			check_variable = { ALO_zhanar_deputies_support > 0 }
			check_variable = { ALO_zhanar_deputies_support < ALO_zhanar_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_zhanar_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_zhanar_support
			clamp_variable = {
				var = ALO_zhanar_deputies_support
				min = 0
				max = ALO_zhanar_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_alash_support = {
	if = {
		limit = {
			check_variable = { ALO_alash_deputies_support > 0 }
			check_variable = { ALO_alash_deputies_support < ALO_alash_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_alash_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_alash_support
			clamp_variable = {
				var = ALO_alash_deputies_support
				min = 0
				max = ALO_alash_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_national_support = {
	if = {
		limit = {
			check_variable = { ALO_national_deputies_support > 0 }
			check_variable = { ALO_national_deputies_support < ALO_national_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_national_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_national_support
			clamp_variable = {
				var = ALO_national_deputies_support
				min = 0
				max = ALO_national_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_cossack_support = {
	if = {
		limit = {
			check_variable = { ALO_cossack_deputies_support > 0 }
			check_variable = { ALO_cossack_deputies_support < ALO_cossack_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_cossack_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_cossack_support
			clamp_variable = {
				var = ALO_cossack_deputies_support
				min = 0
				max = ALO_cossack_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_change_russian_support = {
	if = {
		limit = {
			check_variable = { ALO_russian_deputies_support > 0 }
			check_variable = { ALO_russian_deputies_support < ALO_russian_deputies }
		}
		if = {
			limit = { has_elections = yes }
			add_to_variable = { ALO_russian_deputies_support = party_support }
			custom_effect_tooltip = ALO_change_russian_support
			clamp_variable = {
				var = ALO_russian_deputies_support
				min = 0
				max = ALO_russian_deputies
			}
			ALO_calculate_support = yes
		}
	}
}
ALO_increase_russian_dependence = {
	if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_1
		}
	}
	custom_effect_tooltip = tooltip_white_line
	set_temp_variable = { party_support = 1 }
	ALO_change_russian_support = yes
}
ALO_decrease_russian_dependence = {
	if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_5
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_2
		}
	}
	custom_effect_tooltip = tooltip_white_line
	set_temp_variable = { party_support = -1 }
	ALO_change_russian_support = yes
}
ALO_heal_the_wounds = {
	if = {
		limit = {
			NOT = { has_country_flag = ALO_alash_party_ended }
			NOT = { has_country_flag = ALO_alash_party_secured }
		}
		custom_effect_tooltip = ALO_heal_the_wounds
		hidden_effect = {
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_azat_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_zhanar_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_alash_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_national_loyalty = yes
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity > 0.49 }
			}
			if = {
				limit = { has_idea = ALO_wounds_of_alash }
				remove_ideas = ALO_wounds_of_alash
			}
		}
		if = {
			limit = { 
				ALO_alash_party_in_power = yes 
				NOT = { has_country_flag = ALO_alash_party_ended }
			}
			custom_effect_tooltip = ALO_increase_alash_support
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = ALO_1936_Dosmukhamedov_Socdem }
					}
					set_temp_variable = { party_support = 1 }
					ALO_change_azat_support = yes	
				}
				set_temp_variable = { party_support = 1 }
				ALO_change_zhanar_support = yes
				set_temp_variable = { party_support = 1 }
				ALO_change_alash_support = yes
				set_temp_variable = { party_support = 1 }
				ALO_change_national_support = yes
			}
		}
	}
}
ALO_open_wounds = {
	if = {
		limit = {
			NOT = { has_country_flag = ALO_alash_party_ended }
			NOT = { has_country_flag = ALO_alash_party_secured }
		}
		custom_effect_tooltip = ALO_open_wounds
		hidden_effect = {
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_azat_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_zhanar_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_alash_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_national_loyalty = yes
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity < 0.6 }
			}
			if = {
				limit = { 
					NOT = { has_idea = ALO_wounds_of_alash } 
				}
				add_ideas = ALO_wounds_of_alash
			}
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity < 0.1 }
				ALO_alash_wounds_are_opened = yes
			}
			country_event = {
				id = alash.872
				days = 2
			}
		}
		if = {
			limit = { 
				ALO_alash_party_in_power = yes 
				ALO_alash_wounds_are_opened = yes
			}
			custom_effect_tooltip = ALO_decrease_alash_support
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_country_flag = ALO_1936_Dosmukhamedov_Socdem }
					}
					set_temp_variable = { party_support = -1 }
					ALO_change_azat_support = yes	
				}
				set_temp_variable = { party_support = -1 }
				ALO_change_zhanar_support = yes
				set_temp_variable = { party_support = -1 }
				ALO_change_alash_support = yes
				set_temp_variable = { party_support = -1 }
				ALO_change_national_support = yes
			}
		}
	}
}
ALO_calculate_alash_party_unity = {
	if = {
		limit = { ALO_alash_left_independent = no }
		add_to_variable = { ALO_alash_party_unity = ALO_azat_loyalty }
	}
	add_to_variable = { ALO_alash_party_unity = ALO_zhanar_loyalty }
	add_to_variable = { ALO_alash_party_unity = ALO_alash_loyalty }
	add_to_variable = { ALO_alash_party_unity = ALO_national_loyalty }
	
	set_temp_variable = { divider = 40 }
	if = {
		limit = { ALO_alash_left_independent = yes }
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { has_country_flag = alash_faction_banned }
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { has_country_flag = zhanar_faction_banned }
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { has_country_flag = national_faction_banned }
		add_to_temp_variable = { divide = -10 }
	}
	divide_variable = { ALO_alash_party_unity = divider }
}
ALO_change_azat_loyalty = {
	if = {
		limit = { 
			ALO_alash_wounds_are_opened = yes 
			ALO_alash_left_independent = no
		}
		# tooltip
		effect_tooltip = {
			add_to_variable = {
				ALO_azat_loyalty = ALO_loyalty_change
				tooltip = ALO_azat_loyalty_tooltip
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_azat_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_azat_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_azat_loyalty = ALO_loyalty_change }
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_zhanar_loyalty = {
	if = {
		limit = { ALO_alash_wounds_are_opened = yes }
		# tooltip
		effect_tooltip = {
			add_to_variable = {
				ALO_azat_loyalty = ALO_loyalty_change
				tooltip = ALO_zhanar_loyalty_tooltip
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_zhanar_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_zhanar_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_zhanar_loyalty = ALO_loyalty_change }
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_alash_loyalty = {
	if = {
		limit = { ALO_alash_wounds_are_opened = yes }
		# tooltip
		effect_tooltip = {
			add_to_variable = {
				ALO_azat_loyalty = ALO_loyalty_change
				tooltip = ALO_alash_loyalty_tooltip
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_alash_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_alash_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_alash_loyalty = ALO_loyalty_change }
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_national_loyalty = {
	if = {
		limit = { ALO_alash_wounds_are_opened = yes }
		# tooltip
		effect_tooltip = {
			add_to_variable = {
				ALO_azat_loyalty = ALO_loyalty_change
				tooltip = ALO_national_loyalty_tooltip
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_national_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_national_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_national_loyalty = ALO_loyalty_change }
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_bop_dulatuly_medium = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = -0.05
			tooltip_side = ALO_dulatuly_winning_side
		}
	}
	else_if = {
		limit = { 
			NOT = { has_country_flag = ALO_bop_ended }
		}
		custom_effect_tooltip = ALO_dulatuly_winning_side_no_bop
		add_to_variable = { ALO_bop = -1 }
	}
}
ALO_bop_yermekov_medium = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = 0.05
			tooltip_side = ALO_yermekov_winning_side
		}
	}
	else = {
		custom_effect_tooltip = ALO_yermekov_winning_side_no_bop
		add_to_variable = { ALO_bop = 1 }
	}
}

ALO_bop_dulatuly_large = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = -0.10
			tooltip_side = ALO_dulatuly_winning_side
		}
	}
	else = {
		custom_effect_tooltip = ALO_dulatuly_winning_side_no_bop
		add_to_variable = { ALO_bop = -2 }
	}
}
ALO_bop_yermekov_large = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = 0.10
			tooltip_side = ALO_yermekov_winning_side
		}
	}
	else = {
		custom_effect_tooltip = ALO_yermekov_winning_side_no_bop
		add_to_variable = { ALO_bop = 2 }
	}
}
ALO_setup_power_balance = {
	if = {
		limit = { check_variable = { ALO_bop < -4 } }
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.25
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -3 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.20
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -2 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.15
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -1 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.10
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 4 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.25
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 3 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.20
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 2 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.15
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 1 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.10
		}
	}
	else = {
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0
		}
	}
}
ALO_increase_modernization = {
	custom_effect_tooltip = ALO_increase_modernization
	
}
ALO_unite_moderates_with_liberals = {
	set_country_flag = alash_faction_banned
	# Ministers #
	remove_ideas_with_trait = head_of_government
	add_ideas = { ALO_Mirzhakip_Dulatov_hog_sli }
	if = {
		limit = { 
			NOT = { has_idea = ALO_Khalel_Dosmuhamedov_for_sli }
		}
		remove_ideas_with_trait = foreign_minister
		add_ideas = { ALO_Ahmet_Beremzhanov_for_sli }
	}
	if = {
		limit = { 
			NOT = { has_idea = ALO_Mukhamedjan_Tynyshpayev_eco_sli }
		}
		remove_ideas_with_trait = economy_minister
		add_ideas = { ALO_Khalel_Gabbasov_eco_sli }
	}
	remove_ideas_with_trait = security_minister
	add_ideas = { ALO_Bazarbay_Mametov_sec_sli }
	hidden_effect = {
		every_owned_state = {
			ALO_get_final_popularities = yes
			ALO_set_new_popularities_after_election = yes
			add_to_variable = { ALO_state_zhanar_pop = ALO_state_alash_pop }
			set_variable = { ALO_state_alash_pop = 0 }
			set_variable = { ALO_state_alash_temp_pop = 0 }
		}
		# Parliament #
		add_to_variable = { ALO_zhanar_deputies = ALO_alash_deputies }
		add_to_variable = { ALO_zhanar_deputies_support = ALO_alash_deputies }
		set_variable = { ALO_alash_deputies = 0 }
		set_variable = { ALO_alash_deputies_support = 0 }
		# Loyalty #
		set_temp_variable = { ALO_loyalty_change = ALO_alash_loyalty }
		ALO_change_zhanar_loyalty = yes
		set_variable = { ALO_alash_loyalty = 0 }
		ALO_calculate_alash_party_unity = yes
		# Popularities #
		set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal}
		add_to_temp_variable = { ALO_new_soclib = party_popularity_100@market_liberal  }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = ALO_new_soclib }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_soclib = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = ALO_new_soclib
			market_liberal = 0
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = party_popularity_100@authoritarian_democrat
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
		
	}
}
ALO_unite_liberals_with_moderates = {
	set_country_flag = zhanar_faction_banned
	# Ministers #
	remove_ideas_with_trait = head_of_government
	add_ideas = { ALO_Alimkhan_Yermekov_hog_mli }
	if = {
		limit = { 
			NOT = { has_idea = ALO_Khalel_Dosmuhamedov_for_sli }
		}
		remove_ideas_with_trait = foreign_minister
		add_ideas = { ALO_Akhmet_Baytursynov_for_mli }
	}
	if = {
		limit = { 
			NOT = { has_idea = ALO_Mukhamedjan_Tynyshpayev_eco_sli }
		}
		remove_ideas_with_trait = economy_minister
		add_ideas = { ALO_Asfandiyar_Kenzhin_eco_mli }
	}
	remove_ideas_with_trait = security_minister
	add_ideas = { ALO_Biakhmet_Sarsenov_sec_mli }
	hidden_effect = {
		every_owned_state = {
			ALO_get_final_popularities = yes
			ALO_set_new_popularities_after_election = yes
			add_to_variable = { ALO_state_alash_pop = ALO_state_zhanar_pop }
			set_variable = { ALO_state_zhanar_pop = 0 }
			set_variable = { ALO_state_zhanar_temp_pop = 0 }
		}
		# Parliament #
		set_temp_variable = { new_deputies = ALO_zhanar_deputies }
		divide_temp_variable = { new_deputies = 2 }
		round_temp_variable = new_deputies
		add_to_variable = { ALO_alash_deputies = new_deputies }
		add_to_variable = { ALO_alash_deputies_support = new_deputies }
		subtract_from_variable = { ALO_zhanar_deputies = new_deputies }
		add_to_variable = { ALO_azat_deputies = ALO_zhanar_deputies }
		add_to_variable = { ALO_azat_deputies_support = ALO_zhanar_deputies }
		set_variable = { ALO_zhanar_deputies = 0 }
		set_variable = { ALO_zhanar_deputies_support = 0 }
		# Loyalty #
		set_temp_variable = { ALO_loyalty_change = ALO_zhanar_loyalty }
		divide_temp_variable = { ALO_loyalty_change = 2 }
		round_temp_variable = ALO_loyalty_change
		ALO_change_alash_loyalty = yes
		set_temp_variable = { ALO_loyalty_change = ALO_zhanar_loyalty }
		divide_temp_variable = { ALO_loyalty_change = 2 }
		round_temp_variable = ALO_loyalty_change
		ALO_change_azat_loyalty = yes
		set_variable = { ALO_zhanar_loyalty = 0 }
		ALO_calculate_alash_party_unity = yes
		# Popularities #
		set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal }
		divide_temp_variable = { ALO_new_soclib = 2 }

		set_temp_variable = { ALO_new_marlib = party_popularity_100@market_liberal }
		add_to_temp_variable = { ALO_new_marlib = ALO_new_soclib }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = ALO_new_soclib }
		subtract_from_temp_variable = { sum = ALO_new_marlib }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_marlib = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = ALO_new_soclib
			market_liberal = ALO_new_marlib
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = party_popularity_100@authoritarian_democrat
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
		
	}
}
ALO_secure_alash = {
	hidden_effect = {
		if = {
			limit = { ALO_dulatov_in_power = yes }
			set_country_flag = alash_faction_banned
			set_country_flag = national_faction_banned
			every_owned_state = {
				ALO_get_final_popularities = yes
				ALO_set_new_popularities_after_election = yes
				add_to_variable = { ALO_state_zhanar_pop = ALO_state_alash_pop }
				add_to_variable = { ALO_state_zhanar_pop = ALO_state_national_pop }
				set_variable = { ALO_state_alash_pop = 0 }
				set_variable = { ALO_state_national_pop = 0 }
				set_variable = { ALO_state_alash_temp_pop = 0 }
				set_variable = { ALO_state_national_temp_pop = 0 }
			}
		}
		else_if = {
			limit = { ALO_amonzholov_in_power = yes }
			set_country_flag = zhanar_faction_banned
			set_country_flag = alash_faction_banned
			every_owned_state = {
				ALO_get_final_popularities = yes
				ALO_set_new_popularities_after_election = yes
				add_to_variable = { ALO_state_national_pop = ALO_state_zhanar_pop }
				add_to_variable = { ALO_state_national_pop = ALO_state_alash_pop }
				set_variable = { ALO_state_zhanar_pop = 0 }
				set_variable = { ALO_state_alash_pop = 0 }
				set_variable = { ALO_state_zhanar_temp_pop = 0 }
				set_variable = { ALO_state_alash_temp_pop = 0 }
			}
		}
		else = {
			set_country_flag = zhanar_faction_banned
			set_country_flag = national_faction_banned
			every_owned_state = {
				ALO_get_final_popularities = yes
				ALO_set_new_popularities_after_election = yes
				add_to_variable = { ALO_state_alash_pop = ALO_state_zhanar_pop }
				add_to_variable = { ALO_state_alash_pop = ALO_state_national_pop }
				set_variable = { ALO_state_zhanar_pop = 0 }
				set_variable = { ALO_state_national_pop = 0 }
				set_variable = { ALO_state_zhanar_temp_pop = 0 }
				set_variable = { ALO_state_national_temp_pop = 0 }
			}
		}
	}	
}
ALO_setup_socialist_revolution = {
	hidden_effect = {
		create_dynamic_country = {
			original_tag = ALO
			copy_tag = ALO

			save_global_event_target_as = ALO_soviet_republic
			set_cosmetic_tag = ALO_SOV
			
			set_politics = {
				ruling_party = totalist
				elections_allowed = no
			}
			set_stability = 0.4
			set_war_support = ROOT.has_war_support
			set_popularities = {
				totalist = 3
				radical_socialist = 11
				syndicalist = 27
				social_democrat = 31
				social_liberal = 10
				market_liberal = 0
				social_conservative = 0
				authoritarian_democrat = 0
				paternal_autocrat = 5
				national_populist = 13		
			}			
			every_state = {
				limit = {
					is_core_of = event_target:ALO_soviet_republic
				}
				remove_core_of = event_target:ALO_soviet_republic
			}
			add_ai_strategy = {
				type = contain
				id = "ALO"
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = "ALO"
				value = 500
			}
			add_ai_strategy = {
				type = antagonize
				id = "ALO"
				value = 200
			}
			reserve_dynamic_country = yes
							
			set_temp_variable = { ALO_civil_war_target = THIS }
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 588
					state = 810
					state = 404
				}
			}
			KAZ = {
				transfer_state = PREV
				add_state_core = PREV
			}
			remove_core_of = ALO
			add_claim_by = ALO
		}
		#move all Bolsheviks to revolter
		#every_unit_leader = {
		#	limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
		#	set_nationality = var:UKR_civil_war_target
		#}
		#hidden_effect = {
		#	XXA = {
		#		every_unit_leader = {
		#			limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
		#			set_nationality = var:UKR_civil_war_target
		#		}
		#	}
		#}
			
		var:ALO_civil_war_target = {
			copy_government_of_ROOT = yes
			transfer_technology_and_slots = yes
			set_capital = { state = 810 }
			#load_focus_tree = { tree = UKR_focus keep_completed = yes }
			#mark_focus_tree_layout_dirty = yes
			remove_all_ministers = yes		
			add_ideas = {
				war_economy
				closed_economy
				service_by_requirement
				#UKR_Oleksander_Shumsky_hog_rso
				#UKR_Antin_Prikhodko_for_rso
				#UKR_Panas_P_Lyubchenko_eco_rso
				#UKR_Hryhorii_Hrynko_sec_rso
			}
			set_politics = { 
				ruling_party = totalist
				elections_allowed = no
			}				
			create_country_leader = {
				name = "Alibi Jangildin"
				desc = "POLITICS_ALIBI_JANGILDIN_DESC"
				picture = "gfx/leaders/ALO/Portrait_ALO_Alibi_Dzhangildin.png"
				expire = "1.1.1"
				ideology = authcom_subtype
			}
			add_popularity = {
				ideology = totalist
				popularity = 0.25
			}	
			add_popularity = {
				ideology = syndicalist
				popularity = 0.10
			}
			
			division_template = {
				name = "Qyzyl Atty sker"
				division_names_group = ALO_CAV_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 0 y = 3 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
				}
			}
			division_template = {
				name = "Qyzyl Gvardya"
				division_names_group = ALO_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 0 y = 2 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}	

			#spawn units
			capital_scope = {				
				create_unit = {
					division = "division_template = \"Qyzyl Gvardya\" start_experience_factor = 0.3"
					owner = PREV
				}
				create_unit = {
					division = "division_template = \"Qyzyl Gvardya\" start_experience_factor = 0.2"
					owner = PREV
				}
				create_unit = {
					division = "division_template = \"Qyzyl Gvardya\" start_experience_factor = 0.1"
					owner = PREV
				}
				create_unit = {
					division = "division_template = \"Qyzyl Atty sker\" start_experience_factor = 0.2"
					owner = PREV
					count = 2
				}
			}	
			delete_unit_template_and_units = {
				division_template = "Militsiyasy"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Atty sker Diviziasy"
				disband = yes #will refund equipment and manpower
			}
			SOV = { SOV_puppet_PREV_effect = yes }
		}
		set_political_party = { ideology = totalist popularity = 0 }	
		set_political_party = { ideology = syndicalist popularity = 0 }	
	}
}
ALO_setup_autonomy_by_event = {
	RUS = { end_puppet = ROOT }
	add_ideas = ALO_russian_pressure_1
	hidden_effect = {
		RUS = { add_to_tech_sharing_group = russian_research }
		ALO = { add_to_tech_sharing_group = russian_research }
		give_military_access = RUS
	}
}
ALO_setup_autonomy_RVA_by_event = {
	if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_5_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_4_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_3_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2
			add_idea = ALO_russian_pressure_2_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_1_RVA
		}
	}
}
ALO_remove_russian_influence = {
	if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		remove_ideas = ALO_russian_pressure_5
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		remove_ideas = ALO_russian_pressure_4
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		remove_ideas = ALO_russian_pressure_3
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		remove_ideas = ALO_russian_pressure_1
	}
	set_temp_variable = { target = RUS }
	clear_all_relations_with_TARGET = yes
	if = {
		limit = { has_cosmetic_tag = ALO_autonomy }
		drop_cosmetic_tag = yes
	}
}
ALO_change_cossack_strength = {
	if = {
		limit = { ALO_is_cossack_host = yes }
		if = {
			limit = { ALO_is_semirechye_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_semirechye_cossack_strength
				}
			}
		}
		else_if = {
			limit = { ALO_is_ural_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_ural_cossack_strength
				}
			}
		}
		else_if = {
			limit = { ALO_is_orenburg_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_orenburg_cossack_strength
				}
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_cossack_strength }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 1 - legitimacy
		set_temp_variable = { ALO_upper_limit = 1 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_cossack_strength }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = cossack_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_cossack_strength = cossack_change }
		
		if = {
			limit = { ALO_is_ural_cossack_host = yes }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
			}
		}
		else_if = {
			limit = { ALO_is_orenburg_cossack_host = yes }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
			}
		}
		else_if = {
			limit = { ALO_is_semirechye_cossack_host = yes }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
			}
		}
	}
}
ALO_remove_cossack_host = {
	if = {
		limit = { ALO_is_ural_cossack_host = yes }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
		}
	}
	else_if = {
		limit = { ALO_is_orenburg_cossack_host = yes }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
		}
	}
	else_if = {
		limit = { ALO_is_semirechye_cossack_host = yes }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
		}
		hidden_effect = {
			ROOT = {
				country_event = {
					id = alash.601
					days = 30
				}
			}
		}
	}
}