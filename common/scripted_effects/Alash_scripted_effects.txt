ALO_setup_initial_variables = {
	set_variable = { ALO_ush_zhus_deputies = 2 }
	set_variable = { ALO_zhas_azamat_deputies = 11 }
	set_variable = { ALO_azat_deputies = 9 }
	set_variable = { ALO_zhanar_deputies = 8 }
	set_variable = { ALO_alash_deputies = 20 }
	set_variable = { ALO_national_deputies = 8 }
	set_variable = { ALO_cossack_deputies = 8 }
	set_variable = { ALO_russian_deputies = 6 }
	set_variable = { ALO_total_deputies = 72 }
	set_variable = { ALO_ush_zhus_deputies_support = 0 }
	set_variable = { ALO_zhas_azamat_deputies_support = 1 }
	set_variable = { ALO_azat_deputies_support = 9 }
	set_variable = { ALO_zhanar_deputies_support = 8 }
	set_variable = { ALO_alash_deputies_support = 20 }
	set_variable = { ALO_national_deputies_support = 8 }
	set_variable = { ALO_cossack_deputies_support = 1 }
	set_variable = { ALO_russian_deputies_support = 4 }
	ALO_calculate_support = yes
	
	set_variable = { ALO_azat_loyalty = 10 }
	set_variable = { ALO_zhanar_loyalty = 10 }
	set_variable = { ALO_alash_loyalty = 10 }
	set_variable = { ALO_national_loyalty = 10 }
	ALO_calculate_alash_party_unity = yes 
	
	set_variable = { ALO_modernization_political_power_cost = 0.05 }
	set_variable = { ALO_modernization_stability_factor = -0.05 }
	set_variable = { ALO_modernization_research_speed_factor = 0.03 }
	set_variable = { ALO_modernization_power_balance_weekly = -0.01 }
	
	set_variable = { ALO_develop_infrastructure_jas_azamat_cost = 35 }
	
	406 = { set_variable = { ALO_cossack_strength = 0.45 } }
	1208 = { set_variable = { ALO_cossack_strength = 0.75 } }
	589 = { set_variable = { ALO_cossack_strength = 0.25 } }
	set_variable = { ALO_cossack_strength_display_URL = 0.45 }
	set_variable = { ALO_cossack_strength_display_ORE = 0.75 }
	set_variable = { ALO_cossack_strength_display_SMR = 0.25 }
	
	set_variable = { alo_var_autonomy_oyi = 8 }
	set_variable = { alo_var_autonomy_tor = 6 }
	set_variable = { alo_var_autonomy_aqm = 5 }
	set_variable = { alo_var_autonomy_sem = 4 }
	set_variable = { alo_var_autonomy_jet = 6 }
	set_variable = { alo_var_autonomy_syr = 3 }
	set_variable = { alo_var_autonomy_ore = 8 }
	set_variable = { alo_var_autonomy_url = 5 }
	set_variable = { alo_var_autonomy_smr = 3 }
	ALO_calculate_federalism = yes	
	
	set_variable = { ALO_ban_socialist_parties_cost = 35 }
	
	set_variable = { ALO_radicalism_var = 0.15 }
	set_variable = { ALO_rising_radicalism_var = 0.05 }
	set_variable = { ALO_contain_revolutionary_impulses_cost = 20 }
	set_variable = { ALO_alash_unity_grows_days_timeout = 90 }
	
	activate_targeted_decision = { target = ORE decision = ALO_reintegrate_host }
	activate_targeted_decision = { target = URL decision = ALO_reintegrate_host }
	#activate_targeted_decision = { target = SMR decision = ALO_reintegrate_host }
}

ALO_setup_initial_popularities = {
	every_state = {
		limit = {
			is_owned_by = ALO
		}
		set_variable = { ALO_state_general_turnout = 0.7 }
		
		set_variable = { ALO_state_ush_zhus_pop = ALO.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = ALO.party_popularity@national_populist }
		
		set_variable = { ALO_state_zhas_azamat_pop = ALO.party_popularity@social_democrat }
		
		set_variable = { ALO_state_azat_pop = ALO.party_popularity@social_democrat }
		divide_variable = { ALO_state_azat_pop = 4 }
		set_temp_variable = { ALO_state_azat_pop_soclib = ALO.party_popularity@social_liberal }
		divide_temp_variable = { ALO_state_azat_pop_soclib = 3 }
		add_to_variable = { ALO_state_azat_pop = ALO_state_azat_pop_soclib }
		
		set_variable = { ALO_state_zhanar_pop = ALO.party_popularity@social_liberal }
		
		set_variable = { ALO_state_alash_pop = ALO.party_popularity@market_liberal }
		
		set_variable = { ALO_state_national_pop = ALO.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = ALO.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = ALO.party_popularity@paternal_autocrat }
		
		set_variable = { ALO_state_cossack_pop = ALO.party_popularity@paternal_autocrat }
		divide_variable = { ALO_state_cossack_pop = 3 }
		
		set_variable = { ALO_state_russian_pop = ALO.party_popularity@paternal_autocrat }
		divide_variable = { ALO_state_russian_pop = 3 }
				
		#Defining temporary state pop variables (to be reset by election)
		set_variable = { ALO_state_ush_zhus_temp_pop = 0 }
		set_variable = { ALO_state_zhas_azamat_temp_pop = 0 }
		set_variable = { ALO_state_azat_temp_pop = 0 }
		set_variable = { ALO_state_zhanar_temp_pop = 0 }
		set_variable = { ALO_state_alash_temp_pop = 0 }
		set_variable = { ALO_state_national_temp_pop = 0 }
		set_variable = { ALO_state_cossack_temp_pop = 0 }
		set_variable = { ALO_state_russian_temp_pop = 0 }
		
		if = {
			limit = { state = 1208 }
			add_to_variable = { ALO_state_cossack_pop = 0.381 }
			add_to_variable = { ALO_state_russian_pop = 0.481 }
		}
		if = {
			limit = { state = 406 }
			add_to_variable = { ALO_state_cossack_pop = 0.351 }
			add_to_variable = { ALO_state_russian_pop = 0.151 }
			add_to_variable = { ALO_state_azat_pop = 0.151 }
		}
		if = {
			limit = { state = 1212 }
			add_to_variable = { ALO_state_cossack_pop = 0.151 }
			add_to_variable = { ALO_state_azat_pop = 0.751 }
		}
		if = {
			limit = { state = 587 }
			add_to_variable = { ALO_state_azat_pop = 0.151 }
		}
		if = {
			limit = { state = 402 }
			add_to_variable = { ALO_state_zhanar_pop = 0.451 }
		}
		if = {
			limit = { state = 590 }
			add_to_variable = { ALO_state_ush_zhus_pop = 0.201 }
			add_to_variable = { ALO_state_zhas_azamat_pop = 0.151 }
		}
		if = {
			limit = { state = 589 }
			add_to_variable = { ALO_state_national_pop = 0.101 }
			add_to_variable = { ALO_state_ush_zhus_pop = 0.101 }
			add_to_variable = { ALO_state_cossack_pop = 0.151 }
			add_to_variable = { ALO_state_russian_pop = 0.201 }
		}
		if = {
			limit = { 
				OR = {
					state = 583 
					state = 588 
				}
			}
			add_to_variable = { ALO_state_russian_pop = 0.551 }
			add_to_variable = { ALO_state_ush_zhus_pop = 0.151 }
		}
		if = {
			limit = { 
				OR = {
					state = 404
					state = 810
				}
			}
			add_to_variable = { ALO_state_alash_pop = 0.351 }
			add_to_variable = { ALO_state_zhas_azamat_pop = 0.251 }
			add_to_variable = { ALO_state_russian_pop = 0.05 }
		}
		if = {
			limit = {
				NOT = {
					OR = {
						state = 1208
						state = 406
						state = 589
						state = 583
						state = 588
					}
				}
			}
			add_to_variable = { ALO_state_cossack_pop = -0.08 }
			add_to_variable = { ALO_state_russian_pop = -0.08 }
		}
	}
}
ALO_generate_popularities_for_others = {
	if = {
		limit = {
			is_core_of = TRK
		}
		set_variable = { ALO_state_general_turnout = 0.5 }
		
		set_variable = { ALO_state_ush_zhus_pop = TRK.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = TRK.party_popularity@syndicalist }
		add_to_variable = { ALO_state_ush_zhus_pop = TRK.party_popularity@totalist }
		
		set_variable = { ALO_state_zhas_azamat_pop = TRK.party_popularity@social_democrat }
		
		set_variable = { ALO_state_zhanar_pop = TRK.party_popularity@market_liberal }
		
		set_variable = { ALO_state_alash_pop = TRK.party_popularity@social_liberal }
		
		set_variable = { ALO_state_national_pop = TRK.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = TRK.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = TRK.party_popularity@paternal_autocrat }
		add_to_variable = { ALO_state_national_pop = TRK.party_popularity@national_populist }
		
	}
	else_if = {
		limit = { is_core_of = KHI }
		set_variable = { ALO_state_general_turnout = 0.4 }
		
		set_variable = { ALO_state_ush_zhus_pop = KHI.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = KHI.party_popularity@syndicalist }
		add_to_variable = { ALO_state_ush_zhus_pop = KHI.party_popularity@totalist }
		add_to_variable = { ALO_state_ush_zhus_pop = KHI.party_popularity@social_democrat }
		
		set_variable = { ALO_state_zhanar_pop = KHI.party_popularity@social_liberal }		
		set_variable = { ALO_state_alash_pop = KHI.party_popularity@market_liberal }
		
		set_variable = { ALO_state_national_pop = KHI.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = KHI.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = KHI.party_popularity@paternal_autocrat }
		add_to_variable = { ALO_state_national_pop = KHI.party_popularity@national_populist }
		
	}
	else_if = {
		limit = { is_core_of = KYR }
		set_variable = { ALO_state_general_turnout = 0.4 }
		
		set_variable = { ALO_state_ush_zhus_pop = KYR.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = KYR.party_popularity@syndicalist }
		add_to_variable = { ALO_state_ush_zhus_pop = KYR.party_popularity@totalist }
		
		set_variable = { ALO_state_alash_pop = KYR.party_popularity@social_democrat }
		add_to_variable = { ALO_state_alash_pop = KYR.party_popularity@social_liberal }
		add_to_variable = { ALO_state_alash_pop = KYR.party_popularity@market_liberal }
		
		set_variable = { ALO_state_national_pop = KYR.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = KYR.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = KYR.party_popularity@paternal_autocrat }
		add_to_variable = { ALO_state_national_pop = KYR.party_popularity@national_populist }
		
	}
	else_if = {
		limit = { is_core_of = UZB }
		set_variable = { ALO_state_general_turnout = 0.4 }
		
		set_variable = { ALO_state_ush_zhus_pop = UZB.party_popularity@radical_socialist }
		add_to_variable = { ALO_state_ush_zhus_pop = UZB.party_popularity@syndicalist }
		add_to_variable = { ALO_state_ush_zhus_pop = UZB.party_popularity@totalist }
		add_to_variable = { ALO_state_ush_zhus_pop = UZB.party_popularity@social_democrat }
		
		set_variable = { ALO_state_zhanar_pop = UZB.party_popularity@social_liberal }		
		set_variable = { ALO_state_alash_pop = UZB.party_popularity@market_liberal }
		
		set_variable = { ALO_state_national_pop = UZB.party_popularity@social_conservative }
		add_to_variable = { ALO_state_national_pop = UZB.party_popularity@authoritarian_democrat }
		add_to_variable = { ALO_state_national_pop = UZB.party_popularity@paternal_autocrat }
		add_to_variable = { ALO_state_national_pop = UZB.party_popularity@national_populist }
	}	
	#Defining temporary state pop variables (to be reset by election)
	set_variable = { ALO_state_ush_zhus_temp_pop = 0 }
	set_variable = { ALO_state_zhas_azamat_temp_pop = 0 }
	set_variable = { ALO_state_azat_temp_pop = 0 }
	set_variable = { ALO_state_zhanar_temp_pop = 0 }
	set_variable = { ALO_state_alash_temp_pop = 0 }
	set_variable = { ALO_state_national_temp_pop = 0 }
	set_variable = { ALO_state_cossack_temp_pop = 0 }
	set_variable = { ALO_state_russian_temp_pop = 0 }		
	
}
ALO_get_final_popularities = {
	set_variable = { ALO_state_alash_final_pop = ALO_state_alash_pop }
	set_variable = { ALO_state_azat_final_pop = ALO_state_azat_pop }
	set_variable = { ALO_state_cossack_final_pop = ALO_state_cossack_pop }
	set_variable = { ALO_state_national_final_pop = ALO_state_national_pop }
	set_variable = { ALO_state_ush_zhus_final_pop = ALO_state_ush_zhus_pop }
	set_variable = { ALO_state_zhanar_final_pop = ALO_state_zhanar_pop }
	set_variable = { ALO_state_zhas_azamat_final_pop = ALO_state_zhas_azamat_pop }
	set_variable = { ALO_state_russian_final_pop = ALO_state_russian_pop }

	add_to_variable = { ALO_state_alash_final_pop = ALO_state_alash_temp_pop }
	add_to_variable = { ALO_state_azat_final_pop = ALO_state_azat_temp_pop }
	add_to_variable = { ALO_state_cossack_final_pop = ALO_state_cossack_temp_pop }
	add_to_variable = { ALO_state_national_final_pop = ALO_state_national_temp_pop }
	add_to_variable = { ALO_state_ush_zhus_final_pop = ALO_state_ush_zhus_temp_pop }
	add_to_variable = { ALO_state_zhanar_final_pop = ALO_state_zhanar_temp_pop }
	add_to_variable = { ALO_state_zhas_azamat_final_pop = ALO_state_zhas_azamat_temp_pop }	
	add_to_variable = { ALO_state_russian_final_pop = ALO_state_russian_temp_pop }	
}
ALO_set_new_popularities_after_election = {
	set_variable = { ALO_state_alash_pop = ALO_state_alash_final_pop }
	set_variable = { ALO_state_azat_pop = ALO_state_azat_final_pop }
	set_variable = { ALO_state_cossack_pop = ALO_state_cossack_final_pop }
	set_variable = { ALO_state_national_pop = ALO_state_national_final_pop }
	set_variable = { ALO_state_ush_zhus_pop = ALO_state_ush_zhus_final_pop }
	set_variable = { ALO_state_zhanar_pop = ALO_state_zhanar_final_pop }
	set_variable = { ALO_state_zhas_azamat_pop = ALO_state_zhas_azamat_final_pop }
	set_variable = { ALO_state_russian_pop = ALO_state_russian_final_pop }
}
ALO_get_polls = {
	ALO_get_final_popularities = yes
	
	set_variable = { ALO_state_alash_final_poll_pop = ALO_state_alash_final_pop }
	set_variable = { ALO_state_azat_final_poll_pop = ALO_state_azat_final_pop }
	set_variable = { ALO_state_cossack_final_poll_pop = ALO_state_cossack_final_pop }
	set_variable = { ALO_state_national_final_poll_pop = ALO_state_national_final_pop }
	set_variable = { ALO_state_ush_zhus_final_poll_pop = ALO_state_ush_zhus_final_pop }
	set_variable = { ALO_state_zhanar_final_poll_pop = ALO_state_zhanar_final_pop }
	set_variable = { ALO_state_zhas_azamat_final_poll_pop = ALO_state_zhas_azamat_final_pop }
	set_variable = { ALO_state_russian_final_poll_pop = ALO_state_russian_final_pop }

}
ALO_clear_polls = {
	set_variable = { ALO_state_alash_final_poll_pop = 0 }
	set_variable = { ALO_state_azat_final_poll_pop = 0 }
	set_variable = { ALO_state_cossack_final_poll_pop = 0 }
	set_variable = { ALO_state_national_final_poll_pop = 0 }
	set_variable = { ALO_state_ush_zhus_final_poll_pop = 0 }
	set_variable = { ALO_state_zhanar_final_poll_pop = 0 }
	set_variable = { ALO_state_zhas_azamat_final_poll_pop = 0 }
	set_variable = { ALO_state_russian_final_poll_pop = 0 }
}
ALO_ruling_party_pop = {
	if = {
		limit = { ROOT = { has_government = radical_socialist } }
		set_temp_variable = { ush_zhus_pop = ruling_party_pop }
		ALO_ush_zhus_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_democrat } }
		set_temp_variable = { zhas_azamat_pop = ruling_party_pop }
		ALO_zhas_azamat_pop = yes
	}
	else_if = {
		limit = { ROOT = { ALO_dulatov_in_power = yes } }
		set_temp_variable = { zhanar_pop = ruling_party_pop }
		ALO_zhanar_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_liberal } }
		set_temp_variable = { azat_pop = ruling_party_pop }
		ALO_azat_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = market_liberal } }
		set_temp_variable = { alash_pop = ruling_party_pop }
		ALO_alash_pop = yes
	}
	else_if = {
		limit = { ROOT = { has_government = social_conservative } }
		set_temp_variable = { national_pop = ruling_party_pop }
		ALO_national_pop = yes
	}
}
ALO_ush_zhus_pop = {
	divide_temp_variable = { ush_zhus_pop = 100 }
	add_to_variable = { ALO_state_ush_zhus_temp_pop = ush_zhus_pop }
	custom_effect_tooltip = ALO_ush_zhus_pop
	hidden_effect = {
		divide_temp_variable = { ush_zhus_pop = -7 }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_azat_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_alash_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_national_temp_pop = ush_zhus_pop }
		add_to_variable = { ALO_state_russian_temp_pop = ush_zhus_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = ush_zhus_pop }	
	}
}
ALO_zhas_azamat_pop = {
	divide_temp_variable = { zhas_azamat_pop = 100 }
	add_to_variable = { ALO_state_zhas_azamat_temp_pop = zhas_azamat_pop }
	custom_effect_tooltip = ALO_zhas_azamat_pop
	hidden_effect = {
		divide_temp_variable = { zhas_azamat_pop = -7 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_azat_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_alash_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_national_temp_pop = zhas_azamat_pop }
		add_to_variable = { ALO_state_russian_temp_pop = zhas_azamat_pop }	
		add_to_variable = { ALO_state_cossack_temp_pop = zhas_azamat_pop }	
	}
}
ALO_azat_pop = {
	if = {
		limit = { ROOT = { NOT = { has_country_flag = azat_faction_banned } } }
		divide_temp_variable = { azat_pop = 100 }
		add_to_variable = { ALO_state_azat_temp_pop = azat_pop }
		custom_effect_tooltip = ALO_azat_pop
		hidden_effect = {
			divide_temp_variable = { azat_pop = -7 }
			add_to_variable = { ALO_state_ush_zhus_temp_pop = azat_pop }
			add_to_variable = { ALO_state_zhas_azamat_temp_pop = azat_pop }
			add_to_variable = { ALO_state_zhanar_temp_pop = azat_pop }
			add_to_variable = { ALO_state_alash_temp_pop = azat_pop }
			add_to_variable = { ALO_state_national_temp_pop = azat_pop }
			add_to_variable = { ALO_state_russian_temp_pop = azat_pop }	
			add_to_variable = { ALO_state_cossack_temp_pop = azat_pop }	
		}
	}
}
ALO_zhanar_pop = {
	if = {
		limit = { ROOT = { NOT = { has_country_flag = zhanar_faction_banned } } }
		divide_temp_variable = { zhanar_pop = 100 }
		add_to_variable = { ALO_state_zhanar_temp_pop = zhanar_pop }
		custom_effect_tooltip = ALO_zhanar_pop
		hidden_effect = {
			divide_temp_variable = { zhanar_pop = -7 }
			add_to_variable = { ALO_state_ush_zhus_temp_pop = zhanar_pop }
			add_to_variable = { ALO_state_zhas_azamat_temp_pop = zhanar_pop }
			add_to_variable = { ALO_state_azat_temp_pop = zhanar_pop }
			add_to_variable = { ALO_state_alash_temp_pop = zhanar_pop }
			add_to_variable = { ALO_state_national_temp_pop = zhanar_pop }
			add_to_variable = { ALO_state_russian_temp_pop = zhanar_pop }	
			add_to_variable = { ALO_state_cossack_temp_pop = zhanar_pop }	
		}
	}
}
ALO_alash_pop = {
	if = {
		limit = { ROOT = { NOT = { has_country_flag = alash_faction_banned } } }
		divide_temp_variable = { alash_pop = 100 }
		add_to_variable = { ALO_state_alash_temp_pop = alash_pop }
		custom_effect_tooltip = ALO_alash_pop
		hidden_effect = {
			divide_temp_variable = { alash_pop = -7 }
			add_to_variable = { ALO_state_ush_zhus_temp_pop = alash_pop }
			add_to_variable = { ALO_state_zhas_azamat_temp_pop = alash_pop }
			add_to_variable = { ALO_state_azat_temp_pop = alash_pop }
			add_to_variable = { ALO_state_zhanar_temp_pop = alash_pop }
			add_to_variable = { ALO_state_national_temp_pop = alash_pop }
			add_to_variable = { ALO_state_russian_temp_pop = alash_pop }	
			add_to_variable = { ALO_state_cossack_temp_pop = alash_pop }	
		}
	}
}
ALO_national_pop = {
	if = {
		limit = { ROOT = { NOT = { has_country_flag = national_faction_banned } } }
		divide_temp_variable = { national_pop = 100 }
		add_to_variable = { ALO_state_national_temp_pop = national_pop }
		custom_effect_tooltip = ALO_national_pop
		hidden_effect = {
			divide_temp_variable = { national_pop = -7 }
			add_to_variable = { ALO_state_ush_zhus_temp_pop = national_pop }
			add_to_variable = { ALO_state_zhas_azamat_temp_pop = national_pop }
			add_to_variable = { ALO_state_azat_temp_pop = national_pop }
			add_to_variable = { ALO_state_zhanar_temp_pop = national_pop }
			add_to_variable = { ALO_state_alash_temp_pop = national_pop }
			add_to_variable = { ALO_state_russian_temp_pop = national_pop }	
			add_to_variable = { ALO_state_cossack_temp_pop = national_pop }	
		}
	}
}
ALO_cossack_pop = {
	divide_temp_variable = { cossack_pop = 100 }
	add_to_variable = { ALO_state_cossack_temp_pop = cossack_pop }
	custom_effect_tooltip = ALO_cossack_pop
	hidden_effect = {
		divide_temp_variable = { cossack_pop = -6 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_azat_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_alash_temp_pop = cossack_pop }
		add_to_variable = { ALO_state_national_temp_pop = cossack_pop }	
	}
}
ALO_russian_pop = {
	divide_temp_variable = { russian_pop = 100 }
	add_to_variable = { ALO_state_russian_temp_pop = russian_pop }
	custom_effect_tooltip = ALO_russian_pop
	hidden_effect = {
		divide_temp_variable = { russian_pop = -6 }
		add_to_variable = { ALO_state_ush_zhus_temp_pop = russian_pop }
		add_to_variable = { ALO_state_zhas_azamat_temp_pop = russian_pop }
		add_to_variable = { ALO_state_azat_temp_pop = russian_pop }
		add_to_variable = { ALO_state_zhanar_temp_pop = russian_pop }
		add_to_variable = { ALO_state_alash_temp_pop = russian_pop }
		add_to_variable = { ALO_state_national_temp_pop = russian_pop }	
	}
}
ALO_run_election = {
	clr_country_flag = ALO_ELECTION_ALASH_VICTORY
	clr_country_flag = ALO_ELECTION_AZAT_VICTORY
	clr_country_flag = ALO_ELECTION_NATIONAL_VICTORY
	clr_country_flag = ALO_ELECTION_DEADLOCK
	clr_country_flag = ALO_ELECTION_NATIONAL_VICTORY
	clr_country_flag = ALO_ELECTION_USH_ZHUS_VICTORY
	clr_country_flag = ALO_ELECTION_ZHANAR_VICTORY
	clr_country_flag = ALO_ELECTION_ZHAS_AZAMAT_VICTORY
	
	set_variable = { ALO_ush_zhus_deputies_old = ALO_ush_zhus_deputies }
	set_variable = { ALO_zhas_azamat_deputies_old = ALO_zhas_azamat_deputies }
	set_variable = { ALO_azat_deputies_old = ALO_azat_deputies }
	set_variable = { ALO_zhanar_deputies_old = ALO_zhanar_deputies }
	set_variable = { ALO_alash_deputies_old = ALO_alash_deputies }
	set_variable = { ALO_national_deputies_old = ALO_national_deputies }
	set_variable = { ALO_cossack_deputies_old = ALO_cossack_deputies }
	set_variable = { ALO_russian_deputies_old = ALO_russian_deputies }
	
	set_variable = { ALO_ush_zhus_votes = 0 }
	set_variable = { ALO_zhas_azamat_votes = 0 }
	set_variable = { ALO_azat_votes = 0 }
	set_variable = { ALO_zhanar_votes = 0 }
	set_variable = { ALO_alash_votes = 0 }
	set_variable = { ALO_national_votes = 0 }
	set_variable = { ALO_cossack_votes = 0 }
	set_variable = { ALO_russian_votes = 0 }

	set_variable = { ALO_total_votes = 0 }

	every_owned_state = {
		ALO_get_final_popularities = yes

		set_variable = { ALO_vote_count_state = state_population_k }
		multiply_variable = { ALO_vote_count_state = ALO_state_general_turnout }

		set_variable = { ALO_ush_zhus_state_votes = ALO_state_ush_zhus_final_pop }
		set_variable = { ALO_zhas_azamat_state_votes = ALO_state_zhas_azamat_final_pop }
		set_variable = { ALO_azat_state_votes = ALO_state_azat_final_pop }
		set_variable = { ALO_zhanar_state_votes = ALO_state_zhanar_final_pop }
		set_variable = { ALO_alash_state_votes = ALO_state_alash_final_pop }
		set_variable = { ALO_national_state_votes = ALO_state_national_final_pop }
		set_variable = { ALO_cossack_state_votes = ALO_state_cossack_final_pop }
		set_variable = { ALO_russian_state_votes = ALO_state_russian_final_pop }

		multiply_variable = { ALO_ush_zhus_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_zhas_azamat_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_azat_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_zhanar_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_alash_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_national_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_cossack_state_votes = ALO_vote_count_state }
		multiply_variable = { ALO_russian_state_votes = ALO_vote_count_state }

		divide_variable = { ALO_ush_zhus_state_votes = 50 }
		divide_variable = { ALO_zhas_azamat_state_votes = 50 }
		divide_variable = { ALO_azat_state_votes = 50 }
		divide_variable = { ALO_zhanar_state_votes = 50 }
		divide_variable = { ALO_alash_state_votes = 50 }
		divide_variable = { ALO_national_state_votes = 50 }
		divide_variable = { ALO_cossack_state_votes = 50 }
		divide_variable = { ALO_russian_state_votes = 50 }
		
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_ush_zhus_state_votes < 0 } 
					ROOT = { has_country_flag = ush_zhus_banned }
				}
			}
			set_variable = { ALO_ush_zhus_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_zhas_azamat_state_votes < 0 } 
					ROOT = { has_country_flag = zhas_azamat_banned }
				}
			}
			set_variable = { ALO_zhas_azamat_state_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_azat_state_votes < 0 } }
			set_variable = { ALO_azat_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_zhanar_state_votes < 0 } 
					ROOT = { has_country_flag = zhanar_faction_banned }
				}
			}
			set_variable = { ALO_zhanar_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_alash_state_votes < 0 } 
					ROOT = { has_country_flag = alash_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_national_state_votes < 0 } 
					ROOT = { has_country_flag = national_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_cossack_state_votes < 0 } 
					ROOT = { has_country_flag = cossacks_banned }
				}
			}
			set_variable = { ALO_cossack_state_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_russian_state_votes < 0 } 
					ROOT = { has_country_flag = russians_banned }
				}
			}
			set_variable = { ALO_russian_state_votes = 0 }
		}

		set_variable = { ALO_total_state_votes = ALO_ush_zhus_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_zhas_azamat_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_azat_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_zhanar_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_alash_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_national_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_cossack_state_votes }
		add_to_variable = { ALO_total_state_votes = ALO_russian_state_votes }

		add_to_variable = { PREV.ALO_ush_zhus_votes = ALO_ush_zhus_state_votes }
		add_to_variable = { PREV.ALO_zhas_azamat_votes = ALO_zhas_azamat_state_votes }
		add_to_variable = { PREV.ALO_azat_votes = ALO_azat_state_votes }
		add_to_variable = { PREV.ALO_zhanar_votes = ALO_zhanar_state_votes }
		add_to_variable = { PREV.ALO_alash_votes = ALO_alash_state_votes }
		add_to_variable = { PREV.ALO_national_votes = ALO_national_state_votes }
		add_to_variable = { PREV.ALO_cossack_votes = ALO_cossack_state_votes }
		add_to_variable = { PREV.ALO_russian_votes = ALO_russian_state_votes }

		
		#Resetting temp popularity
		set_variable = { ALO_state_ush_zhus_temp_pop = 0 }
		set_variable = { ALO_state_zhas_azamat_temp_pop = 0 }
		set_variable = { ALO_state_azat_temp_pop = 0 }
		set_variable = { ALO_state_zhanar_temp_pop = 0 }
		set_variable = { ALO_state_alash_temp_pop = 0 }
		set_variable = { ALO_state_national_temp_pop = 0 }
		set_variable = { ALO_state_cossack_temp_pop = 0 }
		set_variable = { ALO_state_russian_temp_pop = 0 }
		#Setting new popularities
		ALO_set_new_popularities_after_election = yes
	}
	round_variable = ALO_ush_zhus_votes
	round_variable = ALO_zhas_azamat_votes
	round_variable = ALO_azat_votes
	round_variable = ALO_zhanar_votes
	round_variable = ALO_alash_votes
	round_variable = ALO_national_votes
	round_variable = ALO_cossack_votes
	round_variable = ALO_russian_votes

	add_to_variable = { ALO_total_votes = ALO_ush_zhus_votes }
	add_to_variable = { ALO_total_votes = ALO_zhas_azamat_votes }
	add_to_variable = { ALO_total_votes = ALO_azat_votes }
	add_to_variable = { ALO_total_votes = ALO_zhanar_votes }
	add_to_variable = { ALO_total_votes = ALO_alash_votes }
	add_to_variable = { ALO_total_votes = ALO_national_votes }
	add_to_variable = { ALO_total_votes = ALO_cossack_votes }
	add_to_variable = { ALO_total_votes = ALO_russian_votes }

	set_variable = { ALO_ush_zhus_percentage_vote = ALO_ush_zhus_votes }
	set_variable = { ALO_zhas_azamat_percentage_vote = ALO_zhas_azamat_votes }
	set_variable = { ALO_azat_percentage_vote = ALO_azat_votes }
	set_variable = { ALO_zhanar_percentage_vote = ALO_zhanar_votes }
	set_variable = { ALO_alash_percentage_vote = ALO_alash_votes }
	set_variable = { ALO_national_percentage_vote = ALO_national_votes }
	set_variable = { ALO_cossack_percentage_vote = ALO_cossack_votes }
	set_variable = { ALO_russian_percentage_vote = ALO_russian_votes }

	divide_variable = { ALO_ush_zhus_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_zhas_azamat_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_azat_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_zhanar_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_alash_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_national_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_cossack_percentage_vote = ALO_total_votes }
	divide_variable = { ALO_russian_percentage_vote = ALO_total_votes }

	set_variable = { ALO_ush_zhus_deputies = ALO_ush_zhus_percentage_vote }
	set_variable = { ALO_zhas_azamat_deputies = ALO_zhas_azamat_percentage_vote }
	set_variable = { ALO_azat_deputies = ALO_azat_percentage_vote }
	set_variable = { ALO_zhanar_deputies = ALO_zhanar_percentage_vote }
	set_variable = { ALO_alash_deputies = ALO_alash_percentage_vote }
	set_variable = { ALO_national_deputies = ALO_national_percentage_vote }
	set_variable = { ALO_cossack_deputies = ALO_cossack_percentage_vote }
	set_variable = { ALO_russian_deputies = ALO_russian_percentage_vote }

	multiply_variable = { ALO_ush_zhus_deputies = 72 }
	multiply_variable = { ALO_zhas_azamat_deputies = 72 }
	multiply_variable = { ALO_azat_deputies = 72 }
	multiply_variable = { ALO_zhanar_deputies = 72 }
	multiply_variable = { ALO_alash_deputies = 72 }
	multiply_variable = { ALO_national_deputies = 72 }
	multiply_variable = { ALO_cossack_deputies = 72 }
	multiply_variable = { ALO_russian_deputies = 72 }

	round_variable = ALO_ush_zhus_deputies
	round_variable = ALO_zhas_azamat_deputies
	round_variable = ALO_azat_deputies
	round_variable = ALO_zhanar_deputies
	round_variable = ALO_alash_deputies
	round_variable = ALO_national_deputies
	round_variable = ALO_cossack_deputies
	round_variable = ALO_russian_deputies
	
	set_variable = { ALO_total_deputies = ALO_ush_zhus_deputies }
	add_to_variable = { ALO_total_deputies = ALO_zhas_azamat_deputies }
	add_to_variable = { ALO_total_deputies = ALO_azat_deputies }
	add_to_variable = { ALO_total_deputies = ALO_zhanar_deputies }
	add_to_variable = { ALO_total_deputies = ALO_alash_deputies }
	add_to_variable = { ALO_total_deputies = ALO_national_deputies }
	add_to_variable = { ALO_total_deputies = ALO_cossack_deputies }
	add_to_variable = { ALO_total_deputies = ALO_russian_deputies }
	
	ALO_null_deputies_support = yes

	multiply_variable = { ALO_ush_zhus_percentage_vote = 100 }
	multiply_variable = { ALO_zhas_azamat_percentage_vote = 100 }
	multiply_variable = { ALO_azat_percentage_vote = 100 }
	multiply_variable = { ALO_zhanar_percentage_vote = 100 }
	multiply_variable = { ALO_alash_percentage_vote = 100 }
	multiply_variable = { ALO_national_percentage_vote = 100 }
	multiply_variable = { ALO_cossack_percentage_vote = 100 }
	multiply_variable = { ALO_russian_percentage_vote = 100 }

	if = {
		limit = { has_country_flag = ALO_alash_party_reorganized }
		add_to_variable = { ALO_alash_deputies = ALO_zhanar_deputies }
		add_to_variable = { ALO_alash_percentage_vote = ALO_zhanar_percentage_vote }
		if = {
			limit = { ALO_alash_right_independent = no }
			add_to_variable = { ALO_alash_deputies = ALO_national_deputies }
			add_to_variable = { ALO_alash_percentage_vote = ALO_national_percentage_vote }
		}
		if = {
			limit = { ALO_alash_left_independent = no }
			add_to_variable = { ALO_alash_deputies = ALO_azat_deputies }
			add_to_variable = { ALO_alash_percentage_vote = ALO_azat_percentage_vote }
		}
	}
	if = {
		limit = {
			check_variable = { ALO_ush_zhus_percentage_vote > ALO_zhas_azamat_percentage_vote }
			check_variable = { ALO_ush_zhus_percentage_vote > ALO_azat_percentage_vote }
			check_variable = { ALO_ush_zhus_percentage_vote > ALO_zhanar_percentage_vote }
			check_variable = { ALO_ush_zhus_percentage_vote > ALO_alash_percentage_vote }
			check_variable = { ALO_ush_zhus_percentage_vote > ALO_national_percentage_vote }
		}
		set_country_flag = ALO_ELECTION_USH_ZHUS_VICTORY
	}
	else_if = {
		limit = {
			check_variable = { ALO_zhas_azamat_percentage_vote > ALO_ush_zhus_percentage_vote }
			check_variable = { ALO_zhas_azamat_percentage_vote > ALO_azat_percentage_vote }
			check_variable = { ALO_zhas_azamat_percentage_vote > ALO_zhanar_percentage_vote }
			check_variable = { ALO_zhas_azamat_percentage_vote > ALO_alash_percentage_vote }
			check_variable = { ALO_zhas_azamat_percentage_vote > ALO_national_percentage_vote }
		}
		set_country_flag = ALO_ELECTION_ZHAS_AZAMAT_VICTORY
	}
	else_if = {
		limit = {
			check_variable = { ALO_zhanar_percentage_vote > ALO_ush_zhus_percentage_vote }
			check_variable = { ALO_zhanar_percentage_vote > ALO_zhas_azamat_percentage_vote }
			check_variable = { ALO_zhanar_percentage_vote > ALO_azat_percentage_vote }
			check_variable = { ALO_zhanar_percentage_vote > ALO_alash_percentage_vote }
			check_variable = { ALO_zhanar_percentage_vote > ALO_national_percentage_vote }
		}
		set_country_flag = ALO_ELECTION_ZHANAR_VICTORY
	}
	else_if = {
		limit = {
			check_variable = { ALO_alash_percentage_vote > ALO_ush_zhus_percentage_vote }
			check_variable = { ALO_alash_percentage_vote > ALO_zhas_azamat_percentage_vote }
			check_variable = { ALO_alash_percentage_vote > ALO_azat_percentage_vote }
			check_variable = { ALO_alash_percentage_vote > ALO_zhanar_percentage_vote }
			check_variable = { ALO_alash_percentage_vote > ALO_national_percentage_vote }
		}
		set_country_flag = ALO_ELECTION_ALASH_VICTORY
	}
	else_if = {
		limit = {
			check_variable = { ALO_national_percentage_vote > ALO_ush_zhus_percentage_vote }
			check_variable = { ALO_national_percentage_vote > ALO_zhas_azamat_percentage_vote }
			check_variable = { ALO_national_percentage_vote > ALO_azat_percentage_vote }
			check_variable = { ALO_national_percentage_vote > ALO_zhanar_percentage_vote }
			check_variable = { ALO_national_percentage_vote > ALO_alash_percentage_vote }
		}
		set_country_flag = ALO_ELECTION_NATIONAL_VICTORY
	}
	else = {
		set_country_flag = ALO_ELECTION_DEADLOCK
	}
	round_variable = ALO_total_votes
	ALO_clear_polls = yes
	log = "[GetDateText]: [THIS.GetName]: FINAL ELECTION RESULTS - RSO VOTES ([?ALO_ush_zhus_votes]) - SDE VOTES ([?ALO_zhas_azamat_votes]) - AZAT VOTES ([?ALO_azat_votes])"
	log = "SLI VOTES ([?ALO_zhanar_votes]) - MLI VOTES ([?ALO_alash_votes]) - SCO VOTES ([?ALO_national_votes]) - COS VOTES ([?ALO_cossack_votes]) - RUS VOTES ([?ALO_russian_votes]) - TOTAL VOTES ([?ALO_total_votes])"
}
ALO_null_deputies_support = {	
	set_variable = { ALO_ush_zhus_deputies_support = 0 }
	set_variable = { ALO_zhas_azamat_deputies_support = 0 }
	set_variable = { ALO_azat_deputies_support = 0 }
	set_variable = { ALO_zhanar_deputies_support = 0 }
	set_variable = { ALO_alash_deputies_support = 0 }
	set_variable = { ALO_national_deputies_support = 0 }
	set_variable = { ALO_cossack_deputies_support = 0 }
	set_variable = { ALO_russian_deputies_support = 0 }
}
ALO_calculate_support = {
	set_variable = { ALO_total_support = ALO_ush_zhus_deputies_support }
	add_to_variable = { ALO_total_support = ALO_zhas_azamat_deputies_support }
	add_to_variable = { ALO_total_support = ALO_azat_deputies_support }
	add_to_variable = { ALO_total_support = ALO_zhanar_deputies_support }
	add_to_variable = { ALO_total_support = ALO_alash_deputies_support }
	add_to_variable = { ALO_total_support = ALO_national_deputies_support }
	add_to_variable = { ALO_total_support = ALO_cossack_deputies_support }
	add_to_variable = { ALO_total_support = ALO_russian_deputies_support }
}
# Requires temp variable party_support
ALO_change_ush_zhus_support = {
	if = {
		limit = {
			check_variable = { ALO_ush_zhus_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_ush_zhus_support
				
			# add the variable
			add_to_variable = { ALO_ush_zhus_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_ush_zhus_deputies_support min = 0 max = ALO_ush_zhus_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_zhas_azamat_support = {
	if = {
		limit = {
			check_variable = { ALO_zhas_azamat_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_zhas_azamat_support
				
			# add the variable
			add_to_variable = { ALO_zhas_azamat_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_zhas_azamat_deputies_support min = 0 max = ALO_zhas_azamat_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_azat_support = {
	if = {
		limit = {
			check_variable = { ALO_azat_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_azat_support
				
			# add the variable
			add_to_variable = { ALO_azat_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_azat_deputies_support min = 0 max = ALO_azat_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_zhanar_support = {
	if = {
		limit = {
			check_variable = { ALO_zhanar_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_zhanar_support
				
			# add the variable
			add_to_variable = { ALO_zhanar_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_zhanar_deputies_support min = 0 max = ALO_zhanar_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_alash_support = {
	if = {
		limit = {
			check_variable = { ALO_alash_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_alash_support
				
			# add the variable
			add_to_variable = { ALO_alash_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_alash_deputies_support min = 0 max = ALO_alash_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_national_support = {
	if = {
		limit = {
			check_variable = { ALO_national_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_national_support
				
			# add the variable
			add_to_variable = { ALO_national_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_national_deputies_support min = 0 max = ALO_national_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_cossack_support = {
	if = {
		limit = {
			check_variable = { ALO_cossack_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_cossack_support
				
			# add the variable
			add_to_variable = { ALO_cossack_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_cossack_deputies_support min = 0 max = ALO_cossack_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_change_russian_support = {
	if = {
		limit = {
			check_variable = { ALO_russian_deputies > 0 }
		}
		if = {
			limit = { has_elections = yes }
			custom_effect_tooltip = ALO_change_russian_support
				
			# add the variable
			add_to_variable = { ALO_russian_deputies_support = party_support }			
			
			# clamp final var
			clamp_variable = { var = ALO_russian_deputies_support min = 0 max = ALO_russian_deputies }
			
			ALO_calculate_support = yes
		}
	}
}
ALO_increase_russian_dependence_by_two_levels = {
	if = {
		limit = { has_idea = ALO_russian_pressure_6_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6_RVA
			add_idea = ALO_russian_pressure_4_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5_RVA
			add_idea = ALO_russian_pressure_3_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4_RVA
			add_idea = ALO_russian_pressure_2_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3_RVA
			add_idea = ALO_russian_pressure_1_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1_RVA
			add_idea = ALO_russian_pressure_1_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_6 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_1
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_1
		}
	}
}
ALO_increase_russian_dependence = {
	if = {
		limit = { has_idea = ALO_russian_pressure_6_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6_RVA
			add_idea = ALO_russian_pressure_5_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5_RVA
			add_idea = ALO_russian_pressure_4_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4_RVA
			add_idea = ALO_russian_pressure_3_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3_RVA
			add_idea = ALO_russian_pressure_2_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1_RVA
			add_idea = ALO_russian_pressure_1_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_6 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6
			add_idea = ALO_russian_pressure_5
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_1
		}
	}
}
ALO_decrease_russian_dependence = {
	if = {
		limit = { has_idea = ALO_russian_pressure_5_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5_RVA
			add_idea = ALO_russian_pressure_6_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4_RVA
			add_idea = ALO_russian_pressure_5_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3_RVA
			add_idea = ALO_russian_pressure_4_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2_RVA
			add_idea = ALO_russian_pressure_3_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1_RVA
			add_idea = ALO_russian_pressure_2_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_6
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_5
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_2
		}
	}
}
ALO_heal_the_wounds = {
	if = {
		limit = {
			NOT = { has_country_flag = ALO_alash_party_ended }
			NOT = { has_country_flag = ALO_alash_party_secured }
		}
		custom_effect_tooltip = ALO_heal_the_wounds
		hidden_effect = {
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_azat_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_zhanar_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_alash_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = 1 }
			ALO_change_national_loyalty = yes
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity > 0.49 }
			}
			if = {
				limit = { has_idea = ALO_wounds_of_alash }
				remove_ideas = ALO_wounds_of_alash
			}
		}
		if = {
			limit = { 
				ALO_alash_party_in_power = yes 
				NOT = { has_country_flag = ALO_alash_party_ended }
			}
			custom_effect_tooltip = ALO_increase_alash_support
			hidden_effect = {
				set_temp_variable = { party_support = 1 }
				ALO_change_azat_support = yes	
				set_temp_variable = { party_support = 1 }
				ALO_change_zhanar_support = yes
				set_temp_variable = { party_support = 1 }
				ALO_change_alash_support = yes
				set_temp_variable = { party_support = 1 }
				ALO_change_national_support = yes
			}
		}
	}
}
ALO_open_wounds = {
	if = {
		limit = {
			NOT = { has_country_flag = ALO_alash_party_ended }
			NOT = { has_country_flag = ALO_alash_party_secured }
		}
		custom_effect_tooltip = ALO_open_wounds
		hidden_effect = {
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_azat_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_zhanar_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_alash_loyalty = yes
			set_temp_variable = { ALO_loyalty_change = -1 }
			ALO_change_national_loyalty = yes
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity < 0.6 }
			}
			if = {
				limit = { 
					NOT = { has_idea = ALO_wounds_of_alash } 
				}
				add_ideas = ALO_wounds_of_alash
			}
		}
		if = {
			limit = {
				check_variable = { ALO_alash_party_unity < 0.1 }
				ALO_alash_wounds_are_opened = yes
			}
			#country_event = {
			#	id = alash.997
			#	days = 2
			#}
		}
		if = {
			limit = { 
				ALO_alash_party_in_power = yes 
				ALO_alash_wounds_are_opened = yes
			}
			custom_effect_tooltip = ALO_decrease_alash_support
			hidden_effect = {
				set_temp_variable = { party_support = -1 }
				ALO_change_azat_support = yes	
				set_temp_variable = { party_support = -1 }
				ALO_change_zhanar_support = yes
				set_temp_variable = { party_support = -1 }
				ALO_change_alash_support = yes
				set_temp_variable = { party_support = -1 }
				ALO_change_national_support = yes
			}
		}
	}
}
ALO_calculate_alash_party_unity = {
	if = {
		limit = { 
			ALO_alash_left_independent = no
			NOT = { has_country_flag = azat_faction_banned }
		}
		add_to_variable = { ALO_alash_party_unity = ALO_azat_loyalty }
	}
	if = {
		limit = { 
			NOT = { has_country_flag = zhanar_faction_banned }
		}
		add_to_variable = { ALO_alash_party_unity = ALO_zhanar_loyalty }
	}
	if = {
		limit = { 
			NOT = { has_country_flag = alash_faction_banned }
		}
		add_to_variable = { ALO_alash_party_unity = ALO_alash_loyalty }
	}
	if = {
		limit = { 
			ALO_alash_right_independent = no 
			NOT = { has_country_flag = national_faction_banned }
		}
		add_to_variable = { ALO_alash_party_unity = ALO_national_loyalty }
	}
	
	set_temp_variable = { divider = 40 }
	if = {
		limit = { 
			OR = {
				ALO_alash_left_independent = yes 
				has_country_flag = azat_faction_banned
			}
		}
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { has_country_flag = alash_faction_banned }
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { has_country_flag = zhanar_faction_banned }
		add_to_temp_variable = { divide = -10 }
	}
	if = {
		limit = { 
			OR = {
				ALO_alash_right_independent = yes
				has_country_flag = national_faction_banned 
			}
		}
		add_to_temp_variable = { divide = -10 }
	}
	divide_variable = { ALO_alash_party_unity = divider }
	ALO_calculate_alash_party_disunity = yes
}
ALO_calculate_alash_party_disunity = {
	hidden_effect = {
		set_variable = { ALO_azat_loyalty_negative = 10 }
		subtract_from_variable = { ALO_azat_loyalty_negative = ALO_azat_loyalty }
		set_variable = { ALO_zhanar_loyalty_negative = 10 }
		subtract_from_variable = { ALO_zhanar_loyalty_negative = ALO_zhanar_loyalty }
		set_variable = { ALO_alash_loyalty_negative = 10 }
		subtract_from_variable = { ALO_alash_loyalty_negative = ALO_alash_loyalty }
		set_variable = { ALO_national_loyalty_negative = 10 }
		subtract_from_variable = { ALO_national_loyalty_negative = ALO_national_loyalty }
		
		if = {
			limit = { ALO_jas_azamat_in_power = yes }
			if = {
				limit = { 
					OR = {
						check_variable = { ALO_zhanar_loyalty_negative > 9 } 
						check_variable = { ALO_alash_loyalty_negative > 9 } 
					}
					NOT = { 
						has_country_flag = ALO_alash_party_ended 
						has_country_flag = ALO_alash_party_secured
					}
				}
				country_event = alash.997
				hidden_effect = {
					if = {
						limit = { has_completed_focus = ALO_Fight_Federalism }
						if = {
							limit = {
								NOT = { has_global_flag =renamed_alash_to_semey }
							}
							activate_targeted_decision = { target = 810 decision = ALO_renaming_alash }
						}
						if = {
							limit = {
								NOT = { has_cosmetic_tag = ALO_kazakhstan }
							}
							activate_targeted_decision = { target = ROOT decision = ALO_renaming_kazakhstan }
						}						
					}
				}
			}
			else = {
				if = {
					limit = { 
						check_variable = { ALO_azat_loyalty_negative > 9 } 
						ALO_alash_left_independent = no
					}
					country_event = {
						id = alash.999
						days = 2
						random = 24
					}
				}
				if = {
					limit = { 
						check_variable = { ALO_national_loyalty_negative > 9 } 
						ALO_alash_right_independent = no
					}
					country_event = {
						id = alash.998
						days = 2
						random = 24
					}
				}
			}
		}
	}
}
ALO_change_modernization = {
	if = {
		limit = { 
			ALO_dulatov_in_power = no 
			NOT = { has_country_flag = ALO_ministry_of_modernization_abolished }
		}
		if = {
			limit = {
				ALO_alash_party_in_power = yes
			}
			custom_effect_tooltip = ALO_modernization_will_change2
		}
		add_to_variable = { ALO_modernization_var = ALO_change_modernization }
		clamp_variable = { var = ALO_modernization_var min = 0 max = 1 }
		hidden_effect = {
			if = {
				limit = { check_variable = { ALO_modernization_var > 0.95 } }
				if = {
					limit = { 
						ALO_alash_party_in_power = yes
						ALO_dulatov_in_power = no
						has_any_power_balance = yes
						NOT = {
							has_country_flag = ALO_dulatuly_arrested
							has_country_flag = ALO_alash_party_secured
						}
					}
					country_event = alash.987
				}
			}
		}
	}
	else_if = {
		limit = { ALO_alash_party_in_power = yes }
		custom_effect_tooltip = ALO_modernization_will_change
		add_to_variable = { ALO_modernization_var = ALO_change_modernization }
		clamp_variable = { var = ALO_modernization_var min = 0 max = 1 }
	}
}
ALO_change_azat_loyalty = {
	if = {
		limit = { 
			ALO_alash_wounds_are_opened = yes 
			ALO_alash_left_independent = no
			NOT = { has_country_flag = azat_faction_banned }
		}
		if = {
			limit = { 
				OR = {
					ALO_jas_azamat_in_power = yes 
					ALO_ush_juz_in_power = yes 
				}
			}
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_azat_loyalty = ALO_loyalty_change
					tooltip = ALO_azat_loyalty_tooltip2
				}
			}
		}
		else_if = {
			limit = { ALO_wounds_of_alash_visible = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_azat_loyalty = ALO_loyalty_change
					tooltip = ALO_azat_loyalty_tooltip
				}
			}
		}
		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_azat_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_azat_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}
		
		# add the variable
		add_to_variable = { ALO_azat_loyalty = ALO_loyalty_change }	
		hidden_effect = {
			divide_temp_variable = { ALO_loyalty_change = -100 }
			add_popularity = { ideology = social_democrat popularity = 0.005 }
			add_popularity = { ideology = social_liberal popularity = 0.005 }
			if = {
				limit = { check_variable = { ALO_azat_loyalty < 1 } }
				if = {
					limit = { ALO_wounds_of_alash_visible = yes }
					activate_mission = ALO_azat_splits_mission
				}
				else = {
					country_event = alash.999
				}
			}					
		}
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_zhanar_loyalty = {
	if = {
		limit = { 
			ALO_alash_wounds_are_opened = yes 
			NOT = { has_country_flag = zhanar_faction_banned }
		}
		
		if = {
			limit = { 
				OR = {
					ALO_jas_azamat_in_power = yes 
					ALO_ush_juz_in_power = yes 
				}
			}
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_zhanar_loyalty = ALO_loyalty_change
					tooltip = ALO_zhanar_loyalty_tooltip2
				}
			}
		}
		else_if = {
			limit = { ALO_wounds_of_alash_visible = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_zhanar_loyalty = ALO_loyalty_change
					tooltip = ALO_zhanar_loyalty_tooltip
				}
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_zhanar_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_zhanar_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_zhanar_loyalty = ALO_loyalty_change }
		hidden_effect = {
			divide_temp_variable = { ALO_loyalty_change = -100 }
			add_popularity = { ideology = social_liberal popularity = 0.01 }
			if = {
				limit = { check_variable = { ALO_zhanar_loyalty < 1 } }
				if = {
					limit = { 
						ALO_wounds_of_alash_visible = yes 
					}
					if = {
						limit = {
							NOT = { 
								has_active_mission = ALO_party_splits_mission_alash 
								has_country_flag = ALO_bop_ended
							}
						}
						activate_mission = ALO_party_splits_mission_zhanar
					}
				}
				else = {
					country_event = alash.997
				}
			}
		}
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_alash_loyalty = {
	if = {
		limit = { 
			ALO_alash_wounds_are_opened = yes 
			NOT = { has_country_flag = alash_faction_banned }
		}
		if = {
			limit = { 
				OR = {
					ALO_jas_azamat_in_power = yes 
					ALO_ush_juz_in_power = yes 
				}
			}
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_alash_loyalty = ALO_loyalty_change
					tooltip = ALO_alash_loyalty_tooltip2
				}
			}
		}
		else_if = {
			limit = { ALO_wounds_of_alash_visible = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_alash_loyalty = ALO_loyalty_change
					tooltip = ALO_alash_loyalty_tooltip
				}
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_alash_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_alash_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_alash_loyalty = ALO_loyalty_change }
		hidden_effect = {
			divide_temp_variable = { ALO_loyalty_change = -100 }
			add_popularity = { ideology = market_liberal popularity = 0.01 }
			if = {
				limit = { check_variable = { ALO_alash_loyalty < 1 } }
				if = {
					limit = { 
						ALO_wounds_of_alash_visible = yes 
					}
					if = {
						limit = {
							NOT = { 
								has_active_mission = ALO_party_splits_mission_zhanar 
								has_country_flag = ALO_bop_ended
							}
						}
						activate_mission = ALO_party_splits_mission_alash
					}
				}
				else = {
					country_event = alash.997
				}
			}
		}
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_change_national_loyalty = {
	if = {
		limit = { 
			ALO_alash_wounds_are_opened = yes 
			ALO_alash_right_independent = no
			NOT = { has_country_flag = national_faction_banned }
		}
		if = {
			limit = { 
				OR = {
					ALO_jas_azamat_in_power = yes 
					ALO_ush_juz_in_power = yes 
				}
			}
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_national_loyalty = ALO_loyalty_change
					tooltip = ALO_national_loyalty_tooltip2
				}
			}
		}
		else_if = {
			limit = { ALO_wounds_of_alash_visible = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_national_loyalty = ALO_loyalty_change
					tooltip = ALO_national_loyalty_tooltip
				}
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_national_loyalty }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 10 - legitimacy
		set_temp_variable = { ALO_upper_limit = 10 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_national_loyalty }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = ALO_loyalty_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_national_loyalty = ALO_loyalty_change }
		hidden_effect = {
			if = {
				limit = { check_variable = { ALO_national_loyalty < 1 } }
				if = {
					limit = { ALO_wounds_of_alash_visible = yes }
					activate_mission = ALO_halyq_splits_mission
				}
				else = {
					country_event = alash.998
				}
			}
			divide_temp_variable = { ALO_loyalty_change = -100 }
			add_popularity = { ideology = social_conservative popularity = 0.01 }
		}
	}
	ALO_calculate_alash_party_unity = yes
}
ALO_bop_dulatuly_medium = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = -0.1
			tooltip_side = ALO_dulatuly_winning_side
		}
	}
	else_if = {
		limit = { 
			NOT = { has_country_flag = ALO_bop_ended }
		}
		custom_effect_tooltip = ALO_dulatuly_winning_side_no_bop
		add_to_variable = { ALO_bop = -1 }
	}
}
ALO_bop_yermekov_medium = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = 0.1
			tooltip_side = ALO_yermekov_winning_side
		}
	}
	else_if = {
		limit = { 
			NOT = { has_country_flag = ALO_bop_ended }
		}
		custom_effect_tooltip = ALO_yermekov_winning_side_no_bop
		add_to_variable = { ALO_bop = 1 }
	}
}

ALO_bop_dulatuly_large = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = -0.2
			tooltip_side = ALO_dulatuly_winning_side
		}
	}
	else_if = {
		limit = { 
			NOT = { has_country_flag = ALO_bop_ended }
		}
		custom_effect_tooltip = ALO_dulatuly_winning_side_no_bop
		add_to_variable = { ALO_bop = -2 }
	}
	hidden_effect = {
		set_temp_variable = { ALO_loyalty_change = -2 }
		ALO_change_alash_loyalty = yes
	}
}
ALO_bop_yermekov_large = {
	if = {
		limit = { has_any_power_balance = yes }
		add_power_balance_value = {
			id = ALO_power_balance
			value = 0.2
			tooltip_side = ALO_yermekov_winning_side
		}
	}
	else_if = {
		limit = { 
			NOT = { has_country_flag = ALO_bop_ended }
		}
		custom_effect_tooltip = ALO_yermekov_winning_side_no_bop
		add_to_variable = { ALO_bop = 2 }
	}
	hidden_effect = {
		set_temp_variable = { ALO_loyalty_change = -2 }
		ALO_change_zhanar_loyalty = yes
	}
}
ALO_setup_power_balance = {
	if = {
		limit = { check_variable = { ALO_bop < -4 } }
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.25
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -3 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.20
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -2 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.15
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop < -1 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = -0.10
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 4 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.25
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 3 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.20
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 2 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.15
		}
	}
	else_if = {
		limit = { check_variable = { ALO_bop > 1 } }		
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0.10
		}
	}
	else = {
		set_power_balance = {
			id = ALO_power_balance
			left_side = ALO_dulatuly_winning_side
			right_side = ALO_yermekov_winning_side
			set_value = 0
		}
	}
}
ALO_increase_modernization = {
	custom_effect_tooltip = ALO_increase_modernization
	
}
ALO_unite_moderates_with_liberals = {
	set_country_flag = alash_faction_banned
	# Ministers #
	remove_ideas_with_trait = head_of_government
	add_ideas = { ALO_Mirzhakip_Dulatov_hog_sli }
	if = {
		limit = { 
			NOT = { has_idea = ALO_Khalel_Dosmuhamedov_for_sli }
		}
		remove_ideas_with_trait = foreign_minister
		add_ideas = { ALO_Ahmet_Beremzhanov_for_sli }
	}
	if = {
		limit = { 
			NOT = { has_idea = ALO_Mukhamedjan_Tynyshpayev_eco_sli }
		}
		remove_ideas_with_trait = economy_minister
		add_ideas = { ALO_Khalel_Gabbasov_eco_sli }
	}
	remove_ideas_with_trait = security_minister
	add_ideas = { ALO_Bazarbay_Mametov_sec_sli }
	hidden_effect = {
		every_owned_state = {
			ALO_get_final_popularities = yes
			ALO_set_new_popularities_after_election = yes
			add_to_variable = { ALO_state_zhanar_pop = ALO_state_alash_pop }
			set_variable = { ALO_state_alash_pop = 0 }
			set_variable = { ALO_state_alash_temp_pop = 0 }
		}
		# Parliament #
		add_to_variable = { ALO_zhanar_deputies = ALO_alash_deputies }
		add_to_variable = { ALO_zhanar_deputies_support = ALO_alash_deputies }
		set_variable = { ALO_alash_deputies = 0 }
		set_variable = { ALO_alash_deputies_support = 0 }
		# Loyalty #
		set_temp_variable = { ALO_loyalty_change = ALO_alash_loyalty }
		ALO_change_zhanar_loyalty = yes
		set_variable = { ALO_alash_loyalty = 0 }
		ALO_calculate_alash_party_unity = yes
		# Popularities #
		set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal}
		add_to_temp_variable = { ALO_new_soclib = party_popularity_100@market_liberal  }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = ALO_new_soclib }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_soclib = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = ALO_new_soclib
			market_liberal = 0
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = party_popularity_100@authoritarian_democrat
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}		
	}
}
ALO_unite_liberals_with_moderates = {
	set_country_flag = zhanar_faction_banned
	# Ministers #
	remove_ideas_with_trait = head_of_government
	add_ideas = { ALO_Alimkhan_Yermekov_hog_mli }
	if = {
		limit = { 
			NOT = { has_idea = ALO_Khalel_Dosmuhamedov_for_sli }
		}
		remove_ideas_with_trait = foreign_minister
		add_ideas = { ALO_Aydarkhan_Turlybaev_for_mli }
	}
	if = {
		limit = { 
			NOT = { has_idea = ALO_Mukhamedjan_Tynyshpayev_eco_sli }
		}
		remove_ideas_with_trait = economy_minister
		add_ideas = { ALO_Asfandiyar_Kenzhin_eco_mli }
	}
	remove_ideas_with_trait = security_minister
	add_ideas = { ALO_Biakhmet_Sarsenov_sec_mli }
	hidden_effect = {
		every_owned_state = {
			ALO_get_final_popularities = yes
			ALO_set_new_popularities_after_election = yes
			add_to_variable = { ALO_state_alash_pop = ALO_state_zhanar_pop }
			set_variable = { ALO_state_zhanar_pop = 0 }
			set_variable = { ALO_state_zhanar_temp_pop = 0 }
		}
		# Parliament #
		set_temp_variable = { new_deputies = ALO_zhanar_deputies }
		divide_temp_variable = { new_deputies = 2 }
		round_temp_variable = new_deputies
		add_to_variable = { ALO_alash_deputies = new_deputies }
		add_to_variable = { ALO_alash_deputies_support = new_deputies }
		subtract_from_variable = { ALO_zhanar_deputies = new_deputies }
		add_to_variable = { ALO_azat_deputies = ALO_zhanar_deputies }
		add_to_variable = { ALO_azat_deputies_support = ALO_zhanar_deputies }
		set_variable = { ALO_zhanar_deputies = 0 }
		set_variable = { ALO_zhanar_deputies_support = 0 }
		# Loyalty #
		set_temp_variable = { ALO_loyalty_change = ALO_zhanar_loyalty }
		divide_temp_variable = { ALO_loyalty_change = 2 }
		round_temp_variable = ALO_loyalty_change
		ALO_change_alash_loyalty = yes
		set_temp_variable = { ALO_loyalty_change = ALO_zhanar_loyalty }
		divide_temp_variable = { ALO_loyalty_change = 2 }
		round_temp_variable = ALO_loyalty_change
		ALO_change_azat_loyalty = yes
		set_variable = { ALO_zhanar_loyalty = 0 }
		ALO_calculate_alash_party_unity = yes
		# Popularities #
		set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal }
		divide_temp_variable = { ALO_new_soclib = 2 }

		set_temp_variable = { ALO_new_marlib = party_popularity_100@market_liberal }
		add_to_temp_variable = { ALO_new_marlib = ALO_new_soclib }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = ALO_new_soclib }
		subtract_from_temp_variable = { sum = ALO_new_marlib }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_marlib = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = ALO_new_soclib
			market_liberal = ALO_new_marlib
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = party_popularity_100@authoritarian_democrat
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
		
	}
}
ALO_secure_alash = {
	set_country_flag = ALO_alash_party_secured	
	set_country_flag = ALO_bop_ended
	remove_power_balance = { id = ALO_power_balance }
	hidden_effect = {
		if = {
			limit = { ALO_dulatov_in_power = yes }
			set_country_flag = alash_faction_banned
			set_country_flag = azat_faction_banned
			set_country_flag = national_faction_banned
			hidden_effect = {
				every_owned_state = {
					ALO_get_final_popularities = yes
					add_to_variable = { ALO_state_zhanar_pop = ALO_state_alash_pop }
					set_variable = { ALO_state_alash_pop = 0 }
					set_variable = { ALO_state_alash_temp_pop = 0 }
					if = {
						limit = { 
							ROOT = { ALO_alash_right_independent = no }
						}
						add_to_variable = { ALO_state_zhanar_pop = ALO_state_national_pop }
						set_variable = { ALO_state_national_pop = 0 }
						set_variable = { ALO_state_national_temp_pop = 0 }
					}
					if = {
						limit = { 
							ROOT = { ALO_alash_left_independent = no }
						}
						add_to_variable = { ALO_state_zhanar_pop = ALO_state_azat_pop }
						set_variable = { ALO_state_azat_pop = 0 }
						set_variable = { ALO_state_azat_temp_pop = 0 }
					}
					ALO_set_new_popularities_after_election = yes
				}
				# Parliament #
				add_to_variable = { ALO_zhanar_deputies = ALO_alash_deputies }
				add_to_variable = { ALO_zhanar_deputies_support = ALO_alash_deputies }
				set_variable = { ALO_alash_deputies = 0 }
				set_variable = { ALO_alash_deputies_support = 0 }
				if = {
					limit = { 
						ROOT = { ALO_alash_right_independent = no }
					}
					add_to_variable = { ALO_zhanar_deputies = ALO_national_deputies }
					add_to_variable = { ALO_zhanar_deputies_support = ALO_national_deputies }
					set_variable = { ALO_national_deputies = 0 }
					set_variable = { ALO_national_deputies_support = 0 }
				}
				if = {
					limit = { 
						ROOT = { ALO_alash_left_independent = no }
					}
					add_to_variable = { ALO_zhanar_deputies = ALO_azat_deputies }
					add_to_variable = { ALO_zhanar_deputies_support = ALO_azat_deputies }
					set_variable = { ALO_azat_deputies = 0 }
					set_variable = { ALO_azat_deputies_support = 0 }
				}
				# Popularities #
				if = {
					limit = { 
						ROOT = { ALO_alash_right_independent = no }
					}					
					set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal }
					add_to_temp_variable = { ALO_new_soclib = party_popularity_100@market_liberal  }
					add_to_temp_variable = { ALO_new_soclib = party_popularity_100@social_conservative  }
					add_to_temp_variable = { ALO_new_soclib = party_popularity_100@authoritarian_democrat  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_soclib }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_soclib = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = ALO_new_soclib
						market_liberal = 0
						social_conservative = 0
						authoritarian_democrat = 0
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				else = {
					
					set_temp_variable = { ALO_new_soclib = party_popularity_100@social_liberal }
					add_to_temp_variable = { ALO_new_soclib = party_popularity_100@market_liberal  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_soclib }
					subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
					subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_soclib = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = ALO_new_soclib
						market_liberal = 0
						social_conservative = party_popularity_100@social_conservative
						authoritarian_democrat = party_popularity_100@authoritarian_democrat
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				if = {
					limit = { ALO_alash_right_independent = no }
					set_party_name = {
						ideology = social_conservative
						name = ALO_market_liberal_party
						long_name = ALO_alash_party_long
					}
					set_party_name = {
						ideology = authoritarian_democrat
						name = ALO_market_liberal_party
						long_name = ALO_alash_party_long
					}
				}
				set_party_name = {
					ideology = market_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
			}
		}
		else_if = {
			limit = { ALO_amonzholov_in_power = yes }
			set_country_flag = alash_faction_banned
			set_country_flag = azat_faction_banned
			set_country_flag = zhanar_faction_banned
			hidden_effect = {
				every_owned_state = {
					ALO_get_final_popularities = yes
					add_to_variable = { ALO_state_national_pop = ALO_state_alash_pop }
					set_variable = { ALO_state_alash_pop = 0 }
					set_variable = { ALO_state_alash_temp_pop = 0 }
					
					add_to_variable = { ALO_state_national_pop = ALO_state_zhanar_pop }
					set_variable = { ALO_state_zhanar_pop = 0 }
					set_variable = { ALO_state_zhanar_temp_pop = 0 }
					
					if = {
						limit = { 
							ROOT = { ALO_alash_left_independent = no }
						}
						add_to_variable = { ALO_state_national_pop = ALO_state_azat_pop }
						set_variable = { ALO_state_azat_pop = 0 }
						set_variable = { ALO_state_azat_temp_pop = 0 }
					}
					ALO_set_new_popularities_after_election = yes
				}
				# Parliament #
				add_to_variable = { ALO_national_deputies = ALO_alash_deputies }
				add_to_variable = { ALO_national_deputies_support = ALO_alash_deputies }
				set_variable = { ALO_alash_deputies = 0 }
				set_variable = { ALO_alash_deputies_support = 0 }
				
				add_to_variable = { ALO_national_deputies = ALO_zhanar_deputies }
				add_to_variable = { ALO_national_deputies_support = ALO_zhanar_deputies }
				set_variable = { ALO_zhanar_deputies = 0 }
				set_variable = { ALO_zhanar_deputies_support = 0 }
				
				if = {
					limit = { 
						ROOT = { ALO_alash_left_independent = no }
					}
					add_to_variable = { ALO_national_deputies = ALO_azat_deputies }
					add_to_variable = { ALO_national_deputies_support = ALO_azat_deputies }
					set_variable = { ALO_azat_deputies = 0 }
					set_variable = { ALO_azat_deputies_support = 0 }
				}
				# Popularities #
				if = {
					limit = { has_government = authoritarian_democrat }					
					set_temp_variable = { ALO_new_authdem = party_popularity_100@social_liberal }
					add_to_temp_variable = { ALO_new_authdem = party_popularity_100@market_liberal  }
					add_to_temp_variable = { ALO_new_authdem = party_popularity_100@social_conservative  }
					add_to_temp_variable = { ALO_new_authdem = party_popularity_100@authoritarian_democrat  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_authdem }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_authdem = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = 0
						market_liberal = 0
						social_conservative = 0
						authoritarian_democrat = ALO_new_authdem
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				else = {
					
					set_temp_variable = { ALO_new_soccon = party_popularity_100@social_liberal }
					add_to_temp_variable = { ALO_new_soccon = party_popularity_100@market_liberal  }
					add_to_temp_variable = { ALO_new_authdem = party_popularity_100@social_conservative  }
					add_to_temp_variable = { ALO_new_authdem = party_popularity_100@authoritarian_democrat  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_soccon }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_soccon = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = 0
						market_liberal = 0
						social_conservative = ALO_new_soccon
						authoritarian_democrat = 0
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				set_party_name = {
					ideology = social_conservative
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
				set_party_name = {
					ideology = authoritarian_democrat
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
				set_party_name = {
					ideology = market_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
			}
		}
		else = {
			set_country_flag = zhanar_faction_banned
			set_country_flag = azat_faction_banned
			set_country_flag = national_faction_banned
			hidden_effect = {
				every_owned_state = {
					ALO_get_final_popularities = yes
					add_to_variable = { ALO_state_alash_pop = ALO_state_zhanar_pop }
					set_variable = { ALO_state_zhanar_pop = 0 }
					set_variable = { ALO_state_zhanar_temp_pop = 0 }
					if = {
						limit = { 
							ROOT = { ALO_alash_right_independent = no }
						}
						add_to_variable = { ALO_state_alash_pop = ALO_state_national_pop }
						set_variable = { ALO_state_national_pop = 0 }
						set_variable = { ALO_state_national_temp_pop = 0 }
					}
					if = {
						limit = { 
							ROOT = { ALO_alash_left_independent = no }
						}
						add_to_variable = { ALO_state_alash_pop = ALO_state_azat_pop }
						set_variable = { ALO_state_azat_pop = 0 }
						set_variable = { ALO_state_azat_temp_pop = 0 }
					}
					ALO_set_new_popularities_after_election = yes
				}
				# Parliament #
				add_to_variable = { ALO_alash_deputies = ALO_zhanar_deputies }
				add_to_variable = { ALO_alash_deputies_support = ALO_zhanar_deputies }
				set_variable = { ALO_zhanar_deputies = 0 }
				set_variable = { ALO_zhanar_deputies_support = 0 }
				if = {
					limit = { 
						ROOT = { ALO_alash_right_independent = no }
					}
					add_to_variable = { ALO_alash_deputies = ALO_national_deputies }
					add_to_variable = { ALO_alash_deputies_support = ALO_national_deputies }
					set_variable = { ALO_national_deputies = 0 }
					set_variable = { ALO_national_deputies_support = 0 }
				}
				if = {
					limit = { 
						ROOT = { ALO_alash_left_independent = no }
					}
					add_to_variable = { ALO_alash_deputies = ALO_azat_deputies }
					add_to_variable = { ALO_alash_deputies_support = ALO_azat_deputies }
					set_variable = { ALO_azat_deputies = 0 }
					set_variable = { ALO_azat_deputies_support = 0 }
				}
				# Popularities #
				if = {
					limit = { 
						ROOT = { ALO_alash_right_independent = no }
					}					
					set_temp_variable = { ALO_new_marlib = party_popularity_100@market_liberal }
					add_to_temp_variable = { ALO_new_marlib = party_popularity_100@social_liberal  }
					add_to_temp_variable = { ALO_new_marlib = party_popularity_100@social_conservative  }
					add_to_temp_variable = { ALO_new_marlib = party_popularity_100@authoritarian_democrat  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_marlib }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_marlib = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = 0
						market_liberal = ALO_new_marlib
						social_conservative = 0
						authoritarian_democrat = 0
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				else = {
					
					set_temp_variable = { ALO_new_marlib = party_popularity_100@social_liberal }
					add_to_temp_variable = { ALO_new_marlib = party_popularity_100@market_liberal  }

					set_temp_variable = { sum = 100 }
					subtract_from_temp_variable = { sum = party_popularity_100@totalist }
					subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
					subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
					subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
					subtract_from_temp_variable = { sum = ALO_new_marlib }
					subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
					subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
					subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
					subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

					add_to_temp_variable = { ALO_new_marlib = sum } #avoid rounding errors

					set_popularities = {
						totalist = party_popularity_100@totalist
						syndicalist = party_popularity_100@syndicalist
						radical_socialist = party_popularity_100@radical_socialist
						social_democrat = party_popularity_100@social_democrat
						social_liberal = 0
						market_liberal = ALO_new_marlib
						social_conservative = party_popularity_100@social_conservative
						authoritarian_democrat = party_popularity_100@authoritarian_democrat
						paternal_autocrat = party_popularity_100@paternal_autocrat
						national_populist = party_popularity_100@national_populist
					}
				}
				if = {
					limit = { ALO_alash_right_independent = no }
					set_party_name = {
						ideology = social_conservative
						name = ALO_market_liberal_party
						long_name = ALO_alash_party_long
					}
					set_party_name = {
						ideology = authoritarian_democrat
						name = ALO_market_liberal_party
						long_name = ALO_alash_party_long
					}
				}
				set_party_name = {
					ideology = market_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = ALO_market_liberal_party
					long_name = ALO_alash_party_long
				}
			}
		}
	}	
}
ALO_change_national_pop_into_authdem = {
	custom_effect_tooltip = ALO_change_national_pop_into_authdem
	hidden_effect = {
		# Popularities #
		set_temp_variable = { ALO_new_authdem = party_popularity_100@authoritarian_democrat }
		set_temp_variable = { ALO_new_soccon = party_popularity_100@social_conservative }
		add_to_temp_variable = { ALO_new_authdem = ALO_new_soccon }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
		subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
		subtract_from_temp_variable = { sum = ALO_new_authdem }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_authdem = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = party_popularity_100@social_liberal
			market_liberal = party_popularity_100@market_liberal
			social_conservative = 0
			authoritarian_democrat = ALO_new_authdem
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
	}
}
ALO_turn_janar_into_authoritarian_party = {
	if = {
		limit = { 
			NOT = { has_country_flag = ALO_alash_party_secured }
		}
		set_party_name = {
			ideology = authoritarian_democrat
			name = ALO_social_liberal_party2
			long_name = ALO_social_liberal_party2_long
		}
		hidden_effect = {		
			set_party_name = {
				ideology = social_liberal
				name = ALO_socdem_party
				long_name = ALO_socdem_party_long
			}
			create_country_leader = {
				name = "Jakhansha Dosmukhamedov"
				picture = "gfx/leaders/ALO/Portrait_ALO_Zhakhansha_Dosmukhammedov.png"
				expire = "1.1.1"
				ideology = radical_liberalism_subtype
			}
		}
	}
	set_politics = {
		ruling_party = authoritarian_democrat
		elections_allowed = no
	}		
	create_country_leader = {
		name = "Mirjaqyp Dulatuly"
		desc = "POLITICS_MIRJAKIP_DULATULY_DESC"
		picture = "gfx/leaders/ALO/Portrait_ALO_Mirzhakip_Dulatov.png"
		expire = "1.1.1"
		ideology = kemalism_subtype
		traits = { ALO_voice_of_alash ALO_arghyn_balasy }
	}
	if = {
		limit = { has_country_flag = ALO_alash_party_secured }
		add_soclib_to_coalition = yes
		add_marlib_to_coalition = yes
		add_soccon_to_coalition = yes
	}
	remove_all_ministers = yes
	add_ideas = {
		ALO_Mirzhakip_Dulatov_hog_sli
		ALO_Ahmet_Beremzhanov_for_sli
		ALO_Khalel_Gabbasov_eco_sli
		ALO_Bazarbay_Mametov_sec_sli
	}
	hidden_effect = {
		set_temp_variable = { ALO_new_authdem = party_popularity_100@social_liberal }
		add_to_temp_variable = { ALO_new_authdem = party_popularity_100@authoritarian_democrat  }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = ALO_new_authdem }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_authdem = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = 0
			market_liberal = party_popularity_100@market_liberal
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = ALO_new_authdem
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
	}
}
ALO_turn_jas_azamat_into_syndicalist_party = {
	set_politics = {
		ruling_party = syndicalist
		elections_allowed = yes
	}		
	create_country_leader = {
		name = "Smagul Säduaqasov"
		desc = "POLITICS_SMAGUL_SADUAQASOV_DESC"
		picture = "gfx/leaders/ALO/Portrait_ALO_Smagul_Saduakasov.png"
		expire = "1.1.1"
		ideology = democratic_syndicalism_subtype 
	}
	add_socdem_to_coalition = yes
	hidden_effect = {
		set_temp_variable = { ALO_new_syndicalist = party_popularity_100@syndicalist }
		set_temp_variable = { ALO_new_socdem = party_popularity@social_democrat }
		divide_temp_variable = { ALO_new_socdem = 2 }
		add_to_temp_variable = { ALO_new_syndicalist = ALO_new_syndicalist }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = ALO_new_syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = ALO_new_socdem }
		subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
		subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { ALO_new_syndicalist = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = ALO_new_syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = ALO_new_socdem
			social_liberal = party_popularity_100@social_liberal
			market_liberal = party_popularity_100@market_liberal
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = ALO_new_authdem
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
	}
}
ALO_jas_azamat_leave_coalition_azat = {
	if = {
		limit = { ALO_jas_azamat_in_power = yes }
		if = {
			limit = { has_country_flag = ALO_jas_azamat_ally_azat }
			add_to_variable = { ALO_jas_azamat_azat_coalition = 1 }
			hidden_effect = {
				set_temp_variable = { ALO_loyalty_change = 1 }
				ALO_change_azat_loyalty = yes
			}
			if = {
				limit = { check_variable = { ALO_jas_azamat_azat_coalition > 2 } }
				country_event = alash.1272
			}
		}
	}
}
ALO_jas_azamat_leave_coalition_zhanar = {
	if = {
		limit = { ALO_jas_azamat_in_power = yes }
		if = {
			limit = { has_country_flag = ALO_jas_azamat_ally_janar }
			add_to_variable = { ALO_jas_azamat_janar_coalition = 1 }
			hidden_effect = {
				set_temp_variable = { ALO_loyalty_change = 1 }
				ALO_change_zhanar_loyalty = yes
			}
			if = {
				limit = { check_variable = { ALO_jas_azamat_janar_coalition > 2 } }
				country_event = alash.1271
			}
		}
	}
}
ALO_jas_azamat_leave_coalition_alash = {
	if = {
		limit = { ALO_jas_azamat_in_power = yes }
		if = {
			limit = { has_country_flag = ALO_jas_azamat_ally_alash }
			add_to_variable = { ALO_jas_azamat_alash_coalition = 1 }
			hidden_effect = {
				set_temp_variable = { ALO_loyalty_change = 1 }
				ALO_change_zhanar_loyalty = yes
			}
			if = {
				limit = { check_variable = { ALO_jas_azamat_alash_coalition > 2 } }
				country_event = alash.1270
			}
		}
	}
}
ALO_setup_socialist_revolution = {
	hidden_effect = {
		start_civil_war = {
			### basics ###
			ideology = totalist
			size = 0
			navy_ratio = 0

			### states ###
			capital = 583
			states = { 583 }			

			### characters ###
			keep_all_characters = yes

			### effects ###
			set_temp_variable = { ALO_civil_war_target = THIS }
		}

		#move all Bolsheviks to revolter
		every_unit_leader = {
			limit = { 
				OR = {
					has_id = 68685
					has_id = 68684
					has_id = 68681
				}
			}
			set_nationality = var:ALO_civil_war_target
		}		
		
		#setup revolter
		var:ALO_civil_war_target = {
			#set cosmetic tag
			save_global_event_target_as = ALO_soviet_republic
			set_cosmetic_tag = KAZ_civil_war
			
			#set leaders and ideology
			set_politics = {
				ruling_party = totalist
				elections_allowed = no
			}
			set_popularities = {
				totalist = 3
				radical_socialist = 11
				syndicalist = 27
				social_democrat = 31
				social_liberal = 10
				market_liberal = 0
				social_conservative = 0
				authoritarian_democrat = 0
				paternal_autocrat = 5
				national_populist = 13		
			}			
			load_focus_tree = { tree = alash_focus keep_completed = yes }
			
			set_country_flag = ALO_alash_militia_apolitical
			set_country_flag = cannot_have_extensive_conscription
			country_lock_all_division_template = yes
			add_ideas = {
				partial_economic_mobilisation
				limited_conscription
				TRK_russian_railways
				ALO_legacy_of_central_asian_revolt
				ALO_land_troubles
				ALO_russian_pressure_1
				ALO_wounds_of_alash
				ALO_inexperienced_officials_4
				ALO_civil_war_idea
				ALO_medieval_army
				ALO_Alibi_Jangildin_hog_tot
				ALO_Oraz_Januzaquly_for_tot
				ALO_Tel_Zhamanmurynov_eco_tot
				ALO_Muqash_Orynbayev_sec_tot
			}
			set_rule = { can_generate_female_aces = yes }
			set_rule = { can_generate_female_unit_leaders = yes }
			set_politics = { 
				ruling_party = totalist
				elections_allowed = no
			}				
			create_country_leader = {
				name = "Älibi Jangeldin"
				desc = "POLITICS_ALIBI_JANGILDIN_DESC"
				picture = "gfx/leaders/ALO/Portrait_ALO_Alibi_Dzhangildin.png"
				expire = "1.1.1"
				ideology = authcom_subtype
				traits = { ALO_first_kazakh_bolshevik }
			}
			create_country_leader = {
				name = "Müqan Äitpenov"
				desc = "POLITICS_MUQAN_AITPENOV_DESC"
				picture = "gfx/leaders/ALO/Portrait_ALO_Mukan_Aytpenov.png"
				expire = "1.1.1"
				ideology = agrarian_syndicalism_subtype
			}
			create_country_leader = {
				name = "Saken Seifullin"
				desc = "POLITICS_SAKEN_SEIFULLIN_DESC"
				picture = "gfx/leaders/ALO/Portrait_ALO_Saken_Seifullin.png"
				expire = "1.1.1"
				ideology = radsoc_national_communism_subtype
				traits = { ALO_idealistic_poet }
			}
			set_party_name = {
				ideology = syndicalist
				name = ALO_radical_socialist_party
				long_name = ALO_radical_socialist_party_long
			}
			set_party_name = {
				ideology = radical_socialist
				name = ALO_radical_socialist_party2
				long_name = ALO_radical_socialist_party2_long
			}
			add_popularity = {
				ideology = totalist
				popularity = 0.25
			}	
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.10
			}
			add_radsoc_to_coalition = yes
			
			division_template = {
				name = "Qyzyl Atty Ásker"
				division_names_group = ALO_CAV_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 0 y = 3 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
				}
			}
			division_template = {
				name = "Qyzyl Gvardia"
				division_names_group = ALO_MIL_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 0 y = 2 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}	

			#spawn units
			583 = {				
				create_unit = {
					division = "division_template = \"Qyzyl Gvardia\" start_experience_factor = 0.3"
					owner = var:ALO_civil_war_target
				}
				create_unit = {
					division = "division_template = \"Qyzyl Gvardia\" start_experience_factor = 0.1"
					owner = var:ALO_civil_war_target
					count = 2
				}
				create_unit = {
					division = "division_template = \"Qyzyl Atty Ásker\" start_experience_factor = 0.2"
					owner = var:ALO_civil_war_target
					count = 2
				}
				create_unit = {
					division = "division_template = \"Qyzyl Atty Ásker\" start_experience_factor = 0.1"
					owner = var:ALO_civil_war_target
					count = 3
				}
			}	
			delete_unit_template_and_units = {
				division_template = "Militsiyasy"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Atty ásker Diviziasy"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Atty ásker Militsiyasy"
				disband = yes #will refund equipment and manpower
			}

			#remove redundant wargoals
			if = {
				limit = { has_wargoal_against = PREV }
				remove_wargoal = { target = PREV type = all }
			}
		}
		if = {
			limit = { has_wargoal_against = var:ALO_civil_war_target }
			remove_wargoal = { target = var:ALO_civil_war_target type = all }
		}
		
		set_political_party = { ideology = totalist popularity = 0 }	
		set_political_party = { ideology = syndicalist popularity = 0 }			
		
		#if at war, give wargoal to enemies
		every_other_country = {
			limit = {
				OR = {
					has_wargoal_against = PREV
					has_offensive_war_with = PREV
				}
				can_declare_war_on = var:ALO_civil_war_target
			}
			create_wargoal = {
				target = var:ALO_civil_war_target
				type = annex_everything
			}
		}
		every_state = {
			limit = { state = 583 }
			if = {
				limit = {
					ROOT = { divisions_in_state = { state = PREV size > 0 } }
				}
				teleport_armies = {
					limit = { tag = ROOT }
					to_state_array = owned_controlled_states
				}
			}
		}		
		XXA = {						
			random_unit_leader = {
				limit = { has_id = 68686 }
				set_nationality = var:ALO_civil_war_target
			}						
			random_unit_leader = {
				limit = { has_id = 68687 }
				set_nationality = var:ALO_civil_war_target
			}						
			random_unit_leader = {
				limit = { has_id = 68688 }
				set_nationality = var:ALO_civil_war_target
			}
		}
	}
}
ALO_setup_autonomy_by_event = {
	RUS = { end_puppet = ROOT }
	add_ideas = ALO_russian_pressure_1
	hidden_effect = {
		activate_targeted_decision = { target = RUS decision = ALO_declare_independence }
		activate_targeted_decision = { target = ROOT decision = ALO_remove_russian_renames }
	}
}
ALO_setup_autonomy_RVA_by_event = {
	if = {
		limit = { has_idea = ALO_russian_pressure_6 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6
			add_idea = ALO_russian_pressure_6_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5
			add_idea = ALO_russian_pressure_5_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4
			add_idea = ALO_russian_pressure_4_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3
			add_idea = ALO_russian_pressure_3_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2
			add_idea = ALO_russian_pressure_2_RVA
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1 }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1
			add_idea = ALO_russian_pressure_1_RVA
		}
	}
	hidden_effect = {
		remove_targeted_decision = { target = RUS decision = ALO_declare_independence }
		activate_targeted_decision = { target = RVA decision = ALO_declare_independence }
	}
}
ALO_setup_autonomy_RUS_by_event = {
	if = {
		limit = { has_idea = ALO_russian_pressure_6_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_6_RVA
			add_idea = ALO_russian_pressure_5
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_5_RVA
			add_idea = ALO_russian_pressure_5
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_4_RVA
			add_idea = ALO_russian_pressure_4
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_3_RVA
			add_idea = ALO_russian_pressure_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_2_RVA
			add_idea = ALO_russian_pressure_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_1_RVA }
		swap_ideas = {
			remove_idea = ALO_russian_pressure_1_RVA
			add_idea = ALO_russian_pressure_1
		}
	}
	hidden_effect = {
		remove_targeted_decision = { target = RVA decision = ALO_declare_independence }
		activate_targeted_decision = { target = RUS decision = ALO_declare_independence }
	}
}
ALO_remove_russian_influence = {
	ALO_remove_russian_influence_without_event = yes
	if = {
		limit = { ALO_has_russian_influence_RVA = yes }
		set_temp_variable = { target = RVA }
		clear_all_relations_with_TARGET = yes
		RVA = { country_event = alash.401 }
	}
	else = {
		set_temp_variable = { target = RUS }
		clear_all_relations_with_TARGET = yes
		RUS = { country_event = alash.401 }
	}	
}
ALO_remove_russian_influence_without_event = {
	set_country_flag = ALO_declared_independence
	set_country_flag = central_asia_restored_control_of_railways
	if = {
		limit = { has_idea = ALO_russian_pressure_6 }
		remove_ideas = ALO_russian_pressure_6
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5 }
		remove_ideas = ALO_russian_pressure_5
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4 }
		remove_ideas = ALO_russian_pressure_4
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3 }
		remove_ideas = ALO_russian_pressure_3
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2 }
		remove_ideas = ALO_russian_pressure_1
	}
	if = {
		limit = { has_idea = ALO_russian_pressure_6_RVA }
		remove_ideas = ALO_russian_pressure_6_RVA
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_5_RVA }
		remove_ideas = ALO_russian_pressure_5_RVA
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_4_RVA }
		remove_ideas = ALO_russian_pressure_4_RVA
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_3_RVA }
		remove_ideas = ALO_russian_pressure_3_RVA
	}
	else_if = {
		limit = { has_idea = ALO_russian_pressure_2_RVA }
		remove_ideas = ALO_russian_pressure_1_RVA
	}
	if = {
		limit = { has_cosmetic_tag = ALO_kazakhstan_autonomy }
		set_cosmetic_tag = ALO_kazakhstan
	}
	else_if = {
		limit = { has_cosmetic_tag = ALO_autonomy }
		drop_cosmetic_tag = yes
	}
	if = {
		limit = { 
			NOT = { has_country_flag = ALO_kazakhization }
		}
		set_country_flag = ALO_kazakhization
		hidden_effect = {
			every_controlled_state = { rename_state_effect = yes }
		}
	}
	if = {
		limit = { is_in_tech_sharing_group = russian_research }
		remove_from_tech_sharing_group = russian_research
	}
	else = {
		add_political_power = 25
	}
	hidden_effect = {
		country_event = {
			id = alash.485
			days = 150
			random_days = 100
		}
	}
}
ALO_change_cossack_strength = {
	if = {
		limit = { 
			ALO_is_cossack_host = yes 
			is_owned_by = ROOT
		}
		if = {
			limit = { ALO_is_semirechye_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_semirechye_cossack_strength
				}
			}
		}
		else_if = {
			limit = { ALO_is_ural_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_ural_cossack_strength
				}
			}
		}
		else_if = {
			limit = { ALO_is_orenburg_cossack_host = yes }
			# tooltip
			effect_tooltip = {
				add_to_variable = {
					ALO_cossack_strength = cossack_change
					tooltip = ALO_change_orenburg_cossack_strength
				}
			}
		}

		# lower limit = legitimacy * -1
		set_temp_variable = { ALO_lower_limit = ALO_cossack_strength }
		multiply_temp_variable = { ALO_lower_limit = -1 }

		# upper limit = 1 - legitimacy
		set_temp_variable = { ALO_upper_limit = 1 }
		subtract_from_temp_variable = { ALO_upper_limit = ALO_cossack_strength }

		# avoid values outside the allowed range
		clamp_temp_variable = {
			var = cossack_change
			min = ALO_lower_limit
			max = ALO_upper_limit
		}

		# add the variable
		add_to_variable = { ALO_cossack_strength = cossack_change }
		
		if = {
			limit = { ALO_is_ural_cossack_host = yes }
			set_variable = { ROOT.ALO_cossack_strength_display_URL = ALO_cossack_strength }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
			}
		}
		else_if = {
			limit = { ALO_is_orenburg_cossack_host = yes }
			set_variable = { ROOT.ALO_cossack_strength_display_ORE = ALO_cossack_strength }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
			}
		}
		else_if = {
			limit = { ALO_is_semirechye_cossack_host = yes }
			set_variable = { ROOT.ALO_cossack_strength_display_SMR = ALO_cossack_strength }
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_cossack_strength > 0.64 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.44 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.34 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				else_if = {
					limit = { check_variable = { ALO_cossack_strength > 0.24 } }
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				else = {
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
					}
					if = {
						limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
						remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
					}
					add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
			}
		}
		ALO_update_federalism_cossacks = yes
	}
}
ALO_update_federalism_cossacks = {
	hidden_effect = {
		1208 = { set_variable = { ROOT.alo_var_autonomy_ore = ALO_cossack_strength } }
		406 = { set_variable = { ROOT.alo_var_autonomy_url = ALO_cossack_strength } }
		589 = { set_variable = { ROOT.alo_var_autonomy_smr = ALO_cossack_strength } }
		ROOT = {
			multiply_variable = { alo_var_autonomy_ore = 10 }
			multiply_variable = { alo_var_autonomy_url = 10 }
			multiply_variable = { alo_var_autonomy_smr = 10 }
			round_variable = alo_var_autonomy_ore
			round_variable = alo_var_autonomy_url
			round_variable = alo_var_autonomy_smr
			ALO_calculate_federalism = yes
		}
	}	
}
ALO_install_cossack_host = {
	if = {
		limit = { state = 406 }
		hidden_effect = {
			if = {
				limit = { check_variable = { ALO_cossack_strength > 0.64 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.44 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.34 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.24 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
			}
			else = {
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
				}
				add_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
			}
		}
	}
	else_if = {
		limit = { state = 1208 }
		hidden_effect = {
			if = {
				limit = { check_variable = { ALO_cossack_strength > 0.64 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.44 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.34 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.24 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
			}
			else = {
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
				}
				add_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
			}
		}
	}
	else_if = {
		limit = { state = 589 }
		hidden_effect = {
			if = {
				limit = { check_variable = { ALO_cossack_strength > 0.64 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.44 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.34 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
			}
			else_if = {
				limit = { check_variable = { ALO_cossack_strength > 0.24 } }
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
				}
				add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
			}
			else = {
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
				}
				if = {
					limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
					remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
				}
				add_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
			}
		}
	}
}
ALO_remove_cossack_host = {
	if = {
		limit = { ALO_is_ural_cossack_host = yes }
		remove_targeted_decision = { target = URL decision = ALO_disband_host }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_uralsk_cossacks_1 }
		}
	}
	else_if = {
		limit = { ALO_is_orenburg_cossack_host = yes }
		remove_targeted_decision = { target = ORE decision = ALO_disband_host }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_orenburg_cossacks_1 }
		}
	}
	else_if = {
		limit = { ALO_is_semirechye_cossack_host = yes }
		remove_targeted_decision = { target = SMR decision = ALO_disband_host }
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_2 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_3 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_4 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_5 }
		}
		if = {
			limit = { has_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 } }
			remove_dynamic_modifier = { modifier = ALO_semirechye_cossacks_1 }
		}
		hidden_effect = {
			ROOT = {
				country_event = {
					id = alash.601
					days = 30
				}
			}
		}
	}
}
ALO_check_for_cossack_uprising_ORE = {
	if = {
		limit = { check_variable = { ALO_cossack_strength > 0.49 } }
		ROOT = {
			if = {
				limit = { 
					NOT = { has_country_flag = ALO_dutov_arrested }
				}
				if = {
					limit = {
						NOT = { has_country_flag = ALO_supported_tolstov }
					}
					country_event = alash.592
				}
				else = {				
					country_event = alash.584
				}
			}
		}
	}
	else_if = {
		limit = { check_variable = { ALO_cossack_strength > 0.29 } }
		ROOT = {
			if = {
				limit = { 
					NOT = { has_country_flag = ALO_dutov_arrested }
				}
				if = {
					limit = {
						NOT = { has_country_flag = ALO_supported_tolstov }
					}
					activate_mission = ALO_deal_with_orenburg_uralsk_unrest
				}
				else = {				
					activate_mission = ALO_deal_with_orenburg_unrest
				}
			}
		}
	}
}
ALO_check_for_cossack_uprising_URL = {
	if = {
		limit = { check_variable = { ALO_cossack_strength > 0.49 } }
		ROOT = {
			if = {
				limit = { 
					NOT = { has_country_flag = ALO_supported_tolstov }
				}
				if = {
					limit = { NOT = { has_country_flag = ALO_dutov_arrested } }
					country_event = alash.592
				}
			}
			else = {
				country_event = alash.583
			}
		}
	}
	else_if = {
		limit = { check_variable = { ALO_cossack_strength > 0.29 } }
		ROOT = {
			if = {
				limit = { 
					NOT = { has_country_flag = ALO_supported_tolstov }
				}
				if = {
					limit = { NOT = { has_country_flag = ALO_dutov_arrested } }
					activate_mission = ALO_deal_with_orenburg_uralsk_unrest
				}
			}
			else = {
				activate_mission = ALO_deal_with_uralsk_unrest
			}
		}
	}
}
ALO_recheck_nomadism_status = {
	if = {
		limit = { 
			OR = {
				check_variable = { ALO_nomadism_var > 12 }
				check_variable = { ALO_nomadism_var = 12 }
			}
			NOT = { has_idea = ALO_land_troubles }
		}
		country_event = alash.759
	}
}
ALO_sedentary_effect = {
	random_owned_controlled_state = {
		limit = { state = 590 }
		add_victory_points = { province = 1375 value = 4 }
		set_temp_variable_to_random = { var = manpower min = 3000 max = 5000 }
		add_manpower = manpower
		increase_state_category_by_two_levels = yes
	}
	random_owned_controlled_state = {
		limit = { state = 810 }
		add_victory_points = { province = 10584 value = 5 }
		set_temp_variable_to_random = { var = manpower min = 7500 max = 9000 }
		add_manpower = manpower
		increase_state_category_by_two_levels = yes
	}
	random_owned_controlled_state = {
		limit = { state = 810 }
		add_victory_points = { province = 1864 value = 2 }
		set_temp_variable_to_random = { var = manpower min = 5000 max = 7500 }
		add_manpower = manpower
		increase_state_category_by_two_levels = yes
	}
	random_owned_controlled_state = {
		limit = { state = 1203 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7657 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7657 value = 2 }
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7657 value = 1 }
		}
	}
	random_owned_controlled_state = {
		limit = { state = 1203 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7243 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7243 value = 2 }
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7243 value = 1 }
		}
	}
	random_owned_controlled_state = {
		limit = { state = 402 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 10164 value = 3 }
			add_victory_points = { province = 7370 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 10164 value = 2 }
			add_victory_points = { province = 7370 value = 2 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 10164 value = 1 }
			add_victory_points = { province = 7370 value = 1 }
			increase_state_category_by_one_level = yes
		}
	}
	random_owned_controlled_state = {
		limit = { state = 406 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 464 value = 2 }
			add_victory_points = { province = 11537 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 464 value = 1 }
			add_victory_points = { province = 11537 value = 2 }
			add_victory_points = { province = 9462 value = 1 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 11537 value = 1 }
		}
	}
	random_owned_controlled_state = {
		limit = { state = 1212 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 9462 value = 2 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 9462 value = 1 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 9462 value = 1 }
		}
	}
	random_owned_controlled_state = {
		limit = { state = 583 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 10284 value = 2 }
			add_victory_points = { province = 7874 value = 2 }
			add_victory_points = { province = 1418 value = 2 }	
			increase_state_category_by_one_level = yes			
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 10284 value = 1 }
			add_victory_points = { province = 7874 value = 1 }
			add_victory_points = { province = 1418 value = 1 }	
			increase_state_category_by_one_level = yes			
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 1418 value = 1 }				
		}
	}
	random_owned_controlled_state = {
		limit = { state = 587 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 11701 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 11701 value = 2 }
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 11701 value = 1 }
		}
	}
	random_owned_controlled_state = {
		limit = { state = 588 }
		if = {
			limit = { 
				count_triggers = {
					amount = 3
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7708 value = 3 }
			increase_state_category_by_one_level = yes
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 2
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7708 value = 2 }
		}
		else_if = {
			limit = {			
				count_triggers = {
					amount = 1
					has_state_flag = ALO_has_developed_school
					has_state_flag = ALO_has_developed_roads
					has_state_flag = ALO_has_developed_hospital
				}
			}
			add_victory_points = { province = 7708 value = 1 }
		}
	}	
}
ALO_setup_presidential_race = {	
	
	set_variable = { ALO_ush_zhus_presidential_votes = 0 }
	set_variable = { ALO_zhas_azamat_presidential_votes = 0 }
	set_variable = { ALO_azat_presidential_votes = 0 }
	set_variable = { ALO_zhanar_presidential_votes = 0 }
	set_variable = { ALO_alash_presidential_votes = 0 }
	set_variable = { ALO_national_presidential_votes = 0 }
	
	set_variable = { ALO_total_presidential_votes = 0 }

	every_owned_state = {
		ALO_get_final_popularities = yes

		set_variable = { ALO_presidential_vote_count_state = state_population_k }
		multiply_variable = { ALO_presidential_vote_count_state = ALO_state_general_turnout }

		set_variable = { ALO_ush_zhus_state_presidential_votes = ALO_state_ush_zhus_final_pop }
		set_variable = { ALO_zhas_azamat_state_presidential_votes = ALO_state_zhas_azamat_final_pop }
		set_variable = { ALO_azat_state_presidential_votes = ALO_state_azat_final_pop }
		set_variable = { ALO_zhanar_state_presidential_votes = ALO_state_zhanar_final_pop }
		set_variable = { ALO_alash_state_presidential_votes = ALO_state_alash_final_pop }
		set_variable = { ALO_national_state_presidential_votes = ALO_state_national_final_pop }
		
		multiply_variable = { ALO_ush_zhus_state_presidential_votes = ALO_presidential_vote_count_state }
		multiply_variable = { ALO_zhas_azamat_state_presidential_votes = ALO_presidential_vote_count_state }
		multiply_variable = { ALO_azat_state_presidential_votes = ALO_presidential_vote_count_state }
		multiply_variable = { ALO_zhanar_state_presidential_votes = ALO_presidential_vote_count_state }
		multiply_variable = { ALO_alash_state_presidential_votes = ALO_presidential_vote_count_state }
		multiply_variable = { ALO_national_state_presidential_votes = ALO_presidential_vote_count_state }
		
		divide_variable = { ALO_ush_zhus_state_presidential_votes = 50 }
		divide_variable = { ALO_zhas_azamat_state_presidential_votes = 50 }
		divide_variable = { ALO_azat_state_presidential_votes = 50 }
		divide_variable = { ALO_zhanar_state_presidential_votes = 50 }
		divide_variable = { ALO_alash_state_presidential_votes = 50 }
		divide_variable = { ALO_national_state_presidential_votes = 50 }
		
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_ush_zhus_state_presidential_votes < 0 } 
					ROOT = { has_country_flag = ush_zhus_banned }
				}
			}
			set_variable = { ALO_ush_zhus_state_presidential_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_zhas_azamat_state_presidential_votes < 0 } 
					ROOT = { has_country_flag = zhas_azamat_banned }
				}
			}
			set_variable = { ALO_zhas_azamat_state_presidential_votes = 0 }
		}
		if = {
			limit = { check_variable = { ALO_azat_state_presidential_votes < 0 } }
			set_variable = { ALO_azat_state_presidential_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_zhanar_state_presidential_votes < 0 } 
					ROOT = { has_country_flag = zhanar_faction_banned }
				}
			}
			set_variable = { ALO_zhanar_state_presidential_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_alash_state_presidential_votes < 0 } 
					ROOT = { has_country_flag = alash_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_presidential_votes = 0 }
		}
		if = {
			limit = { 
				OR = {
					check_variable = { ALO_national_state_presidential_votes < 0 } 
					ROOT = { has_country_flag = national_faction_banned }
				}
			}
			set_variable = { ALO_alash_state_presidential_votes = 0 }
		}

		set_variable = { ALO_total_state_presidential_votes = ALO_ush_zhus_state_presidential_votes }
		add_to_variable = { ALO_total_state_presidential_votes = ALO_zhas_azamat_state_presidential_votes }
		add_to_variable = { ALO_total_state_presidential_votes = ALO_azat_state_presidential_votes }
		add_to_variable = { ALO_total_state_presidential_votes = ALO_zhanar_state_presidential_votes }
		add_to_variable = { ALO_total_state_presidential_votes = ALO_alash_state_presidential_votes }
		add_to_variable = { ALO_total_state_presidential_votes = ALO_national_state_presidential_votes }
		
		add_to_variable = { PREV.ALO_ush_zhus_presidential_votes = ALO_ush_zhus_state_presidential_votes }
		add_to_variable = { PREV.ALO_zhas_azamat_presidential_votes = ALO_zhas_azamat_state_presidential_votes }
		add_to_variable = { PREV.ALO_azat_presidential_votes = ALO_azat_state_presidential_votes }
		add_to_variable = { PREV.ALO_zhanar_presidential_votes = ALO_zhanar_state_presidential_votes }
		add_to_variable = { PREV.ALO_alash_presidential_votes = ALO_alash_state_presidential_votes }
		add_to_variable = { PREV.ALO_national_presidential_votes = ALO_national_state_presidential_votes }
	}
	round_variable = ALO_ush_zhus_presidential_votes
	round_variable = ALO_zhas_azamat_presidential_votes
	round_variable = ALO_azat_presidential_votes
	round_variable = ALO_zhanar_presidential_votes
	round_variable = ALO_alash_presidential_votes
	round_variable = ALO_national_presidential_votes
	
	add_to_variable = { ALO_total_presidential_votes = ALO_ush_zhus_presidential_votes }
	add_to_variable = { ALO_total_presidential_votes = ALO_zhas_azamat_presidential_votes }
	add_to_variable = { ALO_total_presidential_votes = ALO_azat_presidential_votes }
	add_to_variable = { ALO_total_presidential_votes = ALO_zhanar_presidential_votes }
	add_to_variable = { ALO_total_presidential_votes = ALO_alash_presidential_votes }
	add_to_variable = { ALO_total_presidential_votes = ALO_national_presidential_votes }
	
	set_variable = { ALO_ush_zhus_percentage_presidential_vote = ALO_ush_zhus_presidential_votes }
	set_variable = { ALO_zhas_azamat_percentage_presidential_vote = ALO_zhas_azamat_presidential_votes }
	set_variable = { ALO_azat_percentage_presidential_vote = ALO_azat_presidential_votes }
	set_variable = { ALO_zhanar_percentage_presidential_vote = ALO_zhanar_presidential_votes }
	set_variable = { ALO_alash_percentage_presidential_vote = ALO_alash_presidential_votes }
	set_variable = { ALO_national_percentage_presidential_vote = ALO_national_presidential_votes }
	
	divide_variable = { ALO_ush_zhus_percentage_presidential_vote = ALO_total_presidential_votes }
	divide_variable = { ALO_zhas_azamat_percentage_presidential_vote = ALO_total_presidential_votes }
	divide_variable = { ALO_azat_percentage_presidential_vote = ALO_total_presidential_votes }
	divide_variable = { ALO_zhanar_percentage_presidential_vote = ALO_total_presidential_votes }
	divide_variable = { ALO_alash_percentage_presidential_vote = ALO_total_presidential_votes }
	divide_variable = { ALO_national_percentage_presidential_vote = ALO_total_presidential_votes }

	if = {
		limit = { 
			has_country_flag = ALO_1936_Dosmukhamedov_Socdem
		}
		add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = ALO_azat_percentage_presidential_vote }
		set_variable = { ALO_azat_percentage_presidential_vote = 0 }
	}
	else = {
		add_to_variable = { ALO_zhanar_percentage_presidential_vote = ALO_azat_percentage_presidential_vote }
		set_variable = { ALO_azat_percentage_presidential_vote = 0 }
	}
	if = {
		limit = { has_country_flag = ALO_alash_party_secured }
		add_to_variable = { ALO_zhanar_percentage_presidential_vote = ALO_alash_percentage_presidential_vote }
		add_to_variable = { ALO_zhanar_percentage_presidential_vote = ALO_national_percentage_presidential_vote }
		set_variable = { ALO_alash_percentage_presidential_vote = 0 }
		set_variable = { ALO_national_percentage_presidential_vote = 0 }
	}
	else_if = {
		limit = { 
			has_any_power_balance = no 
			NOT = { has_country_flag = ALO_alash_party_ended }
		}
		add_to_variable = { ALO_zhanar_percentage_presidential_vote = ALO_alash_percentage_presidential_vote }
		set_variable = { ALO_alash_percentage_presidential_vote = 0 }
	}
}
ALO_presidential_race_effect = {
	custom_effect_tooltip = ALO_presidential_race_effect_tt
	hidden_effect = {
		if = {
			limit = { has_country_flag = ALO_president_ush_jus }
			random_list = {
				40 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
				}
				30 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
				}
				15 = {
					modifier = {
						factor = 0
						has_country_flag = alash_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
				}
				15 = {
					modifier = {
						factor = 0
						has_country_flag = national_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_national_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_national_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
				}
			}		
		}
		else_if = {
			limit = { has_country_flag = ALO_president_jas_azamat }
			random_list = {
				30 = {
					modifier = {
						factor = 0
						has_country_flag = ush_zhus_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				35 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				20 = {
					modifier = {
						factor = 0
						has_country_flag = alash_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				15 = {
					modifier = {
						factor = 0
						has_country_flag = national_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_national_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_national_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
			}		
		}
		else_if = {
			limit = { has_country_flag = ALO_president_janar }
			random_list = {
				20 = {
					modifier = {
						factor = 0
						has_country_flag = ush_zhus_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				40 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
				}
				25 = {
					modifier = {
						factor = 0
						has_country_flag = alash_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
				}
				15 = {
					modifier = {
						factor = 0
						has_country_flag = national_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_national_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_national_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
				}
			}		
		}
		else_if = {
			limit = { has_country_flag = ALO_president_alash }
			random_list = {
				20 = {
					modifier = {
						factor = 0
						has_country_flag = ush_zhus_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				25 = {
					modifier = {
						factor = 0
						has_country_flag = zhas_azamat_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
				}
				40 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
				}
				15 = {
					modifier = {
						factor = 0
						has_country_flag = national_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_national_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_national_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
				}
			}		
		}
		else_if = {
			limit = { has_country_flag = ALO_president_halyq }
			random_list = {
				15 = {
					modifier = {
						factor = 0
						has_country_flag = ush_zhus_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_ush_zhus_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_ush_zhus_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
				}
				25 = {
					modifier = {
						factor = 0
						has_country_flag = zhas_azamat_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhas_azamat_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhas_azamat_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
				}
				40 = {
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_zhanar_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_zhanar_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
				}
				20 = {
					modifier = {
						factor = 0
						has_country_flag = alash_faction_banned
					}
					set_temp_variable_to_random = { 
						var = vote_change_temp
						min = 0
						max = 0.1
					}
					add_to_variable = { ALO_alash_percentage_presidential_vote = vote_change_temp }
					divide_temp_variable = { vote_change_temp = -1 }
					add_to_variable = { ALO_national_percentage_presidential_vote = vote_change_temp }
					clamp_variable = { var = ALO_alash_percentage_presidential_vote min = 0 max = 1 }
					clamp_variable = { var = ALO_national_percentage_presidential_vote min = 0 max = 1 }
				}
			}		
		}
	}
}
ALO_calculate_federalism = {
	clamp_variable = { var = alo_var_autonomy_tor min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_aqm min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_sem min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_jet min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_syr min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_ore min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_url min = 0 max = 10 }
	clamp_variable = { var = alo_var_autonomy_smr min = 0 max = 10 }

	set_temp_variable = { divider = 6 }
	set_variable = { alo_var_autonomy = alo_var_autonomy_oyi }
	add_to_variable = { alo_var_autonomy = alo_var_autonomy_tor }
	add_to_variable = { alo_var_autonomy = alo_var_autonomy_aqm }
	add_to_variable = { alo_var_autonomy = alo_var_autonomy_sem }
	add_to_variable = { alo_var_autonomy = alo_var_autonomy_jet }
	add_to_variable = { alo_var_autonomy = alo_var_autonomy_syr }
	if = {
		limit = { 1208 = { ALO_is_orenburg_cossack_host = yes } }
		add_to_variable = { alo_var_autonomy = alo_var_autonomy_ore }
		add_to_temp_variable = { divider = 1 }
	}
	if = {
		limit = { 406 = { ALO_is_ural_cossack_host = yes } }
		add_to_variable = { alo_var_autonomy = alo_var_autonomy_url }
		add_to_temp_variable = { divider = 1 }
	}
	if = {
		limit = { 589 = { ALO_is_semirechye_cossack_host = yes } }
		add_to_variable = { alo_var_autonomy = alo_var_autonomy_smr }
		add_to_temp_variable = { divider = 1 }
	}
		
	divide_variable = { alo_var_autonomy = divider }
	round_variable = alo_var_autonomy
	clamp_variable = { var = alo_var_autonomy min = 0 max = 10 }
	
	set_variable = { ALO_tribal_disunity = alo_var_autonomy_oyi }
	add_to_variable = { ALO_tribal_disunity = alo_var_autonomy_tor }
	add_to_variable = { ALO_tribal_disunity = alo_var_autonomy_aqm }
	add_to_variable = { ALO_tribal_disunity = alo_var_autonomy_sem }
	add_to_variable = { ALO_tribal_disunity = alo_var_autonomy_jet }
	add_to_variable = { ALO_tribal_disunity = alo_var_autonomy_syr }
	divide_variable = { ALO_tribal_disunity = 60 }
	
}
ALO_activate_combat_tribalism_decisions = {
	if = {
		limit = { has_completed_focus = ALO_Fight_Political_Centralism }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 1212 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 402 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 590 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 810 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 589 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region_hard target = 1203 }
	}
	else = {
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 1212 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 402 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 590 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 810 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 589 }
		activate_targeted_decision = { decision = ALO_combat_tribalism_in_region target = 1203 }
	}
}
ALO_execute_combat_tribalism_decisions = {
	if = {
		limit = { FROM = { state = 1212 } }
		custom_effect_tooltip = ALO_oyi_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_oyi = -2 }
		set_temp_variable = { ALO_loyalty_change = 3 }
		ALO_change_azat_loyalty = yes
		FROM = {
			set_temp_variable = { azat_pop = -10 }
			ALO_azat_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		random_owned_controlled_state = {
			limit = { state = 587 }
			set_temp_variable = { azat_pop = -10 }
			ALO_azat_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		ALO_jas_azamat_leave_coalition_azat = yes
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
	else_if = {
		limit = { FROM = { state = 402 } }
		custom_effect_tooltip = ALO_tor_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_tor = -2 }
		set_temp_variable = { ALO_loyalty_change = 3 }
		ALO_change_zhanar_loyalty = yes
		random_owned_controlled_state = {
			limit = { state = FROM }
			set_temp_variable = { zhanar_pop = -10 }
			ALO_zhanar_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
	else_if = {
		limit = { FROM = { state = 590 } }
		custom_effect_tooltip = ALO_aqm_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_aqm = -2 }
		add_stability = -0.05
		random_owned_controlled_state = {
			limit = { state = FROM }
			set_temp_variable = { ush_zhus_pop = -10 }
			ALO_ush_zhus_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		random_owned_controlled_state = {
			limit = { state = 583 }
			set_temp_variable = { ush_zhus_pop = -10 }
			ALO_ush_zhus_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
	else_if = {
		limit = { FROM = { state = 810 } }
		custom_effect_tooltip = ALO_sem_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_sem = -2 }
		set_temp_variable = { ALO_loyalty_change = 3 }
		ALO_change_alash_loyalty = yes
		random_owned_controlled_state = {
			limit = { state = FROM }
			set_temp_variable = { alash_pop = -10 }
			ALO_alash_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		random_owned_controlled_state = {
			limit = { state = 588 }
			set_temp_variable = { alash_pop = -10 }
			ALO_alash_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
	else_if = {
		limit = { FROM = { state = 589 } }
		custom_effect_tooltip = ALO_jet_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_jet = -2 }
		set_temp_variable = { ALO_loyalty_change = 3 }
		ALO_change_national_loyalty = yes
		random_owned_controlled_state = {
			limit = { state = FROM }
			set_temp_variable = { national_pop = -10 }
			ALO_national_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		random_owned_controlled_state = {
			limit = { state = 586 }
			set_temp_variable = { alash_pop = -10 }
			ALO_alash_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
	else_if = {
		limit = { FROM = { state = 1203 } }
		custom_effect_tooltip = ALO_syr_vilayat_tooltip
		set_temp_variable = { ALO_autonomy_level = -2 }
		custom_effect_tooltip = ALO_change_level_of_autonomy
		add_to_variable = { alo_var_autonomy_syr = -2 }
		set_temp_variable = { ALO_loyalty_change = 3 }
		ALO_change_national_loyalty = yes
		random_owned_controlled_state = {
			limit = { state = FROM }
			set_temp_variable = { national_pop = -10 }
			ALO_national_pop = yes
			set_temp_variable = { zhas_azamat_pop = 10 }
			ALO_zhas_azamat_pop = yes
		}
		if = {
			limit = { has_active_mission = ALO_alash_unity_grows }
			custom_effect_tooltip = ALO_increase_alash_growth_time
			add_to_variable = { ALO_alash_unity_grows_days_timeout = 10 }
		}
	}
}
ALO_setup_monarch_for_natpop_slot = {
	if = {
		limit = { 
			has_country_leader = { name = "Mehmed Abdülkerim" ruling_only = yes } 
		}
		create_country_leader = {
			name = "Mehmed Abdülkerim"
			picture = "gfx/leaders/AFG/Portrait_AFG_Sehzade_Mehmed_Abdulkerim.png"
			expire = "1.1.1"
			ideology = militarism_subtype
		}
	}
	else_if = {
		limit = { 
			has_country_leader = { name = "Mehmed Orhan" ruling_only = yes } 
		}
		create_country_leader = {
			name = "Mehmed Orhan"
			picture = "gfx/leaders/OTT/Portrait_OTT_Mehmed_Orhan.png"
			expire = "1.1.1"
			ideology = militarism_subtype
		}
	}
	else_if = {
		limit = { 
			has_country_leader = { name = "Mahmud Namik" ruling_only = yes }
		}
		create_country_leader = {
			name = "Mahmud Namik"
			picture = "gfx/leaders/OTT/Portrait_OTT_Mahmud_Namik.png"
			expire = "1.1.1"
			ideology = militarism_subtype
		}
	}
	else_if = {
		limit = { 
			has_country_leader = { name = "Äzimhan" ruling_only = yes }
		}
		create_country_leader = {
			name = "Äzimhan"
			picture = "gfx/leaders/ALO/Portrait_ALO_Azimkhan_Kenesarin.png"
			expire = "1.1.1"
			ideology = militarism_subtype
		}
	}
}
ALO_change_radicalism = {
	if = {
		limit = {
			NOT = {
				has_completed_focus = ALO_Unite_Three_Jus
				has_completed_focus = ALO_Peoples_Revolution
			}
		}
		if = {
			limit = { ALO_ush_juz_in_power = yes }
			add_to_variable = {
				var = ALO_radicalism_var
				value = ALO_radicalism_change
				tooltip = ALO_change_radicalism
			}
			set_temp_variable = { ALO_stab_temp = ALO_radicalism_change }
			if = {
				limit = { check_variable = { ALO_stab_temp < 0 } }
				divide_temp_variable = { ALO_stab_temp = -3 }
				add_stability = var:ALO_stab_temp
			}
			hidden_effect = {
				if = {
					limit = { check_variable = { ALO_radicalism_var > 0.9 } }
					if = {
						limit = {
							is_ai = yes
							OR = {
								has_game_rule = { rule = ALO_path option = ALO_PATH_USH_JUS }
								has_game_rule = { rule = ALO_path option = ALO_PATH_USH_JUS_PANTURKIST }
							}
						}
					}
					else = {
						country_event = { id = alash.734 days = 3 }
					}
				}
				else_if = {
					limit = { check_variable = { ALO_radicalism_var > 0.8 } }
					country_event = { id = alash.726 days = 3 }
				}
				else_if = {
					limit = { check_variable = { ALO_radicalism_var > 0.7 } }
					country_event = { id = alash.725 days = 3 }
				}
			}
		}
		else = {
			add_to_variable = { ALO_radicalism_var = ALO_radicalism_change }
		}
		clamp_variable = { var = ALO_radicalism_var min = 0 max = 1 }
	}
}
ALO_remove_inexperienced_officials = {
	if = {
		limit = { has_idea = ALO_inexperienced_officials_1 }
		remove_ideas = ALO_inexperienced_officials_1
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_2 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_2
			add_idea = ALO_inexperienced_officials_1
		}
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_3 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_3
			add_idea = ALO_inexperienced_officials_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_4 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_4
			add_idea = ALO_inexperienced_officials_3
		}
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_5 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_5
			add_idea = ALO_inexperienced_officials_4
		}
	}
}
ALO_remove_inexperienced_officials_2 = {
	if = {
		limit = { has_idea = ALO_inexperienced_officials_1 }
		remove_ideas = ALO_inexperienced_officials_1
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_2 }
		remove_ideas = ALO_inexperienced_officials_2
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_3 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_3
			add_idea = ALO_inexperienced_officials_1
		}
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_4 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_4
			add_idea = ALO_inexperienced_officials_2
		}
	}
	else_if = {
		limit = { has_idea = ALO_inexperienced_officials_5 }
		swap_ideas = {
			remove_idea = ALO_inexperienced_officials_5
			add_idea = ALO_inexperienced_officials_3
		}
	}
}
ALO_setup_orenburg = {
	1208 = {
		if = {
			limit = { is_core_of = ALO }
			remove_core_of = ALO
			add_claim_by = ALO
		}
		if = {
			limit = {
				NOT = { is_core_of = ORE }
			}
			add_core_of = ORE
		}
		transfer_state_to = ORE
	}
	hidden_effect = {
		ORE = {
			division_template = {
				name = "Kazatskaya Peshaya Diviziya"
				division_names_group = DKB_INF_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 0 y = 2 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}

			division_template = {
				name = "Orenburgskaya Kazatskaya Diviziya"	# Cossack Division
				division_names_group = COS_CAV_01
				regiments = {
					irregular_cavalry = { x = 0 y = 0 }
					irregular_cavalry = { x = 0 y = 1 }
					irregular_cavalry = { x = 1 y = 0 }
					irregular_cavalry = { x = 1 y = 1 }
				}
			}
		}
		1208 = {
			set_temp_variable = { ORE_num_units = ALO_cossack_strength }
			multiply_temp_variable = { ORE_num_units = 5 }
			round_temp_variable = ORE_num_units
			create_unit = {
				division = "division_template = \"Orenburgskaya Kazatskaya Diviziya\" start_experience_factor = 0.2"
				allow_spawning_on_enemy_provs = yes
				owner = ORE
				count = var:ORE_num_units
				prioritize_location = 12128
			}
			create_unit = {
				division = "division_template = \"Kazatskaya Peshaya Diviziya\" start_experience_factor = 0.3"
				allow_spawning_on_enemy_provs = yes
				owner = ORE
				count = 1
				prioritize_location = 12128
			}
		}
		if = {
			limit = { 
				NOT = { has_country_flag = ALO_ionov_arrested }
			}				
			ORE = {
				country_event = {
					id = orenburg.7
					days = 3
				}
			}
		}
		ORE = { 
			transfer_technology_without_doctrines = yes
		}
	}
}
ALO_setup_uralsk = {
	406 = {
		if = {
			limit = { is_core_of = ALO }
			remove_core_of = ALO
			add_claim_by = ALO
		}
		if = {
			limit = {
				NOT = { is_core_of = URL }
			}
			add_core_of = URL
		}
		transfer_state_to = URL
	}
	hidden_effect = {
		URL = {
			division_template = {
				name = "Kazatskaya Peshaya Diviziya"
				division_names_group = DKB_INF_01
				regiments = {
					irregular_infantry = { x = 0 y = 0 }
					irregular_infantry = { x = 0 y = 1 }
					irregular_infantry = { x = 0 y = 2 }
					irregular_infantry = { x = 1 y = 0 }
					irregular_infantry = { x = 1 y = 1 }
				}
			}
			division_template = {
				name = "Uralskaya Kazatskaya Diviziya"	# Cossack Division
				division_names_group = COS_CAV_01
				regiments = {
					irregular_cavalry = { x = 0 y = 0 }
					irregular_cavalry = { x = 0 y = 1 }
					irregular_cavalry = { x = 1 y = 0 }
					irregular_cavalry = { x = 1 y = 1 }
				}
			}
		}
		406 = {
			set_temp_variable = { ORE_num_units = ALO_cossack_strength }
			multiply_temp_variable = { ORE_num_units = 5 }
			round_temp_variable = ORE_num_units
			create_unit = {
				division = "division_template = \"Uralskaya Kazatskaya Diviziya\" start_experience_factor = 0.3"
				allow_spawning_on_enemy_provs = yes
				owner = URL
				count = var:ORE_num_units
				prioritize_location = 11537
			}
		}
		
		URL = { 
			transfer_technology_without_doctrines = yes
			country_event = {
				id = url.3
				days = 7
			}
		}
	} 
}