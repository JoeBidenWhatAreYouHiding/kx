
UKR_setup_cooperative_movement = {
	set_variable = { UKR_cooperatives_upper_limit = 0 }
	set_variable = { UKR_cooperatives_workers_level = 0 }
	set_variable = { UKR_cooperatives_agrarian_level = 0 }
	set_variable = { UKR_cooperatives_consumer_level = 0 }
	set_variable = { UKR_cooperatives_credit_level = 0 }
	
	set_variable = { cooperatives_cost_decision = 80 }
	set_variable = { cooperatives_cost_decision1 = 50 }
	set_variable = { cooperatives_cost_days_remove = 50 }
	set_variable = { cooperatives_cost_days_remove1 = 70 }
	set_variable = { UKR_cooperatives_taken_decision = 0 }
	set_variable = { UKR_foster_partnerships_agrarian_cost = 40 }
	set_variable = { UKR_facilitate_conversion_cost = 60 }
	
	set_variable = { UKR_cooperatives_political_power_cost = 0 }
	set_variable = { UKR_cooperatives_stability_factor = 0 }
	set_variable = { UKR_cooperatives_war_support_factor = 0 }
	set_variable = { UKR_cooperatives_consumer_goods_factor = 0 }
	set_variable = { UKR_cooperatives_production_factory_start_efficiency_factor = 0 }
	set_variable = { UKR_cooperatives_line_change_production_efficiency_factor = 0 }
	set_variable = { UKR_cooperatives_production_factory_efficiency_gain_factor = 0 }
	set_variable = { UKR_cooperatives_production_factory_max_efficiency_factor = 0 }
	set_variable = { UKR_cooperatives_production_speed_buildings_factor = 0 }
	set_variable = { UKR_cooperatives_global_building_slots_factor = 0 }
		
	add_dynamic_modifier = { modifier = UKR_cooperative_movement }
	
	hidden_effect = {
		set_temp_variable = { change_state_capacity = 35 }
		UKR_cooperatives_change_state_capacity = yes
		set_temp_variable = { change_workers_coop = 8 }
		UKR_cooperatives_change_workers_coop = yes
		set_temp_variable = { change_agrarian_coop = 12 }
		UKR_cooperatives_change_agrarian_coop = yes
		set_temp_variable = { change_consumer_coop = 15 }
		UKR_cooperatives_change_consumer_coop = yes
		set_temp_variable = { change_credit_coop = 5 }
		UKR_cooperatives_change_credit_coop = yes		
	}
	
	recalculate_cooperatives = yes
}
# requires temp variable change_state_capacity
UKR_cooperatives_change_state_capacity = {
	if = {
		limit = { has_dynamic_modifier = { modifier = UKR_cooperative_movement } }
		effect_tooltip = {
			add_to_variable = {
				UKR_cooperatives_upper_limit = change_state_capacity
				tooltip = UKR_cooperativisation_tooltip
			}
		}
		set_temp_variable = { lower_limit = 0 }
		multiply_temp_variable = { lower_limit = -1 }
		set_temp_variable = { upper_limit = 80 }
		subtract_from_temp_variable = { upper_limit = UKR_cooperatives_upper_limit }
		clamp_temp_variable = {
			var = UKR_cooperatives_upper_limit
			min = lower_limit
			max = upper_limit
		}
		set_temp_variable = { coop_upper_limit_bonuses = change_state_capacity }
		divide_temp_variable = { coop_upper_limit_bonuses = 800 }		
		add_to_variable = { UKR_cooperatives_stability_factor = coop_upper_limit_bonuses }
		
		set_temp_variable = { coop_upper_limit_bonuses = change_state_capacity }
		divide_temp_variable = { coop_upper_limit_bonuses = 200 }		
		add_to_variable = { UKR_cooperatives_political_power_cost = coop_upper_limit_bonuses }
		
		add_to_variable = { UKR_cooperatives_upper_limit = change_state_capacity }		
	
	}
}
# requires temp variable change_workers_coop
UKR_cooperatives_change_workers_coop = {
	if = {
		limit = { has_dynamic_modifier = { modifier = UKR_cooperative_movement } }
		effect_tooltip = {
			add_to_variable = {
				UKR_cooperatives_workers_level = change_workers_coop
				tooltip = UKR_labour_cooperatives_tooltip
			}
		}
		set_temp_variable = { lower_limit = 0 }
		set_temp_variable = { upper_limit = 100 }
		subtract_from_temp_variable = { upper_limit = UKR_cooperatives_workers_level }
		clamp_temp_variable = {
			var = UKR_cooperatives_workers_level
			min = lower_limit
			max = upper_limit
		}
		set_temp_variable = { coop_worker_bonuses = change_workers_coop }
		divide_temp_variable = { coop_worker_bonuses = 400 }	
		add_to_variable = { UKR_cooperatives_political_power_cost = coop_worker_bonuses }
		add_to_variable = { UKR_cooperatives_production_factory_start_efficiency_factor = coop_worker_bonuses }
		add_to_variable = { UKR_cooperatives_line_change_production_efficiency_factor = coop_worker_bonuses }
		add_to_variable = { UKR_cooperatives_production_factory_efficiency_gain_factor = coop_worker_bonuses }
		add_to_variable = { UKR_cooperatives_production_factory_max_efficiency_factor = coop_worker_bonuses }		
		
		add_to_variable = { UKR_cooperatives_workers_level = change_workers_coop }
		
		clamp_variable = { var = UKR_cooperatives_production_factory_start_efficiency_factor min = 0 }
		clamp_variable = { var = UKR_cooperatives_line_change_production_efficiency_factor min = 0 }
		clamp_variable = { var = UKR_cooperatives_production_factory_efficiency_gain_factor min = 0 }
		clamp_variable = { var = UKR_cooperatives_production_factory_max_efficiency_factor min = 0 }
	}
}
# requires temp variable change_agrarian_coop
UKR_cooperatives_change_agrarian_coop = {
	if = {
		limit = { has_dynamic_modifier = { modifier = UKR_cooperative_movement } }
		effect_tooltip = {
			add_to_variable = {
				UKR_cooperatives_agrarian_level = change_agrarian_coop
				tooltip = UKR_agrarian_cooperatives_tooltip
			}
		}
		set_temp_variable = { lower_limit = 0 }
		set_temp_variable = { upper_limit = 100 }
		subtract_from_temp_variable = { upper_limit = UKR_cooperatives_agrarian_level }
		clamp_temp_variable = {
			var = UKR_cooperatives_agrarian_level
			min = lower_limit
			max = upper_limit
		}
		
		set_temp_variable = { coop_agrarian_bonuses = change_agrarian_coop }
		divide_temp_variable = { coop_agrarian_bonuses = 400 }		
		add_to_variable = { UKR_cooperatives_stability_factor = coop_agrarian_bonuses }
		
		set_temp_variable = { coop_agrarian_bonuses = change_agrarian_coop }
		divide_temp_variable = { coop_agrarian_bonuses = 4 }
		add_to_variable = { UKR_cooperatives_consumer_level = coop_agrarian_bonuses }
		
		add_to_variable = { UKR_cooperatives_agrarian_level = change_agrarian_coop }
	
		clamp_variable = { var = UKR_cooperatives_stability_factor min = 0 }
	}
}
# requires temp variable change_consumer_coop
UKR_cooperatives_change_consumer_coop = {
	if = {
		limit = { has_dynamic_modifier = { modifier = UKR_cooperative_movement } }
		effect_tooltip = {
			add_to_variable = {
				UKR_cooperatives_consumer_level = change_consumer_coop
				tooltip = UKR_consumer_cooperatives_tooltip
			}
		}
		set_temp_variable = { lower_limit = 0 }
		set_temp_variable = { upper_limit = 100 }
		subtract_from_temp_variable = { upper_limit = UKR_cooperatives_consumer_level }
		clamp_temp_variable = {
			var = UKR_cooperatives_consumer_level
			min = lower_limit
			max = upper_limit
		}
		
		set_temp_variable = { coop_consumer_bonuses = change_consumer_coop }
		divide_temp_variable = { coop_consumer_bonuses = 400 }	
		add_to_variable = { UKR_cooperatives_consumer_goods_factor = coop_consumer_bonuses }
		
		divide_temp_variable = { coop_consumer_bonuses = -1 }
		add_to_variable = { UKR_cooperatives_war_support_factor = coop_consumer_bonuses }		
	
		add_to_variable = { UKR_cooperatives_consumer_level = change_consumer_coop }
	}
}
# requires temp variable change_credit_coop
UKR_cooperatives_change_credit_coop = {
	if = {
		limit = { has_dynamic_modifier = { modifier = UKR_cooperative_movement } }
		effect_tooltip = {
			add_to_variable = {
				UKR_cooperatives_credit_level = change_credit_coop
				tooltip = UKR_credit_cooperatives_tooltip
			}
		}
		set_temp_variable = { lower_limit = 0 }
		set_temp_variable = { upper_limit = 100 }
		subtract_from_temp_variable = { upper_limit = UKR_cooperatives_credit_level }
		clamp_temp_variable = {
			var = UKR_cooperatives_credit_level
			min = lower_limit
			max = upper_limit
		}
		
		set_temp_variable = { coop_credit_bonuses = change_credit_coop }
		divide_temp_variable = { coop_credit_bonuses = 800 }	
		add_to_variable = { UKR_cooperatives_production_speed_buildings_factor = coop_credit_bonuses }
		
		add_to_variable = { UKR_cooperatives_credit_level = change_credit_coop }
		
		clamp_variable = { var = UKR_cooperatives_production_speed_buildings_factor min = 0 }
	}
}


UKR_recalculate_cooperatives_economic_law = {
	if = {
		limit = { has_idea = undisturbed_isolation }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.01 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.03 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.03 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.08 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.07 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.13 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.1 }
		}
		set_variable = { UKR_cooperatives_econ_law = 1 }
	}
	else_if = {
		limit = { has_idea = isolation }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.01 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.04 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.07 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.07 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.12 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.1 }
		}
		set_variable = { UKR_cooperatives_econ_law = 2 }
	}
	else_if = {
		limit = { has_idea = civilian_economy }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.03 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		set_variable = { UKR_cooperatives_econ_law = 7 }
	}
	else_if = {
		limit = { has_idea = low_economic_mobilisation }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.03 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.02 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		set_variable = { UKR_cooperatives_econ_law = 3 }
	}
	else_if = {
		limit = { has_idea = partial_economic_mobilisation }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.04 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.02 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.02 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.08 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.05 }
		}
		set_variable = { UKR_cooperatives_econ_law = 4 }
	}
	else_if = {
		limit = { has_idea = war_economy }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.08 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.07 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.07 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.07 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.07 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.03 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.02 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.07 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 6 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = 0.03 }
			add_to_variable = { UKR_cooperatives_war_support_factor = 0.03 }
		}
		set_variable = { UKR_cooperatives_econ_law = 5 }
	}
	else_if = {
		limit = { has_idea = tot_economic_mobilisation }
		if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.1 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.12 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.1 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.08 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.05 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.05 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.05 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.03 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.03 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_econ_law = 7 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
			add_to_variable = { UKR_cooperatives_stability_factor = -0.1 }
			add_to_variable = { UKR_cooperatives_war_support_factor = -0.03 }
		}
		set_variable = { UKR_cooperatives_econ_law = 6 }
	}	
}
UKR_recalculate_cooperatives_trade_law = {
	if = {
		limit = { has_idea = command_economy }
		if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.08 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.11 }
		}
		set_variable = { UKR_cooperatives_trade_law = 1 }
	}
	else_if = {
		limit = { has_idea = free_trade }
		if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.04 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.1 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.13 }
		}
		set_variable = { UKR_cooperatives_trade_law = 2 }		
	}
	else_if = {
		limit = { has_idea = export_focus }
		if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.02 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.04 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.06 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.1 }
		}
		set_variable = { UKR_cooperatives_trade_law = 3 }
	}
	else_if = {
		limit = { has_idea = limited_exports }
		if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.08 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.06 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 5 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = -0.04 }
		}
		set_variable = { UKR_cooperatives_trade_law = 4	}
	}
	else_if = {
		limit = { has_idea = closed_economy }
		if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 1 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.12 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 2 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.14 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 3 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.1 }
		}
		else_if = {
			limit = { check_variable = { UKR_cooperatives_trade_law = 4 } }
			add_to_variable = { UKR_cooperatives_consumer_goods_factor = 0.04 }
		}
		set_variable = { UKR_cooperatives_trade_law = 5	}
	}
}
recalculate_cooperatives = {
	if = {
		limit = { original_tag = UKR }
		UKR_recalculate_cooperatives_economic_law = yes
		UKR_recalculate_cooperatives_trade_law = yes
		clamp_variable = { var = UKR_cooperatives_upper_limit min = 0 max = 100}
		clamp_variable = { var = UKR_cooperatives_workers_level min = 0 max = 100 }
		clamp_variable = { var = UKR_cooperatives_agrarian_level min = 0 max = 100}
		clamp_variable = { var = UKR_cooperatives_consumer_level min = 0 max = 100 }
		clamp_variable = { var = UKR_cooperatives_credit_level min = 0 max = 100 }
	}
	else = {
		KUB_recalculate_cooperatives_economic_law = yes
		KUB_recalculate_cooperatives_trade_law = yes
		clamp_variable = { var = KUB_cooperatives_upper_limit min = 0 max = 100}
		clamp_variable = { var = KUB_cooperatives_workers_level min = 0 max = 100 }
		clamp_variable = { var = KUB_cooperatives_agrarian_level min = 0 max = 100}
		clamp_variable = { var = KUB_cooperatives_consumer_level min = 0 max = 100 }
		clamp_variable = { var = KUB_cooperatives_credit_level min = 0 max = 100 }
	}
	force_update_dynamic_modifier = yes
}

UKR_industrial_score = {
	if = {
		limit = { has_active_mission = UKR_industrialisation_mission }
		custom_effect_tooltip = UKR_add_industrial_score_tt
	}
	else = {
		custom_effect_tooltip = UKR_add_industrial_score_tt2
	}
	add_to_variable = { UKR_industrial_score = UKR_influence_change }	
}
UKR_industrial_score_bonuses = {
	if = {
		limit = {
			has_country_flag = UKR_protofis_influencing
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.01
		}
	}
	if = {
		limit = {
			has_country_flag = UKR_strokes_of_hammer_and_heart_bonus
			UKR_borotbysts_in_power = yes
		}
		increase_ruling_party_popularity_by_2 = yes
	}
	if = {
		limit = {
			has_country_flag = UKR_socialist_nationalization
		}
		add_stability = -0.02
	}
}
UKR_land_reform_borotbysts_weaken = {
	if = {
		limit = { 
			NOT = { has_country_flag = LandReformBegunUKR }
		}
		if = {
			limit = { check_variable = { UKR_resistance_change > 0 } }
			custom_effect_tooltip = UKR_land_reform_borotbysts_strengthen_tt
		}
		else = {
			custom_effect_tooltip = UKR_land_reform_borotbysts_weaken_tt
		}
	}
	else = {
		custom_effect_tooltip = UKR_land_reform_borotbysts_weaken
	}
	set_temp_variable = { pop_change = UKR_resistance_change }
	divide_temp_variable = { pop_change = 100 }
	hidden_effect = {
		add_popularity = {
			ideology = syndicalist
			popularity = pop_change
		}
	}
	add_to_variable = { UKR_Land_Reform_Borotbysts_extra = UKR_resistance_change }
	UKR_recalculate_land_reform = yes
}
UKR_reform_score = {
	if = {
		limit = { has_country_flag = LandReformBegunUKR }
		custom_effect_tooltip = UKR_add_land_reform_tt
	}
	add_to_variable = { UKR_Land_Reform_Success = UKR_influence_change }
	UKR_recalculate_land_reform = yes
}
UKR_reform_pop_score = {
	if = {
		limit = { has_country_flag = LandReformBegunUKR }
		custom_effect_tooltip = UKR_add_land_reform_pop_tt
	}
	add_to_variable = { UKR_Land_Reform_Popularity = UKR_popularity_change }
	UKR_recalculate_land_reform = yes
}

UKR_add_land_reform_score_based_on_current_score = {
	if = {
		limit = { has_active_mission = UKR_Land_Reform_Plan }
		if = {
			limit = { check_variable = { UKR_Land_Reform_Success < 25 } }
			set_temp_variable = { UKR_influence_change = 4 }
			UKR_reform_score = yes
		}
		else_if = {
			limit = { check_variable = { UKR_Land_Reform_Success < 50 } }
			set_temp_variable = { UKR_influence_change = 3 }
			UKR_reform_score = yes
		}
		else_if = {
			limit = { check_variable = { UKR_Land_Reform_Success < 75 } }
			set_temp_variable = { UKR_influence_change = 2 }
			UKR_reform_score = yes
		}
		else = {
			set_temp_variable = { UKR_influence_change = 1 }
			UKR_reform_score = yes
		}
	}
}

UKR_recalculate_land_reform = {
	
	#Borotbysts Effect
	set_variable = { UKR_Land_Reform_Borotbysts = UKR_Land_Reform_Success }
	add_to_variable = { UKR_Land_Reform_Borotbysts = UKR_Land_Reform_Popularity }
	add_to_variable = { UKR_Land_Reform_Borotbysts = -175 }
	divide_variable = { UKR_Land_Reform_Borotbysts = -2 }
	
	add_to_variable = { UKR_Land_Reform_Borotbysts = UKR_Land_Reform_Borotbysts_extra }
	clamp_variable = {
		var = UKR_Land_Reform_Borotbysts
		min = 0
		max = 100
	}
	clamp_variable = {
		var = UKR_Land_Reform_Popularity
		min = 0
	}
	clamp_variable = {
		var = UKR_Land_Reform_Success
		min = 0
	}
			
	if = {
		limit = { has_active_mission = UKR_Land_Reform_Plan }
		if = {
			limit = {
				set_temp_variable = { UKR_reform_suc = UKR_Land_Reform_Success }
				add_to_temp_variable = { UKR_reform_suc = UKR_Land_Reform_Popularity }
				divide_temp_variable = { UKR_reform_suc = 2 }
				check_variable = { UKR_reform_suc < 10 }
			}
			activate_mission = UKR_Land_Reform_Plan_Danger
		}
	}
}
UKR_land_reform_initiate_borotbyst_riot = {
	random_list = {
		20 = {
			modifier = {
				set_temp_variable = { UKR_nothing_happens_factor = 1 }
				set_temp_variable = { UKR_nothing_happens_chance = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_nothing_happens_chance = 100 }
				subtract_from_temp_variable = { UKR_nothing_happens_factor = UKR_nothing_happens_chance }
				factor = UKR_nothing_happens_factor #0% at 100% threat
			}
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_major_attack_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_major_attack_factor = 20 }
				clamp_temp_variable = { var = UKR_major_attack_factor min = 1 }
				factor = UKR_major_attack_factor #10% at 100% threat
			}
			country_event = ukrsoc.195 #Official Lynching
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_minor_attack_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_minor_attack_factor = 20 }
				clamp_temp_variable = { var = UKR_minor_attack_factor min = 1 }
				factor = UKR_minor_attack_factor #15% at 100% threat
			}
			country_event = ukrsoc.191 #Mass Expropriations
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_street_shootings_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_street_shootings_factor = 25 }
				clamp_temp_variable = { var = UKR_street_shootings_factor min = 1 }
				factor = UKR_street_shootings_factor #20% at 100% threat
			}
			country_event = ukrsoc.190 #Street Shootings
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_civilian_sabotage_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_civilian_sabotage_factor = 50 }
				clamp_temp_variable = { var = UKR_civilian_sabotage_factor min = 1 }
				factor = UKR_civilian_sabotage_factor #20% at 100% threat
			}
			country_event = ukrsoc.194 #Industry Sabotage
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_infrastructure_sabotage_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_infrastructure_sabotage_factor = 50 }
				clamp_temp_variable = { var = UKR_infrastructure_sabotage_factor min = 1 }
				factor = UKR_infrastructure_sabotage_factor #20% at 100% threat
			}
			country_event = ukrsoc.193 #Railway Bombing
		}
		10 = {
			modifier = {
				set_temp_variable = { UKR_burzhuy_flees_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_burzhuy_flees_factor = 20 }
				clamp_temp_variable = { var = UKR_burzhuy_flees_factor min = 1 }
				factor = UKR_burzhuy_flees_factor #10% at 100% threat
			}
			country_event = ukrsoc.192 #Bourgeousie Flees the Country
		}
		20 = {
			modifier = {
				set_temp_variable = { UKR_supply_shortfall_factor = UKR_Land_Reform_Borotbysts }
				divide_temp_variable = { UKR_supply_shortfall_factor = 400 }
				set_temp_variable = { UKR_supply_shortfall_fail_factor = 1 }
				subtract_from_temp_variable = { UKR_supply_shortfall_fail_factor = UKR_supply_shortfall_factor }
				factor = UKR_supply_shortfall_fail_factor #15% at 100% threat
			}
			country_event = ukrsoc.196 #Supply Shortfall
		}
	}
	random_owned_controlled_state = {
		prioritize = { 221 225 1232 1233 226 197 196 1234 200 1286 228 1283 227 1284 1282 1285 259 }
		limit = {
			NOT = { 
				has_dynamic_modifier = { modifier = UKR_borotbyst_uprising_state }
				has_dynamic_modifier = { modifier = UKR_cossack_militia_4 }
				has_dynamic_modifier = { modifier = UKR_cossack_militia_3 }
				has_dynamic_modifier = { modifier = UKR_cossack_militia_2 }
				has_dynamic_modifier = { modifier = UKR_cossack_militia_1 }
			}
		}
		set_border_war = yes
		add_dynamic_modifier = {
			modifier = UKR_borotbyst_uprising_state
		}
		hidden_effect = {
			ROOT = { 
				activate_targeted_decision = { target = PREV decision = UKR_deal_with_borotbyst_riot } 
			}
		}
	}
	add_popularity = {
		ideology = syndicalist
		popularity = 0.02
	}
	add_stability = -0.02
}

UKR_land_reform_events = {
	hidden_effect = {
		country_event = { id = ukreco.4 days = 50 random_days = 25 }
		country_event = { id = ukreco.5 days = 70 random_days = 25  }
		country_event = { id = ukreco.8 days = 90 random_days = 25  }
		country_event = { id = ukreco.9 days = 20 random_days = 25  }
		country_event = { id = ukreco.11 days = 100 random_days = 25  }
		country_event = { id = ukreco.8 days = 115 random_days = 25  }
		country_event = { id = ukreco.14 days = 60 random_days = 25  }
		country_event = { id = ukreco.15 days = 85 random_days = 25  }
		country_event = { id = ukreco.12 days = 125 random_days = 25  }
		country_event = { id = ukreco.19 days = 65 random_days = 25  }
		country_event = { id = ukreco.18 days = 80 random_days = 25  }
		country_event = { id = ukreco.16 days = 105 random_days = 25  }
		country_event = { id = ukreco.17 days = 125 random_days = 25  }
		country_event = { id = ukreco.20 days = 60 random_days = 25  }
		country_event = { id = ukreco.21 days = 85 random_days = 25  }
		country_event = { id = ukreco.22 days = 100 random_days = 25  }
	}
}
UKR_activate_investigation_decisions = {
	unlock_decision_category_tooltip = UKR_explosion_investigation
	activate_targeted_decision = { decision = UKR_interview_survivors target = ROOT }
	activate_targeted_decision = { decision = UKR_examine_intelligence target = ROOT }
	activate_targeted_decision = { decision = UKR_trace_explosive_device target = ROOT }
	activate_targeted_decision = { decision = UKR_scrutinize_domestic_rivals target = ROOT }
	activate_targeted_decision = { decision = UKR_finalize_investigation target = ROOT }
}
UKR_teardown_investigation_decisions = {
	remove_targeted_decision = { decision = UKR_interview_survivors target = ROOT }
	remove_targeted_decision = { decision = UKR_examine_intelligence target = ROOT }
	remove_targeted_decision = { decision = UKR_trace_explosive_device target = ROOT }
	remove_targeted_decision = { decision = UKR_scrutinize_domestic_rivals target = ROOT }
	remove_targeted_decision = { decision = UKR_finalize_investigation target = ROOT }
}
UKR_determine_the_killer = {
	if = {
		limit = {
			check_variable = { UKR_inv_derzhvarta > UKR_inv_borotbysts }
			check_variable = { UKR_inv_derzhvarta > UKR_inv_dyrektoria }
			check_variable = { UKR_inv_derzhvarta > UKR_inv_uvo }
			check_variable = { UKR_inv_derzhvarta > UKR_inv_upss }
		}
		set_country_flag = UKR_assassin_derzhvarta
	}
	else_if = {
		limit = {
			check_variable = { UKR_inv_dyrektoria > UKR_inv_borotbysts }
			check_variable = { UKR_inv_dyrektoria > UKR_inv_derzhvarta }
			check_variable = { UKR_inv_dyrektoria > UKR_inv_uvo }
			check_variable = { UKR_inv_dyrektoria > UKR_inv_upss }
			UKR_ukp_in_power = no
			has_left_democratic_government = no
		}
		set_country_flag = UKR_assassin_dyrektoria
	}
	else_if = {
		limit = {
			check_variable = { UKR_inv_uvo > UKR_inv_borotbysts }
			check_variable = { UKR_inv_uvo > UKR_inv_derzhvarta }
			check_variable = { UKR_inv_uvo > UKR_inv_dyrektoria }
			check_variable = { UKR_inv_uvo > UKR_inv_upss }
			NOT = { has_government = national_populist }
			UKR_andriy_melnyk_in_power = no
		}
		set_country_flag = UKR_assassin_uvo
	}
	else_if = {
		limit = {
			check_variable = { UKR_inv_upss > UKR_inv_borotbysts }
			check_variable = { UKR_inv_upss > UKR_inv_derzhvarta }
			check_variable = { UKR_inv_upss > UKR_inv_dyrektoria }
			check_variable = { UKR_inv_upss > UKR_inv_uvo }
		}
		set_country_flag = UKR_assassin_upss
	}
	else = {
		set_country_flag = UKR_assassin_borotbysts
	}
}
UKR_assasin_debuffs = {
	if = {
		limit = { has_country_flag = UKR_assassin_derzhvarta }
		custom_effect_tooltip = UKR_assassin_derzhvarta_tt
		if = {
			limit = { UKR_is_hetmanate_or_monarchy = yes }
			add_stability = -0.2
			decrease_ruling_party_popularity_by_10 = yes
		}
		else = {
			add_stability = -0.1
		}
		if = {
			limit = { has_dlc = "La Resistance" }
			add_timed_idea = {
				idea = UKR_derzhvarta_fallout_lar
				days = 400
			}
		}
		else = {
			add_timed_idea = {
				idea = UKR_derzhvarta_fallout
				days = 400
			}
		}
	}
	else_if = {
		limit = { has_country_flag = UKR_assassin_dyrektoria }
		custom_effect_tooltip = UKR_assassin_dyrektoria_tt
		increase_ruling_party_popularity_by_10 = yes
		add_popularity = {
			ideology = social_democrat
			popularity = -0.1
		}
	}
	else_if = {
		limit = { has_country_flag = UKR_assassin_uvo }
		custom_effect_tooltip = UKR_assassin_uvo_tt
		add_popularity = {
			ideology = national_populist
			popularity = -0.1
		}
		add_timed_idea = { idea = UKR_nationalist_resistance days = 365 }
		hidden_effect = {
			country_event = {
				id = ukrpol.268
				days = 3
			}
		}
	}
	else_if = {
		limit = { has_country_flag = UKR_assassin_upss }
		custom_effect_tooltip = UKR_assassin_upss_tt
		if = {
			limit = { has_country_flag = ukr_switched_uskhd_upss }
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.1
			}
		}
		else = {
			add_popularity = {
				ideology = social_conservative
				popularity = -0.1
			}
		}
		random_unit_leader = {
			limit = { has_id = 17986 }
			retire = yes 
		}
		random_unit_leader = {
			limit = { has_id = 17942 }
			retire = yes 
		}
		random_unit_leader = {
			limit = { has_id = 17943 }
			retire = yes 
		}
	}
	else_if = {
		limit = { has_country_flag = UKR_assassin_borotbysts }
		custom_effect_tooltip = UKR_assassin_borotbysts_tt
		set_temp_variable = { UKR_resistance_change = -10 }
		UKR_land_reform_borotbysts_weaken = yes 			
		set_variable = { UKR_Borotbyst_Riot_timeout = 60 }
		if = {
			limit = { has_active_mission = UKR_Borotbyst_Riot }
			add_days_mission_timeout = {
				mission = UKR_Borotbyst_Riot
				days = 18
			}
		}
		effect_tooltip = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				retire = yes
			}
		}
		hidden_effect = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				set_nationality = XXA
			}
		}
	}
}
UKR_merge_corn_ingridients = {
	set_country_flag = { flag = UKR_merging_corn_ingridients_flag days = 12 value = 1 }
	activate_mission = UKR_merging_corn_ingridients
}
UKR_setup_ukrainian_army = {
	set_variable = { UKR.UKR_army_conscription_factor = -0.15 }
	set_variable = { UKR.UKR_army_army_morale_factor = -0.2 }
	
	add_dynamic_modifier = { modifier = UKR_ukrainian_army	} 
}
UKR_setup_breadbasket = {
	add_dynamic_modifier = { modifier = UKR_breadbasket_of_europe_modifier	} 
	set_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.09 } #0.15 max
	set_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.15 } #0.15 max
	set_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.15 } #0.35 max
	set_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.05 } #-0.05 #max
	set_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = -0.1 } #0.15 min
	set_variable = { UKR.UKR_breadbasket_of_europe_global_building_slots = 0.1 } #0.1 #max
	set_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.15 } #-0.15 #max	
}

UKR_fire_agricultural_crisis = {
	custom_effect_tooltip = UKR_agricultural_crisis_tt
	add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.06 } 
	add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.4 } 
	add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = 0.15 } 
	add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = 0.25 }
	force_update_dynamic_modifier = yes
	
	activate_mission = UKR_Agricultural_Crisis_deadline
}

UKR_breadbasket_add_global_building_slots = {
	custom_effect_tooltip = UKR_breadbasket_add_global_building_slots
	add_to_variable = { UKR.UKR_breadbasket_of_europe_global_building_slots = 0.1 }
	force_update_dynamic_modifier = yes	
}
UKR_breadbasket_add_pp = {
	custom_effect_tooltip = UKR_breadbasket_add_pp
	hidden_effect = {
		random_list = {
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = 0.02 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = 0.03 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = 0.04 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = 0.05 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = 0.06 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_remove_pp = {
	custom_effect_tooltip = UKR_breadbasket_remove_pp
	hidden_effect = {
		random_list = {
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.02 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.03 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.04 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.05 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_pp = -0.06 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_add_monthly_population = {
	custom_effect_tooltip = UKR_breadbasket_add_monthly_population
	hidden_effect = {
		random_list = {
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.04 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.05 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.06 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.07 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = 0.08 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_remove_monthly_population = {
	custom_effect_tooltip = UKR_breadbasket_remove_monthly_population
	hidden_effect = {
		random_list = {
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = -0.04 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = -0.05 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = -0.06 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = -0.07 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_monthly_pop = -0.08 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_add_trade_opinion = {
	custom_effect_tooltip = UKR_breadbasket_add_trade_opinion
	hidden_effect = {
		random_list = {
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.04 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.05 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.06 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.07 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = 0.08 } }
		}
		force_update_dynamic_modifier = yes
	}	
}
UKR_breadbasket_remove_trade_opinion = {
	custom_effect_tooltip = UKR_breadbasket_remove_trade_opinion
	hidden_effect = {
		random_list = {
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.04 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.05 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.06 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.07 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_trade_opinion = -0.08 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_add_resource_penalty = {
	custom_effect_tooltip = UKR_breadbasket_add_resource_penalty
	hidden_effect = {
		add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = 0.05 }
		force_update_dynamic_modifier = yes
	}	
}
UKR_breadbasket_remove_resource_penalty = {
	custom_effect_tooltip = UKR_breadbasket_remove_resource_penalty
	hidden_effect = {
		random_list = {
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.02 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.03 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.04 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.05 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_resource_penalty = -0.06 } }
		}
		force_update_dynamic_modifier = yes
	}	
}
UKR_breadbasket_add_consumer_goods = {
	custom_effect_tooltip = UKR_breadbasket_add_consumer_goods
	hidden_effect = {
		random_list = {
			30 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = 0.02 } }
			35 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = 0.03 } }
			35 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = 0.04 } }
		}
		force_update_dynamic_modifier = yes
	}	
}
UKR_breadbasket_remove_consumer_goods = {
	custom_effect_tooltip = UKR_breadbasket_remove_consumer_goods
	hidden_effect = {
		random_list = {
			35 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = -0.02 } }
			35 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = -0.03 } }
			30 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_consumer_goods = -0.04 } }
		}
		force_update_dynamic_modifier = yes
	}
}
UKR_breadbasket_add_production_growth = {
	custom_effect_tooltip = UKR_breadbasket_add_production_growth
	hidden_effect = {
		random_list = {
			5 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.02 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.03 } }
			20 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.04 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.05 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.06 } }
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = 0.07 } }
		}
		force_update_dynamic_modifier = yes
	}	
}
UKR_breadbasket_remove_production_growth = {
	custom_effect_tooltip = UKR_breadbasket_remove_production_growth
	hidden_effect = {
		random_list = {
			15 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.02 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.03 } }
			25 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.04 } }
			20 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.05 } }
			10 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.06 } }
			5 = { add_to_variable = { UKR.UKR_breadbasket_of_europe_production_growth = -0.07 } }
		}
		force_update_dynamic_modifier = yes
	}	
}

UKR_setup_political_variables = {
	set_variable = { UKR_Direktoriia_Strength = 1 }
	
	recalculate_ukrainian_political_variables = yes
	
	set_variable = { UKR_petliura_authority = 3 }
	set_variable = { UKR_vynnychenko_authority = 3 }
	set_variable = { UKR_uvo_authority = 2 }
	
}
recalculate_ukrainian_political_variables = {
	clamp_variable = {
		var = UKR_Direktoriia_Strength
		min = 0.25
		max = 2
	}
	set_variable = { UKR_Direktoriia_Strength_real = UKR.party_popularity@social_democrat }
	add_to_variable = { UKR_Direktoriia_Strength_real = UKR.party_popularity@radical_socialist }
	add_to_variable = { UKR_Direktoriia_Strength_real = UKR.party_popularity@totalist }
	if = { 
		limit = { has_country_flag = UPR_uvo_openly_joins_dyrektoria }
		add_to_variable = { UKR_Direktoriia_Strength_real = UKR.party_popularity@national_populist }
	}
	multiply_variable = { UKR_Direktoriia_Strength_real = UKR_Direktoriia_Strength }
	clamp_variable = {
		var = UKR_Direktoriia_Strength_real
		min = 0
		max = 1
	}	
}
	
UKR_increase_king = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = 0.02
	}
	if = {
		limit = {
			has_completed_focus = UKR_Coalition_Of_Monarchists
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.01
		}
	}
	if = {
		limit = {
			has_completed_focus = UKR_Coalition_With_UVO
		}
		add_popularity = {
			ideology = national_populist
			popularity = 0.01
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_increase_king_strength = {
	custom_effect_tooltip = UKR_increase_king_tt
	add_power_balance_value = {
		id = UKR_dualism
		value = -0.10
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_decrease_king = {
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = -0.02
	}
	if = {
		limit = {
			OR = {
				has_completed_focus = UKR_Coalition_Of_Monarchists
				has_completed_focus = UKR_Dissolve_Sejm
			}
		}
		add_popularity = {
			ideology = social_conservative
			popularity = -0.01
		}
	}
	if = {
		limit = {
			OR = {
				has_completed_focus = UKR_Coalition_With_UVO
				has_completed_focus = UKR_Coalition_Wih_UDP
			}
		}
		add_popularity = {
			ideology = national_populist
			popularity = -0.01
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_decrease_king_strength = {
	custom_effect_tooltip = UKR_decrease_king_tt
	add_power_balance_value = {
		id = UKR_dualism
		value = 0.10
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_increase_hetman = {
	if = {
		limit = {
			OR = {
				has_completed_focus = UKR_Coalition_With_UVO
				has_completed_focus = UKR_Coalition_Wih_UDP
			}
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.03
		}
	}
	else = {
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.02
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_increase_hetman_strength = {
	custom_effect_tooltip = UKR_increase_hetman_tt
	add_power_balance_value = {
		id = UKR_dualism
		value = 0.10
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_decrease_hetman = {
	if = {
		limit = {
			OR = {
				has_completed_focus = UKR_Coalition_With_UVO
				has_completed_focus = UKR_Coalition_Wih_UDP
			}
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.03
		}
	}
	else = {
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -0.02
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_decrease_hetman_strength = {
	custom_effect_tooltip = UKR_decrease_hetman_tt
	add_power_balance_value = {
		id = UKR_dualism
		value = -0.10
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_increase_direktoria = {
	custom_effect_tooltip = UKR_increase_direktoria_tt
	if = {
		limit = { has_country_flag = UKR_dyrektoria_uprising_active }
		UPR = {
			add_stability = 0.05
			add_war_support = 0.05
			add_popularity = {
				ideology = social_democrat
				popularity = 0.02
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.01
			}
			if = {
				limit = { ROOT = { has_country_flag = UPR_uvo_openly_joins_dyrektoria } }
				add_popularity = {
					ideology = national_populist
					popularity = 0.01
				}			
			}
		}
	}
	hidden_effect = {
		add_popularity = {
			ideology = social_democrat
			popularity = 0.02
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.01
		}
		add_to_variable = { UKR_Direktoriia_Strength = 0.2 }
		if = {
			limit = { has_country_flag = UPR_uvo_openly_joins_dyrektoria }
			add_to_variable = { UKR_sun_strength = 1 }
			add_popularity = {
				ideology = national_populist
				popularity = 0.01
			}			
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_decrease_direktoria = {
	custom_effect_tooltip = UKR_decrease_direktoria_tt
	if = {
		limit = { has_country_flag = UKR_dyrektoria_uprising_active }
		UPR = {
			add_stability = -0.05
			add_war_support = -0.05
			add_popularity = {
				ideology = social_democrat
				popularity = -0.02
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = -0.02
			}	
			if = {
				limit = { ROOT = { has_country_flag = UPR_uvo_openly_joins_dyrektoria } }
				add_popularity = {
					ideology = national_populist
					popularity = -0.02
				}
			}		
		}
	}
	hidden_effect = {
		add_popularity = {
			ideology = social_democrat
			popularity = -0.03
		}
		add_popularity = {
			ideology = totalist
			popularity = -0.02
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.02
		}
		if = {
			limit = { has_country_flag = UPR_uvo_openly_joins_dyrektoria }
			add_popularity = {
				ideology = national_populist
				popularity = -0.02
			}
		}
		if = {
			limit = {
				check_variable = { UKR_Direktoriia_Strength < 1 }
			}
			add_to_variable = { UKR_Direktoriia_Strength = -0.25 }
		}
		else = {
			add_to_variable = { UKR_Direktoriia_Strength = -0.2 }
		}
	}
	recalculate_ukrainian_political_variables = yes
}
UKR_check_for_uskhd_results = {
	hidden_effect = {
		if = {
			limit = { 
				check_variable = { UKR_uskhd_cons < UKR_uskhd_lib }
			}
			country_event = ukrpol.175
		}
		else = {
			country_event = ukrpol.151
		}
	}
}
UKR_remove_impending_failure = {
	if = {
		limit = { has_idea = UKR_impending_failure }
		remove_ideas = UKR_impending_failure
	}
	else_if = {
		limit = { has_idea = UKR_impending_failure_1 }
		remove_ideas = UKR_impending_failure_1
	}
	else_if = {
		limit = { has_idea = UKR_impending_failure_2 }
		remove_ideas = UKR_impending_failure_2
	}
	else_if = {
		limit = { has_idea = UKR_impending_failure_3 }
		remove_ideas = UKR_impending_failure_3
	}
	else_if = {
		limit = { has_idea = UKR_impending_failure_4 }
		remove_ideas = UKR_impending_failure_4
	}
}

UKR_improve_ukrainisation = {
	if = {
		limit = {
			has_idea = UKR_ukrainisation_efforts_4
		}
		swap_ideas = {
			remove_idea = UKR_ukrainisation_efforts_4
			add_idea = UKR_stable_identity
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ukrainisation_efforts_3
		}
		swap_ideas = {
			remove_idea = UKR_ukrainisation_efforts_3
			add_idea = UKR_ukrainisation_efforts_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ukrainisation_efforts_2
		}
		swap_ideas = {
			remove_idea = UKR_ukrainisation_efforts_2
			add_idea = UKR_ukrainisation_efforts_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ukrainisation_efforts
		}
		swap_ideas = {
			remove_idea = UKR_ukrainisation_efforts
			add_idea = UKR_ukrainisation_efforts_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_lingering_ukrainisation
		}
		swap_ideas = {
			remove_idea = UKR_lingering_ukrainisation
			add_idea = UKR_ukrainisation_efforts
		}
		hidden_effect = {
			country_event = { id = ukrmisc.76 days = 300 random = 300 }   	# Dovzhenko
			country_event = { id = ukrmisc.81 days = 88 random = 300 }   	# Dovzhenko
			country_event = { id = ukrmisc.83 days = 450 random = 200 }   	# Taras Bulba
			country_event = { id = ukrmisc.12 days = 143 random = 300 }   	# Bilokur
			country_event = { id = ukrmisc.15 days = 212 random = 300 }   	# Ukrainka
		}
	}
	else_if = {
		limit = {
			NOT = { has_idea = UKR_lingering_ukrainisation }
			NOT = { has_idea = UKR_ukrainisation_efforts_2 }
			NOT = { has_idea = UKR_ukrainisation_efforts_3 }
			NOT = { has_idea = UKR_ukrainisation_efforts_4 }
			NOT = { has_idea = UKR_stable_identity }
		}
		add_ideas = UKR_ukrainisation_efforts
	}
}

UKR_reduce_black_monday = {
	if = {
		limit = {
			has_idea = UKR_black_monday_2
		}
		swap_ideas = {
			remove_idea = UKR_black_monday_2
			add_idea = UKR_black_monday_3
			days = 250
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_black_monday_1
		}
		swap_ideas = {
			remove_idea = UKR_black_monday_1
			add_idea = UKR_black_monday_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_black_monday
		}
		swap_ideas = {
			remove_idea = UKR_black_monday
			add_idea = UKR_black_monday_1
		}
	}	
}
UKR_reduce_agricultural_crisis = {
	if = {
		limit = { has_country_flag = UKR_agriculture_crisis }
		custom_effect_tooltip = UKR_reduce_agricultural_crisis_tt
		add_to_variable = { UKR_agricultural_crisis_taken_focuses = 1 }
		if = {
			limit = {
				check_variable = { UKR_agricultural_crisis_taken_focuses = 4 }
			}
			clr_country_flag = UKR_agriculture_crisis
			clear_variable = UKR_agricultural_crisis_taken_focuses
		}
	}
}
UKR_rename_states_administrative = {
	if = {
		limit = { has_global_flag = allowrenaming_flag }
		if = {
			limit = { controls_state = 193 }
			193 = { set_state_name = STATE_193_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 194 }
			194 = { set_state_name = STATE_194_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 196 }
			196 = { set_state_name = STATE_196_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 200 }
			if = {
				limit = { has_global_flag = renamed_oleksandrivsk_to_zaporizhia }
				200 = { set_state_name = STATE_200_REFORMED_ZAPORIZHIA_UKRAINIAN }
			}
			else_if = {
				limit = { has_global_flag = renamed_oleksandrivsk_to_sich }
				200 = { set_state_name = STATE_200_REFORMED_SICH_UKRAINIAN }
			}
		}
		if = {
			limit = { controls_state = 201 }
			201 = { set_state_name = STATE_201_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 225 }
			225 = { set_state_name = STATE_225_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 226 }
			226 = { set_state_name = STATE_226_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 227 }
			227 = { set_state_name = STATE_227_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 228 }
			228 = { set_state_name = STATE_228_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 240 }
			240 = { set_state_name = STATE_240_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 259 }
			259 = { set_state_name = STATE_259_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 791 }
			791 = { set_state_name = STATE_791_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 997 }
			997 = { set_state_name = STATE_997_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1228 }
			1228 = { set_state_name = STATE_1228_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1230 }
			1230 = { set_state_name = STATE_1230_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1232 }
			1232 = { set_state_name = STATE_1232_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1233 }
			1233 = { set_state_name = STATE_1233_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1234 }
			1234 = { set_state_name = STATE_1234_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1237 }
			1237 = { set_state_name = STATE_1237_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1238 }
			1238 = { set_state_name = STATE_1238_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1240 }
			1240 = { set_state_name = STATE_1240_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1241 }
			1241 = { set_state_name = STATE_1241_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1242 }
			1242 = { set_state_name = STATE_1242_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1243 }
			1243 = { set_state_name = STATE_1243_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1244 }
			1244 = { set_state_name = STATE_1244_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1245 }
			1245 = { set_state_name = STATE_1245_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1285 }
			1285 = { set_state_name = STATE_1285_REFORMED_UKRAINIAN }
		}			
	}
	else = {
		if = {
			limit = { controls_state = 194 }
			194 = { set_state_name = STATE_194_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 196 }
			196 = { set_state_name = STATE_196_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 200 }
			if = {
				limit = { has_global_flag = renamed_oleksandrivsk_to_zaporizhia }
				200 = { set_state_name = STATE_200_REFORMED_SICH_ENGLISH }
			}
			else_if = {
				limit = { has_global_flag = renamed_oleksandrivsk_to_sich }
				200 = { set_state_name = STATE_200_REFORMED_ZAPORIZHIA_ENGLISH }
			}
		}
		if = {
			limit = { controls_state = 201 }
			201 = { set_state_name = STATE_201_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 225 }
			225 = { set_state_name = STATE_225_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 226 }
			226 = { set_state_name = STATE_226_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 227 }
			227 = { set_state_name = STATE_227_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 228 }
			228 = { set_state_name = STATE_228_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 240 }
			240 = { set_state_name = STATE_240_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 997 }
			997 = { set_state_name = STATE_997_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1228 }
			1228 = { set_state_name = STATE_1228_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1230 }
			1230 = { set_state_name = STATE_1230_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1232 }
			1232 = { set_state_name = STATE_1232_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1233 }
			1233 = { set_state_name = STATE_1233_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1234 }
			1234 = { set_state_name = STATE_1234_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1238 }
			1238 = { set_state_name = STATE_1238_REFORMED_UKRAINIAN }
		}
		if = {
			limit = { controls_state = 1240 }
			1240 = { set_state_name = STATE_1240_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1241 }
			1241 = { set_state_name = STATE_1241_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1242 }
			1242 = { set_state_name = STATE_1242_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1243 }
			1243 = { set_state_name = STATE_1243_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1244 }
			1244 = { set_state_name = STATE_1244_REFORMED_ENGLISH }
		}
		if = {
			limit = { controls_state = 1285 }
			1285 = { set_state_name = STATE_1285_REFORMED_ENGLISH }
		}	
	}
}
UKR_skoropadsky_increase_russophiles = {
	custom_effect_tooltip = UKR_protofis_influence_variable_increase
	add_to_variable = { UKR_skoropadskyi_orientation = 0.03 }
	add_to_variable = { UKR_protofis_influence = 1 }
	if = {
		limit = { has_country_flag = UKR_protofis_marlib }
		add_popularity = { ideology = market_liberal popularity = 0.03 }
	}	
}
UKR_skoropadsky_increase_germanophiles = {
	custom_effect_tooltip = UKR_protofis_influence_variable_decrease
	add_to_variable = { UKR_skoropadskyi_orientation = -0.03 }
	add_to_variable = { UKR_protofis_influence = -1 }
	clamp_variable = {
		var = UKR_protofis_influence
		min = 0
	}
	if = {
		limit = { has_country_flag = UKR_protofis_marlib }
		add_popularity = { ideology = market_liberal popularity = -0.03 }
	}
}		
UKR_increase_ivan_po_idea = {
	custom_effect_tooltip = UKR_ivan_influence_variable_increase
	add_to_variable = { UKR_poltavets_ostrianytsia_influence = 1 }
	if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_1
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_1
			add_idea = UKR_ivan_po_influence_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_2
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_2
			add_idea = UKR_ivan_po_influence_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_3
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_3
			add_idea = UKR_ivan_po_influence_idea_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_4
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_4
			add_idea = UKR_ivan_po_influence_idea_5
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_5
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_5
			add_idea = UKR_ivan_po_influence_idea_6
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_6
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_6
			add_idea = UKR_ivan_po_influence_idea_7
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_7
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_7
			add_idea = UKR_ivan_po_influence_idea_8
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_8
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_8
			add_idea = UKR_ivan_po_influence_idea_9
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_9
		}
		add_stability = -0.03
	}
}

UKR_decrease_ivan_po_idea = {
	custom_effect_tooltip = UKR_ivan_influence_variable_decrease
	add_to_variable = { UKR_poltavets_ostrianytsia_influence = -1 }
	clamp_variable = {
		var = UKR_poltavets_ostrianytsia_influence
		min = 0
	}
	if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_2
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_2
			add_idea = UKR_ivan_po_influence_idea_1
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_3
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_3
			add_idea = UKR_ivan_po_influence_idea_2
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_4
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_4
			add_idea = UKR_ivan_po_influence_idea_3
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_5
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_5
			add_idea = UKR_ivan_po_influence_idea_4
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_6
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_6
			add_idea = UKR_ivan_po_influence_idea_5
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_7
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_7
			add_idea = UKR_ivan_po_influence_idea_6
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_8
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_8
			add_idea = UKR_ivan_po_influence_idea_7
		}
	}
	else_if = {
		limit = {
			has_idea = UKR_ivan_po_influence_idea_9
		}
		swap_ideas = {
			remove_idea = UKR_ivan_po_influence_idea_9
			add_idea = UKR_ivan_po_influence_idea_8
		}
	}
}
		
UKR_increase_mikhnovskyi_idea = {
	if = {
		limit = { has_country_flag = UKR_mikhnovskyi_influence_exists }
		custom_effect_tooltip = UKR_mykola_influence_variable_increase
		add_to_variable = { UKR_mikhnovskyi_influence = 1 }
		if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_1
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_1
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_2
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_2
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_2
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_3
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_3
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_3
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_4
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_4
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_4
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_5
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_5
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_5
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_6
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_6
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_6
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_7
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_7
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_7
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_8
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_8
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_8
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_9
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_9
			}
			add_stability = -0.03
		}
	}
}

UKR_decrease_mikhnovskyi_idea = {
	if = {
		limit = { has_country_flag = UKR_mikhnovskyi_influence_exists }
		custom_effect_tooltip = UKR_mykola_influence_variable_decrease
		add_to_variable = { UKR_mikhnovskyi_influence = -1 }
		clamp_variable = {
			var = UKR_mikhnovskyi_influence
			min = 0
		}
		if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_2
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_2
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_1
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_3
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_3
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_2
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_4
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_4
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_3
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_5
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_5
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_4
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_6
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_6
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_5
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_7
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_7
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_6
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_8
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_8
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_7
			}
		}
		else_if = {
			limit = {
				has_idea = UKR_mykola_mikhnovskyi_influence_idea_9
			}
			swap_ideas = {
				remove_idea = UKR_mykola_mikhnovskyi_influence_idea_9
				add_idea = UKR_mykola_mikhnovskyi_influence_idea_8
			}
		}
	}
}
UKR_remove_king = {
	hidden_effect = {
		UKR = {
			get_current_government_type = yes
			set_politics = { ruling_party = social_liberal }
			if = {
				limit = { UKR_vasyl_in_power = yes }
				create_country_leader = {
					name = "Dmytro Doroshenko"
					desc = "POLITICS_DMYTRO_DOROSHENKO_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Dmitri_Doroshenko.png"
					expire = "1.1.1"
					ideology = social_liberal_subtype
				}
			}
			set_politics = { ruling_party = market_liberal }
			if = {
				limit = { UKR_vasyl_in_power = yes }
				create_country_leader = {
					name = "Dmytro Levytskyi"
					desc = "POLITICS_DMYTRO_LEVYTSKYI_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Dmytro_Levytsky.png"
					expire = "1.1.1"
					ideology = marlib_national_liberalism_subtype
				}
			}
			set_politics = { ruling_party = social_conservative }
			if = {
				limit = { UKR_vasyl_in_power = yes }
				if = {
					limit = { has_country_flag = ukr_switched_uskhd_upss }
					create_country_leader = {
						name = "Oleksandr Shapoval"
						desc = "POLITICS_OLEKSANDER_SHAPOVAL_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Oleksandr_Shapoval.png"
						expire = "1.1.1"
						ideology = soccon_ukrainian_conservatism_subtype
					}
					else_if = {
						limit = {
							NOT = { has_country_flag = Viacheslav_Lypynskyi_dead }
						}
						create_country_leader = {
							name = "Viacheslav Lypynskyi"
							desc = "POLITICS_VYACHESLAV_LYPYNSKY_DESC"
							picture = "gfx/leaders/UKR/Portrait_UKR_Vyacheslav_Lypynsky.png"
							expire = "1.1.1"
							ideology = soccon_ukrainian_conservatism_subtype
						}
					}
					else = {
						create_country_leader = {
							name = "Serhiy Shemet"
							picture = "gfx/leaders/UKR/Portrait_UKR_Serhiy_Shemet.png"
							expire = "1.1.1"
							ideology = soccon_ukrainian_conservatism_subtype
						}
					}
				}
			}
			set_politics = { ruling_party = authoritarian_democrat }
			if = {
				limit = { UKR_vasyl_in_power = yes }
				if = {
					limit = { has_country_flag = ukr_switched_uskhd_upss }
					create_country_leader = {
						name = "Oleksandr Shapoval"
						desc = "POLITICS_OLEKSANDER_SHAPOVAL_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Oleksandr_Shapoval.png"
						expire = "1.1.1"
						ideology = social_nationalism_subtype
					}
					else_if = {
						limit = {
							NOT = { has_country_flag = Viacheslav_Lypynskyi_dead }
						}
						create_country_leader = {
							name = "Viacheslav Lypynskyi"
							desc = "POLITICS_VYACHESLAV_LYPYNSKY_DESC"
							picture = "gfx/leaders/UKR/Portrait_UKR_Vyacheslav_Lypynsky.png"
							expire = "1.1.1"
							ideology = ukrainian_conservatism_subtype
						}
					}
					else = {
						create_country_leader = {
							name = "Serhiy Shemet"
							picture = "gfx/leaders/UKR/Portrait_UKR_Serhiy_Shemet.png"
							expire = "1.1.1"
							ideology = ukrainian_conservatism_subtype
						}
					}
				}
			}
			set_politics = { ruling_party = paternal_autocrat }
			if = {
				limit = { UKR_vasyl_in_power = yes }
				if = {
					limit = { has_global_flag = UKR_konovalets_counet_coup }
					create_country_leader = {
						name = "Andriy Melnyk"
						desc = "POLITICS_ANDRIY_MELNYK_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
						expire = "1.1.1"
						ideology = junta_subtype
					}
				}
				else_if = {
					limit = { 
						NOT = { has_country_flag = Pavlo_Skoropadskyi_dead }
					}
					create_country_leader = {
						name = "Pavlo Skoropadskyi"
						desc = "POLITICS_PAVLO_SKOROPADSKYI_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Skoropadsky.png"
						expire = "1.1.1"
						ideology = pataut_ukrainian_conservatism_subtype
					}
				}
				else = {
					create_country_leader = {
						name = "Vasyl Kochubei"
						picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Kochubei.png"
						expire = "1.1.1"
						ideology = pataut_ukrainian_conservatism_subtype
					}
				}
			}
			restore_previous_government_type = yes
		}
	}
}

UKR_create_vasyl = {
	hidden_effect = {
		create_country_leader = {
			name = "Vasyl"
			desc = "POLITICS_VASYL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg.png"
			expire = "1.1.1"
			ideology = social_liberal_subtype
			traits = { UKR_red_prince UKR_king_title }
		}
		create_country_leader = {
			name = "Vasyl"
			desc = "POLITICS_VASYL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg.png"
			expire = "1.1.1"
			ideology = liberal_conservative_subtype
			traits = { UKR_red_prince UKR_king_title }
		}
		create_country_leader = {
			name = "Vasyl"
			desc = "POLITICS_VASYL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg.png"
			expire = "1.1.1"
			ideology = soccon_ukrainian_conservatism_subtype
			traits = { UKR_red_prince UKR_king_title }
		}
		create_country_leader = {
			name = "Vasyl"
			desc = "POLITICS_VASYL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg.png"
			expire = "1.1.1"
			ideology = ukrainian_conservatism_subtype
			traits = { UKR_red_prince UKR_king_title }
		}
		create_country_leader = {
			name = "Vasyl"
			desc = "POLITICS_VASYL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg.png"
			expire = "1.1.1"
			ideology = pataut_ukrainian_conservatism_subtype
			traits = { UKR_red_prince UKR_king_title }
		}
	}
}

UKR_create_leo_stefan = {
	hidden_effect = {
		create_country_leader = {
			name = "Lev III"
			desc = "POLITICS_LEO_STEFAN_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Leo_Stefan_Habsburg_Child.png"
			expire = "1.1.1"
			ideology = centrist_subtype
		}
		create_country_leader = {
			name = "Lev III"
			desc = "POLITICS_LEO_STEFAN_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Leo_Stefan_Habsburg_Child.png"
			expire = "1.1.1"
			ideology = liberal_conservative_subtype
		}
		create_country_leader = {
			name = "Lev III"
			desc = "POLITICS_LEO_STEFAN_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Leo_Stefan_Habsburg_Child.png"
			expire = "1.1.1"
			ideology = soccon_ukrainian_conservatism_subtype
		}
		create_country_leader = {
			name = "Lev III"
			desc = "POLITICS_LEO_STEFAN_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Leo_Stefan_Habsburg_Child.png"
			expire = "1.1.1"
			ideology = ukrainian_conservatism_subtype
		}
		create_country_leader = {
			name = "Lev III"
			desc = "POLITICS_LEO_STEFAN_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Leo_Stefan_Habsburg_Child.png"
			expire = "1.1.1"
			ideology = pataut_ukrainian_conservatism_subtype
		}
		if = {
			limit = { 
				OR = {
					has_country_flag = UKR_will_become_hetmanate
					has_cosmetic_tag = UKR_hetmanate
				}
			}
			hidden_effect = {
				get_current_government_type = yes
				set_politics = { ruling_party = social_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_politics = { ruling_party = market_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_politics = { ruling_party = social_conservative }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_politics = { ruling_party = authoritarian_democrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_politics = { ruling_party = paternal_autocrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_politics = { ruling_party = national_populist }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				restore_previous_government_type = yes
			}
		}
		else_if = {
			limit = { has_cosmetic_tag = UKR_kingdom }
			hidden_effect = {
				get_current_government_type = yes
				set_politics = { ruling_party = social_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = market_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = social_conservative }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = authoritarian_democrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = paternal_autocrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = national_populist }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				restore_previous_government_type = yes
			}
		}
	}
}

UKR_create_danylo = {
	hidden_effect = {
		create_country_leader = {
			name = "Danylo II"
			desc = "POLITICS_DANYLO_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Danylo_Skoropadsky.png"
			expire = "1.1.1"
			ideology = social_liberal_subtype
			traits = { UKR_faithful_son_trait }
		}
		create_country_leader = {
			name = "Danylo II"
			desc = "POLITICS_DANYLO_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Danylo_Skoropadsky.png"
			expire = "1.1.1"
			ideology = liberal_conservative_subtype
			traits = { UKR_faithful_son_trait }
		}
		create_country_leader = {
			name = "Danylo II"
			desc = "POLITICS_DANYLO_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Danylo_Skoropadsky.png"
			expire = "1.1.1"
			ideology = soccon_ukrainian_conservatism_subtype
			traits = { UKR_faithful_son_trait }
		}
		create_country_leader = {
			name = "Danylo II"
			desc = "POLITICS_DANYLO_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Danylo_Skoropadsky.png"
			expire = "1.1.1"
			ideology = ukrainian_conservatism_subtype
			traits = { UKR_faithful_son_trait }
		}
		create_country_leader = {
			name = "Danylo II"
			desc = "POLITICS_DANYLO_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Danylo_Skoropadsky.png"
			expire = "1.1.1"
			ideology = pataut_ukrainian_conservatism_subtype
			traits = { UKR_faithful_son_trait }
		}
		if = {
			limit = { 
				OR = {
					has_country_flag = UKR_will_become_hetmanate
					has_cosmetic_tag = UKR_hetmanate
				}
			}
			hidden_effect = {
				get_current_government_type = yes
				set_politics = { ruling_party = social_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_country_leader_name = { name = "Danylo Skoropadskyi" }
				if = {
					limit = { has_completed_focus = UKR_Truly_Parliamentary_Hetmanate }
					add_country_leader_trait = UKR_hetman_only_in_name
				}
				set_politics = { ruling_party = market_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_country_leader_name = { name = "Danylo Skoropadskyi" }
				if = {
					limit = { has_completed_focus = UKR_Truly_Parliamentary_Hetmanate }
					add_country_leader_trait = UKR_hetman_only_in_name
				}
				set_politics = { ruling_party = social_conservative }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_country_leader_name = { name = "Danylo Skoropadskyi" }
				if = {
					limit = { has_completed_focus = UKR_Truly_Parliamentary_Hetmanate }
					add_country_leader_trait = UKR_hetman_only_in_name
				}
				set_politics = { ruling_party = authoritarian_democrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_country_leader_name = { name = "Danylo Skoropadskyi" }
				if = {
					limit = { has_completed_focus = UKR_Truly_Parliamentary_Hetmanate }
					add_country_leader_trait = UKR_hetman_only_in_name
				}
				set_politics = { ruling_party = paternal_autocrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_king_title }
					remove_country_leader_trait = UKR_king_title
				}
				add_country_leader_trait = UKR_hetman_title
				set_country_leader_name = { name = "Danylo Skoropadskyi" }
				if = {
					limit = { has_completed_focus = UKR_Truly_Parliamentary_Hetmanate }
					add_country_leader_trait = UKR_hetman_only_in_name
				}
			}
		}
		else_if = {
			limit = { has_cosmetic_tag = UKR_kingdom }
			hidden_effect = {
				get_current_government_type = yes
				set_politics = { ruling_party = social_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = market_liberal }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = social_conservative }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = authoritarian_democrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
				set_politics = { ruling_party = paternal_autocrat }
				if = {
					limit = { has_country_leader_with_trait = UKR_hetman_title }
					remove_country_leader_trait = UKR_hetman_title
				}
				add_country_leader_trait = UKR_king_title
			}
		}
	}
}
UKR_copy_leaders_of_ROOT = {
	if = {
		limit = { UKR_is_hetmanate_or_monarchy = yes }
		if = {
			limit = { ROOT = { UKR_vasyl_in_power = yes } }
			UKR_create_vasyl = yes
		}
		else_if = {
			limit = { ROOT = { UKR_leo_stefan_in_power = yes } }
			UKR_create_leo_stefan = yes
		}
		else_if = {
			limit = { ROOT = { UKR_danila_skoropadsky_in_power = yes } }
			UKR_create_danylo = yes
		}
		else_if = {
			limit = { 
				ROOT = { UKR_pavlo_skoropadsky_in_power = yes }
			}
			create_country_leader = {
				name = "Pavlo Skoropadskyi"
				desc = "POLITICS_PAVLO_SKOROPADSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Skoropadskyi_Hetman.png"
				expire = "1.1.1"
				ideology = pataut_ukrainian_conservatism_subtype
			}
		}
		else = {
			create_country_leader = {
				name = "Pavlo Skoropadskyi"
				desc = "POLITICS_PAVLO_SKOROPADSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Skoropadsky.png"
				expire = "1.1.1"
				ideology = pataut_ukrainian_conservatism_subtype
			}
		}
		if = {
			limit = { has_cosmetic_tag = UKR_hetmanate }
			add_country_leader_trait = UKR_hetman_title
		}
		else = {
			add_country_leader_trait = UKR_king_title
		}
	}
	else = {
		UKR_remove_king = yes
		if = {
			limit = {
				ROOT = { UKR_skrypnyk_in_power = yes }
			}
			create_country_leader = {
				name = "Mykola Skrypnyk"
				desc = "POLITICS_MYKOLA_SKRYPNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Skrypnyk.png"
				expire = "1.1.1"
				ideology = national_communism_subtype
			}
			create_country_leader = {
				name = "Mykola Skrypnyk"
				desc = "POLITICS_MYKOLA_SKRYPNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Skrypnyk.png"
				expire = "1.1.1"
				ideology = radsoc_communism_subtype
			}
		}
		else = {
			create_country_leader = {
				name = "Andriy Richytskyi"
				desc = "POLITICS_ANDRIY_RYCHYTSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Richytskyi.png"
				expire = "1.1.1"
				ideology = national_communism_subtype
				traits = { UKR_anticolonialist }
			}
		}
		if = {
			limit = {
				ROOT = { 
					UKR_vynnychenko_in_power = yes
					has_government = radical_socialist
				}
			}
			create_country_leader = {
				name = "Volodymyr Vynnychenko"
				desc = "POLITICS_VOLODYMYR_VYNNYCHENKO_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Volodymyr_Vynnychenko.png" 
				expire = "1.1.1"
				ideology = radsoc_revisionist_marxism_subtype
				traits = { UKR_writer_of_the_revolution }
			}
			set_party_name = {
				ideology = social_democrat
				name = UKR_radical_socialist_party
				long_name = UKR_radical_socialist_party_long
			}
		}
		else = {
			create_country_leader = {
				name = "Vasyl Shakhrai"
				desc = "POLITICS_VASYL_SHAKHRAI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Shakhrai.png" 
				expire = "1.1.1"
				ideology = radsoc_national_communism_subtype
			}
		}
		if = {
			limit = {
				ROOT = { UKR_vynnychenko_in_power = yes }
			}
			create_country_leader = {
				name = "Volodymyr Vynnychenko"
				desc = "POLITICS_VOLODYMYR_VYNNYCHENKO_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Volodymyr_Vynnychenko.png" 
				expire = "1.1.1"
				ideology = revisionist_marxism_subtype
				traits = { UKR_writer_of_the_revolution }
			}
			set_party_name = {
				ideology = social_democrat
				name = UKR_social_democrat_party
				long_name = UKR_social_democrat_party
			}				
		}
		else_if = {
			limit = { 
				ROOT = { UKR_petliura_in_power = yes }
			}
			create_country_leader = {
				name = "Symon Petliura"
				desc = "POLITICS_SYMON_PETLIURA_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Symon_Petliura.png" 
				expire = "1.1.1"
				ideology = socdem_junta_subtype
			}
			set_party_name = {
				ideology = social_democrat
				name = UKR_social_democrat_party6
				long_name = UKR_social_democrat_party6_long
			}				
		}
		else = {
			set_party_name = {
				ideology = social_democrat
				name = UKR_social_democrat_party2
				long_name = UKR_social_democrat_party2
			}
			if = {
				limit = {
					ROOT = { 
						has_country_leader = {
							name = "Vsevolod Holubovych"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "Vsevolod Holubovych"
					desc = "POLITICS_VSEVOLOD_HOLUBOVYCH_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Vsevolod_Holubovych.png" 
					expire = "1.1.1"
					ideology = socdem_narodism_subtype
				}
			}
			else_if = {
				limit = {
					ROOT = {
						has_country_leader = {
							name = "Mykola Kovalevskyi"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "Mykola Kovalevskyi"
					desc = "POLITICS_MYKOLA_KOVALEVSKYI_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Kovalevskyi.png"
					expire = "1.1.1"
					ideology = socdem_narodism_subtype
					traits = { UKR_cooperator }
				}	
			}
			else_if = {
				limit = {
					ROOT = { 
						has_country_leader = {
							name = "Pavlo Khristiuk"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "Pavlo Khristiuk"
					desc = "POLITICS_PAVLO_KHRISTIUK_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Khrystiuk.png"
					expire = "1.1.1"
					ideology = socdem_narodism_subtype
					traits = { UKR_cooperator }
				}	
			}
			else_if = {
				limit = {
					ROOT = { 
						has_country_leader = {
							name = "Mykyta Shapoval"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "Mykyta Shapoval"
					desc = "POLITICS_MYKYTA_SHAPOVAL_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Mykyta_Shapoval.png"
					expire = "1.1.1"
					ideology = socdem_narodism_subtype
					traits = { UKR_forester }
				}	
			}
			else_if = {
				limit = {
					ROOT = { 
						has_country_leader = {
							name = "Mykhailo Hrushevskyi"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "Mykhailo Hrushevskyi"
					desc = "POLITICS_MYKHAILO_HRUSHEVSKYI_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Mykhailo_Hrushevsky.png"
					expire = "1.1.1"
					ideology = socdem_narodism_subtype
					traits = { UKR_first_premier }
				}	
			}
			else = {
				meta_effect = {
					text = {
						create_country_leader = {
							name = "[RADA_NAME]"
							desc = "POLITICS_CENTRAL_RADA_DESC"
							picture = "gfx/leaders/UKR/Portrait_UKR_Rada.png"
							expire = "1.1.1"
							ideology = socdem_narodism_subtype
						}
					}
					RADA_NAME = "[GetUkrainianParliamentFullName]"
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					has_country_leader = {
						name = "Oleksandr Shulhyn"
						ruling_only = yes
					}
				}
			}
			create_country_leader = {
				name = "Oleksandr Shulhyn"
				desc = "POLITICS_OLEKSANDER_SHULHYN_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Oleksandr_Shulhin.png" 
				expire = "1.1.1"
				ideology = social_liberal_subtype
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_country_leader = {
						name = "Andriy Nikovskyi"
						ruling_only = yes
					}
				}
			}
			create_country_leader = {
				name = "Andriy Nikovskyi"
				desc = "POLITICS_ANDRIY_NIKOVSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Nikovskyi.png"
				expire = "1.1.1"
				ideology = social_liberal_subtype				
			}
		}
		else = {
			create_country_leader = {
				name = "Serhiy Yefremov"
				desc = "POLITICS_SERHIY_YEFREMOV_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Serhiy_Yefremov.png"
				expire = "1.1.1"
				ideology = social_liberal_subtype
			}
		}		
		if = {
			limit = { 
				ROOT = {
					has_country_leader_ideology = centrist_subtype
				}
			}
			set_country_leader_ideology = centrist_subtype		
		}
		create_country_leader = {
			name = "Andriy Melnyk"
			desc = "POLITICS_ANDRIY_MELNYK_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
			expire = "1.1.1"
			ideology = junta_subtype
			traits = { UKR_vozhd }
		}		
		if = {
			limit = {
				ROOT = { UKR_yevhen_konovalets_in_power = yes }
			}
			create_country_leader = {
				name = "Yevhen Konovalets"
				desc = "POLITICS_YEVHEN_KONOVALETS_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Yevhen_Konovalets_civilian.png"
				expire = "1.1.1"
				ideology = ukrainian_nationalism_subtype
				traits = { UKR_vozhd }
			}
		}
		else_if = {
			limit = {
				ROOT = { UKR_dmytro_dontsov_in_power = yes }
			}
			create_country_leader = {
				name = "Dmytro Dontsov"
				desc = "POLITICS_DMITRI_DONTSOV_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Dmitri_Dontsov.png"
				expire = "1.1.1"
				ideology = ukrainian_nationalism_subtype
			}
		}
		else = {
			create_country_leader = {
				name = "Andriy Melnyk"
				desc = "POLITICS_ANDRIY_MELNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
				expire = "1.1.1"
				ideology = ukrainian_nationalism_subtype
				traits = { UKR_vozhd }
			}
		}
	}	
}
UKR_setup_decisions_for_intervention = {
	hidden_effect = {
		RUS = {
			activate_targeted_decision = { target = UKR decision = UKR_support_kyiv }
			activate_targeted_decision = { target = USR decision = UKR_support_borotbysts }
			activate_targeted_decision = { target = UKR decision = UKR_intervention }
		}
		GER = {
			activate_targeted_decision = { target = UKR decision = UKR_support_kyiv }
			activate_targeted_decision = { target = UKR decision = UKR_intervention }
		}
		AUS = {
			activate_targeted_decision = { target = UKR decision = UKR_support_kyiv }
		}
		FRA = {
			activate_targeted_decision = { target = USR decision = UKR_support_borotbysts }
		}
		ENG = {
			activate_targeted_decision = { target = USR decision = UKR_support_borotbysts }
		}
		SRI = {
			activate_targeted_decision = { target = USR decision = UKR_support_borotbysts }
		}
		POL = {
			activate_targeted_decision = { target = UKR decision = UKR_intervention }
		}
		WHR = {
			activate_targeted_decision = { target = UKR decision = UKR_intervention }
		}
		ROM = {
			activate_targeted_decision = { target = UKR decision = UKR_intervention }
		}
	}
}
UPR_setup_borotbyst_uprising_petliura = {
	hidden_effect = {
		disband_twenty_percent_units_delete_equipment = yes
		create_dynamic_country = {
			original_tag = UKR
			copy_tag = UKR

			save_global_event_target_as = UKR_soviet_republic
			set_cosmetic_tag = UKR_borotbyst
			set_country_flag = KR_set_up_ai_templates
			set_country_flag = UKR_disable_borotbist_uprisings
			
			set_politics = {
				ruling_party = radical_socialist
				elections_allowed = no
			}
			set_war_support = 0.6
			set_popularities = {
				totalist = 3
				radical_socialist = 11
				syndicalist = 27
				social_democrat = 31
				social_liberal = 10
				market_liberal = 0
				social_conservative = 0
				authoritarian_democrat = 0
				paternal_autocrat = 5
				national_populist = 13		
			}			
			every_state = {
				limit = {
					is_core_of = event_target:UKR_soviet_republic
				}
				remove_core_of = event_target:UKR_soviet_republic
			}
			add_ai_strategy = {
				type = contain
				id = "UKR"
				value = 200
			}
			add_ai_strategy = {
				type = conquer
				id = "UKR"
				value = 500
			}
			add_ai_strategy = {
				type = antagonize
				id = "UKR"
				value = 200
			}
			reserve_dynamic_country = yes
							
			set_temp_variable = { UKR_civil_war_target = THIS }
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 1233
					state = 1234
					state = 1238
					state = 1232
					state = 1229
					state = 821
					state = 240
					state = 203
					state = 259
					state = 221
					state = 227
					state = 228
					state = 1282
					state = 1283
					state = 1284
					state = 1285
					state = 1286
					state = 226
					state = 1231
					state = 200
					state = 1239
					state = 197
					state = 196	
					state = 137
					state = 1220
					state = 1221
				}
			}
			USR = {
				transfer_state = PREV
				add_state_core = PREV
			}
			remove_core_of = UKR
			add_claim_by = UKR
		}
		#move all Borotbyst to revolter
		every_unit_leader = {
			limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
			set_nationality = var:UKR_civil_war_target
		}
		hidden_effect = {
			XXA = {
				every_unit_leader = {
					limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
					set_nationality = var:UKR_civil_war_target
				}
			}
		}
			
		var:UKR_civil_war_target = {
			copy_government_of_ROOT = yes
			transfer_technology_and_slots = yes
			set_capital = { state = 221 }
			load_focus_tree = { tree = UKR_focus keep_completed = yes }
			mark_focus_tree_layout_dirty = yes
			remove_all_ministers = yes		
			add_ideas = {
				war_economy
				closed_economy
				service_by_requirement
				UKR_Oleksander_Shumsky_hog_rso
				UKR_Antin_Prikhodko_for_rso
				UKR_Panas_P_Lyubchenko_eco_rso
				UKR_Hryhorii_Hrynko_sec_rso
				UKR_lingering_ukrainisation
			}
			set_war_support = 0.6
			set_politics = { 
				ruling_party = radical_socialist
				elections_allowed = no
			}
			set_party_name = { 
				ideology = radical_socialist
				name = UKR_syndicalist_party
				long_name = UKR_syndicalist_party_long
			}
			add_dynamic_modifier = { modifier = UKR_breadbasket_of_europe_modifier	} 
			add_dynamic_modifier = { modifier = UKR_ukrainian_army	} 
			if = {
				limit = { ROOT = { has_country_flag = UKR_transfered_our_fleet_to_CRM } }
				set_country_flag = UKR_transfered_our_fleet_to_CRM
			}
			if = {
				limit = { ROOT = { has_country_flag = UKR_transfered_our_fleet_to_GER } }
				set_country_flag = UKR_transfered_our_fleet_to_GER
			}
			if = {
				limit = { ROOT = { UKR_petliura_in_power = yes} }
				set_country_flag = UKR_borotbyst_against_petliura
			}
			else_if = {
				limit = {  ROOT = { UKR_skrypnyk_in_power = yes } }
				set_country_flag = UKR_borotbyst_against_skrypnyk
			}
			else_if = {
				limit = {
					OR = {
						UKR_upsr_in_power = yes
						UKR_usdrp_in_power = yes
						UKR_ukp_in_power = yes
						has_country_flag = UKR_dyrektoria_tree_unlocked
						UKR_upsf_in_power = yes
					}
				}
				set_country_flag = UKR_borotbyst_against_dyrektoria
			}
			create_country_leader = {
				name = "Oleksandr Shumskyi"
				desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
				expire = "1.1.1"
				ideology = anarcho_syndicalist_subtype
				traits = { UKR_fervent_revolutionary }
			}	
			create_country_leader = {
				name = "Oleksandr Shumskyi"
				desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
				expire = "1.1.1"
				ideology = radsoc_anarcho_syndicalist_subtype
				traits = { UKR_fervent_revolutionary }
			}
			create_country_leader = {
				name = "Levko Kovaliv"
				desc = "POLITICS_LEVKO_KOVALIV_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Lev_Kovaliv.png"
				expire = "1.1.1"
				ideology = socdem_narodism_subtype
			}
			set_politics = {
				ruling_party = radical_socialist
				elections_allowed = no
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.25
			}
			
			division_template = {
				name = "Ukrainska Radianska Dyviziia"
				division_names_group = USR_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					artillery = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Kinnyi Dyvizion"
				division_names_group = UKR_CAV_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
					cavalry = { x = 1 y = 2 }
				}
				support = {
					recon = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Motostrilets'ka Dyviziia"
				division_names_group = UKR_MOT_01
				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }
					motorized = { x = 0 y = 2 }
					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }
					motorized = { x = 1 y = 2 }
					light_armor = { x = 2 y = 0 }
				}
				support = {
					engineer = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Chervona Hvardiia"
				division_names_group = UKR_MIL_01
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
					militia = { x = 1 y = 0 }
					militia = { x = 1 y = 1 }
					militia = { x = 1 y = 2 }
				}
			}	

			#spawn units
			capital_scope = {				
				create_unit = {
					division = "division_template = \"Chervona Hvardiia\" start_experience_factor = 0.3"
					owner = PREV
				}
				create_unit = {
					division = "division_template = \"Chervona Hvardiia\" start_experience_factor = 0.2"
					owner = PREV
					count = 5
				}
				create_unit = {
					division = "division_template = \"Chervona Hvardiia\" start_experience_factor = 0.1"
					owner = PREV
					count = 2
				}
				create_unit = {
					division = "division_template = \"Kinnyi Dyvizion\" start_experience_factor = 0.2"
					owner = PREV
					count = 4
				}
			}	
			country_event = {
				id = ukrsoc.207
				days = 5
			}		
			delete_unit_template_and_units = {
				division_template = "Sichovi Striltsi"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Halytskyi korpus Sichovykh Striltsiv"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Petliurivtsi"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Kinnohirskyi Dyvizion"
				disband = yes #will refund equipment and manpower
			}
			every_unit_leader = {
				limit = {
					is_field_marshal = yes
					NOT = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				}
				retire = yes
			}
		}
		set_political_party = { ideology = syndicalist popularity = 0 }				
	}
}

UKR_setup_dyrektoria_divisions = {
	hidden_effect = {
		disband_twenty_percent_units_delete_equipment = yes
		division_template = {
			name = "Petliurivtsi"
			division_names_group = UKR_INF_02
			regiments = {
				irregular_infantry = { x = 0 y = 0 }
				irregular_infantry = { x = 0 y = 1 }
				irregular_infantry = { x = 0 y = 2 }
				irregular_infantry = { x = 1 y = 0 }
				irregular_infantry = { x = 1 y = 1 }
				irregular_infantry = { x = 1 y = 2 }
			}
			support = {
				engineer = { x = 0 y = 0 }
			}
			template_counter = 68
		}
		division_template = {
			name = "Kinnohirskyi Dyvizion"
			division_names_group = UKR_MTN_02
			regiments = {
				artillery_brigade = { x = 0 y = 0 }
				artillery_brigade = { x = 0 y = 1 }
				artillery_brigade = { x = 0 y = 2 }
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
			}
			support = {
				engineer = { x = 0 y = 0 }
			}
		}
		if = {
			limit = {
				NOT = { has_template = "Pikhotna Dyviziia" }
			}
			division_template = {
				name = "Pikhotna Dyviziia"
				division_names_group = UKR_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					artillery = { x = 0 y = 0 }
				}
			}
		}
		random_owned_controlled_state = {
			create_unit = {
				division = "name = \"Ukrainskyi Korpus\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.2"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Khersonskaya Diviziia\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.3"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Zaporizkyi Kinnohirskyi Harmatnyi Dyvizion 'Almazivtsi'\" division_template = \"Kinnohirskyi Dyvizion\" start_experience_factor = 0.4"
				owner = ROOT
			}
		}
		random_owned_controlled_state = {
			create_unit = {
				division = "name = \"Sichovyi Zaporizkyi korpus\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.3"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Serdiutska Dyviziia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.3"
				owner = ROOT
			}
		}
		random_owned_controlled_state = {
			create_unit = {
				division = "name = \"Sichova Striletska Dyviziia\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.2"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Striletsko-Kozatska Dyviziia 'Sirozhupannyky'\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.4"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Volynska Striletska Dyviziia\" division_template = \"Pikhotna Dyviziia\" start_experience_factor = 0.1"
				owner = ROOT
			}
		}
		random_state = {
			prioritize = { 227 }
			create_unit = {
				division = "name = \"Selianska povstanska dyviziia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				prioritize_location = 502
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Mariupolskyi povstanskyi polk'\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				prioritize_location = 6420
				owner = ROOT
			}
			if = {
				limit = {
					ROOT = { NOT = { has_country_flag = UKR_has_secured_rear } }
				}
				create_unit = {
					division = "name = \"Yuzivskyi selianskyi batalion\" division_template = \"Petliurivtsi\" start_experience_factor = 0.1 start_equipment_factor = 0.8"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6474
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Donetska bryhada'\" division_template = \"Petliurivtsi\" start_experience_factor = 0.1 start_equipment_factor = 0.8"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 6474
					owner = ROOT
				}
			}
		}
		random_state = {
			prioritize = { 200 }
			create_unit = {
				division = "name = \"Selianska dyviziia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				prioritize_location = 6596
				owner = ROOT
			}
			if = {
				limit = {
					ROOT = { NOT = { has_country_flag = UKR_has_secured_rear } }
				}
				create_unit = {
					division = "name = \"Zaporizkyi selianskyi batalion\" division_template = \"Petliurivtsi\" start_experience_factor = 0.1 start_equipment_factor = 0.8"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11405
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Zaporizkyi povstanskyi kurin'\" division_template = \"Petliurivtsi\" start_experience_factor = 0.1 start_equipment_factor = 0.8"
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11405
					owner = ROOT
				}
			}
		}
		random_state = {
			prioritize = { 1232 197 192 }
			create_unit = {
				division = "name = \"Povstale narodne opolchennia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Povstale narodne opolchennia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Povstale narodne opolchennia\" division_template = \"Petliurivtsi\" start_experience_factor = 0.05 start_equipment_factor = 0.8"
				allow_spawning_on_enemy_provs = yes
				owner = ROOT
			}
		}		
		if = {
			limit = {
				NOT = { has_government = national_populist }
				NOT = { has_country_flag = UKR_compromises_with_nationalists }
			}
			set_country_flag = UPR_uvo_openly_joins_dyrektoria
			create_country_leader = {
				name = "Andriy Melnyk"
				desc = "POLITICS_ANDRIY_MELNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
				expire = "1.1.1"
				ideology = junta_subtype
			}
			division_template = {
				name = "Halytskyi korpus Sichovykh Striltsiv"
				division_names_group = UKR_ELI_02
				regiments = {
					elite_infantry = { x = 0 y = 0 }
					elite_infantry = { x = 0 y = 1 }
					elite_infantry = { x = 0 y = 2 }
					elite_infantry = { x = 0 y = 3 }
					elite_infantry = { x = 1 y = 0 }
					elite_infantry = { x = 1 y = 1 }
					elite_infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
				}
				support = {
					artillery = { x = 0 y = 0 }
					engineer = { x = 0 y = 1 }
					recon = { x = 0 y = 2 }
				}
			}
			random_owned_controlled_state = {
				create_unit = {
					division = "division_template = \"Halytskyi korpus Sichovykh Striltsiv\" start_experience_factor = 0.2"
					owner = ROOT
				}
				create_unit = {
					division = "division_template = \"Halytskyi korpus Sichovykh Striltsiv\" start_experience_factor = 0.2"
					owner = ROOT
				}
			}
			random_owned_controlled_state = {
				create_unit = {
					division = "division_template = \"Halytskyi korpus Sichovykh Striltsiv\" start_experience_factor = 0.2"
					owner = ROOT
				}
				create_unit = {
					division = "division_template = \"Halytskyi korpus Sichovykh Striltsiv\" start_experience_factor = 0.2"
					owner = ROOT
				}
			}
			if = {
				limit = {
					NOT = { has_country_flag = Yevhen_Konovalets_dead }
				}
				if = {
					limit = {
						NOT = { has_template = "Sichovi Striltsi" }
					}
					division_template = {
						name = "Sichovi Striltsi"
						division_names_group = UKR_ELI_01

						regiments = {
							elite_infantry = { x = 0 y = 0 }
							elite_infantry = { x = 0 y = 1 }
							elite_infantry = { x = 0 y = 2 }
							elite_infantry = { x = 0 y = 3 }
							elite_infantry = { x = 1 y = 0 }
							elite_infantry = { x = 1 y = 1 }
							elite_infantry = { x = 1 y = 2 }
							elite_infantry = { x = 1 y = 3 }
							elite_infantry = { x = 2 y = 0 }
							elite_infantry = { x = 2 y = 1 }
							elite_infantry = { x = 2 y = 2 }
							elite_infantry = { x = 2 y = 3 }
						}
						support = {
							artillery = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
							recon = { x = 0 y = 2 }
						}
					}
					random_owned_controlled_state = {
						create_unit = {
							division = "division_template = \"Sichovi Striltsi\" start_experience_factor = 0.9"
							owner = ROOT
						}
						create_unit = {
							division = "division_template = \"Sichovi Striltsi\" start_experience_factor = 0.3"
							count = 3
							owner = ROOT
						}
					}
				}
				set_party_name = {
					ideology = paternal_autocrat
					name = UKR_national_populist_party
					long_name = UKR_national_populist_party_long
				}				
			}	
			else = {
				set_party_name = {
					ideology = paternal_autocrat
					name = UKR_paternal_autocrat_party2
					long_name = UKR_paternal_autocrat_party2_long
				}
				set_party_name = {
					ideology = national_populist
					name = UKR_paternal_autocrat_party2
					long_name = UKR_paternal_autocrat_party2_long
				}				
			}						
		}
		else = {
			delete_unit_template_and_units = {
				division_template = "Sichovi Striltsi"
				disband = yes #will refund equipment and manpower
			}
			delete_unit_template_and_units = {
				division_template = "Halytskyi korpus Sichovykh Striltsiv"
				disband = yes #will refund equipment and manpower
			}
		}
	}	
}
UKR_setup_dyrektoria_flags = {
	if = {
		limit = {
			NOT = { has_global_flag = UPR_dyrektoria_uprising_UPR }
		}
		set_global_flag = UPR_dyrektoria_uprising_UPR
	}
	set_global_flag = UPR_ukrainian_civil_war_ended
	set_global_flag = UKR_kingdom_exiled_in_Galicia
	clr_country_flag = UKR_dyrektoria_uprising_active
	clear_global_event_target = UKR_dyrektoria_headquarters		
	set_country_flag = UKR_dyrektoria_tree_unlocked
	mark_focus_tree_layout_dirty = yes			
}
UKR_setup_dyrektoria_international = {
	separate_peace_all_wars = yes
	GER_remove_from_mitteleuropa = yes
	MIE_remove_from_intermarium = yes
	set_country_flag = UKR_has_nationalized_NUSK
	remove_ideas = german-ukrainian_railways
	if = {
		limit = { is_in_tech_sharing_group = german_research }
		remove_from_tech_sharing_group = german_research
	}
	GER = {
		UKR = { clear_relations_with_PREV = yes }
		country_event = {
			id = ukrfor.100
			days = 5
		}
	}	
	hidden_effect = {
		every_possible_country = {
			limit = {
				has_socialist_government = yes
				is_dynamic_country = no
			}
			UKR = { clear_embargo_PREV = yes }
		}
		every_other_country = {
			limit = {
				OR = {
					tag = FRA
					tag = ENG
					tag = SRI
				}
			}
			add_opinion_modifier = { target = UKR modifier = KR_approves_of_govt }
		}
	}
}
UKR_setup_dyrektoria_popularities = {
	hidden_effect = {
		set_temp_variable = { UPR_tot_pop = UPR.party_popularity_100@totalist }
		set_temp_variable = { UPR_syn_pop = UPR.party_popularity_100@syndicalist }
		set_temp_variable = { UPR_rso_pop = UPR.party_popularity_100@radical_socialist }
		set_temp_variable = { UPR_sde_pop = UPR.party_popularity_100@social_democrat }
		set_temp_variable = { UPR_sli_pop = UPR.party_popularity_100@social_liberal }
		set_temp_variable = { UPR_mli_pop = UPR.party_popularity_100@market_liberal }
		set_temp_variable = { UPR_sco_pop = UPR.party_popularity_100@social_conservative }
		set_temp_variable = { UPR_ade_pop = UPR.party_popularity_100@authoritarian_democrat }
		set_temp_variable = { UPR_pau_pop = UPR.party_popularity_100@paternal_autocrat }
		set_temp_variable = { UPR_npo_pop = UPR.party_popularity_100@national_populist }
	
		set_popularities = {
			totalist = UPR_tot_pop
			syndicalist = UPR_syn_pop
			radical_socialist = UPR_rso_pop
			social_democrat = UPR_sde_pop
			social_liberal = UPR_sli_pop
			market_liberal = UPR_mli_pop
			social_conservative = UPR_sco_pop
			authoritarian_democrat = UPR_ade_pop
			paternal_autocrat = UPR_pau_pop
			national_populist = UPR_npo_pop
		}
		set_political_power = 0
	}
}
UKR_setup_dyrektoria_government = {
	set_politics = {
		ruling_party = social_democrat
		elections_allowed = no
	}
	add_tot_to_coalition = yes
	add_radsoc_to_coalition = yes
	add_soclib_to_coalition = yes
	hidden_effect = {
		clr_country_flag = UKR_triumvirs_power_struggle
		set_party_name = {
			ideology = social_democrat
			name = UKR_social_democrat_party4
			long_name = UKR_social_democrat_party4_long
		}		
		set_party_name = {
			ideology = social_liberal
			name = UKR_social_liberal_party2
			long_name = UKR_social_liberal_party2_long
		}
		UKR_remove_king = yes
		remove_ideas = UKR_political_instability
		remove_ideas = UKR_derzhavna_varta
		remove_ideas = UKR_martial_law
		remove_all_ministers = yes		
		add_ideas = {
			UKR_Vladimir_Vynnychenko_hog_sde
			UKR_Dmytro_Isaievych_for_sde
			UKR_Mykola_Shrag_eco_sde
			UKR_Mykhailo_Tkachenko_sec_rso
			UKR_Symon_Petliura_carm
			partial_economic_mobilisation
			extensive_conscription
		}
		create_country_leader = {
			name = "Serhiy Yefremov"
			desc = "POLITICS_SERHIY_YEFREMOV_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Serhiy_Yefremov.png"
			expire = "1.1.1"
			ideology = social_liberal_subtype
		}
	}
}
UKR_setup_upss_president = {
	remove_all_ministers = yes
	if = {
		limit = { has_country_flag = UKR_vasyl_first_president }
		if = {
			limit = { UKR_vasyl_president_in_power = no }
			if = {
				limit = { has_country_flag = UKR_vasyl_is_known_as_vasyl }
				create_country_leader = {
					name = "Vasyl Vyshyvanyi"
					desc = "POLITICS_VASYL_PRESIDENT_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg_suit.png"
					expire = "1.1.1"
					ideology = social_nationalism_subtype
				}
			}
			else = {
				create_country_leader = {
					name = "Vilhelm fon Habsburg-Lotarynzkyi"
					desc = "POLITICS_VASYL_PRESIDENT_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg_suit.png"
					expire = "1.1.1"
					ideology = social_nationalism_subtype
				}
			}				
			if = {
				limit = { has_country_flag = UKR_vasyl_has_old_portrait }
				set_country_leader_portrait = {
					ideology = authoritarian_democrat
					portrait = "gfx/leaders/UKR/Portrait_UKR_Vasyl_Habsburg_Old_Suit.png"
				}
			}
		}
		add_ideas = UKR_Vasyl_Vyshyvanyi_hog_ade
		add_ideas = UKR_Valentyn_Otamanovskyi_for_ade
	}
	else_if = {
		limit = { has_country_flag = UKR_upss_president_otamanovskyi }
		if = {
			limit = { 
				NOT = {
					has_country_leader = {
						name = "Valentyn Otamanovskyi"
						ruling_only = yes
					}
				}
			}
			create_country_leader = {
				name = "Valentyn Otamanovskyi"
				desc = "POLITICS_VALENTYN_OTAMANOVSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Valentin_Otamanovskyi.png"
				expire = "1.1.1"
				ideology = social_nationalism_subtype
			}
		}
		add_ideas = UKR_Valentin_Otamanovskyi_hog_ade
		add_ideas = UKR_Kost_Loskyi_for_ade
	}
	else_if = {
		limit = { has_completed_focus = UKR_Ukrainian_National_Democracy }
		if = {
			limit = { UKR_oleksander_hrekiv_in_power = no }
			create_country_leader = {
				name = "Oleksandr Hrekiv"
				desc = "POLITICS_OLEKSANDR_HREKIV_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Oleksandr_Hrekiv_civilian.png" 
				expire = "1.1.1"
				ideology = social_nationalism_subtype
			}
		}
		add_ideas = UKR_Oleksander_Hrekiv_hog_ade
		add_ideas = UKR_Valentyn_Otamanovskyi_for_ade
	}
	else_if = {
		limit = { has_completed_focus = UKR_Ukrainian_Socialism }
		if = {
			limit = { UKR_opanas_andriyevskyi_in_power = no }
			create_country_leader = {
				name = "Opanas Andriyevskyi"
				desc = "POLITICS_OPANAS_ANDRIYEVSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Opanas_Andriyevskyi.png"
				expire = "1.1.1"
				ideology = social_nationalism_subtype
			}
		}
		add_ideas = UKR_Opanas_Andrievskyi_hog_ade
		add_ideas = UKR_Kost_Loskyi_for_ade
	}
	else = {
		if = {
			limit = { UKR_oleksander_shapoval_in_power = no }
			create_country_leader = {
				name = "Oleksandr Shapoval"
				desc = "POLITICS_OLEKSANDER_SHAPOVAL_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Oleksandr_Shapoval.png"
				expire = "1.1.1"
				ideology = social_nationalism_subtype
			}
		}
		if = {
			limit = {
				NOT = { has_completed_focus = UKR_The_First_Independentist_Party }
			}
			complete_national_focus = UKR_The_First_Independentist_Party
		}
		if = {
			limit = {
				NOT = { has_completed_focus = UKR_Adopt_Conservative_Platform }
			}
			complete_national_focus = UKR_Adopt_Conservative_Platform
		}				
		add_ideas = UKR_Oleksander_Shapoval_hog_ade
		add_ideas = UKR_Valentyn_Otamanovskyi_for_ade
	}
	if = {
		limit = { 
			OR = {
				has_country_flag = UKR_upss_militarist_nationalist 
				has_country_flag = UKR_upss_socialist_nationalist 
			}
		}
		add_ideas = UKR_Oleksander_Natiyev_eco_ade
	}
	else_if = {
		limit = { 
			OR = {
				has_country_flag = UKR_upss_militarist_socialist 
				has_country_flag = UKR_upss_socialist_militarist 
			}
		}
		add_ideas = UKR_Mykhailo_Bilynskyi_eco_ade
	}
	else = {
		add_ideas = UKR_Yevhen_Arkhypenko_eco_ade
	}
	if = {
		limit = { 
			NOT = {
				has_country_flag = UKR_upss_militarist_nationalist 
				has_country_flag = UKR_upss_nationalist_militarist 
				has_country_flag = UKR_upss_socialist_militarist 
			}
			UKR_opanas_andriyevskyi_in_power = no
		}
		add_ideas = UKR_Opanas_Andrievskyi_sec_ade
	}
	else = {
		add_ideas = UKR_Volodymyr_Oskilko_sec_ade
	}	
	if = {
		limit = { has_country_flag = UKR_upss_ukrainian_conservatism }
		set_country_leader_ideology = ukrainian_conservatism_subtype
	}
	else_if = {
		limit = { has_completed_focus = UKR_Ukrainian_National_Democracy }
		set_country_leader_ideology = generic_national_democracy_subtype
	}
}
UKR_transfer_most_of_fleet_to_crimea = {
	set_country_flag = UKR_transfered_our_fleet_to_CRM
	transfer_ship = { prefer_name = "Soborna Ukraina" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Sv. Yevstafii" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Sv. Ivan Zlatoust" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Try Sviatyteli" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Rostyslav" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Heorhii Pobidonosets" type = battleship target = CRM }
	transfer_ship = { prefer_name = "Hetman Ivan Mazepa" type = heavy_cruiser target = CRM }
	transfer_ship = { prefer_name = "Svyrepyi" type = light_cruiser target = CRM }
	transfer_ship = { prefer_name = "Smetlyvyi" type = light_cruiser target = CRM }
	transfer_ship = { prefer_name = "Strohii" type = light_cruiser target = CRM }
	transfer_ship = { prefer_name = "Hnivnyi" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Bystryi" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Pospishnyi" type = destroyer target = CRM }	
	transfer_ship = { prefer_name = "Kyiv" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Chyhyryn" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Baturyn" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Lviv" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Ivan Vygovskyi" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Ivan Sirko" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Pylyp Orlyk" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Kost Hordiyenko" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Martyn Nebaba" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Ivan Pidkova" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Ivan Kotliarevskyi" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Lutsk" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Podniprovia" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Ternopil" type = destroyer target = CRM }
	transfer_ship = { prefer_name = "Vinnytsia" type = destroyer target = CRM }	
	transfer_ship = { prefer_name = "PCh-133" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-132" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-131" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-130" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-129" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-128" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-127" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-126" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-125" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-124" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-123" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-122" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-121" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-120" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-119" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-118" type = submarine target = CRM }
	transfer_ship = { prefer_name = "PCh-117" type = submarine target = CRM }	
}

CRM_transfer_all_fleet_to_UKR = {
	transfer_ship = { prefer_name = "Soborna Ukraina" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Sv. Yevstafii" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Sv. Ivan Zlatoust" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Try Sviatyteli" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Rostyslav" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Heorhii Pobidonosets" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Hetman Ivan Mazepa" type = heavy_cruiser target = UKR }
	transfer_ship = { prefer_name = "Svyrepyi" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Smetlyvyi" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Strohii" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Hnivnyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Bystryi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Pospishnyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Kyiv" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Chyhyryn" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Baturyn" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Lviv" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Vygovskyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Sirko" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Pylyp Orlyk" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Kost Hordiyenko" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Martyn Nebaba" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Pidkova" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Kotliarevskyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Lutsk" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Podniprovia" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ternopil" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Vinnytsia" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "PCh-133" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-132" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-131" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-130" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-129" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-128" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-127" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-126" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-125" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-124" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-123" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-122" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-121" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-120" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-119" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-118" type = submarine target = UKR }
	transfer_ship = { prefer_name = "PCh-117" type = submarine target = UKR }	
}

CRM_transfer_half_fleet_to_UKR = {
	transfer_ship = { prefer_name = "Soborna Ukraina" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Rostyslav" type = battleship target = UKR }
	transfer_ship = { prefer_name = "Hetman Ivan Mazepa" type = heavy_cruiser target = UKR }
	transfer_ship = { prefer_name = "Svyrepyi" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Smetlyvyi" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Strohii" type = light_cruiser target = UKR }
	transfer_ship = { prefer_name = "Kyiv" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Chyhyryn" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Baturyn" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Lviv" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Vygovskyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Sirko" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Pylyp Orlyk" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Kost Hordiyenko" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Martyn Nebaba" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Pidkova" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ivan Kotliarevskyi" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Lutsk" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Podniprovia" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Ternopil" type = destroyer target = UKR }
	transfer_ship = { prefer_name = "Vinnytsia" type = destroyer target = UKR }
}
UKR_setup_borotbyst_victory_no_war = {
	clr_global_flag = UKR_borotbyst_civil_war
	if = {
		limit = { is_guaranteed_by = AUS }
		AUS = { country_event = ukrfor.64 }
	}
	else = {
		GER = { country_event = ukrfor.50 }
	}
	clr_country_flag = UKR_joined_DA
	UKR_update_military = yes
	every_possible_country = {
		limit = {
			has_socialist_government = yes
			is_dynamic_country = no
		}
		UKR = { clear_embargo_PREV = yes }
	}
	every_other_country = {
		limit = {
			OR = {
				tag = FRA
				tag = ENG
				tag = SRI
			}
		}
		add_opinion_modifier = { target = UKR modifier = KR_approves_of_govt }
	}
	hidden_effect = {
		disband_twenty_percent_units_delete_equipment = yes
		## Hetman officers go to hell ##
		every_unit_leader = {
			limit = { has_unit_leader_flag = UKR_hetman_loyalist }
			set_nationality = XXA
		}
		## Dyrektoria officers join WSU ##
		every_unit_leader = { 
			limit = {
				NOT = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				NOT = { has_unit_leader_flag = UKR_bolshevist_officer }
				NOT = { has_trait = SOV_bolshevik_officer }
			}
			set_nationality = WSU 
		}
		## Borotbyst generals join UKR ##
		XXA = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				set_nationality = UKR
			}
		}
		USR = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = UKR_borotbyst_loyalist }
				set_nationality = UKR
			}
		}
		if = {
			limit = { UKR_petliura_in_power = yes}
			set_country_flag = UKR_borotbyst_against_petliura
		}
		else_if = {
			limit = { UKR_skrypnyk_in_power = yes }
			set_country_flag = UKR_borotbyst_against_skrypnyk
		}
		else_if = {
			limit = {
				OR = {
					UKR_upsr_in_power = yes
					UKR_usdrp_in_power = yes
					UKR_ukp_in_power = yes
					has_country_flag = UKR_dyrektoria_tree_unlocked
					UKR_upsf_in_power = yes
				}
			}
			set_country_flag = UKR_borotbyst_against_dyrektoria
		}
		clr_country_flag = UKR_dyrektoria_tree_unlocked
		set_party_name = {
			ideology = radical_socialist
			name = UKR_radical_socialist_party3
			long_name = UKR_radical_socialist_party3_long
		}
		set_party_name = {
			ideology = social_democrat
			name = UKR_social_democrat_party2
			long_name = UKR_social_democrat_party2_long
		}
		set_party_name = {
			ideology = syndicalist
			name = UKR_syndicalist_party
			long_name = UKR_syndicalist_party_long
		}
		clr_country_flag = UKR_agricultural_crisis
		clr_country_flag = UKR_triumvirs_power_struggle
		decrease_ruling_party_popularity_by_10 = yes
		UKR_remove_brotfrieden_without_events = yes
		UKR_teardown_investigation_decisions = yes
		remove_ideas = {
			UKR_derzhavna_varta
			UKR_borotbyst_uprising
			UKR_all_ukrainian_strike
			UKR_black_monday_3
			UKR_black_monday_2
			UKR_black_monday_1
			UKR_black_monday
			german-ukrainian_railways
			UKR_ger_some_concessions
			UKR_ger_all_concessions
			UKR_ger_all_concessions_harsh
			UKR_bel_some_concessions
			UKR_aus_some_concessions
			UKR_pol_some_concessions
			UKR_swe_some_concessions
			UKR_cze_some_concessions
			UKR_hol_some_concessions
			UKR_paying_compensations_0
			UKR_paying_compensations_1
			UKR_paying_compensations_2
			UKR_paying_compensations_3
			UKR_paying_compensations_4					
			UKR_ukrainian_compensation

			UKR_ratekommunismus
			UKR_decentralized_planning
			UKR_cultural_autonomy
			UKR_welfare
			UKR_municipal_socialism
			UKR_socialism_in_city
			UKR_indicative_planning
			UKR_small_business
			UKR_small_business_tax
			UKR_social_security
			UKR_street_demonstrations
			UKR_austromarxism_influence
			UKR_demsoc_constitution_0
			UKR_demsoc_constitution_1
			UKR_demsoc_constitution_1_1
			UKR_demsoc_constitution_2
			UKR_demsoc_constitution_2_1
			UKR_primacy_of_rada_1
			UKR_primacy_of_rada_2
			
			UKR_limited_soviets
			UKR_separation_of_powers
			UKR_apolitic_disciplined_army
			UKR_subordinate_peoples_militia
			UKR_general_conscription
			UKR_joint_state_planning
			UKR_trudova_respublika
			UKR_hope_for_future
			UKR_narodnik_const
			
			UKR_protofis_investments
			UKR_new_monarchy
			UKR_organic_corporatism_1
			UKR_organic_corporatism_2
			UKR_austrian_regent
			UKR_uskhd_1
			UKR_uskhd_2
			UKR_uskhd_2
			UKR_happy_workers
			UKR_ukrainian_agrarianism
			UKR_Constitution_National_Accord
			UKR_National_Rada
			UKR_charity

			UKR_local_radas_sun
			UKR_sunm_organisation
			UKR_plast_organisation
			UKR_sun_economy_1
			UKR_sun_economy_2
			UKR_sun_economy_3
			UKR_soborna_ukraina
			UKR_cult_of_konovalets
		
		}
		set_capital = { state = 202 remember_old_capital = no }	
	}
	set_cosmetic_tag = UKR_borotbyst
	create_country_leader = {
		name = "Oleksandr Shumskyi"
		desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
		expire = "1.1.1"
		ideology = anarcho_syndicalist_subtype
		traits = { UKR_fervent_revolutionary }
	}	
	create_country_leader = {
		name = "Oleksandr Shumskyi"
		desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
		expire = "1.1.1"
		ideology = radsoc_anarcho_syndicalist_subtype
		traits = { UKR_fervent_revolutionary }
	}
	create_country_leader = {
		name = "Levko Kovaliv"
		desc = "POLITICS_LEVKO_KOVALIV_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Lev_Kovaliv.png"
		expire = "1.1.1"
		ideology = socdem_narodism_subtype
	}
	set_politics = {
		ruling_party = radical_socialist
		elections_allowed = no
	}		
	delete_unit_template_and_units = {
		division_template = "Sichovi Striltsi"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Halytskyi korpus Sichovykh Striltsiv"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Petliurivtsi"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Kinnohirskyi Dyvizion"
		disband = yes #will refund equipment and manpower
	}
	remove_all_ministers = yes		
	add_ideas = {
		UKR_Oleksander_Shumsky_hog_rso
		UKR_Antin_Prikhodko_for_rso
		UKR_Panas_P_Lyubchenko_eco_rso
		UKR_Hryhorii_Hrynko_sec_rso
	}
	mark_focus_tree_layout_dirty = yes
}
UKR_setup_borotbyst_victory = {
	clr_global_flag = UKR_borotbyst_civil_war
	for_each_scope_loop = {
		array = UKR.UKR_starting_states_array
		
		if = {
			limit = { is_claimed_by = USR }
			remove_claim_by = USR
			add_core_of = USR
		}
	}
	if = {
		limit = { tag = UKR }
		annex_country = { target = USR }
	}
	else = {
		set_capital = { state = 202 remember_old_capital = no }					
	}
}
UKR_setup_borotbyst_victory_over_petliura = {
	UKR_setup_borotbyst_victory = yes
	if = {
		limit = { is_guaranteed_by = AUS }
		AUS = { country_event = ukrfor.64 }
	}
	else = {
		GER = { country_event = ukrfor.50 }
	}
	remove_puppet_and_leave_faction = yes
	peace_out_non_neighbours_after_leaving_faction = yes
	every_possible_country = {
		limit = {
			has_socialist_government = yes
			is_dynamic_country = no
		}
		UKR = { clear_embargo_PREV = yes }
	}
	every_other_country = {
		limit = {
			OR = {
				tag = FRA
				tag = ENG
				tag = SRI
			}
		}
		add_opinion_modifier = { target = UKR modifier = KR_approves_of_govt }
	}
	clr_country_flag = UKR_petliura_not_in_power_wait_elections
	set_country_flag = UKR_borotbyst_against_petliura
	set_party_name = {
		ideology = radical_socialist
		name = UKR_radical_socialist_party3
		long_name = UKR_radical_socialist_party3_long
	}
	set_party_name = {
		ideology = syndicalist
		name = UKR_syndicalist_party
		long_name = UKR_syndicalist_party_long
	}
	UKR_remove_brotfrieden_without_events = yes
	remove_ideas = {
		UKR_derzhavna_varta
		UKR_borotbyst_uprising
		UKR_all_ukrainian_strike
		UKR_agricultural_crisis_idea_4
		UKR_agricultural_crisis_idea_3
		UKR_agricultural_crisis_idea_2
		UKR_agricultural_crisis_idea_1
		UKR_agricultural_crisis_idea
		UKR_black_monday_3
		UKR_black_monday_2
		UKR_black_monday_1
		UKR_black_monday
		german-ukrainian_railways
		UKR_ger_some_concessions
		UKR_ger_all_concessions
		UKR_ger_all_concessions_harsh
		UKR_bel_some_concessions
		UKR_aus_some_concessions
		UKR_pol_some_concessions
		UKR_swe_some_concessions
		UKR_cze_some_concessions
		UKR_hol_some_concessions
		UKR_paying_compensations_0
		UKR_paying_compensations_1
		UKR_paying_compensations_2
		UKR_paying_compensations_3
		UKR_paying_compensations_4
		UKR_ukrainian_compensation

		UKR_ratekommunismus
		UKR_decentralized_planning
		UKR_cultural_autonomy
		UKR_welfare
		UKR_municipal_socialism
		UKR_socialism_in_city
		UKR_indicative_planning
		UKR_small_business
		UKR_small_business_tax
		UKR_social_security
		UKR_street_demonstrations
		UKR_austromarxism_influence
		UKR_demsoc_constitution_0
		UKR_demsoc_constitution_1
		UKR_demsoc_constitution_1_1
		UKR_demsoc_constitution_2
		UKR_demsoc_constitution_2_1		
		
		UKR_limited_soviets
		UKR_primacy_of_rada_1
		UKR_primacy_of_rada_2
		UKR_separation_of_powers
		UKR_apolitic_disciplined_army
		UKR_subordinate_peoples_militia
		UKR_general_conscription:0 "General Draft"
		UKR_joint_state_planning
		UKR_trudova_respublika
		UKR_hope_for_future
		UKR_narodnik_const
		
		UKR_protofis_investments
		UKR_new_monarchy
		UKR_organic_corporatism
		UKR_austrian_regent
		UKR_uskhd
		UKR_happy_workers
		UKR_ukrainian_agrarianism
		UKR_Constitution_National_Accord
		UKR_National_Rada
		UKR_charity

		UKR_local_radas_sun
		UKR_sunm_organisation
		UKR_plast_organisation
		UKR_sun_economy_1
		UKR_sun_economy_2
		UKR_sun_economy_3
		UKR_soborna_ukraina
		UKR_cult_of_konovalets
	
	}
	set_cosmetic_tag = UKR_borotbyst
	create_country_leader = {
		name = "Oleksandr Shumskyi"
		desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
		expire = "1.1.1"
		ideology = anarcho_syndicalist_subtype
		traits = { UKR_fervent_revolutionary }
	}	
	create_country_leader = {
		name = "Oleksandr Shumskyi"
		desc = "POLITICS_OLEKSANDER_SHUMSKYI_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Oleksander_Shumsky.png" 
		expire = "1.1.1"
		ideology = radsoc_anarcho_syndicalist_subtype
		traits = { UKR_fervent_revolutionary }
	}
	create_country_leader = {
		name = "Levko Kovaliv"
		desc = "POLITICS_LEVKO_KOVALIV_DESC"
		picture = "gfx/leaders/UKR/Portrait_UKR_Lev_Kovaliv.png"
		expire = "1.1.1"
		ideology = socdem_narodism_subtype
	}
	mark_focus_tree_layout_dirty = yes
	set_political_power = 0
	set_politics = {
		ruling_party = radical_socialist
		elections_allowed = no
	}
	delete_unit_template_and_units = {
		division_template = "Sichovi Striltsi"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Halytskyi korpus Sichovykh Striltsiv"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Petliurivtsi"
		disband = yes #will refund equipment and manpower
	}
	delete_unit_template_and_units = {
		division_template = "Kinnohirskyi Dyvizion"
		disband = yes #will refund equipment and manpower
	}
	every_unit_leader = {
		limit = {
			NOT = {	has_unit_leader_flag = UKR_borotbyst_loyalist }
		}
		set_nationality = WSU
	}
	set_war_support = 0.6
	set_country_flag = UKR_disable_borotbist_uprisings
	if = {
		limit = {
			NOT = { has_template = "Ukrainska Radianska Dyviziia" }
		}
		division_template = {
			name = "Ukrainska Radianska Dyviziia"
			division_names_group = USR_INF_01
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
			}
			support = {
				artillery = { x = 0 y = 0 }
			}
		}
	}
	every_country_division = {
		limit = {
			division_has_majority_template = infantry
		}
		change_division_template = {
			division_template = "Ukrainska Radianska Dyviziia" 
		}
	}
	division_template = {
		name = "Chervona Hvardiia"
		division_names_group = UKR_MIL_01
		regiments = {
			militia = { x = 0 y = 0 }
			militia = { x = 0 y = 1 }
			militia = { x = 0 y = 2 }
			militia = { x = 1 y = 0 }
			militia = { x = 1 y = 1 }
			militia = { x = 1 y = 2 }
		}
	}
}
UKR_setup_not_borotbyst_victory = {
	clr_global_flag = UKR_borotbyst_civil_war
	set_country_flag = UKR_disable_borotbist_uprisings
	add_to_variable = { UKR_Land_Reform_Borotbysts_extra = -15 }	
	annex_country = {
		target = USR
	}
	every_owned_state = {
		limit = {
			is_claim_or_core_of_ROOT = yes
			is_owned_by = ROOT				
		}
		remove_claim_by = ROOT
		add_core_of = ROOT
		remove_core_of = USR
		remove_claim_by = USR
	}		
	hidden_effect = {
		if = { 
			limit = { UKR_petliura_in_power = yes }
			if = {
				limit = {
					has_completed_focus = UKR_Stop_Radical_Left_Reforms
					has_completed_focus = UKR_Work_With_Bouregoisie
					has_completed_focus = UKR_Moderate_Taxation
					NOT = { country_exists = USR }
				}
				if = {
					limit = {
						is_ai = yes
						has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA }
					}
					complete_national_focus = UKR_National_Union_Holds
					country_event = ukrsoc.290
				}
				else_if = {
					limit = {
						OR = {
							check_variable = { UKR_uns_right_authority > 65 }
							AND = {
								is_ai = yes
								has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_USDRP }
							}
						}
					}
					complete_national_focus = UKR_Left_Wing_Splits
					country_event = ukrsoc.294
				}
				else_if = {
					limit = {
						OR = {
							check_variable = { UKR_uns_left_authority > 65 }
							AND = {
								is_ai = yes
								has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_UPSF }
							}
						}
					}
					complete_national_focus = UKR_Right_Wing_Splits
					country_event = ukrsoc.297
				}
				else = {
					complete_national_focus = UKR_National_Union_Holds
					country_event = ukrsoc.290
				}
			}
		}
		remove_ideas = {
			UKR_all_ukrainian_strike
			UKR_borotbyst_uprising
		}
	}
}

WSU_create_buffer_zone = {
	if = {
		limit = { has_global_flag = UPR_dyrektoria_become_exiled_in_WSU }
		clr_global_flag = UPR_dyrektoria_become_exiled_in_WSU
		set_global_flag = UPR_ukrainian_civil_war_ended
		hidden_effect = {
			WSU = {
				every_unit_leader = {
					limit = { NOT = { has_trait = UKR_uga_officer } }
					set_nationality = UPR
				}
				drop_cosmetic_tag = yes
			}
			clear_global_event_target = UKR_dyrektoria_headquarters
			UPR = { 
				save_global_event_target_as = UKR_dyrektoria_headquarters 
			}
		}
	}
	GAL = {
		every_unit_leader = {
			limit = { has_trait = UKR_uga_officer }
			set_nationality = WSU
		}
	}
	set_cosmetic_tag = WSU_buffer_zone
	set_politics = {
		ruling_party = market_liberal
		elections_allowed = no
	}
	get_current_government_type = yes
	AUS = {
		set_autonomy = {
			target = WSU
			autonomous_state = kr_autonomous_puppet
		}
	}
	restore_previous_government_type = yes
}
WSU_create_kronland = {
	if = {
		limit = { has_global_flag = UPR_dyrektoria_become_exiled_in_WSU }
		clr_global_flag = UPR_dyrektoria_become_exiled_in_WSU
		set_global_flag = UPR_ukrainian_civil_war_ended
		hidden_effect = {
			every_unit_leader = {
				limit = { NOT = { has_trait = UKR_uga_officer } }
				set_nationality = UPR
			}
			drop_cosmetic_tag = yes
			clear_global_event_target = UKR_dyrektoria_headquarters
			UPR = { 
				save_global_event_target_as = UKR_dyrektoria_headquarters 
			}
		}
	}
	GAL = {
		every_unit_leader = {
			limit = { has_trait = UKR_uga_officer }
			set_nationality = WSU
		}
	}
	set_cosmetic_tag = WSU_austrian
	set_politics = {
		ruling_party = social_conservative
		elections_allowed = no
	}
	UKR_create_vasyl = yes
	get_current_government_type = yes
	AUS = {
		set_autonomy = {
			target = WSU
			autonomous_state = kr_autonomous_puppet
		}
	}
	restore_previous_government_type = yes
}
WSU_create_rebellion = {
	set_global_flag = WSU_first_rebellion
	every_state = {
		limit = {
			is_east_galicia = yes
			owned_by_austria_or_puppet = yes
		}
		set_demilitarized_zone = no
		if = {
			limit = { has_resistance = yes }
			cancel_resistance = yes
		}
		force_disable_resistance = { clear = yes }
		WSU = { 
			transfer_state = PREV
			add_state_core = PREV
		}
		hidden_effect = { add_core_of = GAL }
	}
	91 = { set_demilitarized_zone = yes }
	if = {
		limit = {
			has_global_flag = UPR_dyrektoria_uprising_UPR
		}
		every_other_country = {
			limit = {
				OR = {
					original_tag = UKR
					tag = UPR
				}
			}
			every_unit_leader = {
				limit = { has_trait = UKR_uga_officer }
				set_nationality = WSU
			}
		}
	}
	else = {
		GAL = {
			every_unit_leader = {
				limit = { has_trait = UKR_uga_officer }
				set_nationality = WSU
			}
			set_capital = { state = 1124 }			
		}
	}
	set_temp_variable = { WSU_coup_popularity = UKR_ukrainian_resistance }
	divide_temp_variable = { WSU_coup_popularity = 400 }
	WSU = {
		transfer_technology_without_doctrines = yes
		drop_cosmetic_tag = yes
		if = {
			limit = { 
				has_global_flag = WSU_totalist_uvo
			}
			set_political_party = {
				ideology = totalist
				popularity = WSU_coup_popularity
			}
		}
		else = {
			set_political_party = {
				ideology = paternal_autocrat
				popularity = WSU_coup_popularity
			}
		}
		division_template = {
			name = "Ukrainska Halytska Armiia"
			division_names_group = UKR_INF_03
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
			}
			support = {
				engineer = { x = 0 y = 0 }
			}
		}
		division_template = {
			name = "Halytskyi korpus Sichovykh Striltsiv"
			division_names_group = UKR_ELI_02
			regiments = {
				elite_infantry = { x = 0 y = 0 }
				elite_infantry = { x = 0 y = 1 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
			}
			support = {
				artillery = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
		random_owned_controlled_state = {
			create_unit = {
				division = "name = \"5-ta Sokalska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.3 start_equipment_factor = 1"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"6-ta Ravska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.3 start_equipment_factor = 1"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"4-ta Zolochivska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.2 start_equipment_factor = 0.9"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"3-ta Berezhanska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.2 start_equipment_factor = 0.95"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"2-ga Kolomyiska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.2 start_equipment_factor = 0.95"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"1-sha Hirska bryhada\" division_template = \"Ukrainska Halytska Armiia\" start_experience_factor = 0.2 start_equipment_factor = 0.95"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
			create_unit = {
				division = "name = \"1-sha bryhada USS\" division_template = \"Halytskyi korpus Sichovykh Striltsiv\" start_experience_factor = 0.9 start_equipment_factor = 0.92"
				allow_spawning_on_enemy_provs = yes
				owner = WSU
			}
		}
		add_equipment_to_stockpile = {
			type = fighter_equipment_0
			amount = 25
			producer = WSU
		}
	}
	ROM = {
		country_event = {
			id = wsu.12
			days = 15
		}
	}
}
WSU_setup_ukraine = {
	remove_ideas = WSU_Poor_Administration_1
	hidden_effect = {
		UKR = {
			separate_peace_all_wars = yes
			set_global_flag = UPR_dyrektoria_joined_peacefully
			clr_global_flag = UPR_dyrektoria_uprising_UPR
			clr_global_flag = UPR_dyrektoria_become_exiled_in_WSU
			set_global_flag = UPR_ukrainian_civil_war_ended
			clear_all_relations = yes
			remove_from_tech_sharing_group = german_research
			every_unit_leader = {
				retire = yes
			}				
			remove_ideas = UKR_derzhavna_varta
			if = {
				limit = { 
					has_country_flag = UKR_KUB_Convention_saved
					KUB = { has_idea = KUB_Unification_Sentiments_1 }
				}
				clr_country_flag = UKR_KUB_Convention_saved
				add_ideas = UKR_KUB_Convention
			}
			if = {
				limit = { 
					has_country_flag = UKR_agricultural_crisis_idea_saved
				}
				clr_country_flag = UKR_agricultural_crisis_idea_saved
				add_ideas = UKR_agricultural_crisis_idea
				add_ideas = UKR_village_outflow
			}
			remove_all_ministers = yes
			add_ideas = {
				UKR_Yevhen_Petrushevych_hog_sde 
				UKR_Sydor_Holubovych_for_sde
				UKR_Stepan_Baran_eco_sli
				UKR_Vasyl_Mudryi_sec_mli
				
				WSU_army_3
				WSU_partisan_warfare_idea
				WSU_nascent_military_industry
			}
						
			drop_cosmetic_tag = yes
			set_capital = { state = 202 }		
			copy_government_of_ROOT = yes
			set_stability = WSU@stability
			UKR_remove_king = yes
			create_country_leader = {
				name = "Mykola Stsiborskyi"
				desc = "POLITICS_MYKOLA_STSIBORSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Stsiborskyi.png"
				expire = "1.1.1"
				ideology = natsynd_subtype
			}
			create_country_leader = {
				name = "Ivan Maistrenko"
				desc = "POLITICS_IVAN_MAISTRENKO_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Ivan_Maistrenko.png"
				expire = "1.1.1"
				ideology = market_socialist_subtype
			}
			create_country_leader = {
				name = "Yevhen Petrushevych"
				desc = "POLITICS_YEVHEN_PETRUSHEVYCH_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Yevhen_Petrushevich.png"
				expire = "1.1.1"
				ideology = socdem_junta_subtype
			}
			create_country_leader = {
				name = "Mykola Mikhnovskyi"
				desc = "POLITICS_MYKOLA_MIKHHNOVSKY_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Mikhnovsky.png"
				expire = "1.1.1"
				ideology = social_liberal_subtype
			}
			create_country_leader = {
				name = "Dmytro Levytskyi"
				desc = "POLITICS_DMYTRO_LEVYTSKYI_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Dmytro_Levytsky.png"
				expire = "1.1.1"
				ideology = liberal_conservative_subtype
			}
			create_country_leader = {
				name = "Andriy Melnyk"
				desc = "POLITICS_ANDRIY_MELNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
				expire = "1.1.1"
				ideology = junta_subtype
			}
			create_country_leader = {
				name = "Andriy Melnyk"
				desc = "POLITICS_ANDRIY_MELNYK_DESC"
				picture = "gfx/leaders/UKR/Portrait_UKR_Andriy_Melnyk_Extra.png"
				expire = "1.1.1"
				ideology = militarism_subtype
			}
			set_party_name = {
				ideology = totalist
				name = WSU_totalist_party
				long_name = WSU_totalist_party_long
			}			
			set_party_name = {
				ideology = radical_socialist
				name = WSU_radical_socialist_party
				long_name = WSU_radical_socialist_party
			}
			set_party_name = {
				ideology = social_democrat
				name = WSU_social_democrat_party
				long_name = WSU_social_democrat_party
			}
			set_party_name = {
				ideology = market_liberal
				name = WSU_market_liberal_party
				long_name = WSU_market_liberal_party_long
			}
			set_party_name = {
				ideology = social_liberal
				name = WSU_social_liberal_party
				long_name = WSU_social_liberal_party_long
			}
			set_party_name = {
				ideology = paternal_autocrat
				name = WSU_paternal_autocrat_party
				long_name = WSU_paternal_autocrat_party_long
			}
			set_party_name = {
				ideology = national_populist
				name = WSU_paternal_autocrat_party
				long_name = WSU_paternal_autocrat_party_long
			}
		}
		WSU = {
			every_unit_leader = { set_nationality = UKR }
			every_enemy_country = { 
				declare_war_on = {
					target = UKR
					type = annex_everything
				}
			}
		}
	}
	UKR = {
		annex_country = {
			target = WSU
			transfer_troops = yes
		}
		set_global_flag = UPR_ukrainian_civil_war_ended
		clr_country_flag = UKR_dyrektoria_uprising_active
		clear_global_event_target = UKR_dyrektoria_headquarters		
		clr_country_flag = UKR_dyrektoria_tree_unlocked
		mark_focus_tree_layout_dirty = yes		
		change_tag_from = ROOT
	}
}

# congress
UKR_increase_ukapist = {
	custom_effect_tooltip = UKR_increase_ukapist
	add_to_variable = { UKR_ukapist_authority = 1 }
}
UKR_increase_eser = {
	custom_effect_tooltip = UKR_increase_eser
	add_to_variable = { UKR_eser_authority = 1 }
}
UKR_increase_esdek = {
	custom_effect_tooltip = UKR_increase_esdek
	add_to_variable = { UKR_esdek_authority = 1 }
}
UKR_move_upsr_leader_to_radsoc = {
	if = {
		limit = {
			has_country_leader = {
				name = "Levko Kovaliv"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Levko Kovaliv"
			desc = "POLITICS_LEVKO_KOVALIV_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Lev_Kovaliv.png"
			expire = "1.1.1"
			ideology = narodism_subtype
		}
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Mykola Kovalevskyi"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Mykola Kovalevskyi"
			desc = "POLITICS_MYKOLA_KOVALEVSKYI_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Kovalevskyi.png"
			expire = "1.1.1"
			ideology = narodism_subtype
			traits = { UKR_cooperator }
		}	
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Pavlo Khristiuk"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Pavlo Khristiuk"
			desc = "POLITICS_PAVLO_KHRISTIUK_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Khrystiuk.png"
			expire = "1.1.1"
			ideology = narodism_subtype
			traits = { UKR_cooperator }
		}	
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Mykyta Shapoval"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Mykyta Shapoval"
			desc = "POLITICS_MYKYTA_SHAPOVAL_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Mykyta_Shapoval.png"
			expire = "1.1.1"
			ideology = narodism_subtype
			traits = { UKR_forester }
		}	
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Mykhailo Hrushevskyi"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Mykhailo Hrushevskyi"
			desc = "POLITICS_MYKHAILO_HRUSHEVSKYI_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Mykhailo_Hrushevsky.png"
			expire = "1.1.1"
			ideology = narodism_subtype
			traits = { 
				UKR_first_premier
			}
		}	
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Vsevolod Holubovych"
				ruling_only = yes
			}
		}
		create_country_leader = {
			name = "Vsevolod Holubovych"
			desc = "POLITICS_VSEVOLOD_HOLUBOVYCH_DESC"
			picture = "gfx/leaders/UKR/Portrait_UKR_Vsevolod_Holubovych.png" 
			expire = "1.1.1"
			ideology = narodism_subtype
		}
	}
}

UKR_USDRP_more_left = {
	if = {
		limit = {
			NOT = { has_completed_focus = UKR_Democratic_Socialist_Constitution }
		}
		custom_effect_tooltip = UKR_USDRP_more_left
		add_to_variable = { UKR_USDRP_Status = -1 }
		if = {
			limit = {
				check_variable = { UKR_USDRP_Status < 1 }
				NOT = { has_country_leader_ideology = socdem_democratic_socialism_subtype }
			}
			set_country_leader_ideology = socdem_democratic_socialism_subtype
		}
		else_if = {
			limit = {
				check_variable = { UKR_USDRP_Status < -1 }
				NOT = { has_country_leader_ideology = syndie_social_democrat_subtype }
			}
			set_country_leader_ideology = syndie_social_democrat_subtype
		}
		if = {
			limit = {
				check_variable = { UKR_USDRP_Status < -3 }
			}
			if = {
				limit = { 
					NOT = { has_active_mission = UKR_rightwing_complains }
					NOT = { has_country_flag = UKR_rightwing_appeased }
					NOT = { has_government = radical_socialist }
				}
				activate_mission = UKR_rightwing_complains
			}
		}
		clamp_variable = {
			var = UKR_USDRP_Status
			min = -4
			max = 4
		}
		hidden_effect = {
			add_popularity = {
				ideology = social_democrat
				popularity = 0.02
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.01
			}
		}
	}
}
UKR_USDRP_more_right = {
	if = {
		limit = {
			NOT = { has_completed_focus = UKR_Democratic_Socialist_Constitution }
		}
		custom_effect_tooltip = UKR_USDRP_more_right
		add_to_variable = { UKR_USDRP_Status = 1 }
		if = {
			limit = {
				check_variable = { UKR_USDRP_Status > -1 }
				check_variable = { UKR_USDRP_Status < 1 }
				NOT = { has_country_leader_ideology = socdem_democratic_socialism_subtype }
			}
			if = {
				limit = { has_government = radical_socialist }
				set_politics = {
					ruling_party = social_democrat
					elections_allowed = yes
				}
			}
			set_country_leader_ideology = socdem_democratic_socialism_subtype
		}
		else_if = {
			limit = {
				check_variable = { UKR_USDRP_Status > 1 }
				NOT = { has_country_leader_ideology = social_democrat_subtype }
			}
			set_country_leader_ideology = social_democrat_subtype
		}
		if = {
			limit = {
				check_variable = { UKR_USDRP_Status > 3 }
			}
			if = {
				limit = { 
					NOT = { has_active_mission = UKR_leftwing_complains }
					NOT = { has_country_flag = UKR_leftwing_appeased }
				}
				activate_mission = UKR_leftwing_complains
			}
		}
		clamp_variable = {
			var = UKR_USDRP_Status
			min = -4
			max = 4
		}
		hidden_effect = {
			add_popularity = {
				ideology = social_democrat
				popularity = 0.02
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.01
			}
		}
	}
}
UKR_USDRP_more_center = {
	if = {
		limit = {
			NOT = { has_completed_focus = UKR_Democratic_Socialist_Constitution }
		}
		custom_effect_tooltip = UKR_USDRP_more_center
		if = {
			limit = {
				check_variable = { UKR_USDRP_Status < -1 }
			}
			add_to_variable = { UKR_USDRP_Status = 1 }
			if = {
				limit = {
					check_variable = { UKR_USDRP_Status > -1 }
					NOT = { has_country_leader_ideology = socdem_democratic_socialism_subtype }
				}
				if = {
					limit = { has_government = radical_socialist }
					set_politics = {
						ruling_party = social_democrat
						elections_allowed = yes
					}
				}
				set_country_leader_ideology = socdem_democratic_socialism_subtype
			}
		}
		else_if = {
			limit = {
				check_variable = { UKR_USDRP_Status > 1 }
			}
			add_to_variable = { UKR_USDRP_Status = -1 }
			if = {
				limit = {
					check_variable = { UKR_USDRP_Status < 1 }
					NOT = { has_country_leader_ideology = socdem_democratic_socialism_subtype }
				}
				set_country_leader_ideology = socdem_democratic_socialism_subtype
			}
		}
		hidden_effect = {
			add_popularity = {
				ideology = social_democrat
				popularity = 0.01
			}
			add_popularity = {
				ideology = social_liberal
				popularity = -0.01
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = -0.01
			}
		}
	}
}
UKR_setup_red_kyiv = {
	unlock_decision_category_tooltip = UKR_Red_Kyiv_category
	add_ideas = UKR_red_kyiv
	hidden_effect = {
		country_event = {
			id = ukrsoc.151
			days = 40
			random_days = 90
		}
		set_variable = { UKR_red_kyiv_pp = 0.05 }
		set_variable = { UKR_red_kyiv_stability = 0.02 }
		set_variable = { UKR_red_kyiv_weekly_manpower = 10 }
		if = {
			limit = { has_government = social_democrat }
			set_variable = { UKR_red_kyiv_sd_drift = 0.02 }
			set_variable = { UKR_red_kyiv_rs_drift = 0 }
		}
		else = {
			set_variable = { UKR_red_kyiv_sd_drift = 0.01 }
			set_variable = { UKR_red_kyiv_rs_drift = 0.01 }
		}
				
		set_variable = { UKR_red_kyiv_state_building_slots = 0.1 }
		set_variable = { UKR_red_kyiv_state_local_factories = 0.15 }
		set_variable = { UKR_red_kyiv_state_local_manpower = 0 }
		set_variable = { UKR_red_kyiv_state_local_resources = 0 }
		set_variable = { UKR_red_kyiv_state_local_supplies = 0 }
		
		add_dynamic_modifier = { modifier = UKR_red_kyiv_modifier }
		set_variable = { UKR_kyiv_budget_debt = 0 }
		set_variable = { UKR_kyiv_budget = 30 }
		set_variable = { UKR_kyiv_budget_monthly = 0 }
		set_variable = { UKR_red_kyiv_popularity = party_popularity@social_democrat }
		multiply_variable = { UKR_red_kyiv_popularity = 100 }
		202 = {
			add_dynamic_modifier = { modifier = UKR_red_kyiv_state_modifier }
			set_temp_variable = { UKR_kyiv_budget_temp = state_population_k } #2619
			multiply_temp_variable = { UKR_kyiv_budget_temp = 0.6 } # kinda adult population
			multiply_temp_variable = { UKR_kyiv_budget_temp = 15 } #taxes
			divide_temp_variable = { UKR_kyiv_budget_temp = 10000 } #31 mln would be nice
			add_to_variable = { PREV.UKR_kyiv_budget = UKR_kyiv_budget_temp }
			add_to_variable = { PREV.UKR_kyiv_budget_monthly = UKR_kyiv_budget_temp }
		}
	}
	force_update_dynamic_modifier = yes
}
UKR_monthly_red_kyiv_recalc = {
	if = {
		limit = { 
			check_variable = { UKR_kyiv_budget < 0 }
		}
		set_temp_variable = { UKR_kyiv_budget_to_debt = UKR_kyiv_budget }
		multiply_temp_variable = { UKR_kyiv_budget_to_debt = -1 }
		add_to_variable = { UKR_kyiv_budget_debt = UKR_kyiv_budget_to_debt }
	}
	if = {
		limit = {
			check_variable = { UKR_kyiv_budget_debt > 0 }
		}
		multiply_variable = { UKR_kyiv_budget_debt = 1.05 }
	}
	set_temp_variable = { UKR_red_kyiv_budget_change = UKR_kyiv_budget_monthly }
	UKR_increase_kyiv_budget_by_sum = yes
	if = {
		limit = {
			check_variable = { UKR_kyiv_budget < 11 }
		}
		country_event = ukrsoc.152
	}
	force_update_dynamic_modifier = yes
}
# requires a temp variable UKR_red_kyiv_budget_change
UKR_increase_kyiv_budget_by_sum = {
	effect_tooltip = {
		add_to_variable = {
			UKR_kyiv_budget = UKR_red_kyiv_budget_change
			tooltip = UKR_increase_kyiv_budget_by_sum_tooltip
		}
	}

	# add the variable
	add_to_variable = { UKR_kyiv_budget = UKR_red_kyiv_budget_change }
}
# requires a temp variable UKR_red_kyiv_budget_monthly_change
UKR_increase_kyiv_budget_monthly_by_sum = {
	effect_tooltip = {
		add_to_variable = {
			UKR_kyiv_budget_monthly = UKR_red_kyiv_budget_monthly_change
			tooltip = UKR_increase_kyiv_budget_monthly_by_sum_tooltip
		}
	}

	# add the variable
	add_to_variable = { UKR_kyiv_budget_monthly = UKR_red_kyiv_budget_monthly_change }
}
# requires a temp variable UKR_red_kyiv_pop_change
UKR_increase_red_kyiv_popularity = {
	effect_tooltip = {
		add_to_variable = {
			UKR_kyiv_budget_monthly = UKR_red_kyiv_pop_change
			tooltip = UKR_increase_red_kyiv_popularity_tooltip
		}
	}

	# lower limit = legitimacy * -1
	set_temp_variable = { UKR_lower_limit = UKR_red_kyiv_popularity }
	multiply_temp_variable = { UKR_lower_limit = -1 }

	# upper limit = 100 - legitimacy
	set_temp_variable = { UKR_upper_limit = 100 }
	subtract_from_temp_variable = { UKR_upper_limit = UKR_red_kyiv_popularity }

	# avoid values outside the allowed range
	clamp_temp_variable = {
		var = UKR_red_kyiv_pop_change
		min = UKR_lower_limit
		max = UKR_upper_limit
	}

	# add the variable
	add_to_variable = { UKR_red_kyiv_popularity = UKR_red_kyiv_pop_change }
	
	clamp_variable = {
		var = UKR_red_kyiv_popularity
		min = 0
		max = 100
	}
}

UKR_increase_esef = {
	if = {
		limit = {
			NOT = { has_global_flag = UPR_soclibs_leave_dyrektoria }
		}
		custom_effect_tooltip = UKR_increase_esef
		add_to_variable = { UKR_esef_authority = 1 }
	}
}

UKR_upgrade_template_and_divisions = {
	if = {
		limit = {
			has_variable = UKR_militia_template_level
			check_variable =  { UKR_militia_template_level < 2 }
		}
		add_units_to_division_template = {
			template_name = "Zemske Opolchennia"
			regiments = {
				militia = 0
				militia = 0 
			}
		}
	}
	else_if = {
		limit = {
			has_variable = UKR_militia_template_level
			check_variable =  { UKR_militia_template_level < 4 }
		}
		add_units_to_division_template = {
			template_name = "Zemske Opolchennia"
			regiments = {
				militia = 1
				militia = 1 
			}
		}
	}
	else_if = {
		limit = {
			has_variable = UKR_militia_template_level
			check_variable =  { UKR_militia_template_level < 6 }

		}
		add_units_to_division_template = {
			template_name = "Zemske Opolchennia"
			regiments = {
				militia = 2
				militia = 2 
			}
		}
	}
	else_if = {
		limit = {
			has_variable = UKR_militia_template_level
			check_variable =  { UKR_militia_template_level < 8 }

		}
		add_units_to_division_template = {
			template_name = "Zemske Opolchennia"
			regiments = {
				militia = 3
				militia = 3 
			}
		}
	}
	else_if = {
		limit = {
			has_variable = UKR_militia_template_level
			check_variable =  { UKR_militia_template_level < 10 }
		}
		add_units_to_division_template = {
			template_name = "Zemske Opolchennia"
			regiments = {
				militia = 4
				militia = 4 
			}
		}
	}
	if = { #Increasing the Militia Level variable 
		limit = {
			has_variable = UKR_militia_template_level
			check_variable = { UKR_militia_template_level < 10 }
		}
		add_to_variable = { UKR_militia_template_level = 1 }
	}
	else_if = {
		limit = {
			NOT = { has_variable = UKR_militia_template_level }  
		}
		division_template = {
			name = "Zemske Opolchennia"
			force_allow_recruiting = yes
			priority = 1
			template_counter = 70
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
			}
			support = {

			}
			division_cap = 15 
		}
		set_variable = { UKR_militia_template_level = 1 }
	}
}

UKR_increase_militia_cap = { 
	effect_tooltip = {
		set_temp_variable = { UKR_new_militia_cap_for_tooltip = UKR_militia_division_cap }
		add_to_temp_variable = { UKR_new_militia_cap_for_tooltip = UKR_militia_cap_increase }
		set_division_template_cap = { 
			division_template = "Zemske Opolchennia" 
			division_cap = UKR_new_militia_cap_for_tooltip   
		}
	}
	hidden_effect = {
		add_to_variable = { UKR_militia_division_cap = UKR_militia_cap_increase }
		clamp_variable = {
			var = UKR_militia_division_cap
			min = 0 
			max = UKR_max_militia_division_cap
		}  
		set_division_template_cap = { 
			division_template = "Zemske Opolchennia" 
			division_cap = UKR_militia_division_cap
		}
	}
}
# requires a temp variable UKR_federal_unity_change
UKR_change_federal_unity = {
	# convert percent to absolute
	if = {
		limit = {
			check_variable = { UKR_federal_unity_change > -1 }
			check_variable = { UKR_federal_unity_change < 1 }
		}
		multiply_temp_variable = { UKR_federal_unity_change = 100 }
	}

	# tooltip
	effect_tooltip = {
		add_to_variable = {
			ukr_federal_unity = UKR_federal_unity_change
			tooltip = UKR_federal_unity_tooltip
		}
	}

	# lower limit = legitimacy * -1
	set_temp_variable = { UKR_lower_limit = ukr_federal_unity }
	multiply_temp_variable = { UKR_lower_limit = -1 }

	# upper limit = 100 - legitimacy
	set_temp_variable = { UKR_upper_limit = 100 }
	subtract_from_temp_variable = { UKR_upper_limit = ukr_federal_unity }

	# avoid values outside the allowed range
	clamp_temp_variable = {
		var = UKR_federal_unity_change
		min = UKR_lower_limit
		max = UKR_upper_limit
	}

	# add the variable
	add_to_variable = { ukr_federal_unity = UKR_federal_unity_change }
}
# requires a temp variable UKR_cohesion_change
UKR_change_cohesion = {
	# convert percent to absolute
	if = {
		limit = {
			check_variable = { UKR_cohesion_change > -1 }
			check_variable = { UKR_cohesion_change < 1 }
		}
		multiply_temp_variable = { UKR_cohesion_change = 100 }
	}

	# tooltip
	effect_tooltip = {
		add_to_variable = {
			ukr_federal_cohesion = UKR_cohesion_change
			tooltip = UKR_cohesion_tooltip
		}
	}

	# lower limit = legitimacy * -1
	set_temp_variable = { UKR_lower_limit = ukr_federal_cohesion }
	multiply_temp_variable = { UKR_lower_limit = -1 }

	# upper limit = 100 - legitimacy
	set_temp_variable = { UKR_upper_limit = 100 }
	subtract_from_temp_variable = { UKR_upper_limit = ukr_federal_cohesion }

	# avoid values outside the allowed range
	clamp_temp_variable = {
		var = UKR_cohesion_change
		min = UKR_lower_limit
		max = UKR_upper_limit
	}

	# add the variable
	add_to_variable = { ukr_federal_cohesion = UKR_cohesion_change }
}

UKR_activate_mizhmoria_decisions = {
	activate_targeted_decision = { target = ROOT decision = UKR_propose_economic_union }
	activate_targeted_decision = { target = ROOT decision = UKR_propose_research_initative }
	activate_targeted_decision = { target = ROOT decision = UKR_defense_and_security_cooperation_bill }
	activate_targeted_decision = { target = ROOT decision = UKR_protection_of_cultural_expression }
	activate_targeted_decision = { target = ROOT decision = UKR_healthcare_programme }
	activate_targeted_decision = { target = ROOT decision = UKR_the_labour_law }
	hidden_effect = { 
		activate_targeted_decision = { target = ROOT decision = UKR_common_agricultural_policy }
		activate_targeted_decision = { target = ROOT decision = UKR_intermarium_central_bank }
		activate_targeted_decision = { target = ROOT decision = UKR_propose_economic_union_2 }
		activate_targeted_decision = { target = ROOT decision = UKR_unite_mizhmoria }
	}
}
KR_mizhmoria_set_unit_leader_flag = {
	if = {
		limit = { PREV = { tag = RUS } }
		set_unit_leader_flag = RUS_unit_leader
	}
	if = {
		limit = { PREV = { tag = ROM } }
		set_unit_leader_flag = ROM_unit_leader
	}
	if = {
		limit = { PREV = { tag = TUR } }
		set_unit_leader_flag = TUR_unit_leader
	}
	if = {
		limit = { PREV = { tag = KAR } }
		set_unit_leader_flag = KAR_unit_leader
	}
	if = {
		limit = { PREV = { tag = MTR } }
		set_unit_leader_flag = MTR_unit_leader
	}
	if = {
		limit = { PREV = { tag = KLY } }
		set_unit_leader_flag = KLY_unit_leader
	}
	if = {
		limit = { PREV = { tag = DKB } }
		set_unit_leader_flag = DKB_unit_leader
	}
	if = {
		limit = { PREV = { tag = KUB } }
		set_unit_leader_flag = KUB_unit_leader
	}
	if = {
		limit = { PREV = { tag = ARM } }
		set_unit_leader_flag = ARM_unit_leader
	}
	if = {
		limit = { PREV = { tag = AZE } }
		set_unit_leader_flag = AZE_unit_leader
	}
	if = {
		limit = { PREV = { tag = GEO } }
		set_unit_leader_flag = GEO_unit_leader
	}
	if = {
		limit = { PREV = { tag = MOL } }
		set_unit_leader_flag = MOL_unit_leader
	}
	if = {
		limit = { PREV = { tag = WSU } }
		set_unit_leader_flag = WSU_unit_leader
	}
	if = {
		limit = { PREV = { tag = TRV } }
		set_unit_leader_flag = TRV_unit_leader
	}
	if = {
		limit = { PREV = { tag = HUN } }
		set_unit_leader_flag = HUN_unit_leader
	}
	if = {
		limit = { PREV = { tag = SVK } }
		set_unit_leader_flag = SVK_unit_leader
	}
	if = {
		limit = { PREV = { tag = CZE } }
		set_unit_leader_flag = CZE_unit_leader
	}
	if = {
		limit = { PREV = { tag = POL } }
		set_unit_leader_flag = POL_unit_leader
	}
	if = {
		limit = { PREV = { tag = LIT } }
		set_unit_leader_flag = LIT_unit_leader
	}
	if = {
		limit = { PREV = { tag = LAT } }
		set_unit_leader_flag = LAT_unit_leader
	}
	if = {
		limit = { PREV = { tag = EST } }
		set_unit_leader_flag = EST_unit_leader
	}
	if = {
		limit = { PREV = { tag = FIN } }
		set_unit_leader_flag = FIN_unit_leader
	}
	if = {
		limit = { PREV = { tag = WHR } }
		set_unit_leader_flag = WHR_unit_leader
	}
	if = {
		limit = { PREV = { tag = GAL } }
		set_unit_leader_flag = GAL_unit_leader
	}
}
KR_mizhmoria_promote_foreign_general_and_return_to_their_homes = {
	every_unit_leader = {
		limit = { has_unit_leader_flag = POL_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = POL
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = LIT_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = LIT
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = LAT_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = LAT
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = EST_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = EST
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = FIN_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = FIN
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = WHR_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = WHR
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = GAL_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = GAL
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = CZE_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = CZE
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = SVK_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = SVK
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = HUN_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = HUN
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = TRV_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = TRV
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = WSU_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = WSU
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = MOL_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = MOL
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = GEO_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = GEO
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = AZE_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = AZE
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = ARM_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = ARM
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = KUB_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = KUB
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = DKB_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = DKB
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = KLY_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = KLY
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = MTR_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = MTR
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = KAR_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = KAR
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = TUR_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = TUR
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = ROM_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = ROM
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = RUS_unit_leader }
		if = {
			limit = { is_field_marshal = no }
			promote_leader = yes
		}
		set_nationality = RUS
	}
}
KR_activate_mizhmoria_dummy_mission = {
	hidden_effect = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				has_country_flag = mizhmoria_member
			}
			activate_mission = KR_mizhmoria_bill_voting_dummy
		}
	}
}
UKR_add_to_mizhmoria = {
	if = {
		limit = { NOT = { has_country_flag = mizhmoria_member } }
		set_country_flag = mizhmoria_member
		add_to_array = { global.mizhmoria_tags_array = THIS }
		#add_to_array = { global.mizhmoria_tags_display_array = THIS }
		if = {
			limit = { 
				NOT = { is_in_faction_with = MIZ }
			}
			MIZ = { add_to_faction = PREV }
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_labour_law }
			}
			add_ideas = KR_mizhmoria_labour_law
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_socialist_healthcare }
			}
			add_ideas = KR_mizhmoria_socialist_healthcare
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_liberal_healthcare }
			}
			add_ideas = KR_mizhmoria_liberal_healthcare
		}
		UKR_global_recalculate_mizhmoria_federal_parties = yes
		if = {
			limit = { has_global_flag = UKR_mizhmoria_federal_national_curias_formed }
			UKR_global_recalculate_member_seats = yes
		}
		if = {
			limit = { has_global_flag = UKR_mizhmoria_federal_member_delegations_formed }
			UKR_global_recalculate_member_delegations = yes
		}
	}
	KR_mizhmoria_dirty = yes
}

UKR_remove_from_mizhmoria = {
	if = {
		limit = { has_country_flag = mizhmoria_member }
		clr_country_flag = mizhmoria_member
		remove_from_array = { global.mizhmoria_tags_array = THIS }
	}
	leave_faction = yes
	KR_mizhmoria_remove_from_economic = yes
	if = {
		limit = { is_in_tech_sharing_group = mizhmoria_research }
		remove_from_tech_sharing_group = mizhmoria_research
	}
	KR_mizhmoria_dirty = yes
}
UKR_add_to_mizhmoria_economic = {
	if = {
		limit = { KR_mizhmoria_is_member_economic = no }
		custom_effect_tooltip = KR_mizhmoria_add_to_economic
		add_to_array = { global.mizhmoria_economic_tags_array = THIS }
		if = {
			limit = { 
				MIZ = { 
					OR = {
						has_idea = KR_mizhmoria_iea_2 
						has_idea = KR_mizhmoria_iea_3
					}
				}
			}
			country_event = { id = mizhmoria.55 days = 2 }
		}
		else_if = {
			limit = { 
				MIZ = { has_idea = KR_mizhmoria_iea_1a }
			}
			hidden_effect = { add_ideas = KR_mizhmoria_iea_1a }
		}
		else = {
			hidden_effect = { add_ideas = KR_mizhmoria_iea_1 }
		}
		country_event = {
			id = mizhmoria.51
			days = 2
			random = 48
		}
		if = {
			limit = {
				has_global_flag = UKR_mizhmoria_economic_workers_amendment
			}
			add_ideas = KR_mizhmoria_iea_working_amendement
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_agriculture }
			}
			add_ideas = KR_mizhmoria_agriculture
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_socialist_agriculture }
			}
			add_ideas = KR_mizhmoria_socialist_agriculture
		}
		if = {
			limit = {
				MIZ = { has_idea = KR_mizhmoria_conservative_agriculture }
			}
			add_ideas = KR_mizhmoria_conservative_agriculture
		}
		set_country_flag = KR_joined_iea
		every_other_country = {
			limit = { KR_mizhmoria_is_member_economic = yes }
			add_opinion_modifier = {
				target = ROOT
				modifier = KR_mizhmoria_member_economic
			}
			reverse_add_opinion_modifier = {
				target = ROOT
				modifier = KR_mizhmoria_member_economic
			}
		}
		hidden_effect = { 
			MIZ = { 
				country_event = {
					id = mizhmoria.48 
					days = 1
					random = 48
				} 
			}
		}
	}
	KR_mizhmoria_dirty = yes
}
KR_mizhmoria_remove_from_economic = {
	if = {
		limit = { KR_mizhmoria_is_member_economic = yes }
		custom_effect_tooltip = KR_mizhmoria_remove_from_economic
		hidden_effect = {
			remove_from_array = { global.mizhmoria_economic_tags_array = THIS }
			remove_ideas = {
				KR_mizhmoria_iea_1
				KR_mizhmoria_iea_2
				KR_iea_econ1
				KR_iea_econ2
				KR_iea_econ3
				KR_iea_mil1
				KR_iea_mil2
				KR_iea_mil3
				KR_iea_const1
				KR_iea_const2
				KR_iea_const3
				KR_mizhmoria_iea_working_amendement
			} 
		}
		clr_country_flag = KR_joined_iea
		every_other_country = {
			limit = { KR_mizhmoria_is_member_economic = yes }
			remove_opinion_modifier = {
				target = ROOT
				modifier = KR_mizhmoria_member_economic
			}
			ROOT = {
				remove_opinion_modifier = {
					target = PREV
					modifier = KR_mizhmoria_member_economic
				}
			}
		}
		MIZ = { country_event = { id = mizhmoria.50 days = 2 } }
	}
	KR_mizhmoria_dirty = yes
}
UKR_global_recalculate_mizhmoria_federal_parties = {
	set_variable = { global.mizhmoria_spm_pop = 0 }
	set_variable = { global.mizhmoria_sdpm_pop = 0 }
	set_variable = { global.mizhmoria_ldpm_pop = 0 }
	every_country = {
		limit = { KR_is_mizhmoria_member = yes }
		# SPM
		set_variable = { THIS.mizhmoria_spm_pop = THIS.party_popularity@totalist }
		add_to_variable = { THIS.mizhmoria_spm_pop = THIS.party_popularity@syndicalist }
		add_to_variable = { THIS.mizhmoria_spm_pop = THIS.party_popularity@radical_socialist }
		# SDPM
		set_variable = { THIS.mizhmoria_sdpm_pop = THIS.party_popularity@social_democrat }
		# LDPM
		set_variable = { THIS.mizhmoria_ldpm_pop = THIS.party_popularity@social_liberal }
		add_to_variable = { THIS.mizhmoria_ldpm_pop = THIS.party_popularity@market_liberal }
		
		add_to_variable = { global.mizhmoria_spm_pop = THIS.mizhmoria_spm_pop }
		add_to_variable = { global.mizhmoria_sdpm_pop = THIS.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_ldpm_pop = THIS.mizhmoria_ldpm_pop }
	}
	divide_variable = { global.mizhmoria_spm_pop = global.mizhmoria_tags_array^num }
	divide_variable = { global.mizhmoria_sdpm_pop = global.mizhmoria_tags_array^num }
	divide_variable = { global.mizhmoria_ldpm_pop = global.mizhmoria_tags_array^num }
	set_variable = { global.mizhmoria_ksm_pop = 1 }
	subtract_from_variable = { global.mizhmoria_ksm_pop = global.mizhmoria_spm_pop }
	subtract_from_variable = { global.mizhmoria_ksm_pop = global.mizhmoria_sdpm_pop }
	subtract_from_variable = { global.mizhmoria_ksm_pop = global.mizhmoria_ldpm_pop }
	
	KR_mizhmoria_dirty = yes
}
UKR_global_recalculate_member_seats = {
	set_variable = { global.mizhmoria_member_seats = 0 }
	every_country = {
		limit = { KR_is_mizhmoria_member = yes }
		set_variable = { THIS.member_seats = max_manpower_k }
		divide_variable = { THIS.member_seats = 1000 }
		multiply_variable = { THIS.member_seats = 1.25 }
		round_variable = THIS.member_seats
		
		add_to_variable = { global.mizhmoria_member_seats = THIS.member_seats }
	}
	KR_mizhmoria_dirty = yes
}
UKR_global_recalculate_member_delegations = {
	set_variable = { global.mizhmoria_member_delegations = 0 }
	set_variable = { global.mizhmoria_coalition_members = 0 }
	set_variable = { global.mizhmoria_opposition_members = 0 }
	every_country = {
		limit = { KR_is_mizhmoria_member = yes }
		set_variable = { THIS.mizhmoria_member_delegations = 5 }
		
		set_temp_variable_to_random = {
			var = KR_coal_members
			min = 0
			max = 5
		}
		set_variable = { THIS.member_delegate_coalition = KR_coal_members }
		set_variable = { THIS.member_delegate_opposition = 5 }
		subtract_from_variable = { THIS.member_delegate_opposition = THIS.member_delegate_coalition }
				
		add_to_variable = { global.mizhmoria_member_delegations = THIS.mizhmoria_member_delegations }
		add_to_variable = { global.mizhmoria_coalition_members = THIS.member_delegate_coalition }
		add_to_variable = { global.mizhmoria_opposition_members = THIS.member_delegate_opposition }
	}
	KR_mizhmoria_dirty = yes
}
KR_mizhmoria_calculate_parties_support = {
	if = {
		limit = { has_global_flag = KR_mizhmoria_economic_cooperation_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_research_coop_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_security_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_spm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_economic_agriculture_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_single_currency_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_spm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_central_bank_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_spm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ksm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_protection_of_cultural_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ksm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = UKR_mizhmoria_healthcare_socialist }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_spm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = UKR_mizhmoria_healthcare_liberal }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ldpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_ksm_pop }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	else_if = {
		limit = { has_global_flag = KR_mizhmoria_labour_vote }
		set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_sdpm_pop }
		add_to_variable = { global.mizhmoria_yes_votes = global.mizhmoria_spm_pop }
		set_temp_variable = { temp = global.mizhmoria_ldpm_pop }
		set_temp_variable_to_random = {
			var = multiply_factor
			min = 0.4
			max = 0.6
		}
		multiply_temp_variable = { temp = multiply_factor }
		add_to_variable = { global.mizhmoria_yes_votes = temp }
		set_variable = { global.mizhmoria_no_votes = 1 }
		subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	}
	KR_mizhmoria_dirty = yes
}
KR_mizhmoria_calculate_member_delegations_support = {
	set_variable = { global.mizhmoria_yes_votes = global.mizhmoria_coalition_members }
	set_variable = { global.mizhmoria_no_votes = global.mizhmoria_member_delegations }
	subtract_from_variable = { global.mizhmoria_no_votes = global.mizhmoria_yes_votes }
	activate_targeted_decision = { target = ROOT decision = KR_lobby_opposition }
	KR_mizhmoria_dirty = yes
}
KR_mizhmoria_dirty = {
	every_country = {
		limit = { KR_is_mizhmoria_member = yes }
		add_to_variable = { mizhmoria_dirty = 1 }
	}
}
UKR_convert_half_of_usdrp_into_ukp = {
	if = {
		limit = { has_government = totalist }
		hidden_effect = {
			set_temp_variable = { UKR_new_socdem = UKR.party_popularity_100@social_democrat }
			divide_temp_variable = { UKR_new_socdem = 4 }

			set_temp_variable = { UKR_new_tot = UKR.party_popularity_100@totalist }
			add_to_temp_variable = { UKR_new_tot = UKR_new_socdem }

			set_temp_variable = { sum = 100 }
			subtract_from_temp_variable = { sum = UKR_new_tot }
			subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
			subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
			subtract_from_temp_variable = { sum = UKR_new_socdem }
			subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
			subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
			subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
			subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

			add_to_temp_variable = { UKR_new_tot = sum } #avoid rounding errors

			set_popularities = {
				totalist = UKR_new_tot
				syndicalist = party_popularity_100@syndicalist
				radical_socialist = party_popularity_100@radical_socialist
				social_democrat = UKR_new_socdem
				social_liberal = party_popularity_100@social_liberal
				market_liberal = party_popularity_100@market_liberal
				social_conservative = party_popularity_100@social_conservative
				authoritarian_democrat = party_popularity_100@authoritarian_democrat
				paternal_autocrat = party_popularity_100@paternal_autocrat
				national_populist = party_popularity_100@national_populist
			}
		}
	}
	else = {
		hidden_effect = {
			set_temp_variable = { UKR_new_socdem = UKR.party_popularity_100@social_democrat }
			divide_temp_variable = { UKR_new_socdem = 4 }

			set_temp_variable = { UKR_new_radsoc = UKR.party_popularity_100@radical_socialist }
			add_to_temp_variable = { UKR_new_radsoc = UKR_new_socdem }

			set_temp_variable = { sum = 100 }
			subtract_from_temp_variable = { sum = party_popularity_100@totalist }
			subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
			subtract_from_temp_variable = { sum = UKR_new_radsoc }
			subtract_from_temp_variable = { sum = UKR_new_socdem }
			subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
			subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
			subtract_from_temp_variable = { sum = party_popularity_100@authoritarian_democrat }
			subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
			subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

			add_to_temp_variable = { UKR_new_radsoc = sum } #avoid rounding errors

			set_popularities = {
				totalist = party_popularity_100@totalist
				syndicalist = party_popularity_100@syndicalist
				radical_socialist = UKR_new_radsoc
				social_democrat = UKR_new_socdem
				social_liberal = party_popularity_100@social_liberal
				market_liberal = party_popularity_100@market_liberal
				social_conservative = party_popularity_100@social_conservative
				authoritarian_democrat = party_popularity_100@authoritarian_democrat
				paternal_autocrat = party_popularity_100@paternal_autocrat
				national_populist = party_popularity_100@national_populist
			}
		}
	}
}
UKR_setup_trimvirs = {
	set_country_flag = UKR_triumvirs_power_struggle
	
	set_variable = { UKR_triumvirs_bolbochan_coef = 1 }
	set_variable = { UKR_triumvirs_shapoval_coef = 1 }
	set_variable = { UKR_triumvirs_hrekiv_coef = 1 }

	set_variable = { UKR_triumvirs_militarism = ROOT.has_war_support }
	if = {
		limit = { check_variable = { UKR_triumvirs_militarism > 0.49 } }
		set_temp_variable_to_random = {
			var = multiply_factor
			min = 0.55
			max = 0.85
		}
		multiply_variable = { UKR_triumvirs_militarism = multiply_factor }
	}
	
	set_variable = { UKR_triumvirs_socialism = UKR.party_popularity@social_democrat }
	add_to_variable = { UKR_triumvirs_socialism = UKR.party_popularity@radical_socialist }
	add_to_variable = { UKR_triumvirs_socialism = UKR.party_popularity@totalist }
	add_to_variable = { UKR_triumvirs_socialism = UKR.party_popularity@social_liberal }
	if = {
		limit = { check_variable = { UKR_triumvirs_socialism > 0.49 } }
		set_temp_variable_to_random = {
			var = multiply_factor
			min = 0.55
			max = 0.85
		}
		multiply_variable = { UKR_triumvirs_socialism = multiply_factor }
	}
	
	set_variable = { UKR_triumvirs_nationalism = UKR.party_popularity@national_populist }
	if = {
		limit = { check_variable = { UKR_triumvirs_nationalism > 0.49 } }
		set_temp_variable_to_random = {
			var = multiply_factor
			min = 0.55
			max = 0.85
		}
		multiply_variable = { UKR_triumvirs_nationalism = multiply_factor }
	}
	
	set_variable = { should_be_hundred = 1 }
	subtract_from_variable = { should_be_hundred = UKR_triumvirs_nationalism }
	subtract_from_variable = { should_be_hundred = UKR_triumvirs_socialism }
	subtract_from_variable = { should_be_hundred = UKR_triumvirs_militarism }
	
	divide_variable = { should_be_hundred = 3 }
	add_to_variable = { UKR_triumvirs_nationalism = should_be_hundred }
	add_to_variable = { UKR_triumvirs_militarism = should_be_hundred }
	add_to_variable = { UKR_triumvirs_socialism = should_be_hundred }
	
	clear_variable = should_be_hundred
}
UKR_triumvirs_increase_socialism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_socialism < 0.919 }
		}
		custom_effect_tooltip = UKR_triumvirs_increase_socialism
		hidden_effect = {
			random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_socialism = 0.08 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_socialism = 0.1 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_socialism = 0.12 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			
			set_variable = { UKR_triumvirs_nationalism = 1 }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_socialism }	
			
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_decrease_socialism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_socialism > 0.079 }
		}
		custom_effect_tooltip = UKR_triumvirs_decrease_socialism
		hidden_effect = {
			random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_socialism = -0.08 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_socialism = -0.1 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_socialism = -0.12 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			
			set_variable = { UKR_triumvirs_nationalism = 1 }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_socialism }	
			
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_increase_nationalism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_nationalism < 0.919 }
		}
		custom_effect_tooltip = UKR_triumvirs_increase_nationalism
		hidden_effect = {
			random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_nationalism = 0.08 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_nationalism = 0.1 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_nationalism = 0.12 } 
					add_to_variable = { UKR_triumvirs_militarism = -0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
		
			set_variable = { UKR_triumvirs_socialism = 1 }
			subtract_from_variable = { UKR_triumvirs_socialism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_socialism = UKR_triumvirs_nationalism }	
			
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_decrease_nationalism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_nationalism > 0.079 }
		}
		custom_effect_tooltip = UKR_triumvirs_decrease_nationalism
		hidden_effect = {
				random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_nationalism = -0.08 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_nationalism = -0.1 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_nationalism = -0.12 } 
					add_to_variable = { UKR_triumvirs_militarism = 0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			
			set_variable = { UKR_triumvirs_socialism = 1 }
			subtract_from_variable = { UKR_triumvirs_socialism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_socialism = UKR_triumvirs_nationalism }	
			
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_increase_militarism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_militarism < 0.919 }
		}
		custom_effect_tooltip = UKR_triumvirs_increase_militarism
		hidden_effect = {
				random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_militarism = 0.08 } 
					add_to_variable = { UKR_triumvirs_socialism = -0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_militarism = 0.1 } 
					add_to_variable = { UKR_triumvirs_socialism = -0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_militarism = 0.12 } 
					add_to_variable = { UKR_triumvirs_socialism = -0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
		
			set_variable = { UKR_triumvirs_nationalism = 1 }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_socialism }	
			
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_decrease_militarism = {
	if = {
		limit = { 
			check_variable = { UKR_triumvirs_militarism > 0.079 }
		}
		custom_effect_tooltip = UKR_triumvirs_decrease_militarism
		hidden_effect = {
				random_list = {
				33 = { 
					add_to_variable = { UKR_triumvirs_militarism = -0.08 } 
					add_to_variable = { UKR_triumvirs_socialism = 0.04 } 
				}
				34 = { 
					add_to_variable = { UKR_triumvirs_militarism = -0.1 } 
					add_to_variable = { UKR_triumvirs_socialism = 0.05 } 
				}
				33 = { 
					add_to_variable = { UKR_triumvirs_militarism = -0.12 } 
					add_to_variable = { UKR_triumvirs_socialism = 0.06 } 
				}
			}
			clamp_variable = { var = UKR_triumvirs_militarism min = 0 max = 1 }
			clamp_variable = { var = UKR_triumvirs_socialism min = 0 max = 1 }
			
			set_variable = { UKR_triumvirs_nationalism = 1 }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_militarism }
			subtract_from_variable = { UKR_triumvirs_nationalism = UKR_triumvirs_socialism }	
			
			clamp_variable = { var = UKR_triumvirs_nationalism min = 0 max = 1 }
		}
	}
}
UKR_triumvirs_increase_hrekiv = {
	custom_effect_tooltip = UKR_triumvirs_increase_hrekiv
	add_to_variable = { UKR_triumvirs_hrekiv_coef = 0.1 }
}
UKR_triumvirs_increase_shapoval = {
	custom_effect_tooltip = UKR_triumvirs_increase_shapoval
	add_to_variable = { UKR_triumvirs_shapoval_coef = 0.1 }
}
UKR_triumvirs_increase_bolbochan = {
	custom_effect_tooltip = UKR_triumvirs_increase_bolbochan
	add_to_variable = { UKR_triumvirs_bolbochan_coef = 0.1 }
}
UKR_triumvirs_decrease_hrekiv = {
	custom_effect_tooltip = UKR_triumvirs_decrease_hrekiv
	add_to_variable = { UKR_triumvirs_hrekiv_coef = -0.1 }
}
UKR_triumvirs_decrease_shapoval = {
	custom_effect_tooltip = UKR_triumvirs_decrease_shapoval
	add_to_variable = { UKR_triumvirs_shapoval_coef = -0.1 }
}
UKR_triumvirs_decrease_bolbochan = {
	custom_effect_tooltip = UKR_triumvirs_decrease_bolbochan
	add_to_variable = { UKR_triumvirs_bolbochan_coef = -0.1 }
}
UKR_finalize_triuvmirs = {
	clr_country_flag = UKR_triumvirs_power_struggle
	hidden_effect = {
		if = {
			limit = { 
				check_variable = { UKR_triumvirs_militarism > UKR_triumvirs_nationalism }
				check_variable = { UKR_triumvirs_militarism > UKR_triumvirs_socialism }
			}
			if = {
				limit = { 
					check_variable = { UKR_triumvirs_nationalism > UKR_triumvirs_socialism } 
				}
				set_country_flag = UKR_upss_militarist_nationalist # Easy win for Bolbochan
			}
			else = {
				set_country_flag = UKR_upss_militarist_socialist #Easy win for Hrekiv
			}
		}
		else_if = {
			limit = { 
				check_variable = { UKR_triumvirs_nationalism > UKR_triumvirs_militarism }
				check_variable = { UKR_triumvirs_nationalism > UKR_triumvirs_socialism }
			}
			if = {
				limit = { 
					check_variable = { UKR_triumvirs_militarism > UKR_triumvirs_socialism } 
				}
				set_country_flag = UKR_upss_nationalist_militarist
			}
			else = {
				set_country_flag = UKR_upss_nationalist_socialist
			}
		}
		else = {
			if = {
				limit = { 
					check_variable = { UKR_triumvirs_militarism > UKR_triumvirs_nationalism } 
				}
				set_country_flag = UKR_upss_socialist_militarist
			}
			else = {
				set_country_flag = UKR_upss_socialist_nationalist
			}
		}
		if = {
			limit = { has_completed_focus = UKR_Red_Prince_UPSS } #Hrekiv Out of Game
			if = {
				limit = { 
					OR = {
						check_variable = { UKR_triumvirs_bolbochan_coef > UKR_triumvirs_shapoval_coef }
						has_country_flag = UKR_upss_militarist_nationalist
					}
				}
				country_event = {
					id = ukrpol.245
					days = 7
				}
			}
			else = {
				country_event = {
					id = ukrpol.246
					days = 7
				}
			}
		}
		else = {
			if = {
				limit = { 
					OR = {
						check_variable = { UKR_triumvirs_hrekiv_coef > UKR_triumvirs_shapoval_coef }
						has_country_flag = UKR_upss_militarist_socialist
					}
				}
				country_event = {
					id = ukrpol.247
					days = 7
				}
			}
			else = {
				country_event = {
					id = ukrpol.246
					days = 7
				}
			}
		}
	}
}
UKR_remove_brotfrieden_without_events = {
	if = {
		limit = { has_idea = UKR_brotfrieden_idea_GER }
		remove_ideas = UKR_brotfrieden_idea_GER
		every_other_country = {
			limit = {
				OR = {
					tag = GER 
					GER_is_in_mitteleuropa = yes
					is_ally_with = GER
				}
				is_in_europe = yes
				NOT = { original_tag = UKR }
			}
			country_event = {
				id = ukreco.47
				days = 2
				random_days = 5
			}
		}
	}
	else_if = {
		limit = { has_idea = UKR_brotfrieden_idea_AUS }
		remove_ideas = UKR_brotfrieden_idea_AUS
		every_other_country = {
			limit = {
				OR = {
					tag = AUS
					is_ally_with = AUS
				}
				is_in_europe = yes
				NOT = { original_tag = UKR }
			}
			country_event = {
				id = ukreco.47
				days = 2
				random_days = 5
			}
		}
	}
	else_if = {
		limit = { has_idea = UKR_brotfrieden_idea }
		remove_ideas = UKR_brotfrieden_idea
		every_other_country = {
			limit = {
				OR = {
					tag = GER
					tag = AUS
					is_ally_with = AUS
					GER_is_in_mitteleuropa = yes
					is_ally_with = GER
				}
				is_in_europe = yes
				NOT = { original_tag = UKR }
			}
			country_event = {
				id = ukreco.47
				days = 2
				random_days = 5
			}
		}
	}
}
UKR_nationalist_change_nrm = {
	if = {
		limit = { 
			has_country_flag = UKR_sun_assembly_concluded
			NOT = { has_country_flag = UKR_sun_mechanic_ended }
		}
		custom_effect_tooltip = UKR_sun_nrm_change
		add_to_variable = { UKR_sun_nrm = UKR_uvo_faction_change }
		divide_temp_variable = { UKR_uvo_faction_change = 2 }
		subtract_from_variable = { UKR_sun_old_guard = UKR_uvo_faction_change }
		subtract_from_variable = { UKR_sun_integralists = UKR_uvo_faction_change }
		
		UKR_clamp_sun_variables = yes
	
		set_temp_variable = { max_temp = 100 }
		subtract_from_temp_variable = { max_temp = UKR_sun_nrm }
		subtract_from_temp_variable = { max_temp = UKR_sun_old_guard }
		set_temp_variable = { UKR_sun_integralists = max_temp }		
	}
}
UKR_nationalist_change_int = {
	if = {
		limit = { 
			has_country_flag = UKR_sun_assembly_concluded
			NOT = { has_country_flag = UKR_sun_mechanic_ended }
		}
		custom_effect_tooltip = UKR_sun_integralists_change
		add_to_variable = { UKR_sun_integralists = UKR_uvo_faction_change }
		divide_temp_variable = { UKR_uvo_faction_change = 2 }
		subtract_from_variable = { UKR_sun_old_guard = UKR_uvo_faction_change }
		subtract_from_variable = { UKR_sun_nrm = UKR_uvo_faction_change }
		
		UKR_clamp_sun_variables = yes
	
		set_temp_variable = { max_temp = 100 }
		subtract_from_temp_variable = { max_temp = UKR_sun_integralists }
		subtract_from_temp_variable = { max_temp = UKR_sun_old_guard }
		set_temp_variable = { UKR_sun_nrm = max_temp }		
	}
}
UKR_nationalist_change_old = {
	if = {
		limit = { 
			has_country_flag = UKR_sun_assembly_concluded
			NOT = { has_country_flag = UKR_sun_mechanic_ended }
		}
		custom_effect_tooltip = UKR_sun_old_guard_change
		add_to_variable = { UKR_sun_old_guard = UKR_uvo_faction_change }
		divide_temp_variable = { UKR_uvo_faction_change = 2 }
		subtract_from_variable = { UKR_sun_nrm = UKR_uvo_faction_change }
		subtract_from_variable = { UKR_sun_integralists = UKR_uvo_faction_change }
		
		UKR_clamp_sun_variables = yes
	
		set_temp_variable = { max_temp = 100 }
		subtract_from_temp_variable = { max_temp = UKR_sun_nrm }
		subtract_from_temp_variable = { max_temp = UKR_sun_old_guard }
		set_temp_variable = { UKR_sun_integralists = max_temp }		
	}
}
UKR_nrm_events = {
	hidden_effect = {
		country_event = {
			id = ukrsun.52
			days = 80
		}
		country_event = {
			id = ukrsun.53
			days = 120
		}
		country_event = {
			id = ukrsun.54
			days = 180
		}
		country_event = {
			id = ukrsun.55
			days = 240
		}
		country_event = {
			id = ukrsun.57
			days = 340
		}
		country_event = {
			id = ukrsun.58
			days = 400
		}
	}
}
UKR_melnyk_events = {
	hidden_effect = { 
		country_event = {
			id = ukrsun.36 
			days = 70
			random_days = 20
		}
		country_event = {
			id = ukrsun.37
			days = 120
			random_days = 20
		}
		country_event = {
			id = ukrsun.40
			days = 180
			random_days = 20
		}
		country_event = {
			id = ukrsun.42
			days = 250
			random_days = 60
		}
	}		
}
UKR_dontsov_events = {
	hidden_effect = { 
		country_event = {
			id = ukrsun.43
			days = 30
			random_days = 30
		}
		country_event = {
			id = ukrsun.44
			days = 120
			random_days = 20
		}
		country_event = {
			id = ukrsun.48
			days = 160
			random_days = 40
		}
	}		
}
UKR_nationalist_minigame_end = {
	hidden_effect = {
		if = {
			limit = { UKR_dmytro_dontsov_in_power = yes }
			if = {
				limit = {
					check_variable = { UKR_sun_nrm > UKR_sun_integralists }
					check_variable = { UKR_sun_nrm > UKR_sun_old_guard }
				}
				country_event = ukrsun.16
			}
			else_if = {
				limit = {
					check_variable = { UKR_sun_old_guard > UKR_sun_integralists }
					check_variable = { UKR_sun_old_guard > UKR_sun_nrm }
				}
				country_event = ukrsun.19
			}
			else = {
				country_event = ukrsun.18
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { UKR_sun_nrm > UKR_sun_integralists }
					check_variable = { UKR_sun_nrm > UKR_sun_old_guard }
				}
				country_event = ukrsun.16
				country_event = {
					id = ukrsun.19
					days = 5
				}
			}
			else_if = {
				limit = {
					check_variable = { UKR_sun_integralists > UKR_sun_old_guard }
					check_variable = { UKR_sun_integralists > UKR_sun_nrm }
				}
				country_event = ukrsun.17
				country_event = {
					id = ukrsun.18
					days = 5
				}
			}
			else = {
				country_event = ukrsun.18
				country_event = {
					id = ukrsun.19
					days = 5
				}
			}
		}
	}
}

KCN_add_to_kcn_council = {
	if = {
		limit = { NOT = { has_country_flag = kcn_council_vote } }
		set_country_flag = kcn_council_vote
		add_to_array = { global.KCN_voters = THIS }
		if = {
			limit = { NOT = { original_tag = UKR } }
			diplomatic_relation = {
				country = UKR
				relation = non_aggression_pact
			}
		}
		hidden_effect = { add_ideas = KCN_member }
	}
}

KCN_remove_from_kcn_council = {
	set_temp_variable = { target = UKR }
	clear_all_relations_with_TARGET = yes
	if = {
		limit = { has_country_flag = kcn_council_vote }
		clr_country_flag = kcn_council_vote
		remove_from_array = { global.KCN_voters = THIS }
	}
	hidden_effect = { remove_ideas = KCN_member }
	KCN_remove_from_kcn_economic = yes
	if = {
		limit = { is_in_tech_sharing_group = kyiv_conf_research }
		remove_from_tech_sharing_group = kyiv_conf_research
	}
}
KCN_add_to_kcn_economic = {
	if = {
		limit = { KCN_is_member_economic = no }
		custom_effect_tooltip = KCN_add_to_economic
		add_to_array = { global.KCN_economic_members = THIS }
		hidden_effect = { add_ideas = KCN_kect_1 }
		set_country_flag = KCN_is_member_economic
	}
}
KCN_remove_from_kcn_economic = {
	if = {
		limit = { KCN_is_member_economic = yes }
		custom_effect_tooltip = KCN_remove_from_economic
		clr_country_flag = KCN_is_member_economic
		hidden_effect = {
			remove_from_array = { global.KCN_economic_members = THIS }
			remove_ideas = {
				KCN_kect_0
				KCN_kect_1
			}
		}
	}
}
KCN_create_array_of_potential_members = {
	add_to_array = { global.KCN_potential_kcn_members = ALA }
	add_to_array = { global.KCN_potential_kcn_members = AFG }
	add_to_array = { global.KCN_potential_kcn_members = ASY }
	add_to_array = { global.KCN_potential_kcn_members = BFA }
	add_to_array = { global.KCN_potential_kcn_members = BHC }
	add_to_array = { global.KCN_potential_kcn_members = BHU }
	add_to_array = { global.KCN_potential_kcn_members = BOR }
	add_to_array = { global.KCN_potential_kcn_members = BOT }
	add_to_array = { global.KCN_potential_kcn_members = BRD }
	add_to_array = { global.KCN_potential_kcn_members = BRM }
	add_to_array = { global.KCN_potential_kcn_members = BRT }
	add_to_array = { global.KCN_potential_kcn_members = CAF }
	add_to_array = { global.KCN_potential_kcn_members = CAM }
	add_to_array = { global.KCN_potential_kcn_members = CEA }
	add_to_array = { global.KCN_potential_kcn_members = CEN }
	add_to_array = { global.KCN_potential_kcn_members = CEY }
	add_to_array = { global.KCN_potential_kcn_members = CHI }
	add_to_array = { global.KCN_potential_kcn_members = CIV }
	add_to_array = { global.KCN_potential_kcn_members = COG }
	add_to_array = { global.KCN_potential_kcn_members = COS }
	add_to_array = { global.KCN_potential_kcn_members = CRE }
	add_to_array = { global.KCN_potential_kcn_members = CUB }
	add_to_array = { global.KCN_potential_kcn_members = CVG }
	add_to_array = { global.KCN_potential_kcn_members = CYP }
	add_to_array = { global.KCN_potential_kcn_members = DOM }
	add_to_array = { global.KCN_potential_kcn_members = ECU }
	add_to_array = { global.KCN_potential_kcn_members = ELS }
	add_to_array = { global.KCN_potential_kcn_members = ERI }
	add_to_array = { global.KCN_potential_kcn_members = ETH }
	add_to_array = { global.KCN_potential_kcn_members = ETS }
	add_to_array = { global.KCN_potential_kcn_members = FOP }
	add_to_array = { global.KCN_potential_kcn_members = GAB }
	add_to_array = { global.KCN_potential_kcn_members = GHA }
	add_to_array = { global.KCN_potential_kcn_members = GNA }
	add_to_array = { global.KCN_potential_kcn_members = GUA }
	add_to_array = { global.KCN_potential_kcn_members = GYA }
	add_to_array = { global.KCN_potential_kcn_members = HAI }
	add_to_array = { global.KCN_potential_kcn_members = HAW }
	add_to_array = { global.KCN_potential_kcn_members = HEJ }
	add_to_array = { global.KCN_potential_kcn_members = HON }
	add_to_array = { global.KCN_potential_kcn_members = INC }
	add_to_array = { global.KCN_potential_kcn_members = INS }
	add_to_array = { global.KCN_potential_kcn_members = IQR }
	add_to_array = { global.KCN_potential_kcn_members = IRQ }
	add_to_array = { global.KCN_potential_kcn_members = IVO }
	add_to_array = { global.KCN_potential_kcn_members = JAM }
	add_to_array = { global.KCN_potential_kcn_members = JBS }
	add_to_array = { global.KCN_potential_kcn_members = KAC }
	add_to_array = { global.KCN_potential_kcn_members = KBR }
	add_to_array = { global.KCN_potential_kcn_members = KIK }
	add_to_array = { global.KCN_potential_kcn_members = KIV }
	add_to_array = { global.KCN_potential_kcn_members = KOG }
	add_to_array = { global.KCN_potential_kcn_members = KOR }
	add_to_array = { global.KCN_potential_kcn_members = KUR }
	add_to_array = { global.KCN_potential_kcn_members = LAO }
	add_to_array = { global.KCN_potential_kcn_members = LBA }
	add_to_array = { global.KCN_potential_kcn_members = LEB }
	add_to_array = { global.KCN_potential_kcn_members = LIB }
	add_to_array = { global.KCN_potential_kcn_members = MAD }
	add_to_array = { global.KCN_potential_kcn_members = MAL }
	add_to_array = { global.KCN_potential_kcn_members = MEX }
	add_to_array = { global.KCN_potential_kcn_members = MLT }
	add_to_array = { global.KCN_potential_kcn_members = MLW }
	add_to_array = { global.KCN_potential_kcn_members = MLY }
	add_to_array = { global.KCN_potential_kcn_members = MRT }
	add_to_array = { global.KCN_potential_kcn_members = MOR }
	add_to_array = { global.KCN_potential_kcn_members = MYS }
	add_to_array = { global.KCN_potential_kcn_members = MZB }
	add_to_array = { global.KCN_potential_kcn_members = NEP }
	add_to_array = { global.KCN_potential_kcn_members = NER }
	add_to_array = { global.KCN_potential_kcn_members = NGR }
	add_to_array = { global.KCN_potential_kcn_members = NIC }
	add_to_array = { global.KCN_potential_kcn_members = NMB }
	add_to_array = { global.KCN_potential_kcn_members = NVN }
	add_to_array = { global.KCN_potential_kcn_members = OMA }
	add_to_array = { global.KCN_potential_kcn_members = PAL }
	add_to_array = { global.KCN_potential_kcn_members = PAN }
	add_to_array = { global.KCN_potential_kcn_members = PGI }
	add_to_array = { global.KCN_potential_kcn_members = PHI }
	add_to_array = { global.KCN_potential_kcn_members = PNG }
	add_to_array = { global.KCN_potential_kcn_members = PRI }
	add_to_array = { global.KCN_potential_kcn_members = QUE }
	add_to_array = { global.KCN_potential_kcn_members = RWA }
	add_to_array = { global.KCN_potential_kcn_members = SAF }
	add_to_array = { global.KCN_potential_kcn_members = SAR }
	add_to_array = { global.KCN_potential_kcn_members = SAU }
	add_to_array = { global.KCN_potential_kcn_members = SEN }
	add_to_array = { global.KCN_potential_kcn_members = SFR }
	add_to_array = { global.KCN_potential_kcn_members = SHA }
	add_to_array = { global.KCN_potential_kcn_members = SIA }
	add_to_array = { global.KCN_potential_kcn_members = SIE }
	add_to_array = { global.KCN_potential_kcn_members = SIR }
	add_to_array = { global.KCN_potential_kcn_members = SKM }
	add_to_array = { global.KCN_potential_kcn_members = SOM }
	add_to_array = { global.KCN_potential_kcn_members = SUD }
	add_to_array = { global.KCN_potential_kcn_members = SUR }
	add_to_array = { global.KCN_potential_kcn_members = SYR }
	add_to_array = { global.KCN_potential_kcn_members = TIB }
	add_to_array = { global.KCN_potential_kcn_members = TKE }
	add_to_array = { global.KCN_potential_kcn_members = TRI }
	add_to_array = { global.KCN_potential_kcn_members = TRU }
	add_to_array = { global.KCN_potential_kcn_members = TRV }
	add_to_array = { global.KCN_potential_kcn_members = TRP }
	add_to_array = { global.KCN_potential_kcn_members = TUA }
	add_to_array = { global.KCN_potential_kcn_members = TUN }
	add_to_array = { global.KCN_potential_kcn_members = TZN }
	add_to_array = { global.KCN_potential_kcn_members = UGA }
	add_to_array = { global.KCN_potential_kcn_members = URG }
	add_to_array = { global.KCN_potential_kcn_members = VIN }
	add_to_array = { global.KCN_potential_kcn_members = WAB }
	add_to_array = { global.KCN_potential_kcn_members = WAD }
	add_to_array = { global.KCN_potential_kcn_members = YEM }
	add_to_array = { global.KCN_potential_kcn_members = YUC }
	add_to_array = { global.KCN_potential_kcn_members = ZZB }
}
UKR_setup_petliura_melnyk_diarchy = {
	set_country_flag = UKR_petliura_melnyk
	clr_country_flag = UKR_petliura_shumskyi
	clr_country_flag = UKR_petliura_national_union
	set_variable = { UKR_usdrp_pm_authority = party_popularity@social_democrat }
	multiply_variable = { UKR_usdrp_pm_authority = 100 }
	subtract_from_variable = { UKR_usdrp_pm_authority = UKR_petliura_authority }
	
	set_variable = { UKR_petliura_pm_authority = party_popularity@social_democrat }
	multiply_variable = { UKR_petliura_pm_authority = 100 }
	add_to_variable = { UKR_petliura_pm_authority = UKR_petliura_authority }
	
	set_variable = { UKR_melnyk_pm_authority = 100 }
	subtract_from_variable = { UKR_melnyk_pm_authority = UKR_usdrp_pm_authority }
	subtract_from_variable = { UKR_melnyk_pm_authority = UKR_petliura_pm_authority }
	
	set_variable = { UKR_petliura_stability = 0 }
	set_variable = { UKR_petliura_pp = 0 }
	set_variable = { UKR_melnyk_war_support = 0 }
	set_variable = { UKR_melnyk_army_org = 0 }
	
	set_variable = { UKR_melnyk_resistance_timeout = 60 }
	
	add_dynamic_modifier = {
		modifier = UKR_melnyk_modifier
	}
	add_dynamic_modifier = {
		modifier = UKR_petliura_modifier
	}
	
	UKR_create_petliura_progress_bar = yes
	UKR_update_petliura_progress_bar = yes	
	
	activate_mission = UKR_petliura_resistance_mission_melnyk
	activate_mission = UKR_melnyk_resistance_mission
	activate_mission = UKR_usdrp_resistance_mission
}
UKR_setup_petliura_shumskyi_duumvirat = {
	set_country_flag = UKR_petliura_shumskyi
	clr_country_flag = UKR_petliura_national_union
	clr_country_flag = UKR_petliura_melnyk
	set_variable = { UKR_petliura_pm_authority = 55 }
	set_variable = { UKR_shumskyi_authority = 45 }
	set_variable = { UKR_Calm_The_Borotbysts_amount_var = 0 } #how many times you took UKR_Calm_The_Borotbysts focus
		
	set_variable = { UKR_petliura_stability = 0 }
	set_variable = { UKR_petliura_pp = 0 }
	set_variable = { UKR_petliura_war_support = 0 }
	set_variable = { UKR_shumskyi_max_efficency = 0 }
	set_variable = { UKR_shumskyi_factory_efficiency = 0 }
	
	add_dynamic_modifier = {
		modifier = UKR_shumskyi_modifier
	}
	add_dynamic_modifier = {
		modifier = UKR_petliura_modifier
	}
	USR = { add_ideas = UKR_duumvirat_idea }
	UKR_create_petliura_progress_bar = yes
	UKR_update_petliura_progress_bar = yes	
}
UKR_setup_petliura_national_union = {
	set_country_flag = UKR_petliura_national_union
	clr_country_flag = UKR_petliura_shumskyi
	clr_country_flag = UKR_petliura_melnyk
	set_temp_variable = { sum = party_popularity_100@social_democrat }
	add_to_temp_variable = { sum = party_popularity_100@social_liberal }
	set_temp_variable = { UKR_uns_left_authority_temp = party_popularity_100@social_democrat }
	divide_temp_variable = { UKR_uns_left_authority_temp = sum }
	multiply_temp_variable = { UKR_uns_left_authority_temp = 100 }
	round_variable = UKR_uns_left_authority_temp
	
	set_variable = { UKR_uns_right_authority = 100 }
	subtract_from_variable = { UKR_uns_right_authority = UKR_uns_left_authority }
		
	UKR_create_petliura_progress_bar = yes
	UKR_update_petliura_progress_bar = yes	
}
UKR_decrease_duumvirate_ideas = {
	USR = {
		if = {
			limit = { has_idea = UKR_duumvirat_idea_7 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_7
				add_idea = UKR_duumvirat_idea_8
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_6 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_6
				add_idea = UKR_duumvirat_idea_7
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_5 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_5
				add_idea = UKR_duumvirat_idea_6
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_4 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_4
				add_idea = UKR_duumvirat_idea_5
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_3 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_3
				add_idea = UKR_duumvirat_idea_4
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_2 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_2
				add_idea = UKR_duumvirat_idea_3
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_1 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_1
				add_idea = UKR_duumvirat_idea_2
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea
				add_idea = UKR_duumvirat_idea_1
			}
		}
	}
}
UKR_increase_duumvirate_ideas = {
	USR = {
		if = {
			limit = { has_idea = UKR_duumvirat_idea_8 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_8
				add_idea = UKR_duumvirat_idea_7
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_7 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_7
				add_idea = UKR_duumvirat_idea_6
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_6 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_6
				add_idea = UKR_duumvirat_idea_5
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_5 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_5
				add_idea = UKR_duumvirat_idea_4
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_4 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_4
				add_idea = UKR_duumvirat_idea_3
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_3 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_3
				add_idea = UKR_duumvirat_idea_2
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_2 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_2
				add_idea = UKR_duumvirat_idea_1
			}
		}
		else_if = {
			limit = { has_idea = UKR_duumvirat_idea_1 }
			swap_ideas = {
				remove_idea = UKR_duumvirat_idea_1
				add_idea = UKR_duumvirat_idea
			}
		}
	}
}
UKR_increase_petliura_influence = {
	if = {
		limit = { 
			OR = {
				has_country_flag = UKR_petliura_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_petliura_influence
		if = {
			limit = { has_country_flag = UKR_petliura_shumskyi }
			UKR_decrease_duumvirate_ideas = yes
		}
	}
	else_if = {
		limit = { 
			OR = {
				has_country_flag = UKR_shumskyi_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_shumskyi_influence
		if = {
			limit = { has_country_flag = UKR_petliura_shumskyi }
			UKR_decrease_duumvirate_ideas = yes
		}
	}
	else = {
		custom_effect_tooltip = UKR_increase_petliura_influence
		hidden_effect = {
			if = {
				limit = { has_country_flag = UKR_petliura_melnyk }
				random_list = {
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 10 }
						add_to_variable = { UKR_melnyk_pm_authority = -5 }
						add_to_variable = { UKR_usdrp_pm_authority = -5 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.01
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 12 }
						add_to_variable = { UKR_melnyk_pm_authority = -6 }	
						add_to_variable = { UKR_usdrp_pm_authority = -6 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.02
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 15 }
						add_to_variable = { UKR_melnyk_pm_authority = -7 }	
						add_to_variable = { UKR_usdrp_pm_authority = -8 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.03
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 17 }
						add_to_variable = { UKR_melnyk_pm_authority = -8 }					
						add_to_variable = { UKR_usdrp_pm_authority = -9 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.04
						}
					}
				}			
			}
			else = {
				random_list = {
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 10 }
						add_to_variable = { UKR_shumskyi_authority = -10 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.01
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 12 }
						add_to_variable = { UKR_shumskyi_authority = -12 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.02
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 15 }
						add_to_variable = { UKR_shumskyi_authority = -15 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.03
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = 17 }
						add_to_variable = { UKR_shumskyi_authority = -17 }					
						add_popularity = {
							ideology = social_democrat
							popularity = 0.04
						}
					}
				}
				UKR_recheck_duumvirate_and_collapse_if_yes = yes
			}
			UKR_update_petliura_progress_bar = yes
		}
	}
}
UKR_decrease_petliura_influence = {
	if = {
		limit = { 
			OR = {
				has_country_flag = UKR_petliura_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_petliura_influence
		if = {
			limit = { has_country_flag = UKR_petliura_shumskyi }
			UKR_increase_duumvirate_ideas = yes
		}
	}
	else_if = {
		limit = { 
			OR = {
				has_country_flag = UKR_shumskyi_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_shumskyi_influence
		if = {
			limit = { has_country_flag = UKR_petliura_shumskyi }
			UKR_increase_duumvirate_ideas = yes
		}
	}
	else = {
		custom_effect_tooltip = UKR_decrease_petliura_influence
		hidden_effect = {
			if = {
				limit = { has_country_flag = UKR_petliura_melnyk }
				random_list = {
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -10 }
						add_to_variable = { UKR_melnyk_pm_authority = 10 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.01
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -12 }
						add_to_variable = { UKR_melnyk_pm_authority = 12 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.02
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -15 }
						add_to_variable = { UKR_melnyk_pm_authority = 15 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.03
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -17 }
						add_to_variable = { UKR_melnyk_pm_authority = 17 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.04
						}
					}
				}	
			}
			else = {
				UKR_decrease_duumvirate_ideas = yes
				random_list = {
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -10 }
						add_to_variable = { UKR_shumskyi_authority = 10 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.01
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -12 }
						add_to_variable = { UKR_shumskyi_authority = 12 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.02
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -15 }
						add_to_variable = { UKR_shumskyi_authority = 15 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.03
						}
					}
					25 = {
						add_to_variable = { UKR_petliura_pm_authority = -17 }
						add_to_variable = { UKR_shumskyi_authority = 17 }					
						add_popularity = {
							ideology = social_democrat
							popularity = -0.04
						}
					}
				}
				UKR_recheck_duumvirate_and_collapse_if_yes = yes
			}
			UKR_update_petliura_progress_bar = yes
		}
	}
}
UKR_increase_melnyk_influence = {
	custom_effect_tooltip = UKR_increase_melnyk_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = 10 }
				add_to_variable = { UKR_petliura_pm_authority = -5 }					
				add_to_variable = { UKR_usdrp_pm_authority = -5 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = 0.01
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = 12 }
				add_to_variable = { UKR_petliura_pm_authority = -6 }					
				add_to_variable = { UKR_usdrp_pm_authority = -6 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = 0.02
				}
				add_popularity = {
					ideology = national_populist
					popularity = 0.01
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = 15 }
				add_to_variable = { UKR_petliura_pm_authority = -7 }					
				add_to_variable = { UKR_usdrp_pm_authority = -8 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = 0.03
				}
				add_popularity = {
					ideology = national_populist
					popularity = 0.02
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = 17 }
				add_to_variable = { UKR_petliura_pm_authority = -8 }					
				add_to_variable = { UKR_usdrp_pm_authority = -9 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = 0.04
				}
				add_popularity = {
					ideology = national_populist
					popularity = 0.03
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes
	}
}
UKR_decrease_melnyk_influence = {
	custom_effect_tooltip = UKR_decrease_melnyk_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = -10 }
				add_to_variable = { UKR_petliura_pm_authority = 10 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.01
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = -12 }
				add_to_variable = { UKR_petliura_pm_authority = 12 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.02
				}
				add_popularity = {
					ideology = national_populist
					popularity = -0.01
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = -15 }
				add_to_variable = { UKR_petliura_pm_authority = 15 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.03
				}
				add_popularity = {
					ideology = national_populist
					popularity = -0.02
				}
			}
			25 = {
				add_to_variable = { UKR_melnyk_pm_authority = -17 }
				add_to_variable = { UKR_petliura_pm_authority = 17 }					
				add_popularity = {
					ideology = paternal_autocrat
					popularity = -0.04
				}
				add_popularity = {
					ideology = national_populist
					popularity = -0.03
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes
	}
}
UKR_increase_shumskyi_influence = {
	if = {
		limit = { 
			OR = {
				has_country_flag = UKR_shumskyi_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_shumskyi_influence
		UKR_increase_duumvirate_ideas = yes
	}
	else_if = {
		limit = { 
			OR = {
				has_country_flag = UKR_petliura_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_petliura_influence
		UKR_increase_duumvirate_ideas = yes
	}
	else = {
		custom_effect_tooltip = UKR_increase_shumskyi_influence
		hidden_effect = {
			random_list = {
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = -6 }
					add_to_variable = { UKR_shumskyi_authority = 6 }					
					add_popularity = {
						ideology = syndicalist
						popularity = 0.01
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = -8 }
					add_to_variable = { UKR_shumskyi_authority = 8 }					
					add_popularity = {
						ideology = syndicalist
						popularity = 0.02
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = -10 }
					add_to_variable = { UKR_shumskyi_authority = 10 }					
					add_popularity = {
						ideology = syndicalist
						popularity = 0.03
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = -12 }
					add_to_variable = { UKR_shumskyi_authority = 12 }					
					add_popularity = {
						ideology = syndicalist
						popularity = 0.04
					}
				}
			}	
			UKR_update_petliura_progress_bar = yes
		}
		UKR_increase_duumvirate_ideas = yes
		UKR_recheck_duumvirate_and_collapse_if_yes = yes
	}
}
UKR_decrease_shumskyi_influence = {
	if = {
		limit = { 
			OR = {
				has_country_flag = UKR_shumskyi_influence_blocked
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_shumskyi_influence
		UKR_decrease_duumvirate_ideas = yes
	}
	else_if = {
		limit = { 
			OR = {
				has_country_flag = UKR_petliura_influence_blocked 
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_SHUMSKYI }
				}
			}
		}
		custom_effect_tooltip = UKR_cannot_change_petliura_influence
		UKR_decrease_duumvirate_ideas = yes
	}
	else = {
		custom_effect_tooltip = UKR_decrease_shumskyi_influence
		hidden_effect = {
			random_list = {
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = 6 }
					add_to_variable = { UKR_shumskyi_authority = -6 }					
					add_popularity = {
						ideology = syndicalist
						popularity = -0.01
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = 8 }
					add_to_variable = { UKR_shumskyi_authority = -8 }					
					add_popularity = {
						ideology = syndicalist
						popularity = -0.02
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = 10 }
					add_to_variable = { UKR_shumskyi_authority = -10 }					
					add_popularity = {
						ideology = syndicalist
						popularity = -0.03
					}
				}
				25 = {
					add_to_variable = { UKR_petliura_pm_authority = 12 }
					add_to_variable = { UKR_shumskyi_authority = -12 }					
					add_popularity = {
						ideology = syndicalist
						popularity = -0.04
					}
				}
			}	
			UKR_update_petliura_progress_bar = yes
		}
		UKR_decrease_duumvirate_ideas = yes
		UKR_recheck_duumvirate_and_collapse_if_yes = yes
	}
}
UKR_recheck_duumvirate_and_collapse_if_yes = {
	if = {
		limit = {
			OR = {
				check_variable = { UKR_petliura_pm_authority > 70 }
				check_variable = { UKR_shumskyi_authority > 70 }
				AND = {
					is_ai = yes
					has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILED_STATE }
					OR = {
						has_completed_focus = UKR_Two_Great_Revolutionaries
						has_completed_focus = UKR_Time_Of_Compromises
					}
				}
			}			
		}
		UKR_collapse_duumvirate = yes
	}
}
UKR_collapse_duumvirate = {
	set_country_flag = UKR_duumvirate_colapsed
	if = {
		limit = {
			NOT = { 
				OR = {
					has_completed_focus = UKR_Two_Great_Revolutionaries
					has_completed_focus = UKR_Time_Of_Compromises
				}
			}
		}		
		hidden_effect = {
			unlock_national_focus = UKR_Borotbyst_Petliura_Withstand
			unlock_national_focus = UKR_Meet_Shumskyi_Petliura
			unlock_national_focus = UKR_Call_Tiutiunnyk
		}
		complete_national_focus = UKR_The_Great_Tragedy
	}
	else_if = {
		limit = {
			OR = {
				has_completed_focus = UKR_Two_Great_Revolutionaries
				has_completed_focus = UKR_Time_Of_Compromises
			}
			NOT = { has_completed_focus = UKR_Vague_Balance_Holds }
		}				
		hidden_effect = {
			unlock_national_focus = UKR_Committees_Ukrainisation
			unlock_national_focus = UKR_Land_Reform
			unlock_national_focus = UKR_Socialization_Of_Factories
		}
		complete_national_focus = UKR_Duumvirate_Breaks			
	}			
	clr_country_flag = UKR_petliura_shumskyi		
	clr_country_flag = UKR_petliura_shumskyi_success
	if = {
		limit = { is_in_faction_with = USR }
		dismantle_faction = yes
	}
	if = {
		limit = {
			has_guaranteed = USR
		}
		USR = {
			diplomatic_relation = {
				country = ROOT
				relation = guarantee
				active = no
			}
		}
	}
	if = {
		limit = {
			USR = { has_guaranteed = ROOT }
		}
		ROOT = {
			diplomatic_relation = {
				country = USR
				relation = guarantee
				active = no
			}
		}
	}
	if = {
		limit = { has_non_aggression_pact_with = USR }
		diplomatic_relation = {
			country = USR
			relation = military_access
			active = no
		}
	}
	if = {
		limit = { has_military_access_to = USR }
		diplomatic_relation = {
			country = USR
			relation = military_access
			active = no
		}
	}
	if = {
		limit = { 
			USR = { has_military_access_to = ROOT }
		}
		USR = {
			diplomatic_relation = {
				country = ROOT
				relation = military_access
				active = no
			}
		}
	}
	declare_war_on = {
		target = USR
		type = civil_war
	}
	hidden_effect = {
		GER = {
			country_event = {
				id = ukrfor.252
				days = 2
				random_days = 5
			}
		}
		RUS = {
			country_event = {
				id = ukrfor.252
				days = 3
				random_days = 4
			}
		}
	}
}
UKR_increase_left_uns_influence = {
	custom_effect_tooltip = UKR_increase_left_uns_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_uns_left_authority = 10 }
				add_to_variable = { UKR_uns_right_authority = -10 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.01
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = 12 }
				add_to_variable = { UKR_uns_right_authority = -12 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.02
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = 15 }
				add_to_variable = { UKR_uns_right_authority = -15 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.03
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = 17 }
				add_to_variable = { UKR_uns_right_authority = -17 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.04
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes
	}
	if = {
		limit = {
			has_completed_focus = UKR_Stop_Radical_Left_Reforms
			has_completed_focus = UKR_Work_With_Bouregoisie
			has_completed_focus = UKR_Moderate_Taxation
			NOT = { country_exists = USR }
		}
		if = {
			limit = {
				is_ai = yes
				has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA }
			}
			complete_national_focus = UKR_National_Union_Holds
			country_event = ukrsoc.290
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { UKR_uns_right_authority > 65 }
					AND = {
						is_ai = yes
						has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_USDRP }
					}
				}
			}
			complete_national_focus = UKR_Left_Wing_Splits
			country_event = ukrsoc.294
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { UKR_uns_left_authority > 65 }
					AND = {
						is_ai = yes
						has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_UPSF }
					}
				}
			}
			complete_national_focus = UKR_Right_Wing_Splits
			country_event = ukrsoc.297
		}
		else = {
			complete_national_focus = UKR_National_Union_Holds
			country_event = ukrsoc.290
		}
	}
}
UKR_increase_right_uns_influence = {
	custom_effect_tooltip = UKR_increase_right_uns_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_uns_left_authority = -10 }
				add_to_variable = { UKR_uns_right_authority = 10 }					
				add_popularity = {
					ideology = social_liberal
					popularity = 0.01
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = -12 }
				add_to_variable = { UKR_uns_right_authority = 12 }					
				add_popularity = {
					ideology = social_liberal
					popularity = 0.02
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = -15 }
				add_to_variable = { UKR_uns_right_authority = 15 }					
				add_popularity = {
					ideology = social_liberal
					popularity = 0.03
				}
			}
			25 = {
				add_to_variable = { UKR_uns_left_authority = -17 }
				add_to_variable = { UKR_uns_right_authority = 17 }					
				add_popularity = {
					ideology = social_liberal
					popularity = 0.04
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes		
	}
	if = {
		limit = {
			has_completed_focus = UKR_Stop_Radical_Left_Reforms
			has_completed_focus = UKR_Work_With_Bouregoisie
			has_completed_focus = UKR_Moderate_Taxation
			NOT = { country_exists = USR }
		}
		if = {
			limit = {
				is_ai = yes
				has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA }
			}
			complete_national_focus = UKR_National_Union_Holds
			country_event = ukrsoc.290
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { UKR_uns_right_authority > 65 }
					AND = {
						is_ai = yes
						has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_USDRP }
					}
				}
			}
			complete_national_focus = UKR_Left_Wing_Splits
			country_event = ukrsoc.294
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { UKR_uns_left_authority > 65 }
					AND = {
						is_ai = yes
						has_game_rule = { rule = UKR_future option = UKR_FUTURE_PETLIURA_FAILS_UPSF }
					}
				}
			}
			complete_national_focus = UKR_Right_Wing_Splits
			country_event = ukrsoc.297
		}
		else = {
			complete_national_focus = UKR_National_Union_Holds
			country_event = ukrsoc.290
		}
	}
}
UKR_increase_usdrp_influence = {
	custom_effect_tooltip = UKR_increase_usdrp_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = 6 }
				add_to_variable = { UKR_melnyk_pm_authority = -3 }
				add_to_variable = { UKR_petliura_pm_authority = -3 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.02
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = 8 }
				add_to_variable = { UKR_melnyk_pm_authority = -4 }
				add_to_variable = { UKR_petliura_pm_authority = -4 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.03
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = 10 }
				add_to_variable = { UKR_melnyk_pm_authority = -5 }
				add_to_variable = { UKR_petliura_pm_authority = -5 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.04
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = 12 }
				add_to_variable = { UKR_melnyk_pm_authority = -6 }
				add_to_variable = { UKR_petliura_pm_authority = -6 }					
				add_popularity = {
					ideology = social_democrat
					popularity = 0.05
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes
	}
}
UKR_decrease_usdrp_influence = {
	custom_effect_tooltip = UKR_decrease_usdrp_influence
	hidden_effect = {
		random_list = {
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = -10 }
				add_to_variable = { UKR_melnyk_pm_authority = 5 }
				add_to_variable = { UKR_petliura_pm_authority = 5 }					
				add_popularity = {
					ideology = social_democrat
					popularity = -0.02
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = -12 }
				add_to_variable = { UKR_melnyk_pm_authority = 6 }
				add_to_variable = { UKR_petliura_pm_authority = 6 }					
				add_popularity = {
					ideology = social_democrat
					popularity = -0.03
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = -14 }
				add_to_variable = { UKR_melnyk_pm_authority = 7 }
				add_to_variable = { UKR_petliura_pm_authority = 7 }					
				add_popularity = {
					ideology = social_democrat
					popularity = -0.04
				}
			}
			25 = {
				add_to_variable = { UKR_usdrp_pm_authority = -16 }
				add_to_variable = { UKR_melnyk_pm_authority = 8 }
				add_to_variable = { UKR_petliura_pm_authority = 8 }					
				add_popularity = {
					ideology = social_democrat
					popularity = -0.05
				}
			}
		}	
		UKR_update_petliura_progress_bar = yes
	}
}

UKR_setup_eastern_threat_decisions = {
	every_state = {
		limit = { 
			OR = {
				state = 221 
				state = 227  
				state = 228  
				state = 200  
				state = 1239  
				state = 1283  
				state = 1282  
				state = 1284  
				state = 1285  
				state = 1286
			}
		}
		UKR = { activate_targeted_decision = { target = PREV decision = UKR_evacuate_industry } }
	}
	UKR = { 
		activate_targeted_decision = { target = 221 decision = UKR_move_khlf }
		activate_targeted_decision = { target = 221 decision = UKR_move_khtz }
		activate_targeted_decision = { target = 228 decision = UKR_move_azovstal }
		activate_targeted_decision = { decision = UKR_organise_partisan_cells target = THIS }
		activate_targeted_decision = { decision = UKR_emergency_recruitment target = THIS }
		activate_targeted_decision = { decision = UKR_not_step_back target = THIS }
		country_event = {
			id = ukrsun.33
			days = 20
			random_days = 20
		}		
	}	
}
UKR_activate_mie_subversive_decisions = {
	set_country_flag = UKR_nationalist_subversive_mie
	activate_targeted_decision = { target = MIE decision = UKR_seize_leadership_of_mie }
	activate_targeted_decision = { target = WHR decision = UKR_ally_nationalists_in_country }
	activate_targeted_decision = { target = POL decision = UKR_ally_nationalists_in_country }
	activate_targeted_decision = { target = LIT decision = UKR_ally_nationalists_in_country }
	activate_targeted_decision = { target = BAT decision = UKR_ally_nationalists_in_country }
}
UKR_clamp_sun_variables = {
	clamp_variable = { 
		var = UKR_sun_integralists 
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_sun_old_guard 
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_sun_nrm 
		min = 0
		max = 100
	}
}
UKR_clamp_petliura_variables = {
	clamp_variable = { 
		var = UKR_usdrp_pm_authority 
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_petliura_pm_authority 
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_melnyk_pm_authority
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_shumskyi_authority
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_uns_left_authority
		min = 0
		max = 100
	}
	clamp_variable = { 
		var = UKR_uns_right_authority
		min = 0
		max = 100
	}
}
UKR_recalculate_petliura_modifiers = {
	set_variable = { UKR_petliura_stability = UKR_petliura_pm_authority }
	set_variable = { UKR_petliura_pp = UKR_petliura_pm_authority }
	set_variable = { UKR_melnyk_war_support = UKR_melnyk_pm_authority }
	set_variable = { UKR_melnyk_army_org = UKR_melnyk_pm_authority }
	set_variable = { UKR_shumskyi_max_efficency = UKR_shumskyi_authority }
	set_variable = { UKR_shumskyi_factory_efficiency = UKR_shumskyi_authority }
	
	divide_variable = { UKR_petliura_stability = 500 }
	divide_variable = { UKR_petliura_pp = 500 }
	divide_variable = { UKR_melnyk_war_support = 500 }
	divide_variable = { UKR_melnyk_army_org = 500 }
	divide_variable = { UKR_shumskyi_max_efficency = 500 }
	divide_variable = { UKR_shumskyi_factory_efficiency = 500 }
	
	if = {
		limit = { 
			OR = {
				check_variable = { UKR_petliura_pm_authority < UKR_shumskyi_authority }
				check_variable = { UKR_petliura_pm_authority < UKR_melnyk_pm_authority }
			}
		}
		multiply_variable = { UKR_petliura_stability = -1 }
		multiply_variable = { UKR_petliura_pp = -1 }
	}
	if = {
		limit = {
			check_variable = { UKR_shumskyi_authority < UKR_petliura_pm_authority }
		}
		multiply_variable = { UKR_shumskyi_max_efficency = -1 }
		multiply_variable = { UKR_shumskyi_factory_efficiency = -1 }
	}
	if = {
		limit = {
			check_variable = { UKR_melnyk_pm_authority < UKR_petliura_pm_authority }
		}
		multiply_variable = { UKR_melnyk_war_support = -1 }
		multiply_variable = { UKR_melnyk_army_org = -1 }
	}
	if = {
		limit = { 
			has_completed_focus = UKR_Premier_Shumskyi_Commander_Petliura
			has_country_flag = UKR_petliura_shumskyi
		}
		add_to_variable = { UKR_shumskyi_factory_efficiency = 0.05 }
		add_to_variable = { UKR_petliura_war_support = 0.07 }
	}

	force_update_dynamic_modifier = yes
}
UKR_update_petliura_progress_bar = {
	UKR_clamp_petliura_variables = yes
	UKR_recalculate_petliura_modifiers = yes
	# SHOULD RECIZE 100 INTO 90
	if = {
		limit = { has_country_flag = UKR_petliura_shumskyi }
		set_temp_variable = { UKR_petliura_temp_pm_authority = UKR_petliura_pm_authority }
		multiply_temp_variable = { UKR_petliura_temp_pm_authority = 0.9 }
		round_variable = UKR_petliura_temp_pm_authority
		set_temp_variable = { UKR_shumskyi_temp_authority = 90 }
		subtract_from_temp_variable = { UKR_shumskyi_temp_authority = UKR_petliura_temp_pm_authority }
		round_variable = UKR_shumskyi_temp_authority
		
		set_temp_variable = { UKR_usdrp_temp_pm_authority = 0 }
		set_temp_variable = { UKR_uns_left_temp_authority = 0 }
		set_temp_variable = { UKR_uns_right_temp_authority = 0 }
		set_temp_variable = { UKR_melnyk_pm_temp_authority = 0 }
	}
	else_if = {
		limit = { has_country_flag = UKR_petliura_national_union }
		set_temp_variable = { UKR_uns_left_temp_authority = UKR_uns_left_authority }
		multiply_temp_variable = { UKR_uns_left_temp_authority = 0.9 }
		round_variable = UKR_uns_left_temp_authority
		set_temp_variable = { UKR_uns_right_temp_authority = 90 }
		subtract_from_temp_variable = { UKR_uns_right_temp_authority = UKR_uns_left_temp_authority }
		
		set_temp_variable = { UKR_usdrp_temp_pm_authority = 0 }
		set_temp_variable = { UKR_shumskyi_temp_authority = 0 }
		set_temp_variable = { UKR_petliura_temp_pm_authority = 0 }
		set_temp_variable = { UKR_melnyk_pm_temp_authority = 0 }
	}
	else_if = {
		limit = { has_country_flag = UKR_petliura_melnyk }
		set_temp_variable = { UKR_usdrp_temp_pm_authority = UKR_usdrp_pm_authority }
		set_temp_variable = { UKR_petliura_temp_pm_authority = UKR_petliura_pm_authority }
		multiply_temp_variable = { UKR_usdrp_temp_pm_authority = 0.9 }
		multiply_temp_variable = { UKR_petliura_temp_pm_authority = 0.9 }
		round_variable = UKR_usdrp_temp_pm_authority
		round_variable = UKR_petliura_temp_pm_authority
	
		set_temp_variable = { UKR_melnyk_pm_temp_authority = 90 }
		subtract_from_temp_variable = { UKR_melnyk_pm_temp_authority = UKR_usdrp_temp_pm_authority }
		subtract_from_temp_variable = { UKR_melnyk_pm_temp_authority = UKR_petliura_temp_pm_authority }
		round_variable = UKR_melnyk_pm_temp_authority
		
		set_temp_variable = { UKR_shumskyi_temp_authority = 0 }
		set_temp_variable = { UKR_uns_left_temp_authority = 0 }
		set_temp_variable = { UKR_uns_right_temp_authority = 0 }
	}
			
	set_variable = { UKR_usdrp_pm_frame = UKR_usdrp_temp_pm_authority }
	set_variable = { UKR_shumskyi_frame = UKR_shumskyi_temp_authority }
	set_variable = { UKR_petliura_pm_frame = UKR_petliura_temp_pm_authority }
	set_variable = { UKR_uns_left_frame = UKR_uns_left_temp_authority }
	set_variable = { UKR_uns_right_frame = UKR_uns_right_temp_authority }
	set_variable = { UKR_melnyk_pm_frame = UKR_melnyk_pm_temp_authority }
		
	# Generate partial sums t1 = (P1), t2 = (P1 + P2), t3 = (P1 + P2 + P3)
	
	# so that we can use resize_array to fill our array with the right number of seats for each party
	set_temp_variable = { t1 = UKR_shumskyi_frame }
	set_temp_variable = { t2 = UKR_petliura_pm_frame }
	set_temp_variable = { t3 = UKR_usdrp_pm_frame }
	set_temp_variable = { t4 = UKR_uns_left_frame }
	set_temp_variable = { t5 = UKR_uns_right_frame }
	set_temp_variable = { t6 = UKR_melnyk_pm_frame }
	
	add_to_temp_variable = { t2 = t1 }
	add_to_temp_variable = { t3 = t2 }
	add_to_temp_variable = { t4 = t3 }
	add_to_temp_variable = { t5 = t4 }
	add_to_temp_variable = { t6 = t5 }
		
	clear_array = UKR_Petliura_Progress_Bar_display
	
	# Resize array to t1 seats, setting P1 frame numbers to 1 (Party 1 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 1
		size = t1
	}
	# Resize array to t2 seats, setting P2 frame numbers to 2 (Party 2 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 2
		size = t2
	}
	# Resize array to t3 seats, setting P3 frame numbers to 3 (Party 3 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 3
		size = t3
	}
	# Resize array to t3 seats, setting P3 frame numbers to 3 (Party 3 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 4
		size = t4
	}
	# Resize array to t3 seats, setting P3 frame numbers to 3 (Party 3 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 5
		size = t5
	}
	# Resize array to t3 seats, setting P3 frame numbers to 3 (Party 3 color)
	resize_array = {
		array = UKR_Petliura_Progress_Bar_display
		value = 6
		size = t6
	}	
}
UKR_create_petliura_progress_bar = {
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_y = 0 }	
	
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 0 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 4 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 8 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 12 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 16 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 20 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 24 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 28 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 32 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 36 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 40 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 44 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 48 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 52 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 56 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 60 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 64 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 68 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 72 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 76 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 80 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 84 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 88 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 92 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 96 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 100 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 102 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 106 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 110 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 114 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 118 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 122 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 126 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 130 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 134 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 138 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 142 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 146 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 150 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 154 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 158 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 162 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 166 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 170 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 174 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 178 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 182 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 186 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 190 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 194 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 198 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 202 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 206 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 210 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 214 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 218 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 222 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 226 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 230 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 234 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 238 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 242 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 246 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 250 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 254 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 258 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 262 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 266 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 270 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 274 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 278 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 282 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 286 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 290 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 294 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 298 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 300 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 302 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 306 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 310 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 314 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 318 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 322 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 326 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 330 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 334 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 338 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 342 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 346 }
	add_to_array = { UKR_Petliura_Progress_Bar_icon_x = 350 }		
}
UKR_update_military = {
	hidden_effect = {
		if = {
			limit = {
				has_completed_focus = UKR_shadow_of_mighty_wings
				NOT = { is_ally_with = GER }
			}
			uncomplete_national_focus = {
				focus = UKR_shadow_of_mighty_wings
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_protection_of_dual_monarchy
				NOT = { is_ally_with = AUS }
			}
			uncomplete_national_focus = {
				focus = UKR_protection_of_dual_monarchy
				uncomplete_children = yes
			}
		}
		else_if = {
			limit = {
				has_completed_focus = UKR_stronghold_of_internationale
				NOT = { is_ally_with = INT }
			}
			uncomplete_national_focus = {
				focus = UKR_stronghold_of_internationale
				uncomplete_children = yes
			}
		}		
	}
}
UKR_clear_all_flags = {
	clr_country_flag = UKR_agriculture_crisis
	clr_country_flag = UKR_joined_DA
	clr_country_flag = UKR_dyrektoria_tree_unlocked
	clr_country_flag = UKR_dyrektoria_uprising_active
	clr_country_flag = UKR_petliura_shumskyi		
	clr_country_flag = UKR_petliura_shumskyi_success
	clr_country_flag = UKR_petliura_national_union
	clr_country_flag = UKR_petliura_shumskyi
	clr_country_flag = UKR_petliura_melnyk
	clr_country_flag = UKR_petliura_not_in_power_wait_elections
	clr_country_flag = UKR_borotbyst_against_petliura
	clr_country_flag = UKR_borotbyst_against_skrypnyk
	clr_country_flag = UKR_petliura_category_unlocked
	clr_country_flag = UKR_can_do_foreign_policy
	clr_country_flag = UKR_ai_borotbysts
	clr_country_flag = UKR_preparing_for_galicia_attack
	clr_country_flag = UKR_unlock_mie_decisions_to_topple_germany
	clr_country_flag = UKR_petliura_shumskyi_united_front
	set_country_flag = UKR_disable_borotbist_uprisings
	set_country_flag = UKR_congress_begins
	set_country_flag = UKR_congress_ended
}
UKR_clear_all_decisions = {
	UKR_teardown_investigation_decisions = yes
}
UKR_setup_puppet = {
	if = {
		limit = { tag = GER }
		UKR = {
			UKR_clear_all_flags = yes
			UKR_clear_all_decisions = yes
			hidden_effect = {
				set_party_name = {
					ideology = paternal_autocrat
					name = UKR_paternal_autocrat_party
					long_name = UKR_paternal_autocrat_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = UKR_social_liberal_party
					long_name = UKR_social_liberal_party_long
				}
			}
			if = {
				limit = { has_country_flag = Pavlo_Skoropadskyi_dead }
				UKR_create_danylo = yes
			}
			else = {
				create_country_leader = {
					name = "Pavlo Skoropadskyi"
					desc = "POLITICS_PAVLO_SKOROPADSKYI_DESC"
					picture = "gfx/leaders/UKR/Portrait_UKR_Pavlo_Skoropadsky.png"
					expire = "1.1.1"
					ideology = pataut_ukrainian_conservatism_subtype
				}
			}
			if = {
				limit = { 
					ROOT = { has_left_democratic_government = yes }
				}
				set_politics = {
					ruling_party = social_liberal
					elections_allowed = no
				}
			}
			else = {
				set_politics = {
					ruling_party = paternal_autocrat
					elections_allowed = no
				}
			}
			set_cosmetic_tag = UKR_hetmanate
			UKR_update_military = yes
			mark_focus_tree_layout_dirty = yes
		}
	}
	else_if = {
		limit = { tag = AUS }
		UKR = {
			UKR_clear_all_flags = yes
			UKR_clear_all_decisions = yes
			hidden_effect = {
				set_party_name = {
					ideology = paternal_autocrat
					name = UKR_paternal_autocrat_party
					long_name = UKR_paternal_autocrat_party_long
				}
				set_party_name = {
					ideology = social_liberal
					name = UKR_social_liberal_party
					long_name = UKR_social_liberal_party_long
				}
			}
			set_country_flag = UKR_joined_DA
			if = {
				limit = { has_country_flag = UKR_DAN }
				UKR_create_danylo = yes
			}
			else = {
				UKR_create_leo_stefan = yes
				country_event = {
					id = ukrpol.122
					days = 5
				}
			}
			if = {
				limit = { 
					ROOT = { has_left_democratic_government = yes }
				}
				set_politics = {
					ruling_party = social_liberal
					elections_allowed = no
				}
			}
			else = {
				set_politics = {
					ruling_party = authoritarian_democrat
					elections_allowed = no
				}
			}
			set_cosmetic_tag = UKR_kingdom
			UKR_update_military = yes
			mark_focus_tree_layout_dirty = yes
		}
	}
	else_if = {
		limit = { is_russian_tag_that_can_integrate = yes }		
		if = {
			limit = {
				ROOT = { 
					RUS_russian_monarch = yes 
					RUS_is_constitutional_monarchy = yes 
					is_ai = no
				}
			}
			set_autonomy = {
				target = UKR
				autonomous_state = kr_integrated_puppet
				freedom_level = 0.75
			}
			UKR = {
				UKR_clear_all_flags = yes
				UKR_clear_all_decisions = yes
				set_cosmetic_tag = UKR_RUS_monarchy
				RUS_install_puppet_monarchy = yes
			}
		}
		else_if = {
			limit = { RUS = { has_country_flag = soviet_russia_restored } }  
			set_temp_variable = { target = UKR }
			SOV_puppet_TARGET_effect = yes
			UKR = {
				UKR_clear_all_flags = yes
				UKR_clear_all_decisions = yes
				UKR_remove_king = yes
				if = {
					limit = {
						ROOT = { has_completed_focus = RUS_Bolsheviks_In_Power }
					}
					set_cosmetic_tag = UKR_bolshevist
					set_politics = {
						ruling_party = totalist
						elections_allowed = no
					}
					hidden_effect = {
						set_party_name = {
							ideology = totalist
							name = UKR_totalist_party2
							long_name = UKR_totalist_party2_long
						}
					}
					if = {
						limit = {
							NOT = { has_country_flag = Yevhenia_Bosh_dead }
						}
						create_country_leader = {
							name = "Yevhenia Bosh"
							desc = "POLITICS_YEVHENIYA_BOSCH_DESC"
							picture = "gfx/leaders/UKR/Portrait_UKR_Evheniya_Bosch.png"
							expire = "1.1.1"
							ideology = authcom_subtype
						}
					}
					else_if = {
						limit = {
							NOT = { has_country_flag = UKR_no_khruschev_for_puppet }
						}
						create_country_leader = {
							name = "Nikita Khrushchev"
							desc = "POLITICS_NIKITA_KRUSCHEV_DESC"
							picture = "gfx/leaders/UKR/Portrait_UKR_Nikita_Kruschev.png"
							expire = "1.1.1"
							ideology = authcom_subtype
						}
					}
					else = {
						create_country_leader = {
							name = "Yefim Shchadenko"
							picture = "gfx/leaders/UKR/Portrait_UKR_Yefim_Shchadenko.png"
							expire = "1.1.1"
							ideology = red_junta_subtype
						}						
					}
				}
				else = {						
					set_cosmetic_tag = UKR_SOV
					hidden_effect = {
						set_party_name = {
							ideology = totalist
							name = UKR_radical_socialist_party
							long_name = UKR_radical_socialist_party_long
						}
						set_party_name = {
							ideology = syndicalist
							name = UKR_syndicalist_party2
							long_name = UKR_syndicalist_party2_long
						}
						set_party_name = {
							ideology = radical_socialist
							name = UKR_radical_socialist_party
							long_name = UKR_radical_socialist_party_long
						}
					}
					create_country_leader = {
						name = "Mykola Skrypnyk"
						desc = "POLITICS_MYKOLA_SKRYPNYK_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Skrypnyk.png"
						expire = "1.1.1"
						ideology = national_communism_subtype
					}
					create_country_leader = {
						name = "Yakiv Braun"
						desc = "POLITICS_YAKIV_BRAUN_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Yakov_Braun.png" 
						expire = "1.1.1"
						ideology = anarcho_syndicalist_subtype
						traits = { UKR_national_nihilist }
					}
					create_country_leader = {
						name = "Mykola Skrypnyk"
						desc = "POLITICS_MYKOLA_SKRYPNYK_DESC"
						picture = "gfx/leaders/UKR/Portrait_UKR_Mykola_Skrypnyk.png"
						expire = "1.1.1"
						ideology = radsoc_communism_subtype
					}
				}
			}
		}
		else = {
			UKR = {
				drop_cosmetic_tag = yes
				UKR_clear_all_flags = yes
				UKR_clear_all_decisions = yes
				clr_global_flag = UKR_konovalets_counet_coup
				set_country_flag = Pavlo_Skoropadskyi_dead
				set_country_flag = Yevhen_Konovalets_dead
				UKR_remove_king = yes
				hidden_effect = {
					set_party_name = {
						ideology = paternal_autocrat
						name = UKR_market_liberal_party2
						long_name = UKR_market_liberal_party2_long
					}
				}
				if = {
					limit = { 
						ROOT = { has_government = national_populist }
					}
					set_politics = {
						ruling_party = paternal_autocrat
						elections_allowed = no
					}
				}
				UKR_update_military = yes
				mark_focus_tree_layout_dirty = yes
			}
		}
	}
	else = {
		UKR = {
			drop_cosmetic_tag = yes
			UKR_clear_all_flags = yes
			UKR_clear_all_decisions = yes
			clr_global_flag = UKR_konovalets_counet_coup
			set_country_flag = Pavlo_Skoropadskyi_dead
			set_country_flag = Yevhen_Konovalets_dead
			UKR_remove_king = yes
			UKR_update_military = yes
			mark_focus_tree_layout_dirty = yes	
		}
	}
}