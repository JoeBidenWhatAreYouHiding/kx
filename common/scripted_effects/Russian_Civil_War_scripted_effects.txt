bolsheviks_gome_home = {
	ENG = {
		random_unit_leader = {
			limit = { has_id = 1955 }
			set_nationality = ROOT
			unit_leader_event = {
				id = russia.1925
				days = 1
				random = 24
			}
		}
		every_unit_leader = {
			limit = { has_unit_leader_flag = SOV_british_clique }
			set_nationality = ROOT
		}
	}
	FRA = {
		random_unit_leader = {
			limit = { has_id = 1956 }
			set_nationality = ROOT
			unit_leader_event = {
				id = russia.1926
				days = 1
				random = 24
			}
		}
		every_unit_leader = {
			limit = { has_unit_leader_flag = SOV_french_clique }
			set_nationality = ROOT
		}
	}
	SRI = {
		random_unit_leader = {
			limit = { has_id = 1954 }
			set_nationality = ROOT
			unit_leader_event = {
				id = russia.1924
				days = 1
				random = 24
			}
		}
		every_unit_leader = {
			limit = { has_unit_leader_flag = SOV_italian_clique }
			set_nationality = ROOT
		}
	}
	
}
setup_soviet_russia = {
	ROOT = { save_global_event_target_as = soviet_russia }
	if = {
		limit = {
			is_faction_leader = yes
		}
		set_faction_name = fourth_internationale
	}
	else_if = {
		limit = {
			is_subject = no
		}
		create_faction = fourth_internationale
	}
	hidden_effect = {
		set_cosmetic_tag = SOV
		set_country_flag = soviet_russia_restored
		set_country_flag = RUS_duma_dissolved
		set_country_flag = SOV_must_deal_with_opposition
		load_focus_tree = Russia_Socialist
		add_stability = 0.3
		add_war_support = 0.2
		set_country_flag = soc_dems_are_socialists
		if = {
			limit = {
				has_socialist_government = no
				NOT = { has_government = social_democrat }
			}
			set_politics = {
				ruling_party = radical_socialist
				last_election = "1930.11.9"
				election_frequency = 48
				elections_allowed = no
			}
		}
		RUS_remove_riga_accords = yes		
		remove_ideas = {
			RUS_divided_staff
			rus_brest_litovsk
			rus_brest_litovsk_1
			RUS_scars_of_russian_revolution
			rus_black_monday_duma_1
			rus_black_monday_duma_2
			rus_black_monday_duma_3
			rus_black_monday_duma_4
			rus_black_monday_duma_5
			rus_black_monday_duma_6
			rus_black_monday_senate_1
			rus_black_monday_senate_2
			rus_black_monday_senate_3
			rus_black_monday_senate_4
			rus_black_monday_senate_5
			rus_black_monday_senate_6
		}
		
		create_country_leader = {
			name = "Grigory Zinoviev"
			desc = "POLITICS_GRIGORY_ZINOVIEV_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Grigoriy_Zinoviev.png"
			expire = "1.1.1"
			ideology = authcom_subtype
			traits = { SOV_student_of_lenin }
		}
		create_country_leader = {
			name = "Maria Spiridonova"
			desc = "POLITICS_MARIA_SPIRIDONOVA_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Maria_Spiridonova.png"
			expire = "1.1.1"
			ideology = anarcho_syndicalist_subtype
			female = yes
			traits = { RUS_valkrye_of_revolution }
		}
		create_country_leader = {
			name = "Nikolay Bukharin"
			desc = "POLITICS_NIKOLAI_BUKHARIN_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Nikolay_Bukharin.png"
			expire = "1.1.1"
			ideology = bukharinist_subtype 
			traits = { RUS_ex_bolshevik  }
		}
		create_country_leader = {
			name = "Rafail Abramovich"
			desc = "POLITICS_RAFAIL_ABRAMOVICH_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Rafail_Abramovich.png"
			expire = "1.1.1"
			ideology = social_democrat_subtype
		}
		for_each_scope_loop = {
			array = CAN.faction_members
			embargo_ROOT = yes
		}
		for_each_scope_loop = {
			array = GER.faction_members
			embargo_ROOT = yes
		}
		for_each_scope_loop = {
			array = AUS.faction_members
			embargo_ROOT = yes
		}
		FRP = { embargo_ROOT = yes }
		GBR = { embargo_ROOT = yes }
		random_unit_leader = {
			limit = { has_id = 455 }
			set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
		}
		random_unit_leader = {
			limit = { has_id = 17897 }
			set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
		}
		XXA = {		
			random_unit_leader = {
				limit = { has_id = 447 }
				set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				set_nationality = ROOT
				promote_to_marshal = yes
			}
			random_unit_leader = {
				limit = { has_id = 607 }
				set_nationality = ROOT
				promote_to_marshal = yes
			}
		}
		random_unit_leader = {
			limit = { has_id = 449 }	
			set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
		}
		if = {
			limit = {
				country_exists = DKB
				DKB = { 
					has_socialist_government = yes 
					is_subject = no
					has_war_with = RUS
				}
			}
			DKB = { white_peace_with_ROOT = yes }
		}
		set_party_name = {
			ideology = social_democrat
			name = RUS_social_democrat_party
			long_name = RUS_social_democrat_party_long
		}
		set_party_name = {
			ideology = social_liberal
			name = RUS_social_liberal_party
			long_name = RUS_social_liberal_party_long
		}
	}
}

setup_rcw_workers_initial = {
	if = {
		limit = {
			is_faction_leader = yes
		}
		set_faction_name = fourth_internationale
	}
	else = {
		create_faction = fourth_internationale
	}
	hidden_effect = {
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_F_Vatutin_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Sergey_L_Markov_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Bronislav_V_Kaminski_dead
		set_country_flag = Pavel_N_Shatilov_dead
		set_country_flag = Vasiliy_V_Biskupskiy_dead
		set_country_flag = Andrei_A_Vlasov_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Lavrentiy_Kornilov_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_S_Antonov_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Aleksandr_I_Verkhovskiy_dead
		set_country_flag = Vasiliy_Kanin_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		ROOT = { save_global_event_target_as = soviet_russia }
		add_ideas = SOV_chaotic_revolution_1
		add_stability = 0.3
		add_war_support = 0.2
		set_country_flag = soc_dems_are_socialists
		remove_ideas = {
			RUS_divided_staff
			rus_brest_litovsk
			rus_brest_litovsk_1
			RUS_scars_of_russian_revolution
		}
		RUS_remove_riga_accords = yes			
		remove_all_ministers = yes
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = no
		}
		create_country_leader = {
			name = "Revolutionary Workers"
			picture = "gfx/leaders/RUS/Portrait_RUS_Workers.png"
			expire = "1.1.1"
			ideology = radical_socialist_subtype
		}
		set_party_name = {
			ideology = radical_socialist
			name = SOV_workers_rev
			long_name = SOV_workers_rev_long
		}
		
		set_political_party = { ideology = market_liberal popularity = 0 }
		set_political_party = { ideology = social_conservative popularity = 0 }
		set_political_party = { ideology = authoritarian_democrat popularity = 0 }
		set_political_party = { ideology = paternal_autocrat popularity = 0 }
		
		every_unit_leader = {
			limit = {
				NOT = {
					has_trait = hidden_sympathies
				}
			}
			set_nationality = RVA
		}
		random_unit_leader = {
			limit = { has_id = 455 }
			set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
		}
		random_unit_leader = {
			limit = { has_id = 17897 }
			set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
		}
		random_unit_leader = {
			limit = { has_id = 447 }
			set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
		}
		random_unit_leader = {
			limit = { has_id = 449 }	
			set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
		}
		set_party_name = {
			ideology = social_democrat
			name = RUS_social_democrat_party
			long_name = RUS_social_democrat_party_long
		}
		set_party_name = {
			ideology = social_liberal
			name = RUS_social_liberal_party
			long_name = RUS_social_liberal_party_long
		}
	}
}
initialize_rcw = {
	every_state = {
		limit = {
			is_siberia = yes
			is_demilitarized_zone = yes
			is_core_of = SIB
		}
		force_disable_resistance = { clear = yes }
		transfer_state_to = TRM
		TRM = {
			every_owned_state = {
				limit = { is_demilitarized_zone = yes }
				set_demilitarized_zone = no
			}
			country_event = {
				id = tram.10
				days = 2
			}
			#country_event = {
			#	id = rcw.212
			#	days = 7
			#}
		}
	}
	if = {
		limit = {
			NOT = { has_global_flag = RRF_will_not_spawn }
		}
		every_state = {
			limit = {
				is_demilitarized_zone = yes
				is_core_of = RRF
			}
			RRF = { 
				transfer_state = PREV
				load_oob = "RUS_RRF_civil_war"
			}
		}
	}
	hidden_effect = {
		every_state = {
			limit = {
				OR = {
					state = 239
					state = 652
					state = 401
					state = 236
				}
			}
			remove_building = { type = industrial_complex level = 1 }
			add_building_construction = { type = arms_factory level = 1 instant_build = yes }
		}
		every_state = {
			limit = {
				OR = {
					state = 217
					state = 239
					state = 209
					state = 210
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = { type = arms_factory level = 2 instant_build = yes }
		}
		every_state = {
			limit = {
				OR = {
					state = 209
					state = 210
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = { type = industrial_complex level = 2 instant_build = yes }
		}
		every_state = {
			limit = {
				OR = {
					state = 258
					state = 223
					state = 222
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = { type = arms_factory level = 1 instant_build = yes }
		}
		
		if = {
			limit = {
				event_target:soviet_russia = { exists = yes }
			}
			event_target:soviet_russia = { 
				add_ideas = {
					RCW_major_SOV
					extensive_conscription
					war_economy
				}
				if = {
					limit = {
						country_exists = RVA
					}
					declare_war_on = {
						target = RVA
						type = civil_war
					}
				}
				if = {
					limit = {
						country_exists = RRF
						NOT = { has_global_flag = RCW_SOV_RRF_peace }
					}
					declare_war_on = {
						target = RRF
						type = civil_war
					}
				}
				hidden_effect = {
					TRM = {
						country_event = {
							id = trmnra.103
							days = 10
						}
					}
				}
			}
		}
		if = {
			limit = {
				country_exists = RVA
			}
			RVA = { 
				country_lock_all_division_template = yes
				add_ideas = {
					RCW_major
					war_economy
				} 
				if = {
					limit = {
						event_target:soviet_russia = { exists = yes }
						NOT = { has_war_with = event_target:soviet_russia }
					}
					declare_war_on = {
						target = event_target:soviet_russia
						type = civil_war
					}
				}
				if = {
					limit = {
						country_exists = RUS
						NOT = { has_war_with = RUS }
					}
					declare_war_on = {
						target = RUS
						type = civil_war
					}
				}
				if = {
					limit = {
						NOT = { has_global_flag = RRF_RVA_ceasefire }
						NOT = { has_non_aggression_pact_with = RRF }
						country_exists = RRF
						NOT = { has_war_with = RRF }
					}
					declare_war_on = {
						target = RRF
						type = civil_war
					}
				}
				if = {
					limit = {
						has_country_flag = RCW_will_declare_war_on_TRM
						NOT = { has_war_with = TRM }
					}
					declare_war_on = {
						target = TRM
						type = civil_war
					}
				}
				hidden_effect = {
					if = {
						limit = { has_dlc = "By Blood Alone" }
						load_oob = "RCW_RVA_air_bba"
						else = {
							load_oob = "RCW_RVA_air_legacy"
						}
					}
				}
			}
			for_each_scope_loop = {
				array = RUS.RUS_starting_states_array
				add_claim_by = RVA
			}
		}
		if = {
			limit = {
				country_exists = RRF
			}
			RRF = {  
				country_lock_all_division_template = yes
				add_ideas = {
					RCW_major_RRF
				} 
				if = {
					limit = {
						event_target:soviet_russia = { exists = yes }
						NOT = { has_war_with = event_target:soviet_russia }
						NOT = { has_global_flag = RCW_SOV_RRF_peace }
					}
					declare_war_on = {
						target = event_target:soviet_russia
						type = civil_war
					}
				}
				if = {
					limit = {
						country_exists = RUS
						NOT = { has_war_with = RUS }
						NOT = { has_global_flag = RCW_SOV_RRF_peace }
					}
					declare_war_on = {
						target = RUS
						type = civil_war
					}
				}
				if = {
					limit = {
						NOT = { has_global_flag = RRF_RVA_ceasefire }
						NOT = { has_non_aggression_pact_with = RVA }
						country_exists = RVA
						NOT = { has_war_with = RVA }
					}
					declare_war_on = {
						target = RVA
						type = civil_war
					}
				}
				if = {
					limit = {
						has_country_flag = RCW_will_declare_war_on_TRM
						NOT = { has_war_with = TRM }
					}
					declare_war_on = {
						target = TRM
						type = civil_war
					}
				}
				activate_mission = RCW_give_to_the_people
				hidden_effect = {
					if = {
						limit = { has_dlc = "By Blood Alone" }
						load_oob = "RCW_RRF_air_bba"
						else = {
							load_oob = "RCW_RRF_air_legacy"
						}
					}
				}
			}
			for_each_scope_loop = {
				array = RUS.RUS_starting_states_array
				add_claim_by = RRF
			}
		}
		if = {
			limit = {
				country_exists = DKB
			}
			DKB = {
				country_event = {
					id = rcw.271
					days = 10
				}
			}
		}
		if = {
			limit = {
				country_exists = KUB
				KUB = { 
					OR = {
						has_country_flag = RCW_will_intervene
						is_in_faction_with = RVA
					}
				}
			}
			KUB = {
				declare_war_on = {
					target = RUS
					type = civil_war
				}
				declare_war_on = {
					target = event_target:soviet_russia
					type = civil_war
				}
				declare_war_on = {
					target = RRF
					type = civil_war
				}
				add_ideas = RCW_minor
			}
		}
		if = {
			limit = {
				country_exists = ALO
				has_global_flag = ALO_civil_war
			}
			ALO = {
				country_event = {
					id = alash.698
					days = 5
				}
			}
		}
		RUS = { 
			country_event = { 
				id = russia.1920 
				days = 400
			}
			if = {
				limit = {
					NOT = {
						has_game_rule = {
							rule = KAR_REBELLION
							option = RULE_OPTION_KAR_DISABLED
						}
					}
				}
				country_event = {
					id = rcw.38
					days = 14
				}
			}
		}
	}
}
setup_savinkov_civil_war = {
	hidden_effect = {
		set_country_flag = Lavr_G_Kornilov_dead
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_cos_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_cos_pau
		}
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_carm_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_carm_pau
		}
		if = {
			limit = {
				TRM = { has_socialist_government = no }
			}
			every_unit_leader = {
				limit = {
					has_trait = hidden_sympathies
				}
				set_nationality = SOV
			}
			SOV = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}				
			}
		}
		if = {
			limit = {
				TRM = { has_socialist_government = yes }
			}
			every_unit_leader = {
				limit = {
					has_trait = hidden_sympathies
				}
				set_nationality = TRM
			}
			TRM = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}
			}
		}
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_F_Vatutin_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Aleksandr_I_Verkhovskiy_dead
		set_country_flag = Vasiliy_Kanin_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		hidden_effect = {
			remove_kornilov_idea = yes
			create_country_leader = {
				name = "Pavel Shatilov"
				picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Shatilov.png"
				expire = "1.1.1"
				ideology = junta_subtype
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 652
					state = 251
					state = 239
					state = 401
					state = 265
					state = 217
					state = 1224
					state = 236
					state = 1207
					state = 406
					state = 260
					region = 137
					region = 244
					region = 135
				}
			}
			set_demilitarized_zone = no
			RVA = {
				add_state_core = PREV
				transfer_state = PREV
			}
		}
		RVA = {
			transfer_technology_without_doctrines = yes
			country_lock_all_division_template = yes
			country_event = {
				id = rcw.19
				days = 5
			}
		}
		transfer_units_fraction = {
			target = RVA
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = RUS_kornilov_officer
					has_trait = RUS_drozdovsky_officer
					has_trait = RUS_wrangel_officer
					has_trait = RUS_denikin_officer
					has_trait = RUS_avalov_officer
				}
			}
			set_nationality = RVA
		}
		every_unit_leader = {
			limit = {
				has_trait = MON_rvk_member_trait 
			}
			retire = yes
		}
		set_temp_variable = { RUS_new_sli = party_popularity_100@social_liberal}
		add_to_temp_variable = { RUS_new_sli = party_popularity_100@market_liberal  }
		add_to_temp_variable = { RUS_new_sli = party_popularity_100@social_conservative  }
		add_to_temp_variable = { RUS_new_sli = party_popularity_100@authoritarian_democrat  }
		add_to_temp_variable = { RUS_new_sli = party_popularity_100@paternal_autocrat  }
		
		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = RUS_new_sli }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }
		
		add_to_temp_variable = { RUS_new_sli = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = RUS_new_sli
			market_liberal = 0
			social_conservative = 0
			authoritarian_democrat = 0
			paternal_autocrat = 0
			national_populist = party_popularity_100@national_populist
		}
	}
}
setup_soviets_dem_civil_war = {
	hidden_effect = {
		set_country_flag = Lavr_G_Kornilov_dead
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_cos_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_cos_pau
		}
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_carm_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_carm_pau
		}
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Pavel_N_Shatilov_dead
		set_country_flag = Aleksandr_I_Verkhovskiy_dead
		set_country_flag = Vasiliy_Kanin_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		hidden_effect = {
			remove_kornilov_idea = yes
		}
		remove_ideas = RUS_army_mutiny
		every_owned_state = {
			limit = {
				OR = {
					state = 652
					state = 251
					state = 239
					state = 401
					state = 265
					state = 217
					state = 1224
					state = 236
					state = 406
					state = 260
					state = 1208
					state = 1207
					region = 137
					region = 244
					region = 135
				}
			}
			set_demilitarized_zone = no
			RVA = {
				add_state_core = PREV
				transfer_state = PREV
			}
		}
		RVA = {
			transfer_technology_without_doctrines = yes
			country_lock_all_division_template = yes
			country_event = {
				id = rcw.19
				days = 5
			}
		}
		transfer_units_fraction = {
			target = RVA
			size = 0.35
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = RUS_kornilov_officer
					has_trait = RUS_drozdovsky_officer
					has_trait = RUS_wrangel_officer
					has_trait = RUS_denikin_officer
					has_trait = RUS_avalov_officer
				}
			}
			set_nationality = RVA
		}
		every_unit_leader = {
			limit = {
				has_trait = MON_rvk_member_trait 
			}
			retire = yes
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -1
		}
		add_popularity = {
			ideology = social_conservative
			popularity = -1
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -1
		}
		setup_soviet_russia = yes
	}
}
setup_soviets_wrangel_civil_war = { #less democratic, more autocratic
	hidden_effect = {
		set_country_flag = Lavr_G_Kornilov_dead
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_cos_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_cos_pau
		}
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_carm_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_carm_pau
		}
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Pavel_N_Shatilov_dead
		set_country_flag = Aleksandr_I_Verkhovskiy_dead
		set_country_flag = Vasiliy_Kanin_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		hidden_effect = {
			remove_kornilov_idea = yes
		}
		remove_ideas = RUS_army_mutiny
		every_owned_state = {
			limit = {
				OR = {
					state = 652
					state = 251
					state = 239
					state = 401
					state = 265
					state = 217
					state = 1224
					state = 236
					state = 406
					state = 260
					state = 1207
					state = 1208
					state = 1207
					region = 137
					region = 244
					region = 135
				}				
			}
			set_demilitarized_zone = no
			RVA = {
				add_state_core = PREV
				transfer_state = PREV
			}
		}
		RVA = {
			transfer_technology_without_doctrines = yes
			country_lock_all_division_template = yes
			create_country_leader = {
				name = "Pyotr Wrangel"
				desc = "POLITICS_PYOTR_VRANGEL_DESC"
				picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel.png"
				expire = "1.1.1"
				ideology = junta_subtype
				traits = { RUS_black_baron }
			}
			add_popularity = {
				ideology = social_liberal
				popularity = -0.1
			}
			add_popularity = {
				ideology = market_liberal
				popularity = -0.1
			}
			set_cosmetic_tag = RVA_wrangel
			country_event = {
				id = rcw.19
				days = 5
			}
		}
		transfer_units_fraction = {
			target = RVA
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = RUS_kornilov_officer
					has_trait = RUS_drozdovsky_officer
					has_trait = RUS_wrangel_officer
					has_trait = RUS_denikin_officer
					has_trait = RUS_avalov_officer
				}
			}
			set_nationality = RVA
		}
		every_unit_leader = {
			limit = {
				has_trait = MON_rvk_member_trait 
			}
			retire = yes
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -1
		}
		add_popularity = {
			ideology = social_conservative
			popularity = -1
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -1
		}
		setup_soviet_russia = yes
	}
}
setup_soviets_denikin_civil_war = { #more democrats on his side
	hidden_effect = {
		set_country_flag = Lavr_G_Kornilov_dead
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_cos_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_cos_pau
		}
		if = {
			limit = {
				has_idea = RUS_Lavr_G_Kornilov_carm_pau
			}
			remove_ideas = RUS_Lavr_G_Kornilov_carm_pau
		}
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Pavel_N_Shatilov_dead
		set_country_flag = Bronislav_V_Kaminski_dead
		set_country_flag = Vasiliy_V_Biskupskiy_dead
		set_country_flag = Sergey_L_Markov_dead
		set_country_flag = Aleksandr_I_Verkhovskiy_dead
		set_country_flag = Vasiliy_Kanin_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		hidden_effect = {
			remove_kornilov_idea = yes
		}
		remove_ideas = RUS_army_mutiny
		every_owned_state = {
			limit = {
				OR = {
					state = 652
					state = 251
					state = 239
					state = 401
					state = 265
					state = 217
					state = 1224
					state = 236
					state = 406
					state = 260
					state = 1207
					state = 1208
					state = 1207
					region = 137
					region = 244
					region = 135
				}
			}
			set_demilitarized_zone = no
			RVA = {
				add_state_core = PREV
				transfer_state = PREV
			}
		}
		RVA = {
			transfer_technology_without_doctrines = yes
			country_lock_all_division_template = yes
			add_ideas = RUS_rovs_denikin
			create_country_leader = {
				name = "Anton Denikin"
				desc = "POLITICS_ANTON_DENIKIN_DESC"
				picture = "gfx/leaders/RUS/Portrait_RUS_Anton_Denikin.png"
				expire = "1.1.1"
				ideology = junta_subtype
			}
			add_popularity = {
				ideology = social_liberal
				popularity = 0.1
			}
			add_popularity = {
				ideology = social_conservative
				popularity = 0.1
			}
			set_cosmetic_tag = RVA_denikin
			country_event = {
				id = rcw.19
				days = 5
			}
		}
		transfer_units_fraction = {
			target = RVA
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = RUS_kornilov_officer
					has_trait = RUS_drozdovsky_officer
					has_trait = RUS_wrangel_officer
					has_trait = RUS_denikin_officer
					has_trait = RUS_avalov_officer
				}
			}
			set_nationality = RVA
		}
		every_unit_leader = {
			limit = {
				has_trait = MON_rvk_member_trait 
			}
			retire = yes
		}
		add_popularity = {
			ideology = market_liberal
			popularity = -1
		}
		add_popularity = {
			ideology = social_conservative
			popularity = -1
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -1
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = -1
		}
		setup_soviet_russia = yes
	}
}
setup_soviets_civil_war = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				OR = {
					state = 195 #Petrograd
					state = 208 #Luga
					state = 209 #Pskov
					state = 210 #Velikiye Luki
					state = 219 #Moscow
					state = 220 #Kursk
					state = 224 #Bryansk
					state = 236 #Astrakhan
					state = 239 #Saratov
					state = 240 #Belgorod
					state = 242 #Smolensk
					state = 243 #Roslavl
					state = 244 #Volkhov
					state = 246 #Rzhev
					state = 247 #Tver
					state = 250 #Simbisrk
					state = 252 #Nizhny Novgorod
					state = 253 #Vladimir
					state = 254 #Ryazan
					state = 255 #Penza
					state = 256 #Cheboksary
					state = 263 #Novgorod
					state = 755 #Vitebsk
					state = 880 #Dvinsk
				}
			}
			SOV = { add_state_core = PREV }
		}
		release = SOV
		delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Tankovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
		transfer_units_fraction = {
			target = SOV
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		SOV = {
			set_major = yes
			transfer_technology_without_doctrines = yes
			transfer_navy = { target = RUS }
			add_state_claim = 329 #Tuva
			add_ideas = {
				RUS_nationalist_resistance
				RUS_monarchist_resistance
				RUS_democrat_resistance
			}
			set_country_flag = SOV_must_deal_with_opposition
			country_event = {
				id = bolsheviks.1
				days = 7
			}
		}
		219 = { #Moscow
			create_unit = {
				division = "division_template = \"Tankovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
				count = 3
			}
			create_unit = {
				division = "division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
			}
		}
		217 = { #Tsarityn
			create_unit = {
				division = "division_template = \"Gornostrelkovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
				count = 4
			}
		}
		for_each_scope_loop = {
			array = SOV.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
			teleport_armies = {
				limit = { tag = RUS }
				to_state_array = owned_controlled_states
			}
		}
		for_each_scope_loop = {
			array = RUS.core_states
			add_core_of = SOV
		}
		every_state = {
			limit = { is_claimed_by = RUS }
			add_claim_by = SOV
		}
		set_major = yes
		remove_ideas = RUS_army_mutiny
		random_unit_leader = {
			limit = { has_id = 402 }	
			remove_unit_leader = yes
		}
		every_unit_leader = {
			limit = {
				has_trait = hidden_sympathies
			}
			remove_unit_leader_trait = hidden_sympathies
			set_nationality = SOV
			SOV = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}
			}
		}
		RUS = {
			set_political_party = {
				ideology = syndicalist
				popularity = 0
			}
			set_political_party = {
				ideology = radical_socialist
				popularity = 0
			}
			remove_all_ministers = yes
			set_country_flag = RUS_kornilov_coup
			add_ideas = RUS_Lavr_G_Kornilov_hog_pau
			add_ideas = RUS_Aleksey_A_Ignatiev_for_pau
			add_ideas = RUS_Ivan_P_Romanovskiy_eco_pau
			add_ideas = RUS_Aleksandr_P_Balk_sec_pau 
			create_country_leader = {
				name = "Lavr Kornilov"
				desc = "POLITICS_LAVR_KORNILOV_DESC"
				picture = "gfx/leaders/RUS/Portrait_RUS_Lavr_Kornilov.png"
				expire = "1.1.1"
				ideology = junta_subtype
				traits = {}
			}			
			add_stability = 0.4
			add_popularity = {
				ideology = paternal_autocrat
				popularity = 0.3
			}			
			set_politics = {
				ruling_party = paternal_autocrat
				elections_allowed = no
			}
			clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
			remove_ideas = RUS_scars_of_russian_revolution
			if = {
				limit = { has_idea = rus_political_instability1}
				remove_ideas = rus_political_instability1
			}
			if = {
				limit = { has_idea = rus_political_instability}
				remove_ideas = rus_political_instability
			}
			hidden_effect = {
				set_cosmetic_tag = RUS
				reset_russian_leaders = yes
				add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.1
				}
				add_popularity = {
				ideology = national_populist
				popularity = 0.1
				}
				add_popularity = {
				ideology = social_conservative
				popularity = 0.1
				}
				country_event = {
					id = rusd.50
					days = 2
				}
			}
		}
	}
}
setup_soviets_petrograd_civil_war = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				OR = {
					state = 195 #Petrograd
					state = 208 #Luga
					state = 209 #Pskov
					state = 210 #Velikiye Luki
					state = 210 #Velikiye Luki
					state = 244 #Volkhov
					state = 246 #Rzhev
					state = 247 #Tver
					state = 263 #Novgorod
					state = 264 #Tikhvin
					state = 242 #Smolensk
					state = 243 #Roslavl
					state = 880 #Dvinsk
					state = 755 #Vitebsk
				}
			}
			SOV = { add_state_core = PREV }
		}
		release = SOV
		delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Tankovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
		transfer_units_fraction = {
			target = SOV
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		SOV = {
			set_major = yes
			transfer_technology_without_doctrines = yes
			transfer_navy = { target = RUS }
			add_state_claim = 329 #Tuva
			add_ideas = {
				RUS_nationalist_resistance
				RUS_monarchist_resistance_1
				RUS_democrat_resistance_1
			}
			set_country_flag = SOV_must_deal_with_opposition
			set_politics = {
				ruling_party = syndicalist
				elections_allowed = no
			}
		}
		195 = { #Petrograd
			create_unit = {
				division = "division_template = \"Tankovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
				count = 3
			}
			create_unit = {
				division = "division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
			}
		}
		for_each_scope_loop = {
			array = SOV.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
			teleport_armies = {
				limit = { tag = RUS }
				to_state_array = owned_controlled_states
			}
		}
		for_each_scope_loop = {
			array = RUS.core_states
			add_core_of = SOV
		}
		every_state = {
			limit = { is_claimed_by = RUS }
			add_claim_by = SOV
		}
		set_major = yes
		random_unit_leader = {
			limit = { has_id = 402 }	
			remove_unit_leader = yes
		}
		every_unit_leader = {
			limit = {
				has_trait = hidden_sympathies
			}
			remove_unit_leader_trait = hidden_sympathies
			set_nationality = SOV
			SOV = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}
			}
		}
		RUS = {
			set_political_party = {
				ideology = syndicalist
				popularity = 0
			}
			set_political_party = {
				ideology = radical_socialist
				popularity = 0
			}
		}
	}
}
setup_soviets_moscow_civil_war = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				OR = {
					state = 219 #Moscow
					state = 242 #Smolensk
					state = 243 #Roslavl
					state = 246 #Rzhev
					state = 247 #Tver
					state = 252 #Nizhny Novgorod
					state = 253 #Vladimir
					state = 255 #Penza
					state = 755 #Vitebsk
				}
			}
			SOV = { add_state_core = PREV }
		}
		release = SOV
		delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Tankovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
		transfer_units_fraction = {
			target = SOV
			size = 0.2
			navy_ratio = 0
			keep_unit_leaders_trigger = { always = yes }
		}
		SOV = {
			set_major = yes
			transfer_technology_without_doctrines = yes
			transfer_navy = { target = RUS }
			add_state_claim = 329 #Tuva
			add_ideas = {
				RUS_nationalist_resistance
				RUS_monarchist_resistance_1
				RUS_democrat_resistance_1
			}
			set_country_flag = SOV_must_deal_with_opposition
			set_politics = {
				ruling_party = syndicalist
				elections_allowed = no
			}
		}
		195 = { #Petrograd
			create_unit = {
				division = "division_template = \"Tankovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
				count = 3
			}
			create_unit = {
				division = "division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.3"
				owner = SOV
				prioritize_location = 6380
			}
		}
		for_each_scope_loop = {
			array = SOV.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
			teleport_armies = {
				limit = { tag = RUS }
				to_state_array = owned_controlled_states
			}
		}
		for_each_scope_loop = {
			array = RUS.core_states
			add_core_of = SOV
		}
		every_state = {
			limit = { is_claimed_by = RUS }
			add_claim_by = SOV
		}
		set_major = yes
		random_unit_leader = {
			limit = { has_id = 402 }	
			remove_unit_leader = yes
		}
		every_unit_leader = {
			limit = {
				has_trait = hidden_sympathies
			}
			remove_unit_leader_trait = hidden_sympathies
			set_nationality = SOV
			SOV = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}
			}
		}
		RUS = {
			set_political_party = {
				ideology = syndicalist
				popularity = 0
			}
			set_political_party = {
				ideology = radical_socialist
				popularity = 0
			}
		}
	}
}
setup_savinkov_rrf = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				OR = {
					state = 257
					state = 255 #Penza
					state = 258
					state = 254 #Ryazan
					state = 223
					state = 208
					state = 205
					state = 222
					state = 1205
					state = 1204
					state = 264
					state = 248
					state = 351
					state = 1229
					state = 821
					state = 195 #Petrograd
					state = 208 #Luga
					state = 209 #Pskov
					state = 210 #Velikiye Luki
					state = 219 #Moscow
					state = 220 #Kursk
					state = 224 #Bryansk
					state = 236 #Astrakhan
					state = 239 #Saratov
					state = 240 #Belgorod
					state = 242 #Smolensk
					state = 243 #Roslavl
					state = 244 #Volkhov
					state = 246 #Rzhev
					state = 247 #Tver
					state = 250 #Simbisrk
					state = 252 #Nizhny Novgorod
					state = 253 #Vladimir
					state = 256 #Cheboksary
					state = 263 #Novgorod
					state = 755 #Vitebsk
					state = 880 #Vitebsk
				}
				NOT = { is_owned_by = SOV }
				NOT = { is_owned_by = RVA }
			}
			RRF = { add_state_core = PREV }
		}
		every_unit_leader = {
			limit = {
				OR = {
					has_trait = RUS_markov_officer
					has_id = 412
				}
			}
			set_nationality = RRF
		}
					
		release = RRF
		delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Tankovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
		RRF = {
			set_major = yes
			transfer_technology = yes
			transfer_navy = { target = RUS }
			country_lock_all_division_template = yes
			add_state_claim = 329 #Tuva
			hidden_effect = { load_oob = "RUS_RRF_civil_war" }
		}
		if = {
			limit = {
				has_idea = RUS_RRF
			}
			remove_ideas = RUS_RRF
			RRF = { add_ideas = RUS_RRF }
			every_unit_leader = {
				limit = {
					has_trait = hidden_sympathies
				}
				set_nationality = RRF
			}
			RRF = {
				every_unit_leader = {
					limit = { has_id = 455 }
					set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
				}
				every_unit_leader = {
					limit = { has_id = 17897 }
					set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
				}
				every_unit_leader = {
					limit = { has_id = 447 }
					set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
				}
				random_unit_leader = {
					limit = { has_id = 449 }	
					set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
				}
			}
		}
		if = {
			limit = {
				has_idea = RUS_RRF_1
			}
			remove_ideas = RUS_RRF_1
		}
		reset_russian_leaders = yes
		RUS_setup_acting_president_senate = yes
		195 = { #Petrograd
			create_unit = {
				division = "division_template = \"Tankovaya Diviziya\" start_experience_factor = 0.3"
				owner = RRF
				prioritize_location = 6380
				count = 3
			}
			create_unit = {
				division = "division_template = \"Motostrelkovaya Diviziya\" start_experience_factor = 0.3"
				owner = RRF
				prioritize_location = 6380
			}
		}
		for_each_scope_loop = {
			array = RRF.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
			teleport_armies = {
				limit = { tag = RUS }
				to_state_array = owned_controlled_states
			}
		}
		for_each_scope_loop = {
			array = RUS.core_states
			add_core_of = RRF
		}
		every_state = {
			limit = { is_claimed_by = RUS }
			add_claim_by = RRF
		}
		set_major = yes
		RUS = {
			set_political_party = {
				ideology = national_populist
				popularity = 0
			}
			remove_all_ministers = yes
			drop_cosmetic_tag = yes
			set_country_flag = disable_duma
			set_country_flag = bolsheviks_banned
			clr_country_flag = bolsheviks_allowed
			set_country_flag = nrpr_banned
			remove_ideas = RUS_National_Revolution
			remove_ideas = RUS_RRF
			remove_ideas = RUS_RRF_1
			clr_country_flag = PORTRAIT_PICKER_ACTIVE
			set_politics = {
				ruling_party = social_liberal
			}				
		}
	}
}
setup_savinkov_not_rrf = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				is_core_rrf_state = yes
				NOT = { is_owned_by = RVA }
			}
			add_core_of = RRF
			transfer_state_to = RRF
		}
		transfer_units_fraction = {
			target = RRF
			size = 0.10
			army_ratio = 0.10
			keep_unit_leaders_trigger = { always = yes }
		}
		RRF = {
			delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
			delete_unit_template_and_units = { division_template = "Tankovaya Diviziya" }
			delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya" }
			every_owned_state = { set_demilitarized_zone = no }
			set_major = yes
			transfer_technology = yes
			transfer_navy = { target = RUS }
			country_lock_all_division_template = yes
			add_state_claim = 329 #Tuva
			hidden_effect = { load_oob = "RUS_RRF_civil_war" }
		}
		for_each_scope_loop = {
			array = RRF.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
			teleport_armies = {
				limit = { tag = RUS }
				to_state_array = owned_controlled_states
			}
		}
		for_each_scope_loop = {
			array = RUS.core_states
			add_claim_by = RRF
		}
		every_state = {
			limit = { is_claimed_by = RUS }
			add_claim_by = RRF
		}
		set_major = yes
		RUS = {
			set_political_party = {
				ideology = national_populist
				popularity = 0
			}
			set_country_flag = nrpr_banned
			remove_ideas = RUS_RRF
			remove_ideas = RUS_RRF_1
			clr_country_flag = PORTRAIT_PICKER_ACTIVE
		}
	}
}
setup_western_russian_army = {
	every_state = {
		limit = {
			OR = {
				state = 880
				state = 209
				state = 210
				state = 1287
				state = 1290
				state = 1289
				state = 1288
				state = 1291
			}
			NOT = { is_owned_by = WHR }
			NOT = { is_owned_by = LAT }
			NOT = { is_owned_by = BAT }
			NOT = { is_owned_by = EST }
		}
		hidden_effect = { 
			remove_core_of = RUS 
			add_claim_by = RUS
		}
		add_core_of = WRA
		transfer_state_to = WRA
	}
	for_each_scope_loop = {
		array = RUS.RUS_starting_states_array
		
		if = {
			limit = {
				NOT = { 
					is_core_of = TTR
					is_core_of = BKN
				}
			}
			add_claim_by = WRA
		}
	}
	hidden_effect = { 
		WRA = { 
			load_oob = "WRA" 
		}
	}
	RVA = {
		random_unit_leader = {
			limit = { has_id = 78823 }
			promote_leader = yes
			set_nationality = WRA
		}
		every_unit_leader = {
			limit = {
				has_trait = RUS_avalov_officer
			}
			set_nationality = WRA
		}
	}
}
restore_rcw_factories = {
	every_state = {
		limit = {
			OR = {
				state = 239
				state = 652
				state = 401
				state = 236
			}
		}
		remove_building = { type = arms_factory level = 1 }
		add_building_construction = { type = industrial_complex level = 1 instant_build = yes }
	}
	every_state = {
		limit = {
			OR = {
				state = 217
				state = 239
			}
		}
		remove_building = { type = arms_factory level = 2 }
	}
	every_state = {
		limit = {
			OR = {
				state = 209
				state = 210
			}
		}
		remove_building = { type = arms_factory level = 2 }
		remove_building = { type = industrial_complex level = 2 }
	}
	every_state = {
		limit = {
			OR = {
				state = 258
				state = 223
				state = 222
			}
		}
		remove_building = { type = arms_factory level = 1 }
	}
}
setup_rva_cw_victory = {
	hidden_effect = {
		restore_rcw_factories = yes
		every_other_country = {
			limit = { is_subject_of = ROOT }
			set_country_flag = was_subject_of_RVA
		}
		RUS = {
			every_unit_leader = {
				set_unit_leader_flag = RUS_socialist_generals
				set_nationality = XXA
			}
		}
		RVA = {
			every_unit_leader = {
				set_nationality = RUS
			}
		}
		RUS = {
			clear_all_relations = yes
			drop_cosmetic_tag = yes
			copy_government_of_ROOT = yes
			remove_all_AI_templates = yes
			delete_unit_template_and_units = { division_template = "Krasnaya Gvardiya" }
			delete_unit_template_and_units = { division_template = "Gorodskaya Militsiya" }
			clr_country_flag = soviet_russia_restored
			set_country_flag = RUS_duma_dissolved
		    set_country_flag = disable_duma
			clr_country_flag = SOV_must_deal_with_opposition
			clr_country_flag = soviet_speaking_tag
			RUS_can_into_cossack_hosts = yes
			remove_ideas = {
				RUS_nationalist_resistance
				RUS_nationalist_resistance_1
				RUS_nationalist_resistance_2
				RUS_democrat_resistance
				RUS_democrat_resistance_1
				RUS_democrat_resistance_2
				RUS_monarchist_resistance
				RUS_monarchist_resistance_1
				SOV_chaotic_revolution_1
				SOV_chaotic_revolution_2
				SOV_chaotic_revolution_3
				SOV_chaotic_revolution_4
				SOV_chaotic_revolution_5
				SOV_partisan_warfare
				SOV_for_the_revolution_1
				SOV_for_the_revolution_2
				SOV_svr_lar
				SOV_svr
			}
			clear_global_event_target = soviet_russia
			transfer_technology = yes
			unlock_national_focus = RUS_Balance_The_Budget
			set_country_flag = unlock_military
			load_base_russian_tree = yes
			set_country_flag = make_russian_junta_tree_visible
			mark_focus_tree_layout_dirty = yes
			if = {
				limit = {
					NOT = { has_global_flag = RUS_land_reform_finished }
				}
				setup_unfinished_land_reform = yes
			}
			if = {
				limit = { 
					RVA = { has_cosmetic_tag = RVA_wrangel }
				}
				remove_all_ministers = yes
				add_ideas = RUS_Pyetr_N_Vrangel_hog_pau
				add_ideas = RUS_Aleksey_A_Ignatiev_for_pau
				add_ideas = RUS_Ivan_P_Romanovskiy_eco_pau
				add_ideas = RUS_Aleksandr_P_Balk_sec_pau 
				set_country_flag = RUS_kornilov_coup
				hidden_effect = {
					set_stability = 0.6
					set_war_support = 0.5
				}
				set_politics = {
					ruling_party = paternal_autocrat
					elections_allowed = no
				}
				clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
				hidden_effect = {
					drop_cosmetic_tag = yes
					create_country_leader = {
						name = "Pyotr Wrangel"
						desc = "POLITICS_PYOTR_VRANGEL_DESC"
						picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel.png"
						expire = "1.1.1"
						ideology = junta_subtype
						traits = { RUS_black_baron }
					}
					country_event = {
						id = rusd.66
						days = 2
					}
				}
			}
			else_if = {
				limit = {
					RVA = { has_cosmetic_tag = RVA_denikin }
				}
				remove_all_ministers = yes
				add_ideas = RUS_Anton_I_Denikin_hog_pau
				add_ideas = RUS_Aleksey_A_Ignatiev_for_pau
				add_ideas = RUS_Ivan_P_Romanovskiy_eco_pau
				add_ideas = RUS_Aleksandr_P_Balk_sec_pau 
				set_country_flag = RUS_kornilov_coup
				add_ideas = civilian_economy
				add_ideas = volunteer_only
				hidden_effect = {
					set_stability = 0.6
					set_war_support = 0.5
				}
				clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
				hidden_effect = {
					drop_cosmetic_tag = yes
					create_country_leader = {
						name = "Anton Denikin"
						desc = "POLITICS_ANTON_DENIKIN_DESC"
						picture = "gfx/leaders/RUS/Portrait_RUS_Anton_Denikin.png"
						expire = "1.1.1"
						ideology = junta_subtype
					}
					country_event = {
						id = rusd.66
						days = 2
					}
				}
			}
			else = {
				remove_all_ministers = yes
				add_ideas = RUS_Lavr_G_Kornilov_hog_pau
				add_ideas = RUS_Aleksey_A_Ignatiev_for_pau
				add_ideas = RUS_Ivan_P_Romanovskiy_eco_pau
				add_ideas = RUS_Aleksandr_P_Balk_sec_pau 
				set_country_flag = RUS_kornilov_coup
				hidden_effect = {
					set_stability = 0.6
					set_war_support = 0.5
				}
				clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
				hidden_effect = {
					drop_cosmetic_tag = yes
					create_country_leader = {
						name = "Lavr Kornilov"
						desc = "POLITICS_LAVR_KORNILOV_DESC"
						picture = "gfx/leaders/RUS/Portrait_RUS_Lavr_Kornilov.png"
						expire = "1.1.1"
						ideology = junta_subtype
						traits = { supreme_ruler }
					}
					country_event = {
						id = rusd.50
						days = 2
					}
				}
			}			
			clr_country_flag = Mikhail_D_Bonch_Bruyevich_dead
			clr_country_flag = Nikolay_F_Vatutin_dead
			clr_country_flag = Nikolay_N_Dukhonin_dead
			clr_country_flag = Vasiliy_A_Kharlamov_dead
			clr_country_flag = Evgeniy_von_Rommel_dead
			clr_country_flag = Pyetr_N_Vrangel_dead
			clr_country_flag = Anton_I_Denikin_dead
			clr_country_flag = Ivan_P_Romanovskiy_dead
			clr_country_flag = Bronislav_V_Kaminski_dead
			clr_country_flag = Pavel_N_Shatilov_dead
			clr_country_flag = Vasiliy_V_Biskupskiy_dead
			clr_country_flag = Andrei_A_Vlasov_dead
			clr_country_flag = Nikolay_A_Lokhvitski_dead
			clr_country_flag = Dmitri_Pavlovich_Romanov_dead
			clr_country_flag = Aleksandr_Rodzyanko_dead
			clr_country_flag = Aleksey_P_Arkhangelskiy_dead
			clr_country_flag = Evgeniy_von_Rommel_dead
			clr_country_flag = Konstantin_P_Voskoboinik_dead
			clr_country_flag = Aleksandr_P_Kutepov_dead
			clr_country_flag = Evgeniy_K_Miller_dead
			clr_country_flag = Igor_I_Sikorskiy_dead
			clr_country_flag = Vyacheslav_Tkachov_dead
			clr_country_flag = Anton_V_Turkul_dead
			clr_country_flag = Aleksandr_I_Verkhovskiy_dead
			clr_country_flag = Dmitri_N_Verderevsky_dead
			clr_country_flag = Aleksandr_A_Kazakov_dead
			if = {
				limit = { 
					country_exists = ALO
					ALO = { ALO_has_russian_influence_RVA = yes }
				}
				ALO = { 
					ALO_setup_autonomy_RUS_by_event = yes 
					country_event = alash.396
				}
			}			
			every_other_country = {
				limit = { has_country_flag = was_subject_of_RVA }
				RUS = {
					annex_country = { target = PREV }
				}
				restore_previous_government_type = yes
			}	
			annex_country = {
				target = RVA
				transfer_troops = yes
			}
			change_tag_from = ROOT
		}
	}
}	
setup_rrf_cw_victory = {
	hidden_effect = {
		every_other_country = {
			limit = { is_subject_of = ROOT }
			set_country_flag = was_subject_of_RRF
		}
		restore_rcw_factories = yes
		if = {
			limit = {
				RRF = { has_socialist_government = no }
			}
			RUS = {
				every_unit_leader = {
					retire = yes
				}
			}
			RRF = {
				every_unit_leader = {
					set_nationality = RUS
				}
			}
			RUS = {
				clear_all_relations = yes
				copy_government_of_ROOT = yes
				remove_all_AI_templates = yes
				delete_unit_template_and_units = { division_template = "Krasnaya Gvardiya" }
				delete_unit_template_and_units = { division_template = "Gorodskaya Militsiya" }
				clr_country_flag = soviet_russia_restored
				set_country_flag = RUS_duma_dissolved
		        set_country_flag = disable_duma
				clr_country_flag = SOV_must_deal_with_opposition
				clr_country_flag = soviet_speaking_tag		
				remove_ideas = {
					RUS_nationalist_resistance
					RUS_nationalist_resistance_1
					RUS_nationalist_resistance_2
					RUS_democrat_resistance
					RUS_democrat_resistance_1
					RUS_democrat_resistance_2
					RUS_monarchist_resistance
					RUS_monarchist_resistance_1
					SOV_chaotic_revolution_1
					SOV_chaotic_revolution_2
					SOV_chaotic_revolution_3
					SOV_chaotic_revolution_4
					SOV_chaotic_revolution_5
					SOV_partisan_warfare
					SOV_for_the_revolution_1
					SOV_for_the_revolution_2
					SOV_svr_lar
					SOV_svr
				}
				clear_global_event_target = soviet_russia
				transfer_technology = yes
				unlock_national_focus = RUS_Balance_The_Budget
				set_country_flag = unlock_military
				if = {
					limit = {
						NOT = { has_global_flag = RUS_land_reform_finished }
					}
					setup_unfinished_land_reform = yes
				}
				transfer_technology = yes
				if = {
					limit = {
						NOT = { has_global_flag = RUS_land_reform_finished }
					}
					setup_unfinished_land_reform = yes
				}
				reset_russian_leaders = yes
				remove_all_ministers = yes
				add_ideas = RUS_Boris_V_Savinkov_hog_npo
				add_ideas = {
					RUS_Aleksandr_Dikgof_Derental_for_npo
					RUS_Aleksandr_Antonov_eco_npo
					RUS_Emma_Dikgof_Derental_sec_npo
				}
				create_country_leader = {
					name = "Boris Savinkov"
					desc = "POLITICS_BORIS_SAVINKOV_DESC"
					picture = "gfx/leaders/RUS/Portrait_RUS_Boris_Savinkov_President.png"
					expire = "1.1.1"
					ideology = savinkovism_subtype
					traits = { vozhd }
				}
				set_country_flag = PORTRAIT_PICKER_ACTIVE
				set_politics = {
					ruling_party = national_populist
					elections_allowed = no
				}
				hidden_effect = {
					set_stability = 0.6
					set_war_support = 0.5
				}			
				clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
				set_cosmetic_tag = RUS_vozhdct
				load_base_russian_tree = yes
				set_country_flag = make_savinkov_tree_visible
				mark_focus_tree_layout_dirty = yes
				country_event = {
					id = rusd.60
					days = 5
				}
				country_event = {
					id = rusd.61
					days = 2
				}
				clr_country_flag = Sergey_L_Markov_dead
				clr_country_flag = Bronislav_V_Kaminski_dead
				clr_country_flag = Vasiliy_V_Biskupskiy_dead
				clr_country_flag = Andrei_A_Vlasov_dead
				clr_country_flag = Nikolay_A_Lokhvitski_dead
				clr_country_flag = Aleksandr_S_Antonov_dead
				clr_country_flag = Vyacheslav_Tkachov_dead
				clr_country_flag = Anton_V_Turkul_dead
				clr_country_flag = Aleksandr_I_Verkhovskiy_dead
				clr_country_flag = Dmitri_N_Verderevsky_dead
				clr_country_flag = Aleksandr_A_Kazakov_dead
				random_other_country = {
					news_event = {
						id = russianews.1
						days = 1
					}
				}
				set_political_party = {
					ideology = national_populist
					popularity = 51
				}
				every_other_country = {
					limit = { has_country_flag = was_subject_of_RRF }
					RUS = {
						annex_country = { target = PREV }
					}
					restore_previous_government_type = yes
				}	
				annex_country = {
					target = RRF
					transfer_troops = yes
				}
				change_tag_from = ROOT
			}
		}
		else = {
			RUS = {
				every_unit_leader = {
					retire = yes
				}
			}
			RRF = {
				every_unit_leader = {
					set_nationality = RUS
				}
			}
			RUS = {
				copy_government_of_ROOT = yes
				remove_all_AI_templates = yes
				delete_unit_template_and_units = { division_template = "Krasnaya Gvardiya" }
				delete_unit_template_and_units = { division_template = "Gorodskaya Militsiya" }
				transfer_technology = yes
				annex_country = {
					target = RRF
					transfer_troops = yes
				}
				setup_soviet_russia = yes
				hidden_effect = {
					set_stability = 0.25
					set_war_support = 0.1
				}
				add_ideas = civilian_economy
				add_ideas = volunteer_only
				hidden_effect = {
					add_stability = -0.5
					add_war_support = -0.5
				}
				if = {
					limit = {
						NOT = { has_global_flag = RUS_land_reform_finished }
					}
					setup_unfinished_land_reform = yes
				}
				remove_all_ministers = yes
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = no
				}
				add_ideas = {
					RUS_Maria_A_Spiridonova_hog_syn
					RUS_Aleksey_M_Ustinov_for_syn
					RUS_Isaak_Z_Shteinberg_eco_syn
					RUS_Yuri_Lutovinov_sec_syn
				}
				every_other_country = {
					limit = { has_country_flag = was_subject_of_RRF }
					get_current_government_type = yes
					ROOT = {
						set_autonomy = {
							target = PREV
							autonomous_state = kr_autonomous_puppet
						}
					}
					restore_previous_government_type = yes
				}		
				
				change_tag_from = ROOT
			}
		}
	}
}	
setup_wra_cw_victory = {
	hidden_effect = {
		restore_rcw_factories = yes
		RUS = {
			every_unit_leader = {
				set_nationality = RVA
			}
		}
		WRA = {
			every_unit_leader = {
				set_nationality = RUS
			}
		}
		RUS = {
			clear_all_relations = yes
			copy_government_of_ROOT = yes
			remove_all_AI_templates = yes
			delete_unit_template_and_units = { division_template = "Krasnaya Gvardiya" }
			delete_unit_template_and_units = { division_template = "Gorodskaya Militsiya" }
			clr_country_flag = soviet_russia_restored
			set_country_flag = RUS_duma_dissolved
		    set_country_flag = disable_duma
			clr_country_flag = SOV_must_deal_with_opposition
			clr_country_flag = soviet_speaking_tag
			remove_ideas = {
				RUS_nationalist_resistance
				RUS_nationalist_resistance_1
				RUS_nationalist_resistance_2
				RUS_democrat_resistance
				RUS_democrat_resistance_1
				RUS_democrat_resistance_2
				RUS_monarchist_resistance
				RUS_monarchist_resistance_1
				SOV_chaotic_revolution_1
				SOV_chaotic_revolution_2
				SOV_chaotic_revolution_3
				SOV_chaotic_revolution_4
				SOV_chaotic_revolution_5
				SOV_partisan_warfare
				SOV_for_the_revolution_1
				SOV_for_the_revolution_2
				SOV_svr_lar
				SOV_svr
			}
			clear_global_event_target = soviet_russia
			transfer_technology = yes
			unlock_national_focus = RUS_Balance_The_Budget
			set_country_flag = unlock_military
			if = {
				limit = {
					NOT = { has_global_flag = RUS_land_reform_finished }
				}
				setup_unfinished_land_reform = yes
			}
			load_base_russian_tree = yes
			mark_focus_tree_layout_dirty = yes
			reset_russian_leaders = yes
			remove_all_ministers = yes
			create_country_leader = {
				name = "Pavel Bermondt-Avalov"
				desc = "POLITICS_PAVEL_BERMONDT_AVALOV_DESC"
				picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Bermondt_Avalov.png"
				expire = "1.1.1"
				ideology = junta_subtype
			}
			set_politics = {
				ruling_party = paternal_autocrat
				elections_allowed = no
			}
			hidden_effect = {
				set_stability = 0.6
				set_war_support = 0.5
			}
			set_political_party = {
				ideology = paternal_autocrat
				popularity = 35
			}
			clr_country_flag = RUS_Okhrannoye_Otdeleniye_locked
			set_cosmetic_tag = RUS_WRA
			set_party_name = {
				ideology = paternal_autocrat
				name = WRA_paternal_autocrat_party
				long_name = WRA_paternal_autocrat_party_long
			}
			annex_country = {
				target = WRA
				transfer_troops = yes
			}
			GER = { add_to_faction = RUS }
			change_tag_from = ROOT
		}
	}
}	
setup_sov_cw_victory = {
	hidden_effect = {
		restore_rcw_factories = yes
		every_state = {
			limit = {
				is_owned_by = SOV
			}
			SOV = { add_state_core = PREV }
			RUS = { remove_state_claim = PREV }
			SOV = { remove_state_claim = PREV }
			RVA = { remove_state_core = PREV }
			RVA = { remove_state_claim = PREV }
			RRF = { remove_state_core = PREV }
			RRF = { remove_state_claim = PREV }
			WRA = { remove_state_core = PREV }
			WRA = { remove_state_claim = PREV }
		}
		SOV = {
			add_stability = 0.15
			load_focus_tree = { tree = Russia_Socialist keep_completed = yes }
			set_division_template_lock = {
				division_template = "Krasnaya Gvardiya"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Gorodskaya Militsiya"
				is_locked = no
			}
			clr_country_flag = legation_council_member
		}
	}
}	
setup_rus_cw_victory = {
	hidden_effect = {
		restore_rcw_factories = yes
		every_state = {
			limit = {
				is_owned_by = RUS
			}
			RUS = { add_state_core = PREV }
			RUS = { remove_state_claim = PREV }
			SOV = { remove_state_core = PREV }
			SOV = { remove_state_claim = PREV }
			RVA = { remove_state_core = PREV }
			RVA = { remove_state_claim = PREV }
			RRF = { remove_state_core = PREV }
			RRF = { remove_state_claim = PREV }
			WRA = { remove_state_core = PREV }
			WRA = { remove_state_claim = PREV }
		}
		RUS = {
			add_stability = 0.15
			country_event = {
				id = rcw.106
				days = 2
			}
			load_base_russian_tree = yes
			mark_focus_tree_layout_dirty = yes
		}
	}
}	
setup_trm_cw_victory = {
	hidden_effect = {
		restore_rcw_factories = yes
		every_state = {
			limit = {
				is_owned_by = TRM
			}
			RUS = { add_state_core = PREV }
			RUS = { remove_state_claim = PREV }
			SOV = { remove_state_core = PREV }
			SOV = { remove_state_claim = PREV }
			RVA = { remove_state_core = PREV }
			RVA = { remove_state_claim = PREV }
			RRF = { remove_state_core = PREV }
			RRF = { remove_state_claim = PREV }
			WRA = { remove_state_core = PREV }
			WRA = { remove_state_claim = PREV }
		}
	}
}
remove_RCW_claims = {
	hidden_effect = {
		every_state = {
			limit = {
				OR = {
					is_claimed_by = RUS
					is_claimed_by = RRF
					is_claimed_by = RVA
					is_claimed_by = WRA
				}
			}
			if = {
				limit = {
					NOT = { country_exists = RRF }
				}
				remove_claim_by = RRF
			}
			if = {
				limit = {
					NOT = { country_exists = RVA }
				}
				remove_claim_by = RVA
			}
			if = {
				limit = {
					NOT = { country_exists = WRA }
				}
				remove_claim_by = WRA
			}
		}
		every_state = {
			limit = {
				OR = {
					is_core_of = RUS
					is_core_of = RRF
					is_core_of = RVA
					is_core_of = WRA
				}
			}
			if = {
				limit = {
					NOT = { country_exists = RRF }
				}
				remove_core_of = RRF
			}
			if = {
				limit = {
					NOT = { country_exists = RVA }
				}
				remove_core_of = RVA
			}
			if = {
				limit = {
					NOT = { country_exists = WRA }
				}
				remove_core_of = WRA
			}
		}
	}
}
RCW_demobilize_forces = {
	RUS = {
		if = {
			limit = { has_template = "Respublikanskoye Opolcheniye" }
			delete_unit_template_and_units = { division_template = "Respublikanskoye Opolcheniye" disband = yes }
		}
		if = {
			limit = { has_completed_focus = RUS_Rebuild_The_Red_Army }
			if = {
				limit = { has_template = "Krasnogvardeitsy" }
				delete_unit_template_and_units = { division_template = "Krasnogvardeitsy" disband = yes }
			}
		}
	}
	RRF = {
		if = {
			limit = { has_template = "Zelenoarmeitsy" }
			delete_unit_template_and_units = { division_template = "Zelenoarmeitsy" disband = yes }
		}
		if = {
			limit = { has_template = "Krasnogvardeitsy" }
			delete_unit_template_and_units = { division_template = "Krasnogvardeitsy" disband = yes }
		}
	}
	RVA = {
		if = {
			limit = { has_template = "Dobrovoltsy" }
			delete_unit_template_and_units = { division_template = "Dobrovoltsy" disband = yes }
		}
	}
	WRA = {
		if = {
			limit = { has_template = "Avalovtsy" }
			delete_unit_template_and_units = { division_template = "Avalovtsy" disband = yes }
		}
	}
	TRM = {
		if = {
			limit = { has_template = "Sibirskiye Dobrovoltsy" }
			delete_unit_template_and_units = { division_template = "Sibirskiye Dobrovoltsy" disband = yes }
		}
	}
	LAT = {
		if = {
			limit = { has_template = "Krasnogvardeitsy" }
			delete_unit_template_and_units = { division_template = "Krasnogvardeitsy" disband = yes }
		}
		if = {
			limit = { has_template = "Zelenoarmeitsy" }
			delete_unit_template_and_units = { division_template = "Zelenoarmeitsy" disband = yes }
		}
	}
}
	
	
create_RCW_militia_template = {
	if = {
		limit = {
			tag = RUS
			RUS = { has_socialist_government = no }
		}
		create_RUS_militia_template = yes
	}
	if = {
		limit = {
			OR = {
				AND = {
					tag = RUS
					RUS = { has_socialist_government = yes }
				}
				AND = {
					tag = RRF
					RRF = { has_socialist_government = yes }
				}
				AND = {
					tag = LAT
					LAT = { has_country_flag = LAT_bolsheviks_intervene_in_RCW }
				}
				tag = SOV
			}
		}
		create_SOV_militia_template = yes
	}
	if = {
		limit = {
			tag = RRF
			RRF = { has_socialist_government = no }
		}
		create_RRF_militia_template = yes
	}
	if = {
		limit = {
			tag = TRM
		}
		create_TRM_militia_template = yes
	}
	if = {
		limit = {
			tag = WRA
		}
		create_WRA_militia_template = yes
	}
	if = {
		limit = {
			tag = RVA
		}
		create_RVA_militia_template = yes
	}
}
create_RUS_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Respublikanskoye Opolcheniye" }
		}
		division_template = {
			name = "Respublikanskoye Opolcheniye"
			division_names_group = RUS_MIL_01
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
create_RRF_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Zelenoarmeitsy" }
		}
		division_template = {
			name = "Zelenoarmeitsy"
			division_names_group = RUS_MIL_03
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
create_RVA_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Dobrovoltsy" }
		}
		division_template = {
			name = "Dobrovoltsy"
			division_names_group = RUS_MIL_02
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
create_WRA_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Avalovtsy" }
		}
		division_template = {
			name = "Avalovtsy"
			division_names_group = RUS_MIL_04 
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
create_TRM_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Sibirskiye Dobrovoltsy" }
		}
		division_template = {
			name = "Sibirskiye Dobrovoltsy"
			division_names_group = TRM_MIL_01 
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
create_SOV_militia_template = {
	if = {
		limit = {
			NOT = { has_template = "Krasnogvardeitsy" }
		}
		division_template = {
			name = "Krasnogvardeitsy"
			division_names_group = SOV_MIL_01 
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
			}
			priority = 0
		}
	}
}
RCW_spawn_militia_divisions = {
	### calculate number of units to spawn
	set_temp_variable = { units_to_spawn = state_population_k }
	divide_temp_variable = { units_to_spawn = 500 }

	### failsafe so at least one unit is always spawned
	clamp_temp_variable = { var = units_to_spawn min = 1 max = 12 }

	### tooltip
	set_temp_variable = { total_units_to_spawn = units_to_spawn }
	custom_effect_tooltip = RCW_recruit_units

	### spawn normal militias
	set_temp_variable = { counter = 1 }
	if = {
		limit = {
			check_variable = { var = units_to_spawn value = 1 compare = greater_than_or_equals }
		}
		ROOT = { create_RCW_militia_template = yes }
		for_loop_effect = {
			start = 1
			end = units_to_spawn
			compare = less_than_or_equals

			meta_effect = {
				text = {
					create_unit = {
						division = "name = [DIVISION] division_template = [TEMPLATE] start_experience_factor = 0.0"
						allow_spawning_on_enemy_provs = yes
						owner = ROOT
						id = 1776
					}
				}
				DIVISION = "\\\"[?counter]aya [THIS.GetName] [GetRCWMilitiaName]\\\""
				TEMPLATE = "\\\"[GetRCWMilitiaTemplate]\\\""
			}
			add_to_temp_variable = { counter = 1 }
		}
	}
}	
setup_soviet_psr = {
	ROOT = { save_global_event_target_as = soviet_russia }
	hidden_effect = {
		set_cosmetic_tag = SOV
		RUS_remove_riga_accords = yes		
		remove_ideas = {
			RUS_divided_staff
			rus_divided_marine
			rus_brest_litovsk
			RUS_scars_of_russian_revolution
			rus_black_monday_duma_1
			rus_black_monday_duma_2
			rus_black_monday_duma_3
			rus_black_monday_duma_4
			rus_black_monday_duma_5
			rus_black_monday_duma_6
			rus_black_monday_senate_1
			rus_black_monday_senate_2
			rus_black_monday_senate_3
			rus_black_monday_senate_4
			rus_black_monday_senate_5
			rus_black_monday_senate_6
		}
		for_each_scope_loop = {
			array = CAN.faction_members
			embargo_ROOT = yes
		}
		for_each_scope_loop = {
			array = GER.faction_members
			embargo_ROOT = yes
		}
		for_each_scope_loop = {
			array = AUS.faction_members
			embargo_ROOT = yes
		}
		FRP = { embargo_ROOT = yes }
		GBR = { embargo_ROOT = yes }
		set_country_flag = Mikhail_D_Bonch_Bruyevich_dead
		set_country_flag = Nikolay_F_Vatutin_dead
		set_country_flag = Nikolay_N_Dukhonin_dead
		set_country_flag = Vasiliy_A_Kharlamov_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Anton_I_Denikin_dead
		set_country_flag = Pyetr_N_Vrangel_dead
		set_country_flag = Sergey_L_Markov_dead
		set_country_flag = Ivan_P_Romanovskiy_dead
		set_country_flag = Lavr_G_Kornilov_dead
		set_country_flag = Mikhail_Drozdovskiy_dead
		set_country_flag = Bronislav_V_Kaminski_dead
		set_country_flag = Pavel_N_Shatilov_dead
		set_country_flag = Vasiliy_V_Biskupskiy_dead
		set_country_flag = Andrei_A_Vlasov_dead
		set_country_flag = Nikolay_A_Lokhvitski_dead
		set_country_flag = Dmitri_Pavlovich_Romanov_dead
		set_country_flag = Aleksandr_Rodzyanko_dead
		set_country_flag = Aleksey_P_Arkhangelskiy_dead
		set_country_flag = Evgeniy_von_Rommel_dead
		set_country_flag = Lavrentiy_Kornilov_dead
		set_country_flag = Konstantin_P_Voskoboinik_dead
		set_country_flag = Aleksandr_S_Antonov_dead
		set_country_flag = Aleksandr_P_Kutepov_dead
		set_country_flag = Evgeniy_K_Miller_dead
		set_country_flag = Igor_I_Sikorskiy_dead
		set_country_flag = Vyacheslav_Tkachov_dead
		set_country_flag = Anton_V_Turkul_dead
		set_country_flag = Dmitri_N_Verderevsky_dead
		set_country_flag = Aleksandr_A_Kazakov_dead
		
		set_country_flag = soviet_russia_restored
		set_country_flag = peaceful_revolution_military_tree
		set_country_flag = RUS_duma_dissolved
		set_country_flag = SOV_must_deal_with_opposition
		load_focus_tree = Russia_Socialist
		add_stability = 0.3
		add_war_support = 0.2
		set_country_flag = soc_dems_are_socialists
		set_politics = {
			ruling_party = radical_socialist
			last_election = "1930.11.9"
			election_frequency = 48
			elections_allowed = no
		}
		remove_ideas = RUS_psr_political_crisis
		set_temp_variable = { RUS_new_sde = party_popularity_100@social_democrat}
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@social_liberal  }
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@market_liberal  }
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@social_conservative  }
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@authoritarian_democrat  }
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@paternal_autocrat  }
		add_to_temp_variable = { RUS_new_sde = party_popularity_100@national_populist  }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = RUS_new_sde }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		
		add_to_temp_variable = { RUS_new_sde = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = RUS_new_sde
			social_liberal = 0
			market_liberal = 0
			social_conservative = 0
			authoritarian_democrat = 0
			paternal_autocrat = 0
			national_populist = 0
		}
		add_ideas = {
			RUS_nationalist_resistance_1
			RUS_monarchist_resistance_1
			RUS_democrat_resistance_1
		}
		set_country_flag = SOV_must_deal_with_opposition
		country_event = {
			id = russoc.1
			days = 3
		}
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = no
		}
		set_party_name = {
			ideology = radical_socialist
			long_name = RUS_social_rev_party_long
			name = RUS_social_rev_party
		}
		add_ideas = RUS_Vladimir_K_Volsky_hog_rso
		add_ideas = {
			RUS_Ivan_N_Smirnov_for_rso
			RUS_Nikolay_I_Ivanov_eco_rso
			RUS_Kost_S_Burevoy_sec_rso
		}
		create_country_leader = {
			name = "Vladimir Volsky"
			desc = "POLITICS_VOLSKY_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Volsky.png"
			expire = "1.1.1"
			ideology = narodism_subtype 
			traits = { }
		}
		set_party_name = {
			ideology = social_democrat
			name = RUS_social_democrat_party
			long_name = RUS_social_democrat_party_long
		}
		country_event = {
			id = russoc.112
			months = 5
		}	
		every_unit_leader = {
			limit = {
				NOT = {
					OR = {
						has_trait = hidden_sympathies
						has_id = 401 #Denikin
						has_id = 400 #Vrangel
					}
				}
			}
			set_nationality = TRM
		}
		if = {
			limit = {
				DKB = { has_socialist_government = no }
				don_is_pro_german = no
			}
			every_unit_leader = {
				limit = {
					OR = {
						has_id = 401 #Denikin
						has_id = 400 #Vrangel
					}
				}
				set_nationality = DKB
			}
		}
		else = {
			every_unit_leader = {
				limit = {
					OR = {
						has_id = 401 #Denikin
						has_id = 400 #Vrangel
					}
				}
				set_nationality = TRM
			}
		}
		every_unit_leader = {
			limit = { has_id = 455 }
			set_leader_portrait = GFX_Portrait_Soviet_Vasily_Chuikov
		}
		every_unit_leader = {
			limit = { has_id = 17897 }
			set_leader_portrait = GFX_Portrait_SOV_Semyon_Hitler
		}
		every_unit_leader = {
			limit = { has_id = 447 }
			set_leader_portrait = GFX_Portrait_SOV_Aleksandr_Yegorov
		}
		random_unit_leader = {
			limit = { has_id = 449 }	
			set_leader_portrait = GFX_Portrait_RUS_Gregory_Zhukov_General
		}
		clr_country_flag = psr_banned
	}
}

RCW_merge_popularities = {
	set_temp_variable = { RUS_new_tot = party_popularity_100@totalist }
	add_to_temp_variable = { RUS_new_tot = FROM.party_popularity_100@totalist }
	divide_temp_variable = { RUS_new_tot = 2 }
	
	set_temp_variable = { RUS_new_syn = party_popularity_100@syndicalist }
	add_to_temp_variable = { RUS_new_syn = FROM.party_popularity_100@syndicalist }
	divide_temp_variable = { RUS_new_syn = 2 }
	
	set_temp_variable = { RUS_new_rso = party_popularity_100@radical_socialist }
	add_to_temp_variable = { RUS_new_rso = FROM.party_popularity_100@radical_socialist }
	divide_temp_variable = { RUS_new_rso = 2 }
	
	set_temp_variable = { RUS_new_sde = party_popularity_100@social_democrat }
	add_to_temp_variable = { RUS_new_sde = FROM.party_popularity_100@social_democrat }
	divide_temp_variable = { RUS_new_sde = 2 }
	
	set_temp_variable = { RUS_new_sli = party_popularity_100@social_liberal }
	add_to_temp_variable = { RUS_new_sli = FROM.party_popularity_100@social_liberal }
	divide_temp_variable = { RUS_new_sli = 2 }
	
	set_temp_variable = { RUS_new_mli = party_popularity_100@market_liberal }
	add_to_temp_variable = { RUS_new_mli = FROM.party_popularity_100@market_liberal }
	divide_temp_variable = { RUS_new_mli = 2 }
	
	set_temp_variable = { RUS_new_sco = party_popularity_100@social_conservative }
	add_to_temp_variable = { RUS_new_sco = FROM.party_popularity_100@social_conservative }
	divide_temp_variable = { RUS_new_sco = 2 }
	
	set_temp_variable = { RUS_new_ade = party_popularity_100@authoritarian_democrat }
	add_to_temp_variable = { RUS_new_ade = FROM.party_popularity_100@authoritarian_democrat }
	divide_temp_variable = { RUS_new_ade = 2 }
	
	set_temp_variable = { RUS_new_pau = party_popularity_100@paternal_autocrat }
	add_to_temp_variable = { RUS_new_pau = FROM.party_popularity_100@paternal_autocrat }
	divide_temp_variable = { RUS_new_pau = 2 }
	
	set_temp_variable = { RUS_new_npo = party_popularity_100@national_populist }
	add_to_temp_variable = { RUS_new_npo = FROM.party_popularity_100@national_populist }
	divide_temp_variable = { RUS_new_npo = 2 }
	
	
	set_temp_variable = { sum = 100 }
	subtract_from_temp_variable = { sum = RUS_new_tot }
	subtract_from_temp_variable = { sum = RUS_new_syn }
	subtract_from_temp_variable = { sum = RUS_new_rso }
	subtract_from_temp_variable = { sum = RUS_new_sde }
	subtract_from_temp_variable = { sum = RUS_new_sli }
	subtract_from_temp_variable = { sum = RUS_new_mli }
	subtract_from_temp_variable = { sum = RUS_new_sco }
	subtract_from_temp_variable = { sum = RUS_new_ade }
	subtract_from_temp_variable = { sum = RUS_new_npo }
		
	add_to_temp_variable = { RUS_new_pau = sum } #avoid rounding errors

	set_popularities = {
		totalist = RUS_new_tot
		syndicalist = RUS_new_syn
		radical_socialist = RUS_new_rso
		social_democrat = RUS_new_sde
		social_liberal = RUS_new_sli
		market_liberal = RUS_new_mli
		social_conservative = RUS_new_sco
		authoritarian_democrat = RUS_new_ade
		paternal_autocrat = RUS_new_pau
		national_populist = RUS_new_npo
	}
}
decrease_RCW_resistance = {
	if = {
		limit = {
			has_idea = RUS_socialist_resistance
		}
		swap_ideas = {
			remove_idea = RUS_socialist_resistance
			add_idea = RUS_socialist_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_socialist_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_socialist_resistance_1
			add_idea = RUS_socialist_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_socialist_resistance_2
	}
	if = {
		limit = {
			has_idea = RUS_nationalist_resistance
		}
		swap_ideas = {
			remove_idea = RUS_nationalist_resistance
			add_idea = RUS_nationalist_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_nationalist_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_nationalist_resistance_1
			add_idea = RUS_nationalist_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_nationalist_resistance_2
	}
	if = {
		limit = {
			has_idea = RUS_monarchist_resistance
		}
		swap_ideas = {
			remove_idea = RUS_monarchist_resistance
			add_idea = RUS_monarchist_resistance_1
		}
	}
	else = {
		remove_ideas = RUS_monarchist_resistance_1
	}
	if = {
		limit = {
			has_idea = RUS_democrat_resistance
		}
		swap_ideas = {
			remove_idea = RUS_democrat_resistance
			add_idea = RUS_democrat_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_democrat_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_democrat_resistance_1
			add_idea = RUS_democrat_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_democrat_resistance_2
	}
	if = {
		limit = {
			has_idea = RUS_oblastnik_resistance
		}
		swap_ideas = {
			remove_idea = RUS_oblastnik_resistance
			add_idea = RUS_oblastnik_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_oblastnik_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_oblastnik_resistance_1
			add_idea = RUS_oblastnik_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_oblastnik_resistance_2
	}
	if = {
		limit = {
			has_idea = RUS_semyenov_loyalists_resistance
		}
		swap_ideas = {
			remove_idea = RUS_semyenov_loyalists_resistance
			add_idea = RUS_semyenov_loyalists_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_semyenov_loyalists_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_semyenov_loyalists_resistance_1
			add_idea = RUS_semyenov_loyalists_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_semyenov_loyalists_resistance_2
	}
	if = {
		limit = {
			has_idea = RUS_kolchak_loyalists_resistance
		}
		swap_ideas = {
			remove_idea = RUS_kolchak_loyalists_resistance
			add_idea = RUS_kolchak_loyalists_resistance_1
		}
	}
	else = {
		remove_ideas = RUS_kolchak_loyalists_resistance_1
	}
	if = {
		limit = {
			has_idea = RUS_siberian_monarchists_resistance
		}
		swap_ideas = {
			remove_idea = RUS_siberian_monarchists_resistance
			add_idea = RUS_siberian_monarchists_resistance_1
		}
	}
	else_if = {
		limit = {
			has_idea = RUS_siberian_monarchists_resistance_1
		}
		swap_ideas = {
			remove_idea = RUS_siberian_monarchists_resistance_1
			add_idea = RUS_siberian_monarchists_resistance_2
		}
	}
	else = {
		remove_ideas = RUS_siberian_monarchists_resistance_2
	}
}