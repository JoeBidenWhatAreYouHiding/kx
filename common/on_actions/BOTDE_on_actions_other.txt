on_actions = {
	on_leave_faction = {
		effect = {
			if = {
				limit = {
					FROM = { tag = AUS }
				}
			}
			ROOT = {
				if = {
					limit = {
						AUS_DWV_member = yes
					}
					AUS_remove_from_DWV = yes
				}
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = SER
							tag = ROM
						}
						has_war_with = AUS
					}
					FROM = {
						OR = {
							tag = AUS
							is_in_faction_with = AUS
						}
					}
					fifth_balkan_war = yes
				}
				if = {
					limit = {
						ROOT = {
							tag = SER
						}
					}
					AUS = {
						country_event = {
							id = bdeausfor.97
						}
					}
					else = {
						AUS = {
							country_event = {
								id = bdeausfor.98
							}
						}
					}
				}
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = BOS
							tag = SKS
						}
					}
					FROM = {
						OR = {
							tag = AUS
							is_in_faction_with = AUS
						}
					}
					fifth_balkan_war = yes
				}
				every_owned_state = {
					limit = { is_controlled_by = AUS }
					if = {
						limit = {
							CRO = { is_in_faction_with = AUS }
						}
						set_state_controller_to = CRO
					}
				}
			}
		}
	}
	on_before_peace_conference_start = {
		effect = {
			if = {
				limit = {
					FROM = {
						OR = {
							tag = SER
							tag = ROM
						}
						has_war_with = AUS
					}
					ROOT = {
						OR = {
							tag = AUS
							is_in_faction_with = AUS
						}
					}
					fifth_balkan_war = yes
				}
				if = {
					limit = {
						OR = {
							AND = {
								ROOT = {
									tag = ROM
									NOT = { is_in_faction_with = SER }
								}
							}
							AND = {
								ROOT = {
									tag = SER
									NOT = { is_in_faction_with = ROM }
								}
							}
							AND = {
								ROOT = {
									tag = ROM
									is_in_faction_with = SER
								}
								SER = { has_capitulated = yes }
							}
							AND = {
								ROOT = {
									tag = SER
									is_in_faction_with = ROM
								}
								ROM = { has_capitulated = yes }
							}
						}
					}
					BOTDE_5BW_init = yes
					BOTDE_5BW_peace = yes
				}
			}
		}
	}
	on_capitulation_immediate = {
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = AUS
							tag = HUN
							tag = CZE
							tag = GAL
							tag = CRO
						}
					}
					has_global_flag = AUS_collapsed
					NOT = { has_global_flag = AUS_collapsed_stable }
				}
				ROOT = {
					every_enemy_country = {
						every_state = {
							limit = {
								is_owned_by = ROOT
								OR = {
									is_core_of = PREV
									is_claimed_by = PREV
								}
							}
							transfer_state_to = PREV
						}
						white_peace = PREV
					}
				}
			}
		}
	}
	on_capitulation_immediate = {
		effect = {
			if = {
				limit = {
					ROOT = {
						tag = AUS
						has_global_flag = AUS_liebenfels_civil_war
					}
					FROM = {
						tag = AWR
						has_global_flag = AUS_liebenfels_civil_war
					}
				}
				AUS_liebenfels_civil_war_liebenfels_victory_on_action_effect = yes
				ROOT = {
					white_peace = FROM
				}
			}
		}
	}
	on_capitulation_immediate = {
		effect = {
			if = {
				limit = {
					FROM = {
						tag = HUN
						is_faction_leader = yes
						has_global_flag = AUS_liebenfels_civil_war
					}
					ROOT = {
						tag = AWR
						has_global_flag = AUS_liebenfels_civil_war
					}
				}
				ROOT = { white_peace = FROM }
				AUS_liebenfels_civil_war_liebenfels_loss_after_capping_AUS_effect = yes
			}
		}
	}
	on_capitulation_immediate = {
		effect = {
			if = {
				limit = {
					FROM = {
						tag = AWR
						has_global_flag = AUS_liebenfels_civil_war
					}
					ROOT = {
						tag = HUN
						has_global_flag = AUS_liebenfels_civil_war
					}
				}
				ROOT = { white_peace = FROM }
				AUS_liebenfels_civil_war_liebenfels_win_after_capping_AUS_effect = yes
			}
		}
	}
	on_pride_of_the_fleet_sunk = {
		effect = {
			if = {
				limit = {
					OR = {
						tag = SRI
					}
					FROM = {
						tag = AUS
					}
				}
				FROM = {
					country_event = {
						id = bdeausflavor.139 #Revenge at Sea!
					}
				}
			}
		}
	}
	on_state_control_changed = {
		if = {
			limit = {
				ROOT = {
					tag = LIC
					has_completed_focus = LIC_shadow_empire
				}
			}
			if = {
				limit = {
					FROM.FROM = {
						has_built = {
							type = arms_factory
							value > 0
						}
						NOT = {
							has_state_flag = LIC_shadow_empire_siphons_mil1
							is_owned_by = LIC
							is_claimed_by = LIC
							is_core_of = LIC
						}
					}
				}
				add_to_variable = {
					var = LIC.shadow_empire_mils
					value = 1
				}
				FROM.FROM = {
					set_state_flag = LIC_shadow_empire_siphons_mil1
					remove_building = {
						type = arms_factory
						level = 1
					}
				}
			}
			if = {
				limit = {
					FROM.FROM = {
						has_built = {
							type = industrial_complex
							value > 0
						}
						NOT = {
							has_state_flag = LIC_shadow_empire_siphons_civ1
							is_owned_by = LIC
							is_claimed_by = LIC
							is_core_of = LIC
						}
					}
				}
				add_to_variable = {
					var = LIC.shadow_empire_civs
					value = 1
				}
				FROM.FROM = {
					set_state_flag = LIC_shadow_empire_siphons_civ1
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					tag = LIC
					has_completed_focus = LIC_shadow_empire
					has_completed_focus = LIC_internationale_reconstruction
				}
			}
			if = {
				limit = {
					FROM.FROM = {
						has_built = {
							type = arms_factory
							value > 0
						}
						NOT = {
							has_state_flag = LIC_shadow_empire_siphons_mil2
							is_owned_by = LIC
							is_claimed_by = LIC
							is_core_of = LIC
						}
					}
				}
				add_to_variable = {
					var = LIC.shadow_empire_mils
					value = 1
				}
				FROM.FROM = {
					set_state_flag = LIC_shadow_empire_siphons_mil2
					remove_building = {
						type = arms_factory
						level = 1
					}
				}
			}
			if = {
				limit = {
					FROM.FROM = {
						has_built = {
							type = industrial_complex
							value > 0
						}
						NOT = {
							has_state_flag = LIC_shadow_empire_siphons_civ2
							is_owned_by = LIC
							is_claimed_by = LIC
							is_core_of = LIC
						}
					}
				}
				add_to_variable = {
					var = LIC.shadow_empire_civs
					value = 1
				}
				FROM.FROM = {
					set_state_flag = LIC_shadow_empire_siphons_civ2
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
	}
}