###########################
# United Kingdom Events
###########################

add_namespace = uk

#####################################
#	The Restoration of the UK		#
#####################################

country_event = { # Liberation of the UK
	id = uk.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.1" }
	title = uk.1.t
	desc = uk.1.d
	picture = GFX_report_event_GBR_country_parliament

	is_triggered_only = yes

	fire_only_once = yes

	option = { # Switch to the UK
		name = uk.1.a
		trigger = {
			tag = CAN
			is_ai = no
		}

		set_global_flag = UK_restoration
		add_political_power = 200
		custom_effect_tooltip = CAN_release_GBR

		hidden_effect = {
			random_other_country = { news_event = worldnews.185 }
			CAN_create_uk_cores = yes
			CAN_release_uk = yes
		}

		if = {
			limit = {
				OR = {
					tag = ENT
					is_in_faction_with = ENT
				}
			}
			ENT = { add_to_faction = GBR }
		}

		hidden_effect = {
			GBR = {
				set_capital = 126
				set_major = yes
				transfer_technology = yes
				country_event = { id = uk.3 days = 1 }
				country_event = { id = uk.6 days = 1 }
				CAN_setup_uk_government = yes
				CAN_create_monarchy = yes
				CAN_transfer_king_base = yes
				if = {
					limit = { has_country_leader_with_trait = CAN_popular_figurehead }
					remove_country_leader_trait = CAN_popular_figurehead
					set_country_flag = GBR_remove_figurehead_trait
				}
				if = {
					limit = { has_country_leader_with_trait = CAN_unpopular_monarch }
					remove_country_leader_trait = CAN_unpopular_monarch
					set_country_flag = GBR_remove_unpopular_monarch_trait
				}
				if = {
					limit = { is_in_faction_with = ENT }
					add_to_tech_sharing_group = entente_research
				}
				add_country_leader_trait = CAN_returning_king
				set_country_flag = GBR_has_returning_king
			}
			if = {
				limit = {
					GBR = { is_in_faction_with = CAN }
				}
				GBR = {
					country_event = { id = canada.302 days = 6 }
					add_timed_idea = {
						idea = CAN_british_arrivals
						days = 365
					}
				}
				CAN = {
					country_event = { id = canada.300 days = 1 }
				}
			}
		}

		if = {
			limit = { tag = CAN }
			every_country = {
				limit = {
					is_subject_of = CAN
					is_in_north_america = no
				}
				get_current_government_type = yes
				GBR = {
					set_autonomy = {
						target = PREV
						autonomy_state = kr_default_puppet
					}
				}
				restore_previous_government_type = yes
			}
		}

		GBR = { change_tag_from = ROOT }
	}
	option = { # Stay as Canada
		name = uk.1.b

		set_global_flag = UK_restoration
		add_political_power = 200
		custom_effect_tooltip = CAN_release_GBR

		hidden_effect = {
			random_other_country = { news_event = worldnews.185 }
			CAN_create_uk_cores = yes
			CAN_release_uk = yes
		}

		if = {
			limit = {
				OR = {
					tag = ENT
					is_in_faction_with = ENT
				}
			}
			ENT = { add_to_faction = GBR }
		}

		hidden_effect = {
			GBR = {
				set_capital = 126
				set_major = yes
				transfer_technology = yes
				country_event = { id = uk.3 days = 1 }
				country_event = { id = uk.6 days = 1 }
				CAN_setup_uk_government = yes
				CAN_create_monarchy = yes
				CAN_transfer_king_base = yes
				if = {
					limit = { has_country_leader_with_trait = CAN_popular_figurehead }
					remove_country_leader_trait = CAN_popular_figurehead
					set_country_flag = GBR_remove_figurehead_trait
				}
				if = {
					limit = { has_country_leader_with_trait = CAN_unpopular_monarch }
					remove_country_leader_trait = CAN_unpopular_monarch
					set_country_flag = GBR_remove_unpopular_monarch_trait
				}
				if = {
					limit = { is_in_faction_with = ENT }
					add_to_tech_sharing_group = entente_research
				}
				add_country_leader_trait = CAN_returning_king
				set_country_flag = GBR_has_returning_king
			}
			if = {
				limit = {
					GBR = { is_in_faction_with = CAN }
				}
				GBR = {
					country_event = { id = canada.302 days = 6 }
					add_timed_idea = {
						idea = CAN_british_arrivals
						days = 365
					}
				}
				CAN = {
					country_event = { id = canada.300 days = 1 }
				}
			}
		}

		if = {
			limit = {
				tag = CAN
				is_ai = yes
			}
			every_country = {
				limit = {
					is_subject_of = CAN
					is_in_north_america = no
				}
				get_current_government_type = yes
				GBR = {
					set_autonomy = {
						target = PREV
						autonomy_state = kr_default_puppet
					}
				}
				restore_previous_government_type = yes
			}
		}
	}
}

country_event = { # The Royal Restoration
	id = uk.3
	title = uk.3.t
	desc = uk.3.d
	picture = GFX_report_event_GBR_abbey2

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.3"
		hidden_effect = {
			GBR_recalculate_postwar_devastation = yes
			GBR_recalculate_legacy_revolution = yes
		}
	}

	option = {
		name = uk.3.a
		add_dynamic_modifier = { modifier = GBR_postwar_devastation }
		add_dynamic_modifier = { modifier = GBR_legacy_revolution }
		add_ideas = GBR_postwar_devastation_idea
		add_ideas = GBR_legacy_revolution_idea
		add_ideas = GBR_military_chaos_1
		hidden_effect = {
			every_country = {
				limit = { has_socialist_government = yes }
				add_opinion_modifier = { target = ROOT modifier = embargo }
				ROOT = {
					add_opinion_modifier = { target = PREV modifier = embargo }
				}
			}
			country_event = { id = uk.4 days = 3 } #first Liberty Day
		}
	}
}

country_event = { # Liberty Day!
	id = uk.4
	title = uk.4.t
	desc = uk.4.d
	picture = GFX_report_event_GBR_abbey1

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.4"
		hidden_effect = {
			news_event = { id = uk.5 days = 365 }
		}
	}

	option = {
		name = uk.4.a
		add_political_power = 10
	}
}

news_event = { # Liberty Day! (after the first)
	id = uk.5
	title = uk.5.t
	desc = uk.5.d
	picture = GFX_news_event_royal_visit

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.5"
		hidden_effect = {
			news_event = { id = uk.5 days = 365 }
		}
	}

	option = {
		name = uk.5.a
		add_political_power = 10
	}
}

country_event = { # The British Army
	id = uk.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.6" }
	title = uk.6.t
	picture = GFX_report_event_CAN_army3

	desc = {
		text = uk.6.d.canada
		trigger = {
			is_in_faction_with = CAN
		}
	}
	desc = {
		text = uk.6.d.other
		trigger = {
			NOT = {
				is_in_faction_with = CAN
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = uk.6.a
		custom_effect_tooltip = UK_loyaloob_tt
		hidden_effect = { load_oob = UK_loyal }

		if = {
			limit = { has_war = yes }
			add_ideas = service_by_requirement
		}
		else = {
			add_ideas = limited_conscription
		}

		if = {
			limit = { is_in_faction_with = CAN }
			add_manpower = 200000
			CAN = {
				add_manpower = -100000
				send_equipment = {
					target = GBR
					type = infantry_equipment
					amount = 2500
				}
			}
		}
		hidden_effect = {
			ENG = {
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 254 #David Stirling
							has_id = 251 #Percy Hobart
						}
					}
					set_nationality = GBR
				}
				every_navy_leader = {
					limit = {
						OR = {
							has_id = 270 #Jack Kenneth Highton
							has_id = 271 #Peter Gerald Dickens
						}
					}
					set_nationality = GBR
				}
			}
			CAN = {
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 910 #Bernard Montgomery
							has_id = 911 #Edmund Ironside
							has_id = 913 #Claude Auchinlek
							has_id = 916 #Henry Maitland Wilson
							has_id = 917 #Adrian Carton de Wiart
							has_id = 921 #Orde Wingate
							has_id = 922 #Robert Brooke-Popham
							has_id = 924 #Henry, Duke of Gloucester
							has_id = 925 #Philip Neame
							has_id = 926 #Alan Brooke
							has_id = 927 #Richard O'Connor
							has_id = 928 #John Dill
							has_id = 9201 #JFC Fuller
						}
					}
					set_nationality = GBR
				}
				every_navy_leader = {
					limit = {
						OR = {
							has_id = 929 #John Cunningham
							has_id = 931 #Louis Mountbatten
							has_id = 909 #Roger Backhouse
							has_id = 908 #Tom Phillips
							has_id = 907 #Dudley Pound
							has_id = 903 #James Somerville
							has_id = 904 #Andrew Cunningham
							has_id = 905 #John Tovey
						}
					}
					set_nationality = GBR
				}
			}
		}
	}
}

country_event = { # Ally helping UK out
	id = uk.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.7" }
	title = uk.7.t
	desc = uk.7.d
	picture = GFX_report_event_generic_food

	is_triggered_only = yes

	option = {
		name = uk.7.a #We can donate more!
		trigger = { has_political_power > 50 }
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_political_power < 100
			}
		}
		set_variable = { GBR_help = 100 }
		add_political_power = -50
		GBR = { country_event = uk.8 }
	}
	option = {
		name = uk.7.b #This is enough
		ai_chance = {
			factor = 20
		}
		GBR = { country_event = uk.8 }
	}
}

country_event = { # UK informed of help
	id = uk.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.8" }
	title = uk.8.t
	picture = GFX_report_event_generic_diplomacy3

	desc = {
		text = uk.8.d
		trigger = { check_variable = { FROM.GBR_help = 50 } }
	}
	desc = {
		text = uk.8.d.more
		trigger = { check_variable = { FROM.GBR_help = 100 } }
	}

	is_triggered_only = yes

	option = {
		name = uk.8.a
		add_political_power = FROM.GBR_help?50
		FROM = { clear_variable = GBR_help }
		add_opinion_modifier = { target = FROM modifier = KR_pleased }
	}
}

### The British reconstruction Authority

# PM announces Reconstruction Authority creation (fired by focus)
country_event = {
	id = uk.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.10" }
	title = uk.10.t
	desc = uk.10.d
	picture = GFX_report_event_GBR_devastation

	is_triggered_only = yes

	option = {
		name = uk.10.a
		set_party_name = {
			ideology = paternal_autocrat
			name = GBR_bra_party
			long_name = GBR_bra_party_long
		}
		if = {
			limit = {
				NOT = { has_government = paternal_autocrat }
			}
			set_politics = {
				ruling_party = paternal_autocrat
				elections_allowed = no
			}
		}
		GBR_returning_king_check = yes
		hidden_effect = {
			country_event = { id = uk.11 days = 4 }
		}
	}
}

# Exiles encounter resistance
country_event = {
	id = uk.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.11" }
	title = uk.11.t
	desc = uk.11.d
	picture = GFX_report_event_CAN_fleeing

	is_triggered_only = yes

	option = {
		name = uk.11.a
		hidden_effect = {
			country_event = { id = uk.12 days = 5 }
		}
	}
}

# Syndicalist militia active
country_event = {
	id = uk.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.12" }
	title = uk.12.t
	desc = uk.12.d
	picture = GFX_report_event_CSA_militia

	is_triggered_only = yes

	option = {
		name = uk.12.a
		hidden_effect = {
			set_variable = { GBR_synd_unrest = 1 }
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.13 days = 3 random = 72 }
		}
		add_dynamic_modifier = { modifier = GBR_syndicalist_resistance }
		add_ideas = GBR_syndicalist_resistance_idea
	}
}

# Union soldiers asking for help
country_event = {
	id = uk.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.13" }
	title = uk.13.t
	desc = uk.13.d
	picture = GFX_report_event_NOR_black_monday_2

	is_triggered_only = yes

	option = {
		name = uk.13.a #We won't support traitors
		ai_chance = {
			factor = 50
		}
		add_political_power = 50
		add_to_variable = { GBR_synd_unrest = 2 }
		hidden_effect = {
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.14 days = 5 }
		}
	}
	option = {
		name = uk.13.b #They'll receive limited help, but no stipend
		ai_chance = {
			factor = 35
		}
		add_political_power = -50
		add_to_variable = { GBR_synd_unrest = 1 }
		hidden_effect = {
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.14 days = 5 }
		}
	}
	option = {
		name = uk.13.c #They were only doing as they were told - give them full support
		ai_chance = {
			factor = 15
		}
		add_political_power = -100
		add_manpower = 25000
		hidden_effect = {
			country_event = { id = uk.14 days = 5 }
		}
	}
}

# Mountbatten's relief efforts
country_event = {
	id = uk.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.14" }
	title = uk.14.t
	desc = uk.14.d
	picture = GFX_report_event_HOL_black_monday

	is_triggered_only = yes

	option = {
		name = uk.14.a
		hidden_effect = {
			country_event = { id = uk.15 days = 3 random = 72 }
		}
	}
}

# Third bankruptcy declared
country_event = {
	id = uk.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.15" }
	title = uk.15.t
	desc = uk.15.d
	picture = GFX_report_event_generic_economic_policy

	is_triggered_only = yes

	option = {
		name = uk.15.a
	}
}

# BRA begins operation in Parliament (fired by focus)
country_event = {
	id = uk.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.16" }
	title = uk.16.t
	desc = uk.16.d
	picture = GFX_report_event_GBR_country_parliament

	is_triggered_only = yes

	option = {
		name = uk.16.a
		add_popularity = { ideology = paternal_autocrat popularity = 0.10 }
		hidden_effect = {
			country_event = { id = uk.17 days = 3 }
			country_event = { id = uk.18 days = 12 random = 72 }
			country_event = { id = uk.19 days = 45 }
		}
	}
}

# Reconstruction projects begin
country_event = {
	id = uk.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.17" }
	title = uk.17.t
	desc = uk.17.d
	picture = GFX_report_event_IRE_factory_construction

	is_triggered_only = yes

	option = {
		name = uk.17.a
		add_stability = 0.05
	}
}

# Arthur Horner surrenders to police
country_event = {
	id = uk.18
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.18" }
	title = uk.18.t
	desc = uk.18.d
	picture = GFX_report_event_generic_reporters

	is_triggered_only = yes

	option = {
		name = uk.18.a
		add_popularity = { ideology = syndicalist popularity = 0.05 }
	}
}

# Wartime Rationing ends
country_event = {
	id = uk.19
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.19" }
	title = uk.19.t
	desc = uk.19.d
	picture = GFX_report_event_generic_food

	is_triggered_only = yes

	option = {
		name = uk.19.a
		add_stability = 0.05
	}
}

# Fate of the unions (fired by focus)
country_event = {
	id = uk.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.21" }
	title = uk.21.t
	desc = uk.21.d
	picture = GFX_report_event_AST_parliament1

	is_triggered_only = yes

	option = {
		name = uk.21.a #Allow the unions to continue
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
		}
		set_country_flag = GBR_unions_allowed
		add_political_power = -100
		add_popularity = { ideology = social_democrat popularity = 0.05 }
		hidden_effect = {
			country_event = { id = uk.22 days = 3 }
			country_event = { id = uk.24 days = 13 }
		}
	}
	option = {
		name = uk.21.b #Set up government-controlled unions, ban the rest
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_idea = GBR_Anthony_Eden_hog_sco
			}
		}
		set_country_flag = GBR_unions_controlled
		add_political_power = -50
		add_to_variable = { GBR_synd_unrest = 3 }
		hidden_effect = {
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.23 days = 3 }
		}
	}
	option = {
		name = uk.21.c #We'll have no unions in Britain - ban them all!
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
			modifier = {
				factor = 0
				has_idea = GBR_Robert_Cecil_hog_sco
			}
		}
		set_country_flag = GBR_unions_banned
		add_political_power = 50
		add_popularity = { ideology = syndicalist popularity = -0.05 }
		add_popularity = { ideology = social_democrat popularity = -0.03 }
		add_to_variable = { GBR_synd_unrest = 5 }
		hidden_effect = {
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.23 days = 3 }
		}
	}
}

# Objections to unions continuing
country_event = {
	id = uk.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.22" }
	title = uk.22.t
	desc = uk.22.d
	picture = GFX_report_event_CAN_commission

	is_triggered_only = yes

	option = {
		name = uk.22.a
		add_political_power = -50
		add_popularity = { ideology = paternal_autocrat popularity = -0.05 }
	}
}

# Protests against banning/controlling unions
country_event = {
	id = uk.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.23" }
	title = uk.23.t
	picture = GFX_report_event_AST_protest1

	desc = {
		text = uk.23.d.control
		trigger = { has_country_flag = GBR_unions_controlled }
	}
	desc = {
		text = uk.23.d.ban
		trigger = { has_country_flag = GBR_unions_banned }
	}

	is_triggered_only = yes

	option = {
		name = uk.23.a #Give them their unions, before this escalates
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
		}
		custom_effect_tooltip = GBR_protests_will_fade
		if = {
			limit = { has_country_flag = GBR_unions_controlled }
			clr_country_flag = GBR_unions_controlled
			set_country_flag = GBR_unions_allowed
			subtract_from_variable = { GBR_synd_unrest = 2 }
			add_political_power = -100
		}
		else = {
			clr_country_flag = GBR_unions_banned
			set_country_flag = GBR_unions_allowed
			subtract_from_variable = { GBR_synd_unrest = 4 }
			add_political_power = -250
		}
		hidden_effect = {
			GBR_recalculate_syndicalist_resistance = yes
			country_event = { id = uk.24 days = 10 }
		}
	}
	option = {
		name = uk.23.b #We're not backing down
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_idea = GBR_Anthony_Eden_hog_sco
			}
			modifier = {
				factor = 0.1
				has_idea = GBR_Robert_Cecil_hog_sco
			}
		}
		add_political_power = -50
		add_stability = -0.05
		hidden_effect = {
			country_event = { id = uk.25 days = 10 }
		}
	}
	option = {
		name = uk.23.c #Suppress the protest immediately
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { has_idea = GBR_Henry_Page_Croft_hog_ade }
			}
		}
		custom_effect_tooltip = GBR_protests_will_increase
		add_to_variable = { GBR_synd_unrest = 5 }
		add_stability = -0.10
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# Protests over new union leadership
country_event = {
	id = uk.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.24" }
	title = uk.24.t
	desc = uk.24.d
	picture = GFX_report_event_AST_protest2

	is_triggered_only = yes

	option = {
		name = uk.24.a
		add_stability = -0.02
		add_to_variable = { GBR_synd_unrest = 1 }
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# More protests over union bans
country_event = {
	id = uk.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.25" }
	title = uk.25.t
	desc = uk.25.d
	picture = GFX_report_event_AST_protest2

	is_triggered_only = yes

	option = {
		name = uk.25.a
		add_stability = -0.04
		add_to_variable = { GBR_synd_unrest = 1 }
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# Syndicalist Trials Begin (fired by focus)
country_event = {
	id = uk.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.26" }
	title = uk.26.t
	desc = uk.26.d
	picture = GFX_report_event_generic_trial

	is_triggered_only = yes

	option = {
		name = uk.26.a #Make sure the sentences are not harsh
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
		}
		add_political_power = -50
		add_stability = 0.05
		hidden_effect = {
			country_event = { id = uk.27 days = 3 }
		}
	}
	option = {
		name = uk.26.b #They must all be made examples
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.1
				has_idea = GBR_Robert_Cecil_hog_sco
			}
			modifier = {
				factor = 0.5
				has_idea = GBR_Anthony_Eden_hog_sco
			}
		}
		add_political_power = 50
		hidden_effect = {
			country_event = { id = uk.28 days = 3 }
		}
	}
}

# Protests over trials
country_event = {
	id = uk.27
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.27" }
	title = uk.27.t
	desc = uk.27.d
	picture = GFX_report_event_AST_protest2

	is_triggered_only = yes

	option = {
		name = uk.27.a
		add_popularity = { ideology = paternal_autocrat popularity = -0.05 }
		add_to_variable = { GBR_synd_unrest = 1 }
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# Old Bailey bombed
country_event = {
	id = uk.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.28" }
	title = uk.28.t
	desc = uk.28.d
	picture = GFX_report_event_GBR_bombing

	is_triggered_only = yes

	option = {
		name = uk.27.a
		add_to_variable = { GBR_synd_unrest = 5 }
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# The Question of Labour (fired by focus)
# TODO: comments can be removed when UoB rework done
country_event = {
	id = uk.29
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.29" }
	title = uk.29.t
	desc = uk.29.d.notinpower
	picture = GFX_report_event_GBR_country_parliament

#	desc = {
#		text = uk.29.d.notinpower
#		trigger = { NOT = { has_global_flag = ENG_labour_was_in_power } }
#	}
#	desc = {
#		text = uk.29.d.inpower
#		trigger = { has_global_flag = ENG_labour_was_in_power }
#	}

	is_triggered_only = yes

	option = {
		name = uk.29.a #Pardon the Labour Party
#		trigger = { NOT = { has_global_flag = ENG_labour_was_in_power } }
		ai_chance = {
			factor = 20
		}
		add_political_power = -100
		add_stability = 0.05
		subtract_from_variable = { GBR_synd_unrest = 1 }
		GBR_recalculate_syndicalist_resistance = yes
	}
	option = {
		name = uk.29.b #Labour can stay, but Attlee has to go
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_idea = GBR_Robert_Cecil_hog_sco
			}
#			modifier = {
#				factor = 0
#				has_global_flag = ENG_labour_was_in_power
#				has_idea = GBR_Henry_Page_Croft_hog_ade
#			}
		}
		add_political_power = -50
		set_country_flag = GBR_labour_leader_gaitskell
#		If = {
#			limit = { NOT = { has_global_flag = ENG_labour_was_in_power } }
		add_to_variable = { GBR_synd_unrest = 1 }
		GBR_recalculate_syndicalist_resistance = yes
#		}
	}
	option = {
		name = uk.29.c #Ban the Labour party
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.1
				has_idea = GBR_Robert_Cecil_hog_sco
			}
			modifier = {
				factor = 0.5
				has_idea = GBR_Anthony_Eden_hog_sco
			}
			modifier = {
				factor = 2
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
#			modifier = {
#				factor = 2
#				has_global_flag = ENG_labour_was_in_power
#			}
		}
		set_country_flag = GBR_labour_banned
		add_political_power = 50
		add_stability = -0.10
		add_to_variable = { GBR_synd_unrest = 5 }
		GBR_recalculate_syndicalist_resistance = yes
		hidden_effect = {
			country_event = { id = uk.30 days = 3 random = 72 }
		}
	}
}

# Massive Protests
country_event = {
	id = uk.30
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.30" }
	title = uk.30.t
	desc = uk.30.d
	picture = GFX_report_event_BEL_Protest

	is_triggered_only = yes

	option = {
		name = uk.27.a
		add_stability = -0.05
		add_to_variable = { GBR_synd_unrest = 10 }
		GBR_recalculate_syndicalist_resistance = yes
	}
}

# The Returning Aritocracy (fired by focus)
country_event = {
	id = uk.31
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.31" }
	title = uk.31.t
	desc = uk.31.d
	picture = GFX_report_event_WLL_Ardenne_Castle

	is_triggered_only = yes

	option = {
		name = uk.31.a #What was theirs should be restored, as it was illegally taken
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_idea = GBR_Robert_Cecil_hog_sco
			}
			modifier = {
				factor = 0.5
				has_idea = GBR_Anthony_Eden_hog_sco
			}
		}
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
		add_stability = -0.05
		add_to_variable = { GBR_synd_unrest = 5 }
		GBR_recalculate_syndicalist_resistance = yes
	}
	option = {
		name = uk.31.b #They current owners should be compensated, but they must still give it up
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				has_idea = GBR_Anthony_Eden_hog_sco
			}
		}
		add_political_power = -50
		add_to_variable = { GBR_synd_unrest = 2 }
		GBR_recalculate_syndicalist_resistance = yes
	}
	option = {
		name = uk.31.c #The aristocracy will be compensated for their losses
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				has_idea = GBR_Henry_Page_Croft_hog_ade
			}
		}
		add_political_power = -100
		add_popularity = { ideology = paternal_autocrat popularity = -0.05 }
	}
}

# New elections announced (fired by focus) 
country_event = {
	id = uk.32
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.32" }
	title = uk.32.t
	desc = uk.32.d
	picture = GFX_report_event_generic_happy_crowd

	is_triggered_only = yes

	option = {
		name = uk.32.a
		add_stability = 0.10
	}
}

# Free Elections held (fired by focus)
country_event = {
	id = uk.33
	title = uk.33.t
	desc = uk.33.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.33"
		remove_all_ministers = yes
		hidden_effect = {
			clr_country_flag = GBR_Croft_PM
			clr_country_flag = GBR_Cecil_PM
			clr_country_flag = GBR_Eden_PM
			clr_country_flag = GBR_Vansittart_PM
			set_variable = { var = bra_supp value = party_popularity@paternal_autocrat }
			set_variable = { var = new_pataut value = bra_supp }
			multiply_variable = { var = new_pataut value = -1 }
			set_party_name = {
				ideology = paternal_autocrat
				name = GBR_military_government_party
				long_name = GBR_military_government_party_long
			}
			set_party_name = {
				ideology = authoritarian_democrat
				name = GBR_auth_tories_party
				long_name = GBR_auth_tories_party_long
			}
		}
	}

	option = {
		name = uk.33.a #Conservatives
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.75
				NOT = { has_country_flag = GBR_labour_leader_gaitskell }
			}
		}
		if = {
			limit = { has_country_flag = GBR_cons_leader_croft}
			meta_effect = {
				text = {
					set_politics = {
						ruling_party = authoritarian_democrat
						last_election = "[CURRENT_DATE]"
						election_frequency = 48
						elections_allowed = yes
					}
				}
				CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
			}
		}
		else = {
			meta_effect = {
				text = {
					set_politics = {
						ruling_party = social_conservative
						last_election = "[CURRENT_DATE]"
						election_frequency = 48
						elections_allowed = yes
					}
				}
				CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
			}
		}
		GBR_returning_king_check = yes
		hidden_effect = {
			add_popularity = { ideology = paternal_autocrat popularity = new_pataut }
			if = {
				limit = { has_country_flag = GBR_cons_leader_croft}
				add_popularity = { ideology = authoritarian_democrat popularity = bra_supp }
			}
			else = {
				add_popularity = { ideology = social_conservative popularity = bra_supp }
			}
			clear_variable = new_pataut
			clear_variable = bra_supp
			if = {
				limit = { has_country_flag = GBR_cons_leader_cecil }
				set_country_flag = GBR_Cecil_PM
				add_ideas = {
					GBR_Robert_Cecil_hog_sco
					GBR_Adrian_Carton_de_Wiart_for_sco
					GBR_George_Lane_Fox_eco_sco
					GBR_Desmond_Morton_sec_sco
				}
			}
			else_if = {
				limit = { has_country_flag = GBR_cons_leader_eden }
				set_country_flag = GBR_Eden_PM
				add_ideas = {
					GBR_Anthony_Eden_hog_sco
					GBR_John_Colville_for_sco
					GBR_John_Siddeley_eco_sco
					GBR_Edward_Cavendish_sec_sco
				}
			}
			else_if = {
				limit = { has_country_flag = GBR_cons_leader_croft }
				set_country_flag = GBR_Croft_PM
				add_ideas = {
					GBR_Henry_Page_Croft_hog_ade
					GBR_Arthur_Wellesley_for_ade
					GBR_John_Carnegie_eco_ade
					GBR_Maxwell_Knight_sec_ade
				}
			}
			else = {
				set_country_flag = GBR_Vansittart_PM
				add_ideas = {
					GBR_Robert_Vansittart_hog_sco
					GBR_Robert_Boothby_for_sco
					GBR_Philip_Lloyd_Greame_eco_sco
					GBR_Randolph_Churchill_sec_sco
				}
			}
		}
	}
	option = {
		name = uk.33.b #Liberals
		ai_chance = {
			factor = 20
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = market_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		GBR_returning_king_check = yes
		hidden_effect = {
			add_popularity = { ideology = paternal_autocrat popularity = new_pataut }
			add_popularity = { ideology = market_liberal popularity = bra_supp }
			clear_variable = new_pataut
			clear_variable = bra_supp
			set_country_flag = GBR_Simon_PM
			add_ideas = {
				GBR_John_Simon_hog_mli
				GBR_Violet_Bonham_Carter_for_mli
				GBR_Isaac_Foot_eco_mli
				GBR_John_Anderson_sec_mli
			}
		}
	}
	option = {
		name = uk.33.c #Labour
		trigger = {
			NOT = { has_country_flag = GBR_labour_banned }
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				has_country_flag = GBR_labour_leader_gaitskell
			}
		}
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		GBR_returning_king_check = yes
		custom_effect_tooltip = GBR_improve_resistance_effect_5
		subtract_from_variable = { GBR_synd_unrest = 5 }
		GBR_recalculate_syndicalist_resistance = yes
		hidden_effect = {
			add_popularity = { ideology = paternal_autocrat popularity = new_pataut }
			add_popularity = { ideology = social_democrat popularity = bra_supp }
			clear_variable = new_pataut
			clear_variable = bra_supp
			if = {
				limit = { has_country_flag = GBR_labour_leader_gaitskell }
				set_country_flag = GBR_Gaitskell_PM
				add_ideas = GBR_Hugh_Gaitskell_hog_sde
			}
			else = {
				set_country_flag = GBR_Attlee_PM
				add_ideas = GBR_Clement_Attlee_hog_sde
			}
			add_ideas = GBR_Herbert_Morrison_for_sde
			if = {
				limit = { has_country_flag = GBR_labour_leader_gaitskell }
				add_ideas = GBR_Hugh_Dalton_eco_sde
			}
			else = {
				add_ideas = GBR_Hugh_Gaitskell_eco_sde
			}
			add_ideas = GBR_James_Chuter_Ede_sec_sde
		}
	}
}

# Future elections (fired by on_new_election)
country_event = {
	id = uk.34
	title = uk.34.t
	desc = uk.34.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.34"
		remove_all_ministers = yes
	}

	option = {
		name = uk.33.a #Conservatives
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.75
				NOT = { has_country_flag = GBR_labour_leader_gaitskell }
			}
		}
		if = {
			limit = { has_country_flag = GBR_cons_leader_croft}
			add_popularity = { ideology = authoritarian_democrat popularity = 0.10 }
			set_politics = {
				ruling_party = authoritarian_democrat
				election_frequency = 48
				elections_allowed = yes
			}
		}
		else = {
			add_popularity = { ideology = social_conservative popularity = 0.10 }
			set_politics = {
				ruling_party = social_conservative
				election_frequency = 48
				elections_allowed = yes
			}
		}
		GBR_returning_king_check = yes
		hidden_effect = {
			if = {
				limit = { has_country_flag = GBR_cons_leader_cecil }
				set_country_flag = GBR_Cecil_PM
				add_ideas = {
					GBR_Robert_Cecil_hog_sco
					GBR_Adrian_Carton_de_Wiart_for_sco
					GBR_George_Lane_Fox_eco_sco
					GBR_Desmond_Morton_sec_sco
				}
			}
			else_if = {
				limit = { has_country_flag = GBR_cons_leader_eden }
				set_country_flag = GBR_Eden_PM
				add_ideas = {
					GBR_Anthony_Eden_hog_sco
					GBR_John_Colville_for_sco
					GBR_John_Siddeley_eco_sco
					GBR_Edward_Cavendish_sec_sco
				}
			}
			else_if = {
				limit = { has_country_flag = GBR_cons_leader_croft }
				set_country_flag = GBR_Croft_PM
				add_ideas = {
					GBR_Henry_Page_Croft_hog_ade
					GBR_Arthur_Wellesley_for_ade
					GBR_John_Carnegie_eco_ade
					GBR_Maxwell_Knight_sec_ade
				}
			}
			else = {
				set_country_flag = GBR_Vansittart_PM
				add_ideas = {
					GBR_Robert_Vansittart_hog_sco
					GBR_Robert_Boothby_for_sco
					GBR_Philip_Lloyd_Greame_eco_sco
					GBR_Randolph_Churchill_sec_sco
				}
			}
		}
	}
	option = {
		name = uk.33.b #Liberals
		ai_chance = {
			factor = 20
		}
		add_popularity = { ideology = market_liberal popularity = 0.10 }
		set_politics = {
			ruling_party = market_liberal
			election_frequency = 48
			elections_allowed = yes
		}
		GBR_returning_king_check = yes
		hidden_effect = {
			set_country_flag = GBR_Simon_PM
			add_ideas = {
				GBR_John_Simon_hog_mli
				GBR_Violet_Bonham_Carter_for_mli
				GBR_Isaac_Foot_eco_mli
				GBR_John_Anderson_sec_mli
			}
		}
	}
	option = {
		name = uk.33.c #Labour
		trigger = {
			NOT = { has_country_flag = GBR_labour_banned }
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				has_country_flag = GBR_labour_leader_gaitskell
			}
		}
		add_popularity = { ideology = social_democrat popularity = 0.10 }
		set_politics = {
			ruling_party = social_democrat
			election_frequency = 48
			elections_allowed = yes
		}
		GBR_returning_king_check = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = GBR_syndicalist_resistance } }
			custom_effect_tooltip = GBR_improve_resistance_effect_5
			subtract_from_variable = { GBR_synd_unrest = 5 }
			GBR_recalculate_syndicalist_resistance = yes
		}
		hidden_effect = {
			if = {
				limit = { has_country_flag = GBR_labour_leader_gaitskell }
				set_country_flag = GBR_Gaitskell_PM
				add_ideas = GBR_Hugh_Gaitskell_hog_sde
			}
			else = {
				set_country_flag = GBR_Attlee_PM
				add_ideas = GBR_Clement_Attlee_hog_sde
			}
			add_ideas = GBR_Herbert_Morrison_for_sde
			if = {
				limit = { has_country_flag = GBR_labour_leader_gaitskell }
				add_ideas = GBR_Hugh_Dalton_eco_sde
			}
			else = {
				add_ideas = GBR_Hugh_Gaitskell_eco_sde
			}
			add_ideas = GBR_James_Chuter_Ede_sec_sde
		}
	}
}

# Free elections cancelled (fired by focus)
country_event = {
	id = uk.35
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.35" }
	title = uk.35.t
	desc = uk.35.d
	picture = GFX_report_event_AST_riot1

	is_triggered_only = yes

	option = {
		name = uk.32.a
		add_stability = -0.10
		hidden_effect = {
			country_event = { id = uk.36 days = 7 }
		}
	}
}

# New Revolt barely put down
country_event = {
	id = uk.36
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.36" }
	title = uk.36.t
	desc = uk.36.d
	picture = GFX_report_event_USA_Riots

	is_triggered_only = yes

	trigger = {
		is_subject = no
		has_government = authoritarian_democrat
	}

	option = {
		name = uk.36.a
		add_to_variable = { GBR_synd_unrest = 5 }
		GBR_recalculate_syndicalist_resistance = yes
		decrease_ruling_party_popularity_by_10 = yes
		add_timed_idea = {
			idea = GBR_under_suppression
			days = 365
		}
	}
}

# Beveridge Report completed
country_event = {
	id = uk.37
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.37" }
	title = uk.37.t
	desc = uk.37.d
	picture = GFX_report_event_CAN_cabinet2

	is_triggered_only = yes

	option = {
		name = uk.37.a
		set_country_flag = GBR_beveridge_report_received
		increase_ruling_party_popularity_by_5 = yes
	}
}

# Pigou Report completed
country_event = {
	id = uk.38
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.38" }
	title = uk.38.t
	desc = uk.38.d
	picture = GFX_report_event_CAN_cabinet2

	is_triggered_only = yes

	option = {
		name = uk.38.a
		set_country_flag = GBR_pigou_report_received
		decrease_ruling_party_popularity_by_5 = yes
	}
}


### Military

# Picking Chief of Staff (fired by focus)
country_event = {
	id = uk.50
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.50" }
	title = uk.50.t
	desc = uk.50.d
	picture = GFX_report_event_CAN_army3

	is_triggered_only = yes

	trigger = {
		NOT = { has_idea_with_trait = chief_of_staff }
	}

	option = {
		name = uk.50.a #Sir Edmund Ironside
		ai_chance = {
			factor = 40
		}
		add_ideas = GBR_Edmund_Ironside_cos_sco
	}
	option = {
		name = uk.50.b #Harold Alexander
		ai_chance = {
			factor = 30
		}
		add_ideas = GBR_Harold_Alexander_cos_sco
	}
	option = {
		name = uk.50.c #Alan Brooke
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_Alan_Brooke_cos_mli
	}
	option = {
		name = uk.50.e #John Dill
		ai_chance = {
			factor = 10
		}
		add_ideas = GBR_John_Dill_cos_mli
	}
}

# Picking Chief of Army (fired by focus)
country_event = {
	id = uk.51
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.51" }
	title = uk.51.t
	desc = uk.51.d
	picture = GFX_report_event_CAN_army3

	is_triggered_only = yes

	trigger = {
		NOT = { has_idea_with_trait = chief_of_army }
	}

	option = {
		name = uk.51.a #Sir Edmund Ironside
		trigger = { NOT = { has_idea = GBR_Edmund_Ironside_cos_sco } }
		ai_chance = {
			factor = 40
		}
		add_ideas = GBR_Edmund_Ironside_carm_sco
	}
	option = {
		name = uk.51.b #Harold Alexander
		trigger = { NOT = { has_idea = GBR_Harold_Alexander_cos_sco } }
		ai_chance = {
			factor = 30
		}
		add_ideas = GBR_Harold_Alexander_carm_sco
	}
	option = {
		name = uk.51.c #Miles Dempsey
		ai_chance = {
			factor = 10
		}
		add_ideas = GBR_Miles_Dempsey_carm_mli
	}
	option = {
		name = uk.51.e #John Dill
		trigger = { NOT = { has_idea = GBR_John_Dill_cos_mli } }
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_John_Dill_carm_mli
	}
}

# Picking Chief of Navy (fired by focus)
country_event = {
	id = uk.52
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.52" }
	title = uk.52.t
	desc = uk.52.d
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	trigger = {
		NOT = { has_idea_with_trait = chief_of_navy }
	}

	option = {
		name = uk.52.a #Louis Mountbatten
		ai_chance = {
			factor = 40
		}
		add_ideas = GBR_Louis_Mountbatten_cnav_sco
	}
	option = {
		name = uk.52.b #Dudley Pound
		ai_chance = {
			factor = 30
		}
		add_ideas = GBR_Dudley_Pound_cnav_sco
	}
	option = {
		name = uk.52.c #Roger Keyes
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_Roger_Keyes_cnav_sco
	}
	option = {
		name = uk.52.e #Philip Vian
		ai_chance = {
			factor = 10
		}
		add_ideas = GBR_Philip_Vian_cnav_sco
	}
}

# Picking Chief of Air Force (fired by focus)
country_event = {
	id = uk.53
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.53" }
	title = uk.53.t
	desc = uk.53.d
	picture = GFX_report_event_SWE_aircraft

	is_triggered_only = yes

	trigger = {
		NOT = { has_idea_with_trait = chief_of_air_force }
	}

	option = {
		name = uk.53.a #Hugh Trenchard
		ai_chance = {
			factor = 40
		}
		add_ideas = GBR_Hugh_Trenchard_cair_sco
	}
	option = {
		name = uk.53.b #Trafford Leigh Mallory
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_Trafford_Leigh_Mallory_cair_sco
	}
	option = {
		name = uk.53.c #John Chamier
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_John_Chamier_cair_pau
	}
	option = {
		name = uk.53.e #Arthur Teddar
		ai_chance = {
			factor = 20
		}
		add_ideas = GBR_Arthur_Tedder_cair_mli
	}
}

# Clemency for Syndicalist Soldiers (fired by focus)
country_event = {
	id = uk.54
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.54" }
	title = uk.54.t
	desc = uk.54.d
	picture = GFX_report_event_CAN_army3

	is_triggered_only = yes

	option = {
		name = uk.54.a #We won't take on syndicalist soldiers
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_manpower < 50000
			}
		}
		add_political_power = 50
		add_ideas = GBR_pure_recruits
	}
	option = {
		name = uk.54.b #We'll take some, after careful screening
		ai_chance = {
			factor = 30
		}
		add_political_power = -50
		add_manpower = 50000
	}
	option = {
		name = uk.54.c #We need the manpower - take as many as want to re-enlist
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_manpower > 50000
			}
			modifier = {
				factor = 0
				has_manpower > 150000
			}
			modifier = {
				factor = 0
				has_political_power < 0
			}
		}
		add_political_power = -100
		add_stability = -0.05
		add_manpower = 125000
	}
}

# National Arms Deal (fired by focus)
country_event = {
	id = uk.55
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.55" }
	title = uk.55.t
	desc = uk.55.d
	picture = GFX_report_event_generic_lend_lease

	is_triggered_only = yes

	option = {
		name = uk.55.a #Webley & Scott
		add_ideas = UK_webley_scott
	}
	option = {
		name = uk.55.b #Birmingham Small Arms
		add_ideas = UK_bsa
	}
	option = {
		name = uk.55.c #Morris Motors
		add_ideas = UK_morris
	}
	option = {
		name = uk.55.e #Sterling Armaments Company
		add_ideas = UK_sterling
	}
}

# National Shipbuilding Deal (fired by focus)
country_event = {
	id = uk.56
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.56" }
	title = uk.56.t
	desc = uk.56.d
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	option = {
		name = uk.56.a #Cammell Laird
		add_ideas = UK_cammell_laird
	}
	option = {
		name = uk.56.b #John Brown Company
		add_ideas = UK_john_brown_company
	}
	option = {
		name = uk.56.c #Swan Hunter
		add_ideas = UK_swan_hunter
	}
}

# UK reclaims leadership of the Entente (fired by focus)
country_event = {
	id = uk.61
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.61" }
	title = uk.61.t
	desc = uk.61.d
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes

	trigger = { is_ai = no }

	option = {
		name = uk.61.a
	}
}

# UK begins Five Eyes Programme (fired by focus/decision)
country_event = {
	id = uk.62
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.62" }
	title = uk.62.t
	desc = uk.62.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	option = {
		name = uk.62.a #Agree
		ai_chance = {
			factor = 95
		}
		add_political_power = -25
		if = {
			limit = { has_dlc = "La Resistance" }
			add_ideas = GBR_five_eyes_idea_lar
		}
		else = {
			add_ideas = GBR_five_eyes_idea
		}
		if = {
			limit = {
				has_dlc = "La Resistance"
				has_intelligence_agency = no
			}
			create_intelligence_agency = yes
		}
		else_if = {
			limit = {
				has_dlc = "La Resistance"
				has_intelligence_agency = yes
				NOT = { has_done_agency_upgrade = upgrade_form_department }
			}
			upgrade_intelligence_agency = upgrade_form_department
			hidden_effect = {
				GBR = { add_political_power = 25 }
			}
		}
	}
	option = {
		name = uk.62.b #Refuse
		ai_chance = {
			factor = 5
			modifier = {
				factor = 20
				has_political_power < 0
			}
			modifier = {
				factor = 0
				has_political_power > 50
			}
		}
		add_political_power = 20
	}
}

# UK begins Imperial Preference (fired by focus)
country_event = {
	id = uk.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.63" }
	title = uk.63.t
	desc = uk.63.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		name = uk.63.a
		add_political_power = 50
		add_ideas = GBR_imperial_preference_idea
		every_country = {
			limit = {
				OR = {
					CAN_is_commonwealth_tag = yes
					is_subject_of = ROOT
				}
				is_in_faction_with = ROOT
				NOT = { has_idea = GBR_imperial_preference_idea }
				NOT = { has_country_flag = GBR_asked_imperial_preference }
			}
			set_country_flag = GBR_asked_imperial_preference
			country_event = uk.64
		}
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						CAN_is_commonwealth_tag = yes
						is_subject_of = GBR
					}
				}
				ROOT = {
					add_opinion_modifier = { target = PREV modifier = GBR_imperial_preference_op }
				}
			}
		}
	}
}

# UK invites a Commonwealth Country into Imperial Preference
country_event = {
	id = uk.64
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.64" }
	title = uk.64.t
	desc = uk.64.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		name = uk.64.a #Agree
		add_political_power = 50
		FROM = { add_political_power = 25 }
		add_ideas = GBR_imperial_preference_idea
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						CAN_is_commonwealth_tag = yes
						is_subject_of = GBR
					}
				}
				ROOT = {
					add_opinion_modifier = { target = PREV modifier = GBR_imperial_preference_op }
				}
			}
		}
	}
	option = {
		name = uk.64.b #Refuse
		trigger = { is_ai = no }
		add_political_power = 25
		FROM = {
			add_political_power = -25
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
	}
}

# The British-French Relationship (fired by focus)
country_event = {
	id = uk.65
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.65" }
	title = uk.65.t
	desc = uk.65.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		name = uk.65.a #Naturally
		trigger = { tag = GBR }
		effect_tooltip = {
			add_political_power = 50
			add_opinion_modifier = { target = NFA modifier = KR_close_allies }
			reverse_add_opinion_modifier = { target = NFA modifier = KR_close_allies }
		}
		every_owned_state = {
			limit = {
				is_french_colonial_claim = yes
				is_not_claim_or_core_of_ROOT = yes
			}
			NFA = { transfer_state = PREV }
		}
		hidden_effect = {
			every_state = {
				limit = {
					is_british_colonial_claim = yes
					owner = {
						is_in_faction_with = ROOT
						NOT = { tag = NFA }
						NOT = { tag = GBR }
						PREV = {
							NOT = {
								is_core_of = PREV
								is_claimed_by = PREV
							}
						}
					}
				}
				save_event_target_as = return_state
				state_event = { id = uk.67 trigger_for = controller }
			}
		}
	}
	option = {
		name = uk.65.b #Of course we agree!
		trigger = { tag = NFA }
		add_political_power = 50
		hidden_effect = { GBR = { add_political_power = 50 } }
		add_opinion_modifier = { target = GBR modifier = KR_close_allies }
		reverse_add_opinion_modifier = { target = GBR modifier = KR_close_allies }
		every_owned_state = {
			limit = {
				is_british_colonial_claim = yes
				is_not_claim_or_core_of_ROOT = yes
			}
			GBR = { transfer_state = PREV }
		}
		hidden_effect = {
			every_state = {
				limit = {
					is_french_colonial_claim = yes
					owner = {
						is_in_faction_with = ROOT
						NOT = { tag = GBR }
						NOT = { tag = NFA }
						PREV = {
							NOT = {
								is_core_of = PREV
								is_claimed_by = PREV
							}
						}
					}
				}
				save_event_target_as = return_state
				state_event = { id = uk.67 trigger_for = controller }
			}
		}
	}
	option = {
		name = uk.65.c #We're not interested in this
		trigger = {
			tag = NFA
			is_ai = no
		}
		GBR = { country_event = uk.66 }
	}
}

# The French refuse
country_event = {
	id = uk.66
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.66" }
	title = uk.66.t
	desc = uk.66.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = uk.66.a
		add_political_power = -25
		add_opinion_modifier = { target = NFA modifier = KR_disapproves_of_govt }
		reverse_add_opinion_modifier = { target = NFA modifier = KR_disapproves_of_govt }
	}
}

# State event: returning British/French territory
state_event = {
	id = uk.67
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.67" }
	title = uk.67.t
	desc = uk.67.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = uk.67.a #Agree
		FROM = { transfer_state = event_target:return_state }
	}
	option = {
		name = uk.67.b #Refuse
		trigger = { owner = { is_ai = no } }
	}
}

# UK builds Victoria status in Canada
country_event = {
	id = uk.68
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.68" }
	title = uk.68.t
	desc = uk.68.d
	picture = GFX_report_event_CAN_statue

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			tag = GBR
			is_in_faction_with = GBR
		}
	}

	option = {
		name = uk.68.a
		trigger = { tag = CAN }
		add_political_power = 100
		add_ideas = GBR_victoria_idea
		add_opinion_modifier = { target = GBR modifier = KR_close_allies }
	}
	option = {
		name = uk.68.b
		trigger = { tag = GBR }
		add_opinion_modifier = { target = CAN modifier = KR_close_allies }
	}
	option = {
		name = uk.68.c
		trigger = {
			NOT = {
				tag = CAN
				tag = GBR
			}
			is_in_faction_with = GBR
		}
	}
}

# Westminster Declaration
news_event = {
	id = uk.69
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.69" }
	title = uk.69.t
	picture = GFX_news_event_canadian_soldiers

	desc = {
		text = uk.69.d.allthree
		trigger = {
			CAN = {
				is_subject = no
				is_in_faction_with = GBR
			}
			AST = {
				is_subject = no
				is_in_faction_with = GBR
			}
			SAF = {
				is_subject = no
				is_in_faction_with = GBR
			}
		}
	}
	desc = {
		text = uk.69.d.canast
		trigger = {
			CAN = {
				is_subject = no
				is_in_faction_with = GBR
			}
			AST = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				SAF = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
	desc = {
		text = uk.69.d.cansaf
		trigger = {
			CAN = {
				is_subject = no
				is_in_faction_with = GBR
			}
			SAF = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				AST = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
	desc = {
		text = uk.69.d.astsaf
		trigger = {
			AST = {
				is_subject = no
				is_in_faction_with = GBR
			}
			SAF = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				CAN = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
	desc = {
		text = uk.69.d.can
		trigger = {
			CAN = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				AST = {
					is_subject = no
					is_in_faction_with = GBR
				}
				SAF = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
	desc = {
		text = uk.69.d.ast
		trigger = {
			AST = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				CAN = {
					is_subject = no
					is_in_faction_with = GBR
				}
				SAF = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
	desc = {
		text = uk.69.d.saf
		trigger = {
			SAF = {
				is_subject = no
				is_in_faction_with = GBR
			}
			NOT = {
				CAN = {
					is_subject = no
					is_in_faction_with = GBR
				}
				AST = {
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = GBR
			tag = CAN
			tag = AST
			tag = SAF
			is_in_faction_with = GBR
			regional_north_america_news = yes
			regional_europe_news = yes
		}
	}

	option = {
		name = uk.69.a
		trigger = { tag = GBR }
	}
	option = {
		name = uk.69.b
		trigger = {
			CAN_is_commonwealth_tag = yes
			NOT = { tag = GBR }
			is_subject = no
			is_in_faction_with = GBR
		}
		effect_tooltip = { add_political_power = 50 }
	}
	option = {
		name = uk.69.c
		trigger = {
			NOT = {
				tag = GBR
				AND = {
					CAN_is_commonwealth_tag = yes
					NOT = { tag = GBR }
					is_subject = no
					is_in_faction_with = GBR
				}
			}
		}
	}
}


### Foreign

# Do we claim Northern Ireland?
country_event = {
	id = uk.99
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.99" }
	title = uk.99.t
	picture = GFX_report_event_IRE_unionist_rally

	desc = {
		text = uk.99.d.promise
		trigger = {
			OR = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
	}
	desc = {
		text = uk.99.d
		trigger = {
			NOT = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = uk.99.a #Yes
		trigger = {
			NOT = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		add_political_power = 50
		119 = { add_claim_by = GBR }
		if = {
			limit = {
				IRE = {
					owns_state = 119
					has_socialist_government = no
					NOT = { has_war_with = ROOT }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			unlock_decision_tooltip = GBR_demand_ulster
		}
	}
	option = {
		name = uk.99.a #Abandon promise
		trigger = {
			OR = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				is_ai = yes
			}
		}
		add_political_power = -200
		119 = { add_claim_by = GBR }
		if = {
			limit = { has_country_flag = CAN_promised_ireland_ind }
			clr_country_flag = CAN_promised_ireland_ind
			IRE = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			}
		}
		if = {
			limit = { has_global_flag = ENT_britain_agree_northire }
			clr_global_flag = GER_stay_out_france_uk
			clr_global_flag = ENT_britain_agree_northire
			clr_global_flag = ENT_agree_colonies
			clr_global_flag = ENT_france_agree_mittel
			if = {
				limit = { has_global_flag = ENT_france_agree_alsace }
				clr_global_flag = ENT_france_agree_alsace
				28 = { add_claim_by = NFA }
			}
			every_country = {
				limit = { is_in_faction_with = GER }
				country_event = entente.324
			}
		}
		if = {
			limit = {
				IRE = {
					owns_state = 119
					has_socialist_government = no
					NOT = { has_war_with = ROOT }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			unlock_decision_tooltip = GBR_demand_ulster
		}
	}
	option = {
		name = uk.99.b #No
		trigger = {
			NOT = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		add_political_power = -100
		add_stability = -0.05
		set_cosmetic_tag = GBR_britain
		hidden_effect = {
			news_event = uk.104
		}
	}
	option = {
		name = uk.99.c #Keep our promises
		trigger = {
			OR = {
				has_country_flag = CAN_promised_ireland_ind
				has_global_flag = ENT_britain_agree_northire
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 1.5
				OR = {
					has_government = social_liberal
					has_government = market_liberal
				}
			}
			modifier = {
				factor = 0.5
				has_authoritarian_government = yes
			}
		}
		add_stability = -0.05
		set_cosmetic_tag = GBR_britain
		hidden_effect = {
			news_event = uk.104
		}
	}
}

# Approaching Ireland over Northern Ireland
country_event = {
	id = uk.100
	title = uk.100.t
	desc = uk.100.d
	picture = GFX_report_event_IRE_unionist_rally

	is_triggered_only = yes

	trigger = {
		owns_state = 119
		NOT = { has_war_with = FROM }
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.100"
		set_country_flag = GBR_asked_northern_ireland
	}

	option = {
		name = uk.100.a #Absolutely not!
		trigger = {
			NOT = {
				is_subject_of = GBR
				AND = {
					is_subject = yes
					is_in_faction_with = GBR
				}
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.5
				is_in_faction_with = GBR
			}
		}
		add_stability = -0.05
		add_political_power = 50
		if = {
			limit = { is_in_faction_with = FROM }
			hidden_effect = {
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						NOT = { tag = FROM }
					}
					country_event = uk.102
				}
			}
			leave_faction = yes
			separate_peace_all_wars = yes
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			country_event = uk.103
		}
	}
	option = {
		name = uk.100.b #If this will keep the peace, so be it
		ai_chance = {
			factor = 25
		}
		add_stability = 0.10
		add_political_power = -200
		FROM = {
			effect_tooltip = { transfer_state = 119 }
			add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
			country_event = uk.101
		}
	}
}

# Northern Ireland returned
country_event = {
	id = uk.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.101" }
	title = uk.101.t
	desc = uk.101.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		name = uk.101.a
		transfer_state = 119
	}
}

# Notice to faction members: Ireland left faction due to conflict with GBR
country_event = {
	id = uk.102
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.102" }
	title = uk.102.t
	desc = uk.102.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	trigger = { is_ai = no }

	option = {
		name = uk.102.a
	}
}

# Ireland refuses
country_event = {
	id = uk.103
	title = uk.103.t
	picture = GFX_report_event_generic_diplomacy4

	desc = {
		text = uk.103.d.faction
		trigger = {
			IRE = {
				is_in_faction = yes
				is_faction_leader = no
			}
		}
	}
	desc = {
		text = uk.103.d.nofaction
		trigger = {
			IRE = {
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.103"
		hidden_effect = {
			if = {
				limit = {
					IRE = { is_in_faction = yes }
				}
				random_country = {
					limit = {
						is_in_faction_with = IRE
						is_faction_leader = yes
					}
					save_event_target_as = irish_leader
				}
			}
		}
	}

	option = {
		name = uk.103.a #Appeal to their faction leader
		trigger = {
			IRE = {
				is_in_faction = yes
				is_faction_leader = no
			}
		}
		ai_chance = {
			factor = 100
		}
		event_target:irish_leader = {
			country_event = { id = uk.105 days = 3 }
		}
	}
	option = {
		name = uk.103.b #Drop our claim
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.5
				IRE = { is_in_faction = no }
			}
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		119 = { remove_claim_by = GBR }
		add_political_power = -100
		add_stability = -0.05
		set_cosmetic_tag = GBR_britain
		hidden_effect = {
			news_event = uk.104
		}
	}
	option = {
		name = uk.103.c #It is time to take matters into our own hands
		trigger = {
			IRE = {
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		set_country_flag = GBR_may_attack_ireland
		unlock_decision_tooltip = GBR_invade_ireland
		add_war_support = -0.10
	}
}

# News: Britain abandons claim to Northern Ireland
news_event = {
	id = uk.104
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.104" }
	title = uk.104.t
	desc = uk.104.d
	picture = GFX_news_event_GBR_parliament

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		OR = {
			regional_europe_news = yes
			is_in_faction_with = GBR
			tag = IRE
			tag = GBR
		}
	}

	option = {
		name = uk.104.a
		trigger = { tag = GBR }
	}
	option = {
		name = uk.104.b
		trigger = { tag = IRE }
	}
	option = {
		name = uk.104.c
		trigger = {
			NOT = {
				tag = GBR
				tag = IRE
			}
		}
	}
}

# Britain appeals to Ireland's faction leader
country_event = {
	id = uk.105
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.105" }
	title = uk.105.t
	desc = uk.105.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	trigger = {
		is_faction_leader = yes
		is_in_faction_with = IRE
		IRE = { owns_state = 119 }
		NOT = { has_war_with = GBR }
	}

	option = {
		name = uk.105.a #We support Ireland unreservedly
		ai_chance = {
			factor = 75
		}
		IRE = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_hates_govt }
			country_event = { id = uk.109 days = 3 }
		}
	}
	option = {
		name = uk.105.b #Pressure the Irish to give in
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 3
				has_war = yes
				surrender_progress > 0.10
			}
			modifier = {
				factor = 0.5
				has_war = no
				is_actual_major = yes
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
		}
		IRE = {
			add_opinion_modifier = { target = ROOT modifier = KR_hates_govt }
			country_event = { id = uk.106 days = 3 }
		}
	}
}

# Faction leader attempts to pressure Ireland
country_event = {
	id = uk.106
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.106" }
	title = uk.106.t
	desc = uk.106.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	trigger = {
		FROM = { is_faction_leader = yes }
		is_in_faction_with = FROM
		owns_state = 119
		NOT = { has_war_with = GBR }
	}

	option = {
		name = uk.100.a #Absolutely not!
		trigger = {
			NOT = {
				is_subject_of = FROM
			}
		}
		ai_chance = {
			factor = 60
			modifier = {
				factor = 1.5
				has_authoritarian_government = yes
			}
		}
		add_stability = -0.05
		add_political_power = 50
		if = {
			limit = { is_in_faction_with = FROM }
			leave_faction = yes
			separate_peace_all_wars = yes
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			country_event = uk.107
		}
		GBR = {
			country_event = uk.108
		}
	}
	option = {
		name = uk.100.b #If this will keep the peace, so be it
		ai_chance = {
			factor = 40
			modifier = {
				factor = 1.5
				has_war = yes
			}
		}
		add_stability = 0.10
		add_political_power = -200
		GBR = {
			effect_tooltip = { transfer_state = 119 }
			add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
			country_event = uk.101
		}
	}
}

# Ireland refuses to be pressured - drops out of faction
country_event = {
	id = uk.107
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.107" }
	title = uk.107.t
	desc = uk.107.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = uk.107.a
	}
}

# Appealing to faction leader didn't help
country_event = {
	id = uk.108
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.108" }
	title = uk.108.t
	desc = uk.108.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = uk.108.b #Drop our claim
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		119 = { remove_claim_by = GBR }
		add_political_power = -100
		add_stability = -0.05
		set_cosmetic_tag = GBR_britain
		hidden_effect = {
			news_event = uk.104
		}
	}
	option = {
		name = uk.108.c #It is time to take matters into our own hands
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		set_country_flag = GBR_may_attack_ireland
		unlock_decision_tooltip = GBR_invade_ireland
		add_war_support = -0.10
	}
}

# Faction leader supports Ireland
country_event = {
	id = uk.109
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.109" }
	title = uk.109.t
	desc = uk.109.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	trigger = {
		FROM = { is_faction_leader = yes }
		IRE = {
			is_in_faction_with = FROM
			owns_state = 119
			NOT = { has_war_with = GBR }
		}
	}

	option = {
		name = uk.109.b #Drop our claim
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		119 = { remove_claim_by = GBR }
		add_political_power = -100
		add_stability = -0.05
		set_cosmetic_tag = GBR_britain
		hidden_effect = {
			news_event = uk.104
		}
	}
	option = {
		name = uk.109.c #It is time to take matters into our own hands
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		set_country_flag = GBR_may_attack_ireland
		unlock_decision_tooltip = GBR_invade_ireland
	}
}

# Ireland annexation event (fired by decision)
country_event = {
	id = uk.110
	title = uk.110.t
	desc = uk.110.d
	picture = GFX_report_event_IRE_unionist_rally

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.110"
		hidden_effect = {
			if = {
				limit = {
					119 = {
						is_owned_by = ROOT
						is_not_claim_or_core_of_ROOT = yes
					}
				}
				119 = { add_claim_by = ROOT }
			}
		}
	}

	option = {
		name = uk.110.a #Direct Rule
		ai_chance = {
			factor = 0
		}
		set_country_flag = IRE_CONQ
		add_political_power = -150
		add_stability = -0.15
		add_war_support = -0.15
		set_country_flag = ENG_IRA
		add_ideas = ENG_IRA
		hidden_effect = {
			country_event = { id = uob.90 days = 730 }
		}
	}
	option = {
		name = uk.110.b #Puppet the south
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_authoritarian_government = yes
			}
		}
		add_political_power = -100
		add_stability = -0.05
		hidden_effect = {
			IRE = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = IRE_gbr
			}
		}
		every_owned_state = {
			limit = {
				is_core_of = IRE
				is_not_claim_or_core_of_ROOT = yes
			}
			IRE = {
				transfer_state = PREV
			}
		}

		puppet = IRE

		hidden_effect = {
			IRE = {
				set_popularities = {
					totalist = 3
					radical_socialist = 5
					syndicalist = 7
					social_democrat = 2
					social_liberal = 6
					market_liberal = 6
					social_conservative = 50
					authoritarian_democrat = 9
					paternal_autocrat = 7
					national_populist = 5
				}
				set_politics = {
					ruling_party = social_conservative
					elections_allowed = no
				}
				create_country_leader = {
					name = "Frank McDermott"
					desc = "POLITICS_FRANK_MACDERMOT_DESC"
					picture = "Portrait_Ireland_Frank_MacDermot.png"
					expire = "1965.1.1"
					ideology = social_conservative_subtype
				}
				add_ideas = {
					IRE_Sean_Lemass_hog_mli
					IRE_Eamon_de_Valera_for_sli
					IRE_Frank_Aiken_eco_sli
					IRE_James_Dillon_sec_sco
				}
			}
		}
	}
	option = {
		name = uk.110.c #Ireland independent
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				has_elected_government = yes
			}
		}
		hidden_effect = {
			IRE = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = IRE_gbr
			}
		}
		every_owned_state = {
			limit = {
				is_core_of = IRE
				is_not_claim_or_core_of_ROOT = yes
			}
			IRE = {
				transfer_state = PREV
			}
		}

		random_country = {
			limit = {
				is_in_faction_with = ROOT
				is_faction_leader = yes
			}
			add_to_faction = IRE
		}

		hidden_effect = {
			IRE = {
				set_popularities = {
					totalist = 3
					radical_socialist = 5
					syndicalist = 7
					social_democrat = 2
					social_liberal = 6
					market_liberal = 6
					social_conservative = 50
					authoritarian_democrat = 9
					paternal_autocrat = 7
					national_populist = 5
				}
				set_politics = {
					ruling_party = social_conservative
					elections_allowed = no
				}
				create_country_leader = {
					name = "Frank McDermott"
					desc = "POLITICS_FRANK_MACDERMOT_DESC"
					picture = "Portrait_Ireland_Frank_MacDermot.png"
					expire = "1965.1.1"
					ideology = social_conservative_subtype
				}
				add_ideas = {
					IRE_Sean_Lemass_hog_mli
					IRE_Eamon_de_Valera_for_sli
					IRE_Frank_Aiken_eco_sli
					IRE_James_Dillon_sec_sco
				}
			}
		}
	}
}

# Ulster wishes to rejoin the UK (fired by decision)
country_event = {
	id = uk.111
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.111" }
	title = uk.111.t
	desc = uk.111.d
	picture = GFX_report_event_IRE_unionist_rally

	is_triggered_only = yes

	option = {
		name = uk.111.a
		add_political_power = 50
		if = {
			limit = {
				119 = {
					is_owned_by = FROM
					is_not_claim_or_core_of_ROOT = yes
				}
			}
			119 = { add_claim_by = ROOT }
		}
		annex_country = { target = FROM transfer_troops = yes }
	}
}

# Do we claim Gibraltar?
country_event = {
	id = uk.112
	title = uk.112.t
	picture = GFX_report_event_generic_diplomacy2

	desc = {
		text = uk.112.d.spanish
		trigger = {
			event_target:gibraltar_owner = { is_spanish_tag = yes }
		}
	}
	desc = {
		text = uk.112.d
		trigger = {
			event_target:gibraltar_owner = { is_spanish_tag = no }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.112"
		hidden_effect = {
			random_country = {
				limit = { owns_state = 118 }
				save_event_target_as = gibraltar_owner
			}
		}
	}

	option = {
		name = uk.112.a #Gibraltar is ours by right
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0.5
				has_government = social_democrat
			}
		}
		add_political_power = -50
		add_war_support = 0.05
		118 = { add_claim_by = GBR }
		unlock_decision_tooltip = GBR_demand_gibraltar
		event_target:gibraltar_owner = {
			add_opinion_modifier = { target = ROOT modifier = KR_outraged }
		}
	}
	option = {
		name = uk.112.b #It's a pointless claim
		ai_chance = {
			factor = 30
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0.5
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		add_political_power = 50
		add_war_support = -0.05
	}
}

# Do we claim the Falkland Islands?
country_event = {
	id = uk.113
	title = uk.113.t
	picture = GFX_report_event_generic_diplomacy2

	desc = {
		text = uk.113.d.arg
		trigger = {
			event_target:falklands_owner = {
				OR = {
					tag = ARG
					tag = FOP
				}
			}
		}
	}
	desc = {
		text = uk.113.d.ally
		trigger = {
			event_target:falklands_owner = {
				is_in_faction_with = ROOT
				NOT = {
					tag = ARG
					tag = FOP
				}
			}
		}
	}
	desc = {
		text = uk.113.d
		trigger = {
			event_target:falklands_owner = {
				NOT = {
					is_in_faction_with = ROOT
					tag = ARG
					tag = FOP
				}
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event uk.113"
		hidden_effect = {
			random_country = {
				limit = { owns_state = 299 }
				save_event_target_as = falklands_owner
			}
		}
	}

	option = {
		name = uk.113.a #The Falklands are ours by right
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_government = social_democrat
			}
		}
		add_political_power = -25
		add_war_support = 0.03
		unlock_decision_tooltip = GBR_demand_falklands
		299 = { add_claim_by = GBR }
		if = {
			limit = {
				event_target:falklands_owner = {
					OR = {
						tag = ARG
						tag = FOP
						NOT = { is_in_faction_with = ROOT }
					}
				}
			}
			event_target:falklands_owner = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			}
		}
	}
	option = {
		name = uk.113.b #It's a pointless claim
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				event_target:falklands_owner = {
					NOT = {
						tag = ARG
						tag = FOP
					}
					is_in_faction_with = ROOT
				}
			}
			modifier = {
				factor = 2
				has_government = social_liberal
			}
			modifier = {
				factor = 0.5
				OR = {
					has_government = social_conservative
					has_authoritarian_government = yes
				}
			}
		}
		add_political_power = 25
		add_war_support = -0.03
	}
}

# Sending demand for territory
country_event = {
	id = uk.115
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.115" }
	picture = GFX_report_event_generic_diplomacy2

	title = {
		text = uk.115.t
		trigger = { NOT = { is_in_faction_with = FROM } }
	}
	title = {
		text = uk.115.t.ally
		trigger = { is_in_faction_with = FROM }
	}
	desc = {
		text = uk.115.d
		trigger = { NOT = { is_in_faction_with = FROM } }
	}
	desc = {
		text = uk.115.d.ally
		trigger = { is_in_faction_with = FROM }
	}

	is_triggered_only = yes

	trigger = {
		owns_state = event_target:demand_state
		NOT = { has_war_with = FROM }
	}

	option = {
		name = uk.115.a #Agree
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				event_target:demand_state = { is_core_of = ROOT }
			}
			modifier = {
				factor = 10
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				is_in_faction = no
			}
		}
		if = {
			limit = { event_target:demand_state = { is_core_of = ROOT } }
			add_political_power = -100
		}
		else_if = {
			limit = { event_target:demand_state = { is_claimed_by = ROOT } }
			add_political_power = -50
		}
		else = {
			add_political_power = -25
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			effect_tooltip = { transfer_state = event_target:demand_state }
			country_event = uk.116
		}
	}
	option = {
		name = uk.115.b #Refuse
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.1
				is_subject_of = FROM
			}
			modifier = {
				factor = 0.5
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 0.5
				event_target:demand_state = { is_not_claim_or_core_of_ROOT = yes }
			}
			modifier = {
				factor = 0.1
				is_in_faction_with = FROM
				event_target:demand_state = { state = 299 }
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = uk.117
		}
	}
}

# They Agreed
country_event = {
	id = uk.116
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.116" }
	title = uk.116.t
	picture = GFX_report_event_generic_diplomacy2

	desc = {
		text = uk.116.d
		trigger = { NOT = { is_in_faction_with = FROM } }
	}
	desc = {
		text = uk.116.d.ally
		trigger = { is_in_faction_with = FROM }
	}

	is_triggered_only = yes

	option = {
		name = uk.116.a
		add_political_power = 25
		transfer_state = event_target:demand_state
	}
}

# They Refused
country_event = {
	id = uk.117
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.117" }
	title = uk.117.t
	desc = uk.117.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.117.a #We are not amused
		ai_chance = {
			factor = 70
		}
		add_war_support = 0.05
	}
	option = {
		name = uk.117.b #Then we are left with no alternative
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 2
				event_target:demand_state = { state = 118 }
			}
			modifier = {
				factor = 0
				is_in_faction = yes
				any_allied_country = { is_actual_major = yes }
			}
		}
		add_war_support = 0.05
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}
}

# Asking for control over subject
country_event = {
	id = uk.118
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.118" }
	title = uk.118.t
	desc = uk.118.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	trigger = {
		is_in_faction_with = FROM
		has_subject = event_target:colony_country
	}

	option = {
		name = uk.118.a #Agree
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				tag = GEX
				event_target:colony_country = {
					NOT = {
						tag = ULS
						tag = WAL
						tag = SCT
					}
				}
			}
			modifier = {
				factor = 0.5
				CAN_is_commonwealth_tag = no
			}
		}
		clr_country_flag = GBR_requested_control
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			effect_tooltip = { puppet = event_target:colony_country }
			country_event = uk.119
		}
	}
	option = {
		name = uk.118.b #Refuse
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = {
					tag = GEX
					tag = SAF
				}
				FROM = { is_faction_leader = yes }
			}
			modifier = {
				factor = 0
				event_target:colony_country = {
					OR = {
						tag = ULS
						tag = WAL
						tag = SCT
					}
				}
			}
			modifier = {
				factor = 20
				tag = SAF
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = uk.120
		}
	}
}

# They Agreed
country_event = {
	id = uk.119
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.119" }
	title = uk.119.t
	desc = uk.119.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.119.a
		add_political_power = 25
		event_target:colony_country = { get_current_government_type = yes }
		puppet = event_target:colony_country
		event_target:colony_country = { restore_previous_government_type = yes }
	}
}

# They Refused
country_event = {
	id = uk.120
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.120" }
	title = uk.120.t
	desc = uk.120.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.120.a
		add_political_power = -25
		if = {
			limit = {
				event_target:colony_country = {
					is_on_continent = central_america
				}
			}
			every_state = {
				limit = {
					is_core_of = event_target:colony_country
					is_not_claim_or_core_of_ROOT = yes
				}
				add_claim_by = ROOT
			}
		}
	}
}

# Asking for return of colonies
country_event = {
	id = uk.121
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.121" }
	picture = GFX_report_event_generic_diplomacy2

	title = {
		text = uk.121.t.ally
		trigger = { is_in_faction_with = FROM }
	}
	title = {
		text = uk.121.t
		trigger = { NOT = { is_in_faction_with = FROM } }
	}
	desc = {
		text = uk.121.d.ally
		trigger = { is_in_faction_with = FROM }
	}
	desc = {
		text = uk.121.d
		trigger = { NOT = { is_in_faction_with = FROM } }
	}

	is_triggered_only = yes

	trigger = {
		any_owned_state = {
			has_variable = ambition_area_@FROM
			is_british_colonial_claim = yes
			is_not_claim_or_core_of_ROOT = yes
		}
	}

	option = {
		name = uk.121.a #Agree
		trigger = { is_subject = no }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				tag = GEX
			}
			modifier = {
				factor = 0.5
				is_in_faction_with = FROM
				CAN_is_commonwealth_tag = no
			}
			modifier = {
				factor = 0.1
				is_in_faction = yes
				NOT = { is_in_faction_with = GBR }
				NOT = { alliance_strength_ratio < 1.0 }
			}
			modifier = {
				factor = 0.1
				is_in_faction = no
				alliance_strength_ratio > 1.0
			}
		}
		clr_country_flag = GBR_refused_colony_transfer
		effect_tooltip = {
			every_state = {
				limit = {
					has_variable = ambition_area_@FROM
					is_british_colonial_claim = yes
					is_not_claim_or_core_of_ROOT = yes
					OR = {
						is_owned_by = ROOT
						owner = { is_subject_of = ROOT }
					}
				}
				FROM = {
					transfer_state = PREV
				}
			}
		}
		FROM = {
			if = {
				limit = { is_in_faction_with = ROOT }
				add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			}
			else = {
				add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
			}
			country_event = uk.122
		}
	}
	option = {
		name = uk.121.b #Refuse
		trigger = { is_subject = no }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { tag = GEX }
				is_in_faction_with = FROM
				FROM = { is_faction_leader = yes }
			}
			modifier = {
				factor = 10
				is_in_faction = yes
				NOT = { is_in_faction_with = GBR }
				NOT = { alliance_strength_ratio < 1.0 }
			}
			modifier = {
				factor = 10
				is_in_faction = no
				alliance_strength_ratio > 1.0
			}
		}
		FROM = {
			if = {
				limit = { is_in_faction_with = ROOT }
				add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			}
			else = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			}
			country_event = uk.123
		}
	}
	option = {
		name = uk.121.c #Inform overlord
		trigger = { is_subject = yes }
		overlord = { country_event = uk.140 }
	}
}

# They Agreed
country_event = {
	id = uk.122
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.122" }
	title = uk.122.t
	desc = uk.122.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.122.a
		every_state = {
			limit = {
				has_variable = ambition_area_@ROOT
				is_british_colonial_claim = yes
				is_not_claim_or_core_of_FROM = yes
				OR = {
					is_owned_by = FROM
					owner = { is_subject_of = FROM }
				}
			}
			ROOT = {
				transfer_state = PREV
			}
		}
	}
}

# They Refused
country_event = {
	id = uk.123
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.123" }
	title = uk.123.t
	desc = uk.123.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.123.a #How disappointing
		ai_chance = {
			factor = 50
		}
		add_political_power = -25
	}
	option = {
		name = uk.123.b #They leave us with little choice
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FROM = { tag = GEX }
			}
			modifier = {
				factor = 0
				FROM = {
					is_in_faction = yes
					any_allied_country = { is_actual_major = yes }
				}
			}
		}
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}
}

# UK decides the fate of WIF
country_event = {
	id = uk.124
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.124" }
	title = uk.124.t
	desc = uk.124.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.124.a #Time to dissolve the federation
		trigger = {
			CAF = { is_ai = yes }
		}
		ai_chance = {
			factor = 70
		}
		if = {
			limit = {
				is_in_faction_with = NFA
				OR = {
					694 = { is_owned_by = CAF } #French Caribbean
					310 = { is_owned_by = CAF } #French Guyana
					1037 = { is_owned_by = CAF } #French Guyana Jungle
					694 = { is_owned_by = ROOT } #French Caribbean
					310 = { is_owned_by = ROOT } #French Guyana
					1037 = { is_owned_by = ROOT } #French Guyana Jungle
				}
			}
			every_state = {
				limit = {
					OR = {
						is_owned_by = CAF
						is_owned_by = ROOT
					}
					OR = {
						state = 694
						state = 310
						state = 1037
					}
				}
				effect_tooltip = {
					NFA = { transfer_state = PREV }
				}
			}
			NFA = {
				add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
				hidden_effect = { country_event = uk.125 }
			}
		}
		annex_country = { target = CAF transfer_troops = yes }
		hidden_effect = {
			set_country_flag = CAF_dissolved
		}
	}
	option = {
		name = uk.124.b #It can remain under our control
		trigger = {
			CAF = { is_subject_of = ROOT }
		}
		ai_chance = {
			factor = 20
		}
		CAF = {
			country_event = uk.126
		}
	}
	option = {
		name = uk.124.c #It should be placed under our control
		trigger = {
			CAF = { is_subject = no }
		}
		ai_chance = {
			factor = 20
		}
		CAF = {
			country_event = uk.127
		}
	}
	option = {
		name = uk.124.e #Leave it independent
		trigger = {
			CAF = { is_subject = no }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				CAF = { is_ai = no }
			}
		}
		CAF = {
			add_opinion_modifier = { target = ROOT modifier = KR_close_allies }
			country_event = uk.128
		}
	}
	option = {
		name = uk.124.f #Grant it independence
		trigger = {
			CAF = { is_subject_of = ROOT }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				CAF = { is_ai = no }
			}
		}
		effect_tooltip = {
			set_autonomy = {
				target = CAF
				autonomy_state = autonomy_free
			}
		}
		CAF = {
			add_opinion_modifier = { target = ROOT modifier = KR_close_allies }
			country_event = uk.129
		}
	}
}

# French Caribbean returned to NFA
country_event = {
	id = uk.125
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.125" }
	title = uk.125.t
	desc = uk.125.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.125.a
		every_state = {
			limit = {
				OR = {
					is_owned_by = CAF
					is_owned_by = FROM
				}
				OR = {
					state = 694 #French Caribbean
					state = 310 #French Guyana
					state = 1037 #French Guyana Jungle
				}
			}
			ROOT = { transfer_state = PREV }
		}
	}
}

# WIF to remain UK puppet
country_event = {
	id = uk.126
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.126" }
	title = uk.126.t
	desc = uk.126.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.126.a
	}
}

# WIF to become UK puppet
country_event = {
	id = uk.127
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.127" }
	title = uk.127.t
	desc = uk.127.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.127.a #Agreed
		get_current_government_type = yes
		FROM = { puppet = ROOT }
		restore_previous_government_type = yes
	}
	option = {
		name = uk.127.b #Refuse
		trigger = { is_ai = no }
		separate_peace_all_wars = yes
		leave_faction = yes
		FROM = {
			create_wargoal = {
				type = annex_everything
				target = ROOT
			}
		}
	}
}

# WIF to remain independent
country_event = {
	id = uk.128
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.128" }
	title = uk.128.t
	desc = uk.128.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.128.a
	}
}

# WIF granted independence
country_event = {
	id = uk.129
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.129" }
	title = uk.129.t
	desc = uk.129.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.129.a
		add_political_power = 100
		FROM = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
		}
	}
}

# The Imperial Argument (fired by focus)
country_event = {
	id = uk.130
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.130" }
	title = uk.130.t
	picture = GFX_report_event_GBR_country_parliament

	desc = {
		text = uk.130.d.promise
		trigger = { has_global_flag = ENT_agree_colonies }
	}
	desc = {
		text = uk.130.d.nopromise
		trigger = { NOT = { has_global_flag = ENT_agree_colonies } }
	}

	is_triggered_only = yes

	option = {
		name = uk.130.a #It is time to decolonize
		ai_chance = {
			factor = 80
		}
		set_country_flag = GBR_decolonize
		add_political_power = 100
		add_stability = 0.10
		increase_ruling_party_popularity_by_10 = yes
		hidden_effect = {
			every_state = {
				limit = {
					has_variable = ambition_area_@ROOT
					is_british_colonial_claim = yes
				}
				clear_variable = ambition_area_@ROOT
			}
		}
	}
	option = {
		name = uk.130.b #We will restore the empire - but not German lands
		trigger = { has_global_flag = ENT_agree_colonies }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		set_country_flag = GBR_rebuild_empire_no_germany
		add_political_power = -100
		add_stability = -0.10
		decrease_ruling_party_popularity_by_10 = yes
		custom_effect_tooltip = GBR_regain_colonies_no_ger
	}
	option = {
		name = uk.130.c #We will restore the ENTIRE empire
		trigger = { has_global_flag = ENT_agree_colonies }
		ai_chance = {
			factor = 0
		}
		set_country_flag = GBR_rebuild_empire
		add_political_power = -300
		add_stability = -0.20
		decrease_ruling_party_popularity_by_20 = yes
		clr_global_flag = GER_stay_out_france_uk
		clr_global_flag = ENT_britain_agree_northire
		clr_global_flag = ENT_agree_colonies
		clr_global_flag = ENT_france_agree_mittel
		if = {
			limit = { has_global_flag = ENT_france_agree_alsace }
			clr_global_flag = ENT_france_agree_alsace
			28 = { add_claim_by = NFA }
		}
		every_country = {
			limit = { is_in_faction_with = GER }
			country_event = entente.324
		}
		custom_effect_tooltip = GBR_regain_colonies
	}
	option = {
		name = uk.130.e #We shall rebuild the British Empire
		trigger = { NOT = { has_global_flag = ENT_agree_colonies } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		set_country_flag = GBR_rebuild_empire
		add_political_power = -100
		add_stability = -0.10
		decrease_ruling_party_popularity_by_10 = yes
		custom_effect_tooltip = GBR_regain_colonies
	}
}

# UK asks for Malta's return
country_event = {
	id = uk.131
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.131" }
	title = uk.131.t
	desc = uk.131.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	trigger = {
		owns_state = event_target:demand_state
		NOT = { has_war_with = FROM }
	}

	option = {
		name = uk.115.a #Agree
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			effect_tooltip = { transfer_state = event_target:demand_state }
			country_event = uk.116
		}
	}
	option = {
		name = uk.115.b #Refuse
		trigger = { is_ai = no }
		116 = { add_claim_by = ROOT }
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = uk.117
		}
	}
}

# Asking for return of integral state
country_event = {
	id = uk.132
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.132" }
	title = uk.132.t
	picture = GFX_report_event_generic_diplomacy2

	desc = {
		text = uk.132.d.puppet
		trigger = {
			has_subject = event_target:return_country
		}
	}
	desc = {
		text = uk.132.d
		trigger = {
			tag = event_target:return_country
		}
	}


	is_triggered_only = yes

	trigger = {
		OR = {
			has_subject = event_target:return_country
			tag = event_target:return_country
		}
		NOT = { has_war_with = FROM }
	}

	option = {
		name = uk.132.a #Agree
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				alliance_strength_ratio > 2.0
			}
			modifier = {
				factor = 0.5
				tag = GER
				has_war = no
			}
		}
		FROM = {
			effect_tooltip = { annex_country = { target = event_target:return_country } }
			country_event = uk.133
		}
	}
	option = {
		name = uk.132.b #Refuse
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0.5
				alliance_strength_ratio < 1.0
			}
			modifier = {
				factor = 0.5
				NOT = { tag = event_target:return_country }
				has_war = yes
			}
			modifier = {
				factor = 0.5
				NOT = { tag = event_target:return_country }
				has_war = yes
				surrender_progress > 0.10
			}
		}
		FROM = {
			country_event = uk.134
		}
	}
}

# They Agreed
country_event = {
	id = uk.133
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.133" }
	title = uk.133.t
	desc = uk.133.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.133.a
		annex_country = { target = event_target:return_country }
	}
}

# They Refused
country_event = {
	id = uk.134
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.134" }
	title = uk.134.t
	desc = uk.134.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.134.a #Damn you!
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0.5
				alliance_strength_ratio > 2.0
			}
			modifier = {
				factor = 0.01
				FROM = { is_in_faction = no }
			}
		}
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
	option = {
		name = uk.134.b #War it is
		trigger = {
			can_declare_war_on = event_target:return_country
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.5
				FROM = { tag = GER }
			}
			modifier = {
				factor = 0.5
				alliance_strength_ratio < 1.0
			}
		}
		declare_war_on = {
			target = event_target:return_country
			type = annex_everything
		}
	}
}

# Asking for return of British states
country_event = {
	id = uk.135
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.135" }
	title = uk.135.t
	desc = uk.135.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	trigger = {
		any_owned_state = {
			is_core_of = GBR
			is_british_isles = yes
			is_not_claim_or_core_of_ROOT = yes
		}
		NOT = {
			has_war_with = FROM
			is_in_faction_with = FROM
			is_subject_of = FROM
		}
	}

	option = {
		name = uk.135.a #Agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_war = yes
			}
		}
		effect_tooltip = {
			every_owned_state = {
				limit = {
					is_core_of = GBR
					is_british_isles = yes
					is_not_claim_or_core_of_ROOT = yes
				}
				FROM = {
					transfer_state = PREV
				}
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
			country_event = uk.136
		}
	}
	option = {
		name = uk.135.b #Refuse
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				has_war = yes
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			country_event = uk.137
		}
	}
}

# They Agreed
country_event = {
	id = uk.136
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.136" }
	title = uk.136.t
	desc = uk.136.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.136.a
		FROM = {
			every_owned_state = {
				limit = {
					is_core_of = GBR
					is_british_isles = yes
					is_not_claim_or_core_of_PREV = yes
				}
				ROOT = {
					transfer_state = PREV
				}
			}
		}
	}
}

# They Refused
country_event = {
	id = uk.137
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.137" }
	title = uk.137.t
	desc = uk.137.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.137.a #How disappointing
		ai_chance = {
			factor = 10
		}
		add_opinion_modifier = { target = FROM modifier = KR_outraged }
	}
	option = {
		name = uk.137.b #They leave us with little choice
		trigger = {
			can_declare_war_on = FROM
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				FROM = { is_in_faction = no }
			}
		}
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}
}

# Overlord informed of UK's demand
country_event = {
	id = uk.140
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.140" }
	title = uk.140.t
	desc = uk.140.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.140.a #Tell them to refuse
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { tag = GEX }
				is_in_faction_with = GBR
				GBR = { is_faction_leader = yes }
			}
			modifier = {
				factor = 4
				is_in_faction = yes
				NOT = { is_in_faction_with = GBR }
				NOT = { alliance_strength_ratio < 1.0 }
			}
		}
		FROM = { country_event = uk.141 }
	}
	option = {
		name = uk.140.b #Tell them to agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				tag = GEX
			}
			modifier = {
				factor = 0.5
				is_in_faction_with = GBR
				CAN_is_commonwealth_tag = no
			}
			modifier = {
				factor = 4
				alliance_strength_ratio < 1.0
			}
		}
		FROM = { country_event = uk.142 }
	}
}

# Puppet told to refuse
country_event = {
	id = uk.141
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.141" }
	title = uk.141.t
	desc = uk.141.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.141.a
		GBR = {
			if = {
				limit = { is_in_faction_with = ROOT }
				add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			}
			else = {
				add_opinion_modifier = { target = ROOT modifier = KR_outraged }
			}
			country_event = uk.123
		}
	}
}

# Puppet told to agree
country_event = {
	id = uk.142
	immediate = { log = "[GetDateText]: [Root.GetName]: event uk.142" }
	title = uk.142.t
	desc = uk.142.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = uk.142.a
		clr_country_flag = GBR_refused_colony_transfer
		effect_tooltip = {
			every_owned_state = {
				limit = {
					has_variable = ambition_area_@GBR
					is_british_colonial_claim = yes
					is_not_claim_or_core_of_ROOT = yes
				}
				GBR = {
					transfer_state = PREV
				}
			}
		}
		GBR = {
			if = {
				limit = { is_in_faction_with = ROOT }
				add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			}
			else = {
				add_opinion_modifier = { target = ROOT modifier = KR_returned_land }
			}
			country_event = uk.122
		}
	}
}

