###########################
# Entente Events
###########################
# By Rylock
###########################

add_namespace = entente

### IEDC Events

# IEDC created (fired by focus)
country_event = {
	id = entente.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.1" }
	title = entente.1.t
	desc = entente.1.d
	picture = GFX_report_event_CAN_commission

	is_triggered_only = yes

	option = {
		name = entente.1.a
		add_ideas = CAN_iedc_main
		unlock_decision_category_tooltip = CAN_iedc_decisions
		add_political_power = -50
		custom_effect_tooltip = add_50_pp_to_iedc
		hidden_effect = {
			set_global_flag = CAN_iedc_created
			set_country_flag = CAN_joined_iedc
			save_global_event_target_as = iedc_leader
			add_to_array = { array = global.iedc_members }
			set_variable = { global.iedc_pp = 50 }
			set_variable = { iedc_civ_factories = 0 }
			set_variable = { iedc_mil_factories = 0 }
			set_variable = { iedc_nav_factories = 0 }
		}
	}
}

# Invitation to the IEDC (fired by decision)
country_event = {
	id = entente.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2" }
	title = entente.2.t
	desc = entente.2.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	trigger = {
		has_capitulated = no
		is_in_faction_with = FROM
	}

	option = {
		name = entente.2.a #join +25PP
		ai_chance = {
			factor = 50
			#do not join if you have more than double the factories of the Entente leader
			modifier = {
				factor = 0
				set_temp_variable = { num_fact = FROM.num_of_factories }
				multiply_temp_variable = { num_fact = 2 }
				check_variable = {
					var = ROOT.num_of_factories
					value = num_fact
					compare = greater_than
				}
			}
		}
		custom_effect_tooltip = CAN_joins_iedc
		add_political_power = -25
		custom_effect_tooltip = add_25_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 25 }
			add_to_variable = { global.iedc_pp = 25 }
			set_variable = { iedc_civ_factories = 0 }
			set_variable = { iedc_mil_factories = 0 }
			set_variable = { iedc_nav_factories = 0 }
			set_country_flag = CAN_joined_iedc
			clr_country_flag = CAN_invited_to_iedc
			FROM = { country_event = entente.3 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.2.b #join +50PP
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
			modifier = {
				factor = 0.25
				has_political_power < -50
			}
			modifier = {
				factor = 2
				has_political_power > 99
				has_political_power < 200
			}
			modifier = {
				factor = 0
				num_of_factories < 10
			}
			#do not join if you have more than double the factories of the Entente leader
			modifier = {
				factor = 0
				set_temp_variable = { num_fact = FROM.num_of_factories }
				multiply_temp_variable = { num_fact = 2 }
				check_variable = {
					var = ROOT.num_of_factories
					value = num_fact
					compare = greater_than
				}
			}
		}
		custom_effect_tooltip = CAN_joins_iedc
		add_political_power = -50
		custom_effect_tooltip = add_50_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 50 }
			add_to_variable = { global.iedc_pp = 50 }
			set_variable = { iedc_civ_factories = 0 }
			set_variable = { iedc_mil_factories = 0 }
			set_variable = { iedc_nav_factories = 0 }
			set_country_flag = CAN_joined_iedc
			clr_country_flag = CAN_invited_to_iedc
			FROM = { country_event = entente.3 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.2.c #join +100PP
		trigger = { has_political_power > 99 }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				has_political_power > 199
			}
			modifier = {
				factor = 0
				num_of_factories < 20
			}
			#do not join if you have more than double the factories of the Entente leader
			modifier = {
				factor = 0
				set_temp_variable = { num_fact = FROM.num_of_factories }
				multiply_temp_variable = { num_fact = 2 }
				check_variable = {
					var = ROOT.num_of_factories
					value = num_fact
					compare = greater_than
				}
			}
		}
		custom_effect_tooltip = CAN_joins_iedc
		add_political_power = -100
		custom_effect_tooltip = add_100_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 100 }
			add_to_variable = { global.iedc_pp = 100 }
			set_variable = { iedc_civ_factories = 0 }
			set_variable = { iedc_mil_factories = 0 }
			set_variable = { iedc_nav_factories = 0 }
			set_country_flag = CAN_joined_iedc
			clr_country_flag = CAN_invited_to_iedc
			FROM = { country_event = entente.3 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.2.e #do not join
		ai_chance = {
			factor = 50
			#always join if the Entente leader has more factories than you
			modifier = {
				factor = 0
				check_variable = {
					var = FROM.num_of_factories
					value = ROOT.num_of_factories
					compare = greater_than
				}
			}
			modifier = {
				factor = 0
				is_subject = yes
			}
			modifier = {
				factor = 0.5
				tag = NFA
			}
		}
		clr_country_flag = CAN_invited_to_iedc
		set_country_flag = CAN_refused_iedc
		reverse_add_opinion_modifier = { target = FROM modifier = KR_disapproves_of_govt }
		FROM = { country_event = entente.4 }
	}
}

# Canada notified of member joining IEDC
country_event = {
	id = entente.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.3" }
	title = entente.3.t
	desc = entente.3.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		name = entente.3.a
		clr_country_flag = CAN_inviting_to_iedc
		reverse_add_opinion_modifier = { target = FROM modifier = CAN_iedc_member }
		hidden_effect = {
			add_to_array = { array = global.iedc_members value = FROM }
		}
	}
}

# Canada notified of country refusing to join IEDC
country_event = {
	id = entente.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.4" }
	title = entente.4.t
	desc = entente.4.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = entente.4.a
		clr_country_flag = CAN_inviting_to_iedc
	}
}

# Advisors picked
country_event = {
	id = entente.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.5" }
	title = entente.5.t
	desc = entente.5.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = entente.5.a #Economic
		ai_chance = {
			factor = 40
		}
		if = {
			limit = { check_variable = { iedc_contribution < 50 } }
			add_timed_idea = {
				idea = CAN_iedc_econ1
				days = 365
			}
		}
		else_if = {
			limit = { check_variable = { iedc_contribution < 100 } }
			add_timed_idea = {
				idea = CAN_iedc_econ2
				days = 365
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_iedc_econ3
				days = 365
			}
		}
	}
	option = {
		name = entente.5.b #Naval
		trigger = { num_of_naval_factories > 0 }
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				num_of_naval_factories < 5
			}
		}
		if = {
			limit = { check_variable = { iedc_contribution < 50 } }
			add_timed_idea = {
				idea = CAN_iedc_naval1
				days = 365
			}
		}
		else_if = {
			limit = { check_variable = { iedc_contribution < 100 } }
			add_timed_idea = {
				idea = CAN_iedc_naval2
				days = 365
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_iedc_naval3
				days = 365
			}
		}
	}
	option = {
		name = entente.5.c #Construction
		ai_chance = {
			factor = 30
		}
		if = {
			limit = { check_variable = { iedc_contribution < 50 } }
			add_timed_idea = {
				idea = CAN_iedc_const1
				days = 365
			}
		}
		else_if = {
			limit = { check_variable = { iedc_contribution < 100 } }
			add_timed_idea = {
				idea = CAN_iedc_const2
				days = 365
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_iedc_const3
				days = 365
			}
		}
	}
}

# Investment in IEDC nation (fired by decision)
country_event = {
	id = entente.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.6" }
	title = entente.6.t
	picture = GFX_report_event_generic_diplomacy2

	desc = {
		text = entente.6.d.head
		trigger = { tag = FROM }
	}
	desc = {
		text = entente.6.d.member
		trigger = { NOT = { tag = FROM } }
	}

	is_triggered_only = yes

	option = {
		name = entente.6.a #Civilian
		ai_chance = {
			factor = 30
			modifier = {
				factor = 2
				has_war = no
				date < 1939.1.1
			}
		}
		add_offsite_building = { type = industrial_complex level = 1 }
		hidden_effect = {
			clr_country_flag = CAN_iedc_investment
			set_country_flag = CAN_iedc_investment
			add_to_variable = { iedc_civ_factories = 1 }
		}
	}
	option = {
		name = entente.6.b #Military
		ai_chance = {
			factor = 40
		}
		add_offsite_building = { type = arms_factory level = 1 }
		hidden_effect = {
			clr_country_flag = CAN_iedc_investment
			set_country_flag = CAN_iedc_investment
			add_to_variable = { iedc_mil_factories = 1 }
		}
	}
	option = {
		name = entente.6.c #Dockyard
		trigger = {
			any_owned_state = { is_coastal = yes }
		}
		ai_chance = {
			factor = 30
		}
		add_offsite_building = { type = dockyard level = 1 }
		hidden_effect = {
			clr_country_flag = CAN_iedc_investment
			set_country_flag = CAN_iedc_investment
			add_to_variable = { iedc_nav_factories = 1 }
		}
	}
}

# Annual investment in IEDC
country_event = {
	id = entente.10
	title = entente.10.t
	desc = entente.10.d
	picture = GFX_report_event_CAN_commission

	trigger = {
		is_in_faction = yes
		is_in_array = { global.iedc_members = ROOT }
		has_country_flag = { flag = CAN_joined_iedc days > 354 }
		NOT = {
			has_idea = CAN_iedc_econ1
			has_idea = CAN_iedc_econ2
			has_idea = CAN_iedc_econ3
			has_idea = CAN_iedc_naval1
			has_idea = CAN_iedc_naval2
			has_idea = CAN_iedc_naval3
			has_idea = CAN_iedc_const1
			has_idea = CAN_iedc_const2
			has_idea = CAN_iedc_const3
		}
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.10"
		hidden_effect = {
			clr_country_flag = CAN_joined_iedc
			set_country_flag = CAN_joined_iedc
		}
	}

	option = {
		name = entente.10.f #invest 250PP
		trigger = {
			tag = event_target:KR_entente_leader
			has_political_power > 249
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				has_political_power > 299
			}
			modifier = {
				factor = 0
				num_of_factories < 30
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
		}
		add_political_power = -250
		custom_effect_tooltip = add_250_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 250 }
			add_to_variable = { global.iedc_pp = 250 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.10.a #invest 100PP
		trigger = { has_political_power > 99 }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				has_political_power > 199
			}
			modifier = {
				factor = 0
				num_of_factories < 20
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
		}
		add_political_power = -100
		custom_effect_tooltip = add_100_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 100 }
			add_to_variable = { global.iedc_pp = 100 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.10.b #invest 50PP
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				has_political_power < 50
			}
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
			modifier = {
				factor = 2
				has_political_power > 99
				has_political_power < 200
			}
			modifier = {
				factor = 0
				num_of_factories < 10
			}
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
		}
		add_political_power = -50
		custom_effect_tooltip = add_50_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 50 }
			add_to_variable = { global.iedc_pp = 50 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.10.c #invest 25PP
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				surrender_progress > 0
			}
		}
		add_political_power = -25
		custom_effect_tooltip = add_25_pp_to_iedc
		hidden_effect = {
			set_variable = { iedc_contribution = 25 }
			add_to_variable = { global.iedc_pp = 25 }
			country_event = { id = entente.5 days = 1 }
		}
	}
	option = {
		name = entente.10.e #invest nothing
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.1
				has_political_power > 50
			}
			modifier = {
				factor = 2.5
				has_political_power < 0
			}
			modifier = {
				factor = 2
				has_political_power < -100
			}
			modifier = {
				factor = 2
				has_war = yes
				surrender_progress > 0
			}
		}
		hidden_effect = {
			set_variable = { iedc_contribution = 0 }
		}
	}
}

# Country leaves the IEDC (fired by decision)
country_event = {
	id = entente.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.11" }
	title = entente.11.t
	desc = entente.11.d
	picture = GFX_report_event_generic_diplomacy2

	is_triggered_only = yes

	option = {
		name = entente.11.a
		remove_opinion_modifier = { target = FROM modifier = CAN_iedc_member }
		hidden_effect = {
			remove_from_array = { array = global.iedc_members value = FROM }
		}
	}
}

# Country leaves the Entente, and thus the IEDC
country_event = {
	id = entente.12
	title = entente.12.t
	desc = entente.12.d
	picture = GFX_report_event_generic_diplomacy2

	trigger = {
		is_in_array = { global.iedc_members = ROOT }
		has_global_flag = CAN_iedc_created
		NOT = {
			has_idea = CAN_iedc_main
			has_idea = CAN_iedc_main2
			AND = {
				is_in_faction = yes
				any_allied_country = { OR = { has_idea = CAN_iedc_main has_idea = CAN_iedc_main2 } }
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.12"
		remove_from_array = { array = global.iedc_members value = ROOT }
	}

	option = {
		name = entente.12.a
		set_country_flag = CAN_refused_iedc
		CAN_remove_from_iedc = yes
	}
}

# IEDC shut down
country_event = {
	id = entente.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.13" }
	title = entente.13.t
	desc = entente.13.d
	picture = GFX_report_event_CAN_commission

	fire_only_once = yes

	trigger = {
		tag = ENT
		OR = { 
			has_idea = CAN_iedc_main 
			has_idea = CAN_iedc_main2 
		} 
		check_variable = { global.iedc_members^num < 2 }
		has_global_flag = { flag = CAN_iedc_created days > 180 }
	}

	mean_time_to_happen = {
		days = 7
	}

	option = {
		name = entente.13.a
		clr_global_flag = CAN_iedc_created
		clr_country_flag = CAN_joined_iedc
		clear_variable = iedc_contribution
		if = {
			limit = { has_idea = CAN_iedc_main }
			remove_ideas = CAN_iedc_main
		}
		if = {
			limit = { has_idea = CAN_iedc_main2 }
			remove_ideas = CAN_iedc_main2
		}
		if = {
			limit = { has_idea = CAN_iedc_econ1 }
			remove_ideas = CAN_iedc_econ1
		}
		if = {
			limit = { has_idea = CAN_iedc_econ2 }
			remove_ideas = CAN_iedc_econ2
		}
		if = {
			limit = { has_idea = CAN_iedc_econ3 }
			remove_ideas = CAN_iedc_econ3
		}
		if = {
			limit = { has_idea = CAN_iedc_naval1 }
			remove_ideas = CAN_iedc_naval1
		}
		if = {
			limit = { has_idea = CAN_iedc_naval2 }
			remove_ideas = CAN_iedc_naval2
		}
		if = {
			limit = { has_idea = CAN_iedc_naval3 }
			remove_ideas = CAN_iedc_naval3
		}
		if = {
			limit = { has_idea = CAN_iedc_const1 }
			remove_ideas = CAN_iedc_const1
		}
		if = {
			limit = { has_idea = CAN_iedc_const2 }
			remove_ideas = CAN_iedc_const2
		}
		if = {
			limit = { has_idea = CAN_iedc_const3 }
			remove_ideas = CAN_iedc_const3
		}
		if = {
			limit = { check_variable = { iedc_civ_factories > 0 } }
			custom_effect_tooltip = CAN_remove_iedc_civ
			hidden_effect = {
				set_variable = { tempvar1 = 0 }
				subtract_from_variable = { var = tempvar1 value = iedc_civ_factories }
				add_offsite_building = { type = industrial_complex level = tempvar1 }
				clear_variable = tempvar1
			}
		}
		if = {
			limit = { check_variable = { iedc_mil_factories > 0 } }
			custom_effect_tooltip = CAN_remove_iedc_mil
			hidden_effect = {
				set_variable = { tempvar2 = 0 }
				subtract_from_variable = { var = tempvar2 value = iedc_mil_factories }
				add_offsite_building = { type = arms_factory level = tempvar2 }
				clear_variable = tempvar2
			}
		}
		if = {
			limit = { check_variable = { iedc_nav_factories > 0 } }
			custom_effect_tooltip = CAN_remove_iedc_nav
			hidden_effect = {
				set_variable = { tempvar3 = 0 }
				subtract_from_variable = { var = tempvar3 value = iedc_nav_factories }
				add_offsite_building = { type = dockyard level = tempvar3 }
				clear_variable = tempvar3
			}
		}
		hidden_effect = {
			clear_variable = iedc_civ_factories
			clear_variable = iedc_mil_factories
			clear_variable = iedc_nav_factories
			clear_variable = global.iedc_pp
			clear_array = global.iedc_members
		}
	}
	
	option = {
		name = entente.13.b
		add_political_power = -100
	}
}


### Influence of the Monarchy Events

# King addresses the Entente (fired by decision)
country_event = {
	id = entente.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.20" }
	title = entente.20.t
	picture = GFX_report_event_CAN_microphone

	desc = {
		text = entente.20.d.home_isles
		trigger = {
			event_target:KR_king_base = {
				tag = GBR
				NOT = { has_country_flag = CAN_speech_home_isles }
			}
		}
	}
	desc = {
		text = entente.20.d.war_eng
		trigger = {
			event_target:KR_king_base = {
				has_war_with = ENG
				NOT = {
					has_country_flag = CAN_speech_war_eng
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.war_ger
		trigger = {
			event_target:KR_king_base = {
				has_war_with = GER
				NOT = {
					has_country_flag = CAN_speech_war_ger
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.war_acw
		trigger = {
			event_target:KR_king_base = {
				OR = {
					has_war_with = USA
					has_war_with = CSA
					has_war_with = TEX
					has_war_with = CAL
				}
				NOT = {
					has_country_flag = CAN_speech_war_acw
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.france_taken
		trigger = {
			NFA = {
				is_in_faction_with = event_target:KR_king_base
				owns_state = 16
			}
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_france_taken
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.france_mainland
		trigger = {
			NFA = {
				owns_state = 21
				NOT = { owns_state = 16 }
				is_in_faction_with = event_target:KR_king_base
			}
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_france_mainland
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.india_united
		trigger = {
			DEH = {
				is_in_faction_with = event_target:KR_king_base
				owns_state = 431
				owns_state = 427
			}
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_india_united
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.italy_united
		trigger = {
			SRD = {
				is_in_faction_with = event_target:KR_king_base
				owns_state = 158
			}
			NOT = { country_exists = SRI }
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_italy_united
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.india_defeated
		trigger = {
			NOT = { country_exists = DEH }
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_india_defeated
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.aus_syndicalist
		trigger = {
			AST = { has_socialist_government = yes }
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_aus_syndicalist
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.caf_syndicalist
		trigger = {
			CAF = { has_socialist_government = yes }
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_caf_syndicalist
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
					AND = {
						AST = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_aus_syndicalist }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.acw_begins
		trigger = {
			CSA = {
				exists = yes
				has_war_with = USA
				NOT = { has_war_with = event_target:KR_king_base }
			}
			event_target:KR_king_base = {
				NOT = {
					has_country_flag = CAN_speech_acw_begins
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
					AND = {
						AST = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_aus_syndicalist }
					}
					AND = {
						CAF = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_caf_syndicalist }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.war
		trigger = {
			event_target:KR_king_base = {
				has_war = yes
				NOT = {
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
					AND = {
						AST = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_aus_syndicalist }
					}
					AND = {
						CAF = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_caf_syndicalist }
					}
					AND = {
						CSA = {
							exists = yes
							has_war_with = USA
							NOT = { has_war_with = PREV }
						}
						NOT = { has_country_flag = CAN_speech_acw_begins }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.peace1
		trigger = {
			country_exists = ENG
			event_target:KR_king_base = {
				has_war = no
				NOT = {
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
					AND = {
						AST = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_aus_syndicalist }
					}
					AND = {
						CAF = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_caf_syndicalist }
					}
					AND = {
						CSA = {
							exists = yes
							has_war_with = USA
							NOT = { has_war_with = PREV }
						}
						NOT = { has_country_flag = CAN_speech_acw_begins }
					}
				}
			}
		}
	}
	desc = {
		text = entente.20.d.peace2
		trigger = {
			NOT = { country_exists = ENG }
			event_target:KR_king_base = {
				has_war = no
				NOT = {
					AND = {
						tag = GBR
						NOT = { has_country_flag = CAN_speech_home_isles }
					}
					AND = {
						has_war_with = ENG
						NOT = { has_country_flag = CAN_speech_war_eng }
					}
					AND = {
						has_war_with = GER
						NOT = { has_country_flag = CAN_speech_war_ger }
					}
					AND = {
						OR = {
							has_war_with = USA
							has_war_with = CSA
							has_war_with = TEX
							has_war_with = CAL
						}
						NOT = { has_country_flag = CAN_speech_war_acw }
					}
					AND = {
						NFA = {
							owns_state = 16
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_taken }
					}
					AND = {
						NFA = {
							owns_state = 21
							NOT = { owns_state = 16 }
							is_in_faction_with = PREV
						}
						NOT = { has_country_flag = CAN_speech_france_mainland }
					}
					AND = {
						DEH = {
							is_in_faction_with = PREV
							owns_state = 431
							owns_state = 427
						}
						NOT = { has_country_flag = CAN_speech_india_united }
					}
					AND = {
						SRD = {
							is_in_faction_with = PREV
							owns_state = 158
						}
						NOT = { has_country_flag = CAN_speech_italy_united }
					}
					AND = {
						NOT = { country_exists = DEH }
						NOT = { has_country_flag = CAN_speech_india_defeated }
					}
					AND = {
						AST = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_aus_syndicalist }
					}
					AND = {
						CAF = { has_socialist_government = yes }
						NOT = { has_country_flag = CAN_speech_caf_syndicalist }
					}
					AND = {
						CSA = {
							exists = yes
							has_war_with = USA
							NOT = { has_war_with = PREV }
						}
						NOT = { has_country_flag = CAN_speech_acw_begins }
					}
				}
			}
		}
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		is_in_faction_with = ROOT
	}

	option = {
		name = entente.20.a
		trigger = { tag = event_target:KR_king_base }
		if = {
			limit = {
				tag = GBR
				NOT = { has_country_flag = CAN_speech_home_isles }
			}
			set_country_flag = CAN_speech_home_isles
		}
		else_if = {
			limit = {
				has_war_with = ENG
				NOT = { has_country_flag = CAN_speech_war_eng }
			}
			set_country_flag = CAN_speech_war_eng
		}
		else_if = {
			limit = {
				has_war_with = GER
				NOT = { has_country_flag = CAN_speech_war_ger }
			}
			set_country_flag = CAN_speech_war_ger
		}
		else_if = {
			limit = {
				OR = {
					has_war_with = USA
					has_war_with = CSA
					has_war_with = TEX
					has_war_with = CAL
				}
				NOT = { has_country_flag = CAN_speech_war_acw }
			}
			set_country_flag = CAN_speech_war_acw
		}
		else_if = {
			limit = {
				NFA = {
					owns_state = 16
					is_in_faction_with = event_target:KR_king_base
				}
				NOT = { has_country_flag = CAN_speech_france_taken }
			}
			set_country_flag = CAN_speech_france_taken
		}
		else_if = {
			limit = {
				NFA = {
					owns_state = 21
					NOT = { owns_state = 16 }
					is_in_faction_with = event_target:KR_king_base
				}
				NOT = { has_country_flag = CAN_speech_france_mainland }
			}
			set_country_flag = CAN_speech_france_mainland
		}
		else_if = {
			limit = {
				DEH = {
					is_in_faction_with = event_target:KR_king_base
					owns_state = 431
					owns_state = 427
				}
				NOT = { has_country_flag = CAN_speech_india_united }
			}
			set_country_flag = CAN_speech_india_united
		}
		else_if = {
			limit = {
				SRD = {
					is_in_faction_with = event_target:KR_king_base
					owns_state = 158
				}
				NOT = { country_exists = SRI }
				NOT = { has_country_flag = CAN_speech_italy_united }
			}
			set_country_flag = CAN_speech_italy_united
		}
		else_if = {
			limit = {
				NOT = { country_exists = DEH }
				NOT = { has_country_flag = CAN_speech_india_defeated }
			}
			set_country_flag = CAN_speech_india_defeated
		}
		else_if = {
			limit = {
				AST = { has_socialist_government = yes }
				NOT = { has_country_flag = CAN_speech_aus_syndicalist }
			}
			set_country_flag = CAN_speech_aus_syndicalist
		}
		else_if = {
			limit = {
				CAF = { has_socialist_government = yes }
				NOT = { has_country_flag = CAN_speech_caf_syndicalist }
			}
			set_country_flag = CAN_speech_caf_syndicalist
		}
		else_if = {
			limit = {
				CSA = {
					exists = yes
					has_war_with = USA
					NOT = { has_war_with = event_target:KR_king_base }
				}
				NOT = { has_country_flag = CAN_speech_acw_begins }
			}
			set_country_flag = CAN_speech_acw_begins
		}
		clr_global_flag = CAN_king_busy
		CAN_add_ws_based_on_popularity_cw = yes
	}
	option = {
		name = entente.20.b
		trigger = {
			NOT = { tag = event_target:KR_king_base }
			CAN_is_commonwealth_tag = yes
		}
		CAN_add_ws_based_on_popularity_cw = yes
	}
	option = {
		name = entente.20.c
		trigger = {
			NOT = { tag = event_target:KR_king_base }
			CAN_is_commonwealth_tag = no
		}
		CAN_add_ws_based_on_popularity = yes
	}
}

# King tours country (fired by decision)
country_event = {
	id = entente.21
	title = entente.21.t
	picture = GFX_report_event_CAN_royal_tour

	desc = {
		text = entente.21.d.high
		trigger = { check_variable = { event_target:KR_king_base.king_popularity > 3 } }
	}
	desc = {
		text = entente.21.d.med
		trigger = {
			check_variable = { event_target:KR_king_base.king_popularity > 1 }
			check_variable = { event_target:KR_king_base.king_popularity < 4 }
		}
	}
	desc = {
		text = entente.21.d.low
		trigger = { check_variable = { event_target:KR_king_base.king_popularity < 2 } }
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.21"
		CAN_calc_royal_visit_effects = yes
		set_country_flag = CAN_king_toured
		hidden_effect = {
			random_owned_state = {
				limit = {
					is_core_of = ROOT
					industrial_complex > 0
				}
				save_event_target_as = parade_state
			}
		}
	}

	option = {
		name = entente.21.a
		custom_effect_tooltip = CAN_king_three_month_tour
		add_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
		hidden_effect = {
			FROM = { save_event_target_as = original_home_country }
			save_event_target_as = tour_country
			country_event = { id = entente.29 days = 365 }
			random_other_country = {
				limit = { is_ai = yes }
				country_event = entente.22
			}
		}
	}
}

# Bounce event for random tour events
country_event = {
	id = entente.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.22" }

	hidden = yes
	is_triggered_only = yes

	option = {
		name = AI_OPTION #Minor Scandal
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.5
				has_global_flag = CAN_king_albert_I
			}
			modifier = {
				factor = 0.75
				check_variable = { event_target:KR_king_base.king_popularity > 3 }
			}
		}
		FROM = {
			country_event = { id = entente.23 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #MAJOR_SCANDAL
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				has_global_flag = CAN_king_albert_I
			}
			modifier = {
				factor = 2
				has_global_flag = CAN_king_george_VI
			}
			modifier = {
				factor = 0.75
				check_variable = { event_target:KR_king_base.king_popularity > 3 }
			}
		}
		FROM = {
			country_event = { id = entente.24 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #ASSASSINATION_ATTEMPT
		trigger = {
			check_variable = { event_target:KR_king_base.king_popularity < 4 }
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2
				check_variable = { event_target:KR_king_base.king_popularity < 2 }
			}
		}
		FROM = {
			country_event = { id = entente.25 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #ILLNESS
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				has_global_flag = CAN_king_george_VI
			}
		}
		FROM = {
			country_event = { id = entente.26 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #GREAT_SPEECH
		ai_chance = {
			factor = 7
			modifier = {
				factor = 0.5
				OR = {
					has_global_flag = CAN_king_albert_I
					has_global_flag = CAN_king_henry_IX
				}
			}
			modifier = {
				factor = 1.5
				check_variable = { event_target:KR_king_base.king_popularity > 4 }
			}
			modifier = {
				factor = 0.75
				check_variable = { event_target:KR_king_base.king_popularity < 3 }
			}
			modifier = {
				factor = 0.75
				check_variable = { event_target:KR_king_base.king_popularity > 2 }
			}
		}
		FROM = {
			country_event = { id = entente.27 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #POOR_SPEECH
		ai_chance = {
			factor = 7
			modifier = {
				factor = 1.5
				has_global_flag = CAN_king_albert_I
			}
			modifier = {
				factor = 0.75
				check_variable = { event_target:KR_king_base.king_popularity > 4 }
			}
			modifier = {
				factor = 1.25
				check_variable = { event_target:KR_king_base.king_popularity < 3 }
			}
			modifier = {
				factor = 1.25
				check_variable = { event_target:KR_king_base.king_popularity > 2 }
			}
		}
		FROM = {
			country_event = { id = entente.28 days = 10 random = 50 }
		}
	}
	option = {
		name = AI_OPTION #NO_EVENT
		ai_chance = {
			factor = 65
			modifier = {
				factor = 1.2
				has_global_flag = CAN_king_henry_IX
			}
		}
	}
}

# Visit - minor scandal
country_event = {
	id = entente.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.23" }
	title = entente.23.t
	desc = entente.23.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}

	option = {
		name = entente.23.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		event_target:tour_country = {
			effect_tooltip = {
				remove_dynamic_modifier = {
					modifier = CAN_royal_visit_effect
				}
			}
		}
	}
	option = {
		name = entente.23.a
		trigger = { tag = event_target:tour_country }
		remove_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
	}
}

# Visit - major scandal
country_event = {
	id = entente.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.24" }
	title = entente.24.t
	desc = entente.24.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}

	option = {
		name = entente.24.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		custom_effect_tooltip = CAN_king_popularity_decrease
		event_target:tour_country = {
			effect_tooltip = {
				remove_dynamic_modifier = {
					modifier = CAN_royal_visit_effect
				}
			}
		}
	}
	option = {
		name = entente.24.a
		trigger = { tag = event_target:tour_country }
		remove_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
		custom_effect_tooltip = CAN_king_popularity_decrease
		hidden_effect = {
			subtract_from_variable = { event_target:KR_king_base.king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
			clr_global_flag = CAN_king_busy
			event_target:KR_king_base = { set_country_flag = CAN_visit_cancel }
			set_global_flag = { flag = CAN_king_busy days = 90 value = 1 }
		}
	}
}

# Visit - assassination attempt
country_event = {
	id = entente.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.25" }
	title = entente.25.t
	desc = entente.25.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}

	option = {
		name = entente.25.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		event_target:tour_country = {
			effect_tooltip = {
				add_stability = -0.03
				add_war_support = 0.05
			}
		}
	}
	option = {
		name = entente.25.a
		trigger = { tag = event_target:tour_country }
		add_stability = -0.03
		add_war_support = 0.05
		hidden_effect = {
			clr_global_flag = CAN_king_busy
			event_target:KR_king_base = { set_country_flag = CAN_visit_cancel }
			set_global_flag = { flag = CAN_king_busy days = 90 value = 1 }
		}
	}
}

# Visit - king becomes ill
country_event = {
	id = entente.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.26" }
	title = entente.26.t
	desc = entente.26.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}
	option = {
		name = entente.26.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		event_target:tour_country = {
			effect_tooltip = {
				add_dynamic_modifier = {
					modifier = CAN_royal_visit_effect
				}
			}
		}
	}
	option = {
		name = entente.26.a
		trigger = { tag = event_target:tour_country }
		hidden_effect = {
			remove_dynamic_modifier = { modifier = CAN_royal_visit_effect }
			clr_global_flag = CAN_king_busy
			event_target:KR_king_base = { set_country_flag = CAN_visit_cancel }
			set_global_flag = { flag = CAN_king_busy days = 90 value = 1 }
			country_event = { id = entente.29 days = 120 }
		}
		add_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
	}
}

# Visit - great speech
country_event = {
	id = entente.27
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.27" }
	title = entente.27.t
	desc = entente.27.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}

	option = {
		name = entente.27.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		event_target:tour_country = {
			effect_tooltip = {
				add_war_support = 0.05
				add_political_power = 25
			}
		}
	}
	option = {
		name = entente.27.a
		trigger = { tag = event_target:tour_country }
		add_war_support = 0.05
		add_political_power = 25
	}
}

# Visit - poor speech
country_event = {
	id = entente.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.28" }
	title = entente.28.t
	desc = entente.28.d
	picture = GFX_report_event_CAN_royal_tour

	is_triggered_only = yes
	major = yes

	trigger = {
		event_target:original_home_country = {
			NOT = { has_country_flag = CAN_visit_cancel }
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
		event_target:tour_country = {
			has_capitulated = no
			OR = {
				tag = event_target:KR_king_base
				is_in_faction_with = event_target:KR_king_base
			}
			OR = {
				has_war = no
				surrender_progress < 0.50
			}
		}
	}

	show_major = {
		OR = {
			tag = event_target:KR_king_base
			tag = event_target:tour_country
		}
	}

	option = {
		name = entente.28.a
		trigger = {
			tag = event_target:KR_king_base
			NOT = { tag = event_target:tour_country }
		}
		event_target:tour_country = {
			effect_tooltip = {
				add_war_support = -0.05
				add_political_power = -25
			}
		}
	}
	option = {
		name = entente.28.a
		trigger = { tag = event_target:tour_country }
		add_war_support = -0.05
		add_political_power = -25
	}
}

# Removing the tour modifier
country_event = {
	id = entente.29

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.29"
		remove_dynamic_modifier = {
			modifier = CAN_royal_visit_effect
		}
	}
}

# Directing the Exies (fired by decision)
country_event = {
	id = entente.30
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30" }
	title = entente.30.t
	picture = GFX_report_event_CAN_cabinet

	desc = {
		text = entente.30.d.low
		trigger = {
			check_variable = { king_influence < 2 }
		}
	}
	desc = {
		text = entente.30.d.med
		trigger = {
			check_variable = { king_influence < 4 }
			check_variable = { king_influence > 1 }
		}
	}
	desc = {
		text = entente.30.d.high
		trigger = {
			check_variable = { king_influence > 3 }
		}
	}

	is_triggered_only = yes

	option = {
		name = entente.30.a #increase influence
		trigger = {
			check_variable = { king_influence < 6 }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.5
				check_variable = { king_influence > 4 }
			}
			modifier = {
				factor = 1.5
				check_variable = { king_influence < 4 }
			}
			modifier = {
				factor = 2
				check_variable = { king_influence < 3 }
			}
			modifier = {
				factor = 2
				check_variable = { king_influence < 2 }
			}
		}
		set_country_flag = CAN_exile_inc_influence
		custom_effect_tooltip = CAN_exiles_increasing_influence
	}
	option = {
		name = entente.30.b #assist government
		trigger = {
			check_variable = { king_influence > 1 }
		}
		ai_chance = {
			factor = 20
		}
		if = {
			limit = {
				check_variable = { king_influence > 4 }
			}
			add_political_power = 50
		}
		else_if = {
			limit = {
				check_variable = { king_influence > 3 }
				check_variable = { king_influence < 5 }
			}
			add_political_power = 40
		}
		else_if = {
			limit = {
				check_variable = { king_influence > 2 }
				check_variable = { king_influence < 4 }
			}
			add_political_power = 30
		}
		else_if = {
			limit = {
				check_variable = { king_influence > 1 }
				check_variable = { king_influence < 3 }
			}
			add_political_power = 25
		}
		CAN_calc_exile_influence_effects = yes
		add_dynamic_modifier = {
			modifier = CAN_exile_government_effect
		}
		hidden_effect = {
			country_event = { id = entente.32 days = 364 }
		}
	}
	option = {
		name = entente.30.c #assist industry
		trigger = {
			check_variable = { king_influence > 2 }
			set_temp_variable = { temp = king_civ_factories }
			add_to_temp_variable = { temp = king_mil_factories }
			check_variable = { var = temp value = king_influence compare = less_than }
		}
		ai_chance = {
			factor = 50
		}
		set_country_flag = CAN_exile_inc_industry
		custom_effect_tooltip = CAN_exiles_increasing_industry
	}
	option = {
		name = entente.30.c #assist industry
		trigger = {
			check_variable = { king_influence > 2 }
			set_temp_variable = { temp = king_civ_factories }
			add_to_temp_variable = { temp = king_mil_factories }
			check_variable = { var = temp value = king_influence compare = greater_than_or_equals }
		}
		ai_chance = {
			factor = 20
		}
		CAN_calc_exile_influence_effects = yes
		add_dynamic_modifier = {
			modifier = CAN_exile_industry_effect
		}
		hidden_effect = {
			country_event = { id = entente.33 days = 364 }
		}
	}
	option = {
		name = entente.30.e #increase popularity
		trigger = {
			check_variable = { king_influence > 3 }
			check_variable = { king_popularity < 5 }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				check_variable = { king_popularity > 3 }
			}
			modifier = {
				factor = 2
				check_variable = { king_popularity < 3 }
			}
			modifier = {
				factor = 2
				check_variable = { king_popularity < 2 }
			}
		}
		set_country_flag = CAN_exile_inc_popularity
		custom_effect_tooltip = CAN_exiles_increasing_popularity
	}
}

# Exiles build an offmap factory
country_event = {
	id = entente.31
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.31" }
	title = entente.31.t
	desc = entente.31.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	option = {
		name = entente.31.a #civ factory
		add_offsite_building = { type = industrial_complex level = 1 }
		add_to_variable = { king_civ_factories = 1 }
	}
	option = {
		name = entente.31.b #mil factory
		add_offsite_building = { type = arms_factory level = 1 }
		add_to_variable = { king_mil_factories = 1 }
	}
}

# Removing exile government modifier
country_event = {
	id = entente.32

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_dynamic_modifier = {
			modifier = CAN_exile_government_effect
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.32"
		remove_dynamic_modifier = {
			modifier = CAN_exile_government_effect
		}
	}
}

# Removing exile industry modifier
country_event = {
	id = entente.33

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_dynamic_modifier = {
			modifier = CAN_exile_industry_effect
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.33"
		remove_dynamic_modifier = {
			modifier = CAN_exile_industry_effect
		}
	}
}

### Royal Events

# Main hidden event
country_event = {
	id = entente.50
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.50" }

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = KR_british_king_base
		event_target:KR_king_base = { tag = ROOT }
		has_socialist_government = no
	}

	option = {
		name = AI_OPTION #EXILE_ARRESTED #once only
		trigger = {	
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			NOT = {
				has_global_flag = KR_exile_arrested
				has_global_flag = { flag = CAN_king_on_tour value > 0 }
			}
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				NOT = { tag = GBR }
				check_variable = { king_influence > 1 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				date > 1937.1.1
			}
			modifier = {
				factor = 2
				date > 1938.1.1
			}
			modifier = {
				factor = 2
				date > 1939.1.1
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.52
		}
	}
	option = {
		name = AI_OPTION #EXILE_SUSPECTED_OF_SPYING #once only
		trigger = {
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			NOT = { has_global_flag = KR_exile_spying }
			NOT = { has_global_flag = { flag = CAN_king_on_tour value > 0 } }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				has_war_with = ENG
				NOT = { tag = GBR }
				check_variable = { king_influence > 2 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				date > 1939.1.1
			}
			modifier = {
				factor = 2
				date > 1940.1.1
			}
			modifier = {
				factor = 2
				date > 1941.1.1
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.53
		}
	}
	option = {
		name = AI_OPTION #EXILE_CONFLICT_WITH_GOVT
		trigger = {
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				has_elected_government = yes
				NOT = { tag = GBR }
				check_variable = { king_influence > 1 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				event_target:KR_king_base = {
					check_variable = { king_influence < 3 }
				}
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_exile_govt_conflict
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.54
		}
	}
	option = {
		name = AI_OPTION #EXILE_CONFLICT_WITH_KING
		trigger = {
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			NOT = { has_global_flag = { flag = CAN_king_on_tour value > 0 } }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				NOT = { tag = GBR }
				check_variable = { king_influence > 3 }
			}
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0.5
				event_target:KR_king_base = {
					check_variable = { king_influence < 5 }
				}
			}
			modifier = {
				factor = 0
				event_target:KR_king_base = {
					has_country_flag = CAN_was_exile_king_conflict
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.55
		}
	}
	option = {
		name = AI_OPTION #EXILE_GOOD_FORTUNE
		trigger = {
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				NOT = { tag = GBR }
				check_variable = { king_influence < 4 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				event_target:KR_king_base = {
					check_variable = { king_influence > 2 }
				}
			}
			modifier = {
				factor = 2
				event_target:KR_king_base = {
					check_variable = { king_influence < 1 }
				}
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_exile_improve
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.56
		}
	}
	option = {
		name = AI_OPTION #EXILE_POOR_FORTUNE
		trigger = {
			NOT = { has_global_flag = ENT_CAN_REFORMED_UK }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				NOT = { tag = GBR }
				check_variable = { king_influence > 2 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.5
				event_target:KR_king_base = {
					check_variable = { king_influence < 4 }
				}
			}
			modifier = {
				factor = 2
				event_target:KR_king_base = {
					check_variable = { king_influence > 4 }
				}
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_exile_worsen
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.57
		}
	}
	option = {
		name = AI_OPTION #KING_LOCAL_SCANDAL
		trigger = {
			NOT = { has_global_flag = { flag = CAN_king_on_tour value > 0 } }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				check_variable = { king_popularity > 1 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				has_global_flag = CAN_king_george_VI
			}
			modifier = {
				factor = 0.5
				has_global_flag = CAN_king_henry_IX
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_king_scandal
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.58
		}
	}
	option = {
		name = AI_OPTION #KING_GAINS_POPULARITY
		trigger = {
			NOT = { has_global_flag = { flag = CAN_king_on_tour value > 0 } }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				check_variable = { king_popularity < 4 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				has_global_flag = CAN_king_albert_I
			}
			modifier = {
				factor = 0.5
				has_global_flag = CAN_king_henry_IX
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_king_gains_popularity
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_gains_popularity
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.59
		}
	}
	option = {
		name = AI_OPTION #KING_TIME_OFF
		trigger = {
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
			}
			NOT = {
				has_global_flag = { flag = CAN_king_on_tour value > 0 }
				has_global_flag = { flag = CAN_king_busy value > 0 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				has_global_flag = CAN_king_george_VI
			}
			modifier = {
				factor = 2
				has_global_flag = CAN_king_edward_VIII
			}
			modifier = {
				factor = 0
				event_target:KR_king_base = {
					has_country_flag = CAN_was_king_needs_time_off
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.60
		}
	}
	option = {
		name = AI_OPTION #KING_MEETS_WITH_TROOPS
		trigger = {
			NOT = { has_global_flag = { flag = CAN_king_on_tour value > 0 } }
			event_target:KR_king_base = {
				OR = {
					has_war = no
					surrender_progress < 0.15
				}
				has_war_support < 0.75
				check_variable = { king_popularity > 1 }
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				has_global_flag = CAN_king_henry_IX
			}
			modifier = {
				factor = 2
				event_target:KR_king_base = {
					has_war_support < 0.35
				}
			}
			modifier = {
				factor = 0.5
				event_target:KR_king_base = {
					check_variable = { king_popularity < 3 }
				}
			}
			modifier = {
				factor = 0.2
				event_target:KR_king_base = {
					has_country_flag = CAN_was_king_meets_troops
				}
			}
		}
		event_target:KR_king_base = {
			clr_country_flag = CAN_was_exile_govt_conflict
			clr_country_flag = CAN_was_exile_king_conflict
			clr_country_flag = CAN_was_exile_improve
			clr_country_flag = CAN_was_exile_worsen
			clr_country_flag = CAN_was_king_scandal
			clr_country_flag = CAN_was_king_needs_time_off
			clr_country_flag = CAN_was_king_meets_troops
			country_event = entente.61
		}
	}
	option = {
		name = AI_OPTION #NOTHING
		ai_chance = {
			factor = 35
			modifier = {
				add = 5
				event_target:KR_king_base = {
					has_elected_government = no
				}
			}
			modifier = {
				add = 5
				event_target:KR_king_base = {
					has_war_support > 0.75
				}
			}
			modifier = {
				add = 20
				event_target:KR_king_base = {
					tag = GBR
				}
			}
			modifier = {
				add = 10
				has_global_flag = { flag = CAN_king_on_tour value > 0 }
			}
		}
		event_target:KR_king_base = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# Member of the Exiles Arrested
country_event = {
	id = entente.52
	title = entente.52.t
	picture = GFX_report_event_generic_reporters

	desc = {
		text = entente.52.d.king
		trigger = {
			check_variable = { king_popularity > 1 }
		}
	}
	desc = {
		text = entente.52.d.noking
		trigger = {
			check_variable = { king_popularity < 2 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.52"
		set_global_flag = KR_exile_arrested
	}

	option = {
		name = entente.52.a #Allow the king to intervene personally
		trigger = { check_variable = { king_popularity > 1 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				check_variable = { king_popularity > 3 }
			}
		}
		custom_effect_tooltip = CAN_king_popularity_decrease
		CAN_improve_exile_influence_small_bop = yes
		subtract_from_variable = { king_popularity = 2 }
		CAN_calc_royal_visit_effects = yes
		add_war_support = -0.05
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.52.b #Let the trial play out
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				check_variable = { king_influence > 3 }
			}
		}
		custom_effect_tooltip = CAN_exile_influence_decrease
		if = {
			limit = { check_variable = { king_influence > 1 } }
			subtract_from_variable = { king_influence = 2 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
		add_stability = -0.05
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.52.c #The goverment intervenes
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				has_political_power < 100
			}
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
			modifier = {
				factor = 3
				has_government = paternal_autocrat
			}
			modifier = {
				factor = 2
				OR = {
					has_government = social_conservative
					has_government = authoritarian_democrat
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					has_government = social_liberal
					has_government = market_liberal
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_democrat
					has_government = national_populist
				}
			}
		}
		CAN_improve_canadian_influence_small_bop = yes
		add_political_power = -100
		decrease_ruling_party_popularity_by_10 = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# Member of the Exiles Suspected of Spying
country_event = {
	id = entente.53
	title = entente.53.t
	picture = GFX_report_event_generic_scandal

	desc = {
		text = entente.53.d.king
		trigger = {
			check_variable = { king_popularity > 1 }
		}
	}
	desc = {
		text = entente.53.d.noking
		trigger = {
			check_variable = { king_popularity < 2 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.53"
		set_global_flag = KR_exile_spying
	}

	option = {
		name = entente.53.a #Allow the king to intervene personally
		trigger = { check_variable = { king_popularity > 1 } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				check_variable = { king_popularity > 3 }
			}
		}
		custom_effect_tooltip = CAN_king_popularity_decrease
		subtract_from_variable = { king_popularity = 2 }
		CAN_calc_royal_visit_effects = yes
		add_war_support = -0.10
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.53.b #Let the trial play out
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				check_variable = { king_influence > 3 }
			}
		}
		custom_effect_tooltip = CAN_exile_influence_decrease
		CAN_improve_canadian_influence_small_bop = yes
		if = {
			limit = { check_variable = { king_influence > 1 } }
			subtract_from_variable = { king_influence = 2 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
		add_stability = -0.05
		add_war_support = -0.05
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.53.c #Intervene and cover it up
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.5
				has_political_power < 100
			}
			modifier = {
				factor = 0.5
				has_political_power < 0
			}
			modifier = {
				factor = 3
				has_government = paternal_autocrat
			}
			modifier = {
				factor = 2
				OR = {
					has_government = social_conservative
					has_government = authoritarian_democrat
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					has_government = social_liberal
					has_government = market_liberal
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_government = social_democrat
					has_government = national_populist
				}
			}
		}
		add_political_power = -100
		decrease_ruling_party_popularity_by_10 = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# Exiles conflict with government
country_event = {
	id = entente.54
	title = entente.54.t
	picture = GFX_report_event_CAN_cabinet

	desc = {
		text = entente.54.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.54.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.54.d.3
		trigger = {
			check_variable = { desc_num > 2 }
			check_variable = { desc_num < 4 }
		}
	}
	desc = {
		text = entente.54.d.4
		trigger = {
			check_variable = { desc_num > 3 }
			check_variable = { desc_num < 5 }
		}
	}
	desc = {
		text = entente.54.d.5
		trigger = {
			check_variable = { desc_num > 4 }
			check_variable = { desc_num < 6 }
		}
	}
	desc = {
		text = entente.54.d.6
		trigger = {
			check_variable = { desc_num > 5 }
			check_variable = { desc_num < 7 }
		}
	}
	desc = {
		text = entente.54.d.7
		trigger = {
			check_variable = { desc_num > 6 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.54"
		set_country_flag = CAN_was_exile_govt_conflict
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 8 }
		round_variable = desc_num
	}

	option = {
		name = entente.54.a #Support the government
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				OR = {
					has_government = social_liberal
					has_government = market_liberal
				}
			}
		}
		add_war_support = -0.10
		custom_effect_tooltip = CAN_exile_influence_decrease
		if = {
			limit = { check_variable = { king_influence > 0 } }
			subtract_from_variable = { king_influence = 1 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
		CAN_improve_canadian_influence_small_bop = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.54.b #Support the British Exiles
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				has_government = social_conservative
			}
			modifier = {
				factor = 0
				has_government = social_democrat
			}
		}
		add_political_power = -50
		decrease_ruling_party_popularity_by_5 = yes
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		CAN_improve_exile_influence_small_bop = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.54.c #Stand back and let the chips fall where they may
		ai_chance = {
			factor = 50
		}
		add_war_support = -0.05
		add_political_power = -50
		if = {
			limit = { check_variable = { king_influence > 0 } }
			custom_effect_tooltip = CAN_exile_influence_decrease_50
			hidden_effect = {
				set_variable = { event_num = random }
				multiply_variable = { event_num = 100 }
				round_variable = event_num
				if = {
					limit = { check_variable = { event_num < 50 } }
					subtract_from_variable = { king_influence = 1 }
					CAN_calc_exile_influence_effects = yes
				}
				clear_variable = event_num
			}
		}
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# Exiles conflict with king
country_event = {
	id = entente.55
	title = entente.55.t
	desc = entente.55.d
	picture = GFX_report_event_CAN_cabinet

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.55"
		set_country_flag = CAN_was_exile_king_conflict
	}

	option = {
		name = entente.55.a
		custom_effect_tooltip = CAN_exile_influence_decrease
		CAN_improve_canadian_influence_small_bop = yes
		if = {
			limit = { check_variable = { king_influence > 0 } }
			subtract_from_variable = { king_influence = 1 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease_50
			hidden_effect = {
				set_variable = { event_num = random }
				multiply_variable = { event_num = 100 }
				round_variable = event_num
				if = {
					limit = { check_variable = { event_num < 50 } }
					subtract_from_variable = { king_popularity = 1 }
					CAN_calc_royal_visit_effects = yes
				}
				clear_variable = event_num
			}
		}
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
			if = {
				limit = { tag = CAN }
				set_country_flag = CAN_king_replaces_pm
			}
		}
	}
}

# Exiles fortunes improve
country_event = {
	id = entente.56
	title = entente.56.t
	picture = GFX_report_event_CAN_cabinet

	desc = {
		text = entente.56.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.56.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.56.d.3
		trigger = {
			check_variable = { desc_num > 2 }
			check_variable = { desc_num < 4 }
		}
	}
	desc = {
		text = entente.56.d.4
		trigger = {
			check_variable = { desc_num > 3 }
			check_variable = { desc_num < 5 }
		}
	}
	desc = {
		text = entente.56.d.5
		trigger = {
			check_variable = { desc_num > 4 }
			check_variable = { desc_num < 6 }
		}
	}
	desc = {
		text = entente.56.d.6
		trigger = {
			check_variable = { desc_num > 5 }
			check_variable = { desc_num < 7 }
		}
	}
	desc = {
		text = entente.56.d.7
		trigger = {
			check_variable = { desc_num > 6 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.56"
		set_country_flag = CAN_was_exile_improve
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 8 }
		round_variable = desc_num
	}

	option = {
		name = entente.56.a
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
		CAN_improve_exile_influence_small_bop = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# Exiles fortunes worsen
country_event = {
	id = entente.57
	title = entente.57.t
	picture = GFX_report_event_CAN_cabinet

	desc = {
		text = entente.57.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.57.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.57.d.3
		trigger = {
			check_variable = { desc_num > 2 }
			check_variable = { desc_num < 4 }
		}
	}
	desc = {
		text = entente.57.d.4
		trigger = {
			check_variable = { desc_num > 3 }
			check_variable = { desc_num < 5 }
		}
	}
	desc = {
		text = entente.57.d.5
		trigger = {
			check_variable = { desc_num > 4 }
			check_variable = { desc_num < 6 }
		}
	}
	desc = {
		text = entente.57.d.6
		trigger = {
			check_variable = { desc_num > 5 }
			check_variable = { desc_num < 7 }
		}
	}
	desc = {
		text = entente.57.d.7
		trigger = {
			check_variable = { desc_num > 6 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.57"
		set_country_flag = CAN_was_exile_worsen
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 8 }
		round_variable = desc_num
	}

	option = {
		name = entente.57.a
		custom_effect_tooltip = CAN_exile_influence_decrease
		CAN_improve_canadian_influence_small_bop = yes
		if = {
			limit = { check_variable = { king_influence > 0 } }
			subtract_from_variable = { king_influence = 1 }
		}
		else = {
			set_variable = { king_influence = 0 }
		}
		CAN_calc_exile_influence_effects = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King in scandal
country_event = {
	id = entente.58
	title = entente.58.t
	picture = GFX_report_event_generic_scandal

	desc = {
		text = entente.58.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.58.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.58.d.3
		trigger = {
			check_variable = { desc_num > 2 }
			check_variable = { desc_num < 4 }
		}
	}
	desc = {
		text = entente.58.d.4
		trigger = {
			check_variable = { desc_num > 3 }
			check_variable = { desc_num < 5 }
		}
	}
	desc = {
		text = entente.58.d.5
		trigger = {
			check_variable = { desc_num > 4 }
			check_variable = { desc_num < 6 }
		}
	}
	desc = {
		text = entente.58.d.6
		trigger = {
			check_variable = { desc_num > 5 }
			check_variable = { desc_num < 7 }
		}
	}
	desc = {
		text = entente.58.d.7
		trigger = {
			check_variable = { desc_num > 6 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.58"
		set_country_flag = CAN_was_king_scandal
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 8 }
		round_variable = desc_num
	}

	option = {
		name = entente.58.a
		custom_effect_tooltip = CAN_king_popularity_decrease
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			subtract_from_variable = { king_popularity = 1 }
		}
		else = {
			set_variable = { king_popularity = 0 }
		}
		CAN_calc_royal_visit_effects = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King's popularity increases
country_event = {
	id = entente.59
	title = entente.59.t
	picture = GFX_report_event_royal_visit

	desc = {
		text = entente.59.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.59.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.59.d.3
		trigger = {
			check_variable = { desc_num > 2 }
			check_variable = { desc_num < 4 }
		}
	}
	desc = {
		text = entente.59.d.4
		trigger = {
			check_variable = { desc_num > 3 }
			check_variable = { desc_num < 5 }
		}
	}
	desc = {
		text = entente.59.d.5
		trigger = {
			check_variable = { desc_num > 4 }
			check_variable = { desc_num < 6 }
		}
	}
	desc = {
		text = entente.59.d.6
		trigger = {
			check_variable = { desc_num > 5 }
			check_variable = { desc_num < 7 }
		}
	}
	desc = {
		text = entente.59.d.7
		trigger = {
			check_variable = { desc_num > 6 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.59"
		set_country_flag = CAN_was_king_gains_popularity
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 8 }
		round_variable = desc_num
	}

	option = {
		name = entente.59.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King needs time off
country_event = {
	id = entente.60
	title = entente.60.t
	picture = GFX_report_event_royal_visit

	desc = {
		text = entente.60.d.1
		trigger = {
			check_variable = { desc_num < 2 }
		}
	}
	desc = {
		text = entente.60.d.2
		trigger = {
			check_variable = { desc_num > 1 }
			check_variable = { desc_num < 3 }
		}
	}
	desc = {
		text = entente.60.d.3
		trigger = {
			check_variable = { desc_num > 2 }
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.60"
		set_country_flag = CAN_was_king_needs_time_off
		set_variable = { desc_num = random }
		multiply_variable = { desc_num = 3 }
		round_variable = desc_num
		set_variable = { time_off = random }
		multiply_variable = { time_off = 120 }
		round_variable = time_off
		clamp_variable = { var = time_off max = 120 min = 90 }
	}

	option = {
		name = entente.60.a
		custom_effect_tooltip = CAN_king_takes_time_off
		hidden_effect = {
			meta_effect = {
				text = {
					set_global_flag = {
						flag = CAN_king_busy
						days = [time_off_var]
						value = 1
					}
				}
				time_off_var = "[?time_off|0]"
			}
			if = {
				limit = { check_variable = { desc_num < 2 } }
				meta_effect = {
					text = {
						set_global_flag = {
							flag = CAN_king_on_tour
							days = [time_off_var]
							value = 1
						}
					}
					time_off_var = "[?time_off|0]"
				}
			}
			clear_variable = time_off
		}
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King meets with troops
country_event = {
	id = entente.61
	title = entente.61.t
	desc = entente.61.d
	picture = GFX_report_event_CAN_king_army

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.61"
		set_country_flag = CAN_was_king_meets_troops
	}

	option = {
		name = entente.61.a
		add_war_support = 0.05
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King Edward - story #0 Gala
country_event = {
	id = entente.630
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.630" }
	title = entente.630.t
	desc = entente.630.d
	
	picture = GFX_report_event_CAN_edward_party
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		has_global_flag = CAN_king_edward_VIII
	}

	option = {
		name = entente.630.a
		set_country_flag = CAN_eddy_party_animal
	}
	
	option = {
		name = entente.630.b
		set_country_flag = CAN_eddy_somber
		hidden_effect = {
			country_event = {
				id = entente.66
				days = 600
				random_days = 112
			}
		}
	}
}

# King Edward - story #1 party
country_event = {
	id = entente.62
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.62" }
	title = entente.62.t
	picture = GFX_report_event_CAN_edward_party

	desc = {
		text = entente.62.d.nothome
		trigger = { NOT = { tag = GBR } }
	}
	desc = {
		text = entente.62.d.home
		trigger = { tag = GBR }
	}

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			has_country_flag = CAN_edward_failed_power_grab
			has_country_flag = CAN_eddy_party_animal
		}
		CAN_has_edward = yes
	}

	option = {
		name = entente.62.a
		set_global_flag = entente_62_fired
		if = {
			limit = { check_variable = { king_popularity > 2 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
	}
}

# King Edward - story #2 meet refugees
country_event = {
	id = entente.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.63" }
	title = entente.63.t
	desc = entente.63.d
	picture = GFX_report_event_CAN_edward_meet

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = CAN
		has_global_flag = USA_civil_war_begun_flag
		NOT = { has_global_flag = USA_civil_war_over_flag }
		CAN_has_edward = yes
	}

	option = {
		name = entente.63.a
		hidden_effect = {
			country_event = { id = entente.64 days = 90 random = 250 }
		}
	}
}

# King Edward - story #3 seen with Bennett
country_event = {
	id = entente.64
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.64" }
	title = entente.64.t
	picture = GFX_report_event_CAN_constance

	desc = {
		text = entente.64.d.nee
		trigger = {
			NOT = { has_global_flag = USA_civil_war_over_flag }
			country_exists = NEE
			is_in_faction_with = NEE
		}
	}
	desc = {
		text = entente.64.d.nonee
		trigger = {
			NOT = { has_global_flag = USA_civil_war_over_flag }
			OR = {
				NOT = { country_exists = NEE }
				NOT = { is_in_faction_with = NEE }
			}
		}
	}
	desc = {
		text = entente.64.d.noacw
		trigger = {
			has_global_flag = USA_civil_war_over_flag
		}
	}

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = CAN
		has_country_flag = CAN_eddy_party_animal
		has_global_flag = CAN_king_edward_VIII
		CAN_has_edward = yes
	}

	option = {
		name = entente.64.a
		set_global_flag = CAN_edward_met_constance
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
		hidden_effect = {
			country_event = {
				id = entente.65
				days = 56
				random_days = 120
			}
		}
	}
}

# King Edward - story #4 wants to marry Bennett
country_event = {
	id = entente.65
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.65" }
	title = entente.65.t
	picture = GFX_report_event_CAN_edward2

	desc = {
		text = entente.65.d.norm
		trigger = { NOT = { has_government = paternal_autocrat } }
	}
	desc = {
		text = entente.65.d.pataut
		trigger = { has_government = paternal_autocrat }
	}

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_edward = yes
	}

	option = {
		name = entente.65.a
		set_variable = { global.king_edward_story = 4 }
		if = {
			limit = { check_variable = { king_popularity > 0 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}

		if = {
			limit = {
				NOT = { tag = GBR }
				has_government = paternal_autocrat
				check_variable = { king_influence > 1 }
			}
			custom_effect_tooltip = CAN_exile_influence_decrease
			CAN_improve_canadian_influence_small_bop = yes
			subtract_from_variable = { king_influence = 2 }
			CAN_calc_exile_influence_effects = yes
		}
		else_if = {
			limit = {
				NOT = { tag = GBR }
				has_government = paternal_autocrat
				check_variable = { king_influence > 0 }
			}
			custom_effect_tooltip = CAN_exile_influence_decrease
			CAN_improve_canadian_influence_small_bop = yes
			subtract_from_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}

		if = {
			limit = { has_government = paternal_autocrat }
			add_stability = -0.05
			add_political_power = -100
		}
		else = {
			set_global_flag = CAN_king_busy
			country_event = { id = entente.100 days = 6 } #start the crisis
		}
		hidden_effect = {
			country_event = {
				id = entente.67
				days = 43
				random_days = 11
			}
		}
	}
}

# King Edward - story #5 romance with Isabel
country_event = {
	id = entente.66
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.66" }
	title = entente.66.t
	desc = {
		text = entente.66.d
		trigger = {
			NFA = {
				NFA_has_orleans = no
			}
		}
	}
	desc = {
		text = entente.66.d_orelans
		trigger = {
			NFA = {
				NFA_has_orleans = yes
			}
		}
	}
	picture = GFX_report_event_CAN_isabel

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_country_flag = CAN_eddy_somber
		CAN_has_edward = yes
	}

	option = {
		name = entente.66.a
		hidden_effect = {
			
		}
		if = {
			limit = { has_government = paternal_autocrat }
			add_stability = -0.05
			add_political_power = -100
		}
		else = {
			set_global_flag = CAN_king_busy
			country_event = { id = entente.100 days = 6 } #start the crisis
		}
		hidden_effect = {
			country_event = {
				id = entente.68
				days = 66
				random_days = 43
			}
		}
	}
}

# King Edward - story #6 royal wedding - Bennett
country_event = {
	id = entente.67
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.67" }
	title = entente.67.t
	desc = entente.67.d
	picture = GFX_report_event_CAN_edward_wedding

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_edward = yes
	}

	option = {
		name = entente.67.a
		if = {
			limit = { check_variable = { king_popularity < 5 } }
			custom_effect_tooltip = CAN_king_popularity_increase
			add_to_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
		hidden_effect = {
			save_event_target_as = wedding_country
			random_other_country = {
				limit = { is_ai = yes }
				news_event = entente.90
			}
			country_event = { id = canada.69 days = 455 }
		}
	}
}

# King Edward - story #7 royal wedding - Isabel
country_event = {
	id = entente.68
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.68" }
	title = entente.68.t
	desc = entente.68.d
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_edward = yes
	}

	option = {
		name = entente.68.a
		set_variable = { global.king_edward_story = 11 }
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		hidden_effect = {
			save_event_target_as = wedding_country
			random_other_country = {
				limit = { is_ai = yes }
				news_event = entente.91
			}
			country_event = { id = canada.690 days = 300 }
		}
	}
}

# King Edward - story #8 marriage issues
country_event = {
	id = entente.69
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.69" }
	title = entente.69.t
	desc = entente.69.d
	picture = GFX_report_event_CAN_edward2

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		has_global_flag = CAN_king_edward_VIII
		CAN_has_edward = yes
	}
	
	option = {
		name = entente.69.a
		if = {
			limit = { check_variable = { king_popularity > 2 } }
			custom_effect_tooltip = CAN_king_popularity_decrease
			subtract_from_variable = { king_popularity = 1 }
			CAN_calc_royal_visit_effects = yes
		}
	}
}

# Heir is Born
country_event = {
	id = entente.690
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.690" }
	title = entente.690.t
	desc = entente.690.d
	picture = GFX_report_event_CAN_edward2

	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		has_global_flag = CAN_king_edward_VIII
	}

	option = {
		name = entente.690.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
	}
}

# King Albert - story #1 war address
country_event = {
	id = entente.70
	title = entente.70.t
	desc = entente.70.d
	picture = GFX_report_event_CAN_albert

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_albert = yes
		has_global_flag = CAN_king_albert_I
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.70"
		hidden_effect = {
			if = {
				limit = { has_war_with = ENG }
				ENG = { save_event_target_as = war_country }
			}
			else_if = {
				limit = { has_war_with = GER }
				GER = { save_event_target_as = war_country }
			}
			else = {
				random_country = {
					limit = {
						is_actual_major = yes
						has_war_with = ROOT
					}
					save_event_target_as = war_country
				}
			}
		}
	}

	option = {
		name = entente.70.a
		add_war_support = 0.05
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
	}
}

# King Albert - story #2 princess elizabeth
country_event = {
	id = entente.71
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.71" }
	title = entente.71.t
	desc = entente.71.d
	picture = GFX_report_event_CAN_elizabeth

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_albert = yes
		has_global_flag = CAN_king_albert_I
	}

	option = {
		name = entente.71.a
		set_variable = { global.king_albert_story = 2 }
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King Albert - story #3 celebration
country_event = {
	id = entente.72
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.72" }
	title = entente.72.t
	desc = entente.72.d
	picture = GFX_report_event_CAN_albert

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_albert = yes
		has_global_flag = CAN_king_albert_I
	}

	option = {
		name = entente.72.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
	}
}

# King Albert - story #4 he dies
country_event = {
	id = entente.730
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.730" 
		event_target:ENT_Prince_Albert_Target = {
			country_event = entente.731
		}
	}
	hidden = yes

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = {
			has_global_flag = ENT_Albert_Dead
		}
	}
	option = { 
	}
}

# Queen Elizabeth
country_event = {
	id = entente.731
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.731" }
	title = {
		text = entente.731.t_king
		trigger = {
			OR = {
				has_global_flag = CAN_king_albert_I
				has_country_leader = {
					name = "Albert I"
					ruling_only = yes
				}
			}
		}
	}
	title = {
		text = entente.731.t_prince
		trigger = {
			NOT = {
				OR = {
					has_global_flag = CAN_king_albert_I
					has_country_leader = {
						name = "Albert I"
						ruling_only = yes
					}
				}
			}
		}
	}
	desc = {
		text = entente.731.d_exile
		trigger = {
			tag = CAN
			NOT = {
				country_exists = GBR
			}
			has_global_flag = CAN_king_albert_I
		}
	}
	desc = {
		text = entente.731.d_GG
		trigger = {
			tag = CAN
			country_exists = GBR
			has_country_leader = {
				name = "Prince Albert"
				ruling_only = yes
			}
		}
	}
	desc = {
		text = entente.731.d_canadian_king
		trigger = {
			tag = CAN
			country_exists = GBR
			has_country_leader = {
				name = "Albert I"
				ruling_only = yes
			}
		}
	}
	desc = {
		text = entente.731.d_home
		trigger = {
			tag = GBR
			has_global_flag = CAN_king_albert_I
		}
	}
	desc = {
		text = entente.731.d_prince
		trigger = {
			tag = GBR
			NOT = {
				has_global_flag = CAN_king_albert_I
			}
			CAN = {
				NOT = {
					OR = {
						has_country_leader = {
							name = "Prince Albert"
							ruling_only = yes
						}
						has_country_leader = {
							name = "Albert I"
							ruling_only = yes
						}
					}
				}
			}
		}
	}
	
	desc = {
		text = entente.731.d_prince_exile
		trigger = {
			tag = CAN
			NOT = {
				country_exists = GBR
				has_global_flag = CAN_king_albert_I
			}
		}
	}
	desc = {
		text = entente.731.d_australasia
		trigger = {
			tag = AST
		}
	}
	desc = {
		text = entente.731.d_newengland_GG
		trigger = {
			tag = NEE
			has_country_leader = {
				name = "Albert Windsor"
				ruling_only = yes
			}
		}
	}
	desc = {
		text = entente.731.d_newengland_king
		trigger = {
			tag = NEE
			has_country_leader = {
				name = "Albert I"
				ruling_only = yes
			}
		}
	}
	picture = GFX_report_event_CAN_elizabeth2

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		NOT = {
			has_global_flag = ENT_Albert_Dead
		}
	}

	option = { #Australasia
		name = entente.731.a
		trigger = {
			tag = AST
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = authoritarian_democrat_subtype
			female = yes
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = social_democrat_subtype
			female = yes
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = social_liberal_subtype
			female = yes
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = market_liberal_subtype
			female = yes
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = social_conservative_subtype
			female = yes
		}
		create_country_leader = {
			name = "Princess Elizabeth"
			desc = "POLITICS_LIZZY_GG_AST_DESC"
			picture = "gfx/leaders/CAN/Portrait_Canada_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = national_populist_subtype
			female = yes
		}
		set_global_flag = ENT_Albert_Dead
	}
	
	option = { #New England
		name = entente.731.b
		trigger = {
			tag = NEE
		}
		add_stability = -0.10
		set_global_flag = ENT_Albert_Dead
		create_country_leader = {
			name = "Elizabeth Windsor"
			desc = "NEE_ELIZABETH_DESC"
			picture = "gfx/leaders/NEE/Portrait_NEE_Princess_Elizabeth.png"
			expire = "1.1.1"
			ideology = absolute_monarchy_subtype
			traits = {  }
		}
		country_event = { id = neebritishflavor.11 days = 5 } #Death of king Albert	
	}
	
	option = { #Prince
		name = entente.731.c
		trigger = {	
			OR = {
				tag = CAN
				tag = GBR
			}
			NOT = {
				has_global_flag = CAN_king_albert_I
			}
		}
		add_stability = -0.02
	}
	
	option = { #King
		name = entente.731.e
		trigger = {
			OR = {
				tag = CAN
				tag = GBR
			}
			has_global_flag = CAN_king_albert_I
		}
		if = {
			limit = {
				tag = CAN
			}
			add_stability = -0.02
		}
		clr_global_flag = CAN_king_albert_I
		set_global_flag = CAN_queen_elizabeth_II
		if = {
			limit = {
				DEH = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			DEH = { DEH_create_monarchy = yes }
		}
		if = {
			limit = {
				SAF = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			SAF = { SAF_create_monarchy = yes }
		}
		if = {
			limit = {
				CAN = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			CAN = { CAN_create_monarchy = yes }
		}
		if = {
			limit = {
				GBR = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			GBR = { GBR_create_monarchy = yes }
		}
		if = {
			limit = {
				SCT = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			SCT = { create_windsor_scottish_monarchy = yes }
		}
		if = {
			limit = {
				ICE = { has_country_leader = { name = "Adalbert I" ruling_only = yes } }
			}
			ICE = { ICE_create_british_monarchy = yes }
		}
		if = {
			limit = { has_unit_leader = 9238 }
			random_unit_leader = {
				limit = { has_id = 9238 }
				remove_unit_leader = yes
			}
			create_field_marshal = {# Lizzy
				name = "Elizabeth II "
				portrait_path = "gfx/leaders/CAN/Portrait_Canada_Elizabeth_General.png"
				traits = { 
					politically_connected 
					GBR_british_exile_trait
					media_personality
					trait_engineer
					combined_arms_expert
				}
				skill = 1
				attack_skill = 1
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
				id = 9249
			}
		}
		if = {
			limit = {
				has_idea = CAN_King_Albert_I_hog_pau
			}
			swap_ideas = {
			remove_idea = CAN_King_Albert_I_hog_pau
			add_idea = CAN_Queen_Elizabeth_II_hog_pau
			}
		}
	}
	
	option = { #GG
		name = entente.731.f
		trigger = {
			tag = CAN
			has_country_leader = {
				name = "Prince Albert"
				ruling_only = yes
			}
			NOT = {
				has_global_flag = CAN_king_albert_I
			}
		}
		CAN_setup_GG_elizabeth = yes
	}
	
	option = { #GG
		name = entente.731.g
		trigger = {
			tag = CAN
			has_country_leader = {
				name = "Albert I"
				ruling_only = yes
			}
			NOT = {
				has_global_flag = CAN_king_albert_I
			}
		}
		CAN_set_queen_elizabeth = yes
	}
}

# NO SMOKING/EL A NO A YOU SMOKO
country_event = {
	id = entente.732
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.732" }
	title = {
		text = entente.732.t
		trigger = {
			CAN_has_gg_albert = no
		}
	}
	title = {
		text = entente.732.t_gg
		trigger = {
			CAN_has_gg_albert = yes
		}
	}
	desc = {
		text = entente.732.d
		trigger = {
			CAN_has_gg_albert = no
		}
	}
	desc = {
		text = entente.732.d_gg
		trigger = {
			CAN_has_gg_albert = yes
		}
	}
	picture = GFX_report_event_CAN_albert_smoking

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			CAN_has_albert = yes
			CAN_has_gg_albert = yes
		}
		OR = {
			has_global_flag = CAN_king_albert_I
			has_global_flag = CAN_canadian_king_albert
			has_global_flag = CAN_canadian_gg_albert
		}
	}

	option = { #You can't get any Ciggarettes in Canada
		name = entente.732.a
		hidden_effect = {
			country_event = {
				id = entente.733
				days = 12
			}
		}
	}
	
	option = { #GANG TOBACCO
		name = entente.732.b
		hidden_effect = {
			country_event = {
				id = entente.734
				days = 33
				random_days = 22
			}
		}
	}
}

# Al goes Cold Turkey
country_event = {
	id = entente.733
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.733" }
	title = {
		text = entente.733.t
		trigger = {
			CAN_has_gg_albert = no
		}
	}
	title = {
		text = entente.733.t_gg
		trigger = {
			CAN_has_gg_albert = yes
		}
	}
	desc = {
		text = entente.733.d
		trigger = {
			CAN_has_gg_albert = no
		}
	}
	desc = {
		text = entente.733.d_gg
		trigger = {
			CAN_has_gg_albert = yes
		}
	}
	picture = GFX_report_event_CAN_albert_slide

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			CAN_has_albert = yes
			CAN_has_gg_albert = yes
		}
		OR = {
			has_global_flag = CAN_king_albert_I
			has_global_flag = CAN_canadian_king_albert
			has_global_flag = CAN_canadian_gg_albert
		}
	}

	option = { #
		name = entente.733.a
		add_stability = 0.05
	}
}

# Al gets Ass Cancer
country_event = {
	id = entente.734
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.734" }
	title = {
		text = entente.734.t
		trigger = {
			CAN_has_gg_albert = no
		}
	}
	title = {
		text = entente.734.t_gg
		trigger = {
			CAN_has_gg_albert = yes
		}
	}
	desc = {
		text = entente.734.d
		trigger = {
			tag = CAN
		
			CAN_has_gg_albert = no
		}
	}
	desc = {
		text = entente.734.d_GBR
		trigger = {
			tag = GBR

			CAN_has_gg_albert = no
		}
	}
	desc = {
		text = entente.734.d_gg
		trigger = {
			tag = CAN
		
			CAN_has_gg_albert = yes
		}
	}
	
	picture = GFX_report_event_CAN_elizabeth2

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		OR = {
			CAN_has_albert = yes
			CAN_has_gg_albert = yes
		}
		OR = {
			has_global_flag = CAN_king_albert_I
			has_global_flag = CAN_canadian_king_albert
			has_global_flag = CAN_canadian_gg_albert
		}
	}

	option = { #
		name = entente.734.a
		trigger = {
			has_global_flag = CAN_king_albert_I
		}
		if = {
			limit = {
				tag = CAN
			}
			add_stability = -0.02
		}
		set_global_flag = ENT_Albert_Dead
		clr_global_flag = CAN_king_albert_I
		set_global_flag = CAN_queen_elizabeth_II
		if = {
			limit = {
				DEH = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			DEH = { DEH_create_monarchy = yes }
		}
		if = {
			limit = {
				SAF = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			SAF = { SAF_create_monarchy = yes }
		}
		if = {
			limit = {
				CAN = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			CAN = { CAN_create_monarchy = yes }
		}
		if = {
			limit = {
				GBR = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			GBR = { CAN_create_monarchy = yes }
		}
		if = {
			limit = {
				SCT = { has_country_leader = { name = "Albert I" ruling_only = yes } }
			}
			SCT = { create_windsor_scottish_monarchy = yes }
		}
		if = {
			limit = {
				ICE = { has_country_leader = { name = "Adalbert I" ruling_only = yes } }
			}
			ICE = { ICE_create_british_monarchy = yes }
		}
		if = {
			limit = { has_unit_leader = 9238 }
			random_unit_leader = {
				limit = { has_id = 9238 }
				remove_unit_leader = yes
			}
			create_field_marshal = {# Lizzy
				name = "Elizabeth II "
				portrait_path = "gfx/leaders/CAN/Portrait_Canada_Elizabeth_General.png"
				traits = { 
					politically_connected 
					GBR_british_exile_trait
					media_personality
					trait_engineer
					combined_arms_expert
				}
				skill = 1
				attack_skill = 1
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 2
				id = 9249
			}
		}
		if = {
			limit = {
				has_idea = CAN_King_Albert_I_hog_pau
			}
			swap_ideas = {
				remove_idea = CAN_King_Albert_I_hog_pau
				add_idea = CAN_Queen_Elizabeth_II_hog_pau
			}
		}
	}
	
	option = { #
		name = entente.734.b
		trigger = {
			has_global_flag = CAN_canadian_king_albert
		}
		CAN_set_queen_elizabeth = yes
	}
	
	option = { #
		name = entente.734.c
		trigger = {
			has_global_flag = CAN_canadian_gg_albert
		}
		CAN_setup_GG_elizabeth = yes
	}
}

###Speech Therapy Events
country_event = { #The Duke's Speech
	id = entente.352
	title = entente.352.t
	desc = entente.352.d
	picture = GFX_report_event_CAN_albert

	is_triggered_only = yes

	trigger = {
		CAN_has_king = yes
	}

	option = { #British Doctors for a British Prince
		log = "[GetLogInfo]: event entente.352 option entente.352.a"
		name = entente.352.a
		hidden_effect = {
			country_event = { id = entente.353 days = 90 }
		}
	}
	option = { #Help from Toronto
		log = "[GetLogInfo]: event entente.352 option entente.352.b"
		name = entente.352.b
		hidden_effect = {
			country_event = { id = entente.355 days = 90 }
		}
	}
	option = { #Lionel Logue
		log = "[GetLogInfo]: event entente.352 option entente.352.c"
		name = entente.352.c
		hidden_effect = {
			country_event = { id = entente.354 days = 90 }
		}
	}
}

country_event = { #Speech therapy with Brits
	id = entente.353
	title = entente.353.t
	desc = entente.353.d
	picture = GFX_report_event_generic_map_brit

	trigger = {
		CAN_has_king = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event entente.353 option entente.353.a"
		name = entente.353.a
		add_political_power = 5
		if = {
			limit = { check_variable = { king_influence < 5 } }
			custom_effect_tooltip = CAN_exile_influence_increase
			add_to_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
	}
}

country_event = { #Therapy with Mr Logue
	id = entente.354
	title = entente.354.t
	desc = entente.354.d
	picture = GFX_report_event_CAN_Lionel_Logue

	trigger = {
		CAN_has_king = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event entente.354 option entente.354.a"
		name = entente.354.a
		add_political_power = 30
		custom_effect_tooltip = entente.354.a.tt
		set_country_flag = CAN_lionel_logue_flag
	}
}

country_event = { #Canadian Specialists
	id = entente.355
	title = entente.355.t
	desc = entente.355.d
	picture = GFX_report_event_CAN_toronto

	trigger = {
		CAN_has_albert = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event entente.355 option entente.355.a"
		name = entente.355.a
		add_political_power = -30
		if = {
			limit = { check_variable = { king_influence > 0 } }
			custom_effect_tooltip = CAN_exile_influence_decrease
			subtract_from_variable = { king_influence = 1 }
			CAN_calc_exile_influence_effects = yes
		}
	}
}

country_event = { #Albert improves
	id = entente.356
	title = entente.356.t
	desc = entente.356.d
	picture = GFX_report_event_CAN_microphone

	trigger = {
		CAN_has_albert = yes
	}

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event entente.356 option entente.356.a"
		name = entente.356.a
		add_political_power = 30
		swap_ruler_traits = {
			remove = CAN_humble
			add = CAN_humble_improved
		}
		set_country_flag = CAN_humble_trait_improved
	}
}

# King Henry - story #1 war address
country_event = {
	id = entente.73
	title = entente.73.t
	desc = entente.73.d
	picture = GFX_report_event_CAN_henry

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_henry = yes
		has_global_flag = CAN_king_henry_IX
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.73"
		hidden_effect = {
			if = {
				limit = { has_war_with = ENG }
				ENG = { save_event_target_as = war_country }
			}
			else_if = {
				limit = { has_war_with = GER }
				GER = { save_event_target_as = war_country }
			}
			else = {
				random_country = {
					limit = {
						is_actual_major = yes
						has_war_with = ROOT
					}
					save_event_target_as = war_country
				}
			}
		}
	}

	option = {
		name = entente.73.a
		add_war_support = 0.05
		
	}
}

# King Henry - story #2 Queen Alice
country_event = {
	id = entente.74
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.74" }
	title = entente.74.t
	desc = entente.74.d
	picture = GFX_report_event_CAN_alice

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_henry = yes
		has_global_flag = CAN_king_henry_IX
	}

	option = {
		name = entente.74.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
	}
}

# King Henry - story #3 birth of Prince William
country_event = {
	id = entente.750
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.730" 
		event_target:KR_king_base = {
			country_event = entente.75
		}
	}
	hidden = yes

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		event_target:KR_king_base = {
			CAN_has_henry = yes
		}
		has_global_flag = CAN_king_henry_IX
	}
	option = { 
	}
}

# King Henry - story #3 birth of Prince William
country_event = {
	id = entente.75
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.75" }
	title = entente.75.t
	desc = entente.75.d
	picture = GFX_report_event_CAN_henry

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_henry = yes
		has_global_flag = CAN_king_henry_IX
	}

	option = {
		name = entente.75.a
		set_variable = { global.king_henry_story = 3 }
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
	}
}

# King George - story #1 war address
country_event = {
	id = entente.76
	title = entente.76.t
	desc = entente.76.d
	picture = GFX_report_event_CAN_george

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_george = yes
		has_global_flag = CAN_king_george_VI
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.76"
		hidden_effect = {
			if = {
				limit = { has_war_with = ENG }
				ENG = { save_event_target_as = war_country }
			}
			else_if = {
				limit = { has_war_with = GER }
				GER = { save_event_target_as = war_country }
			}
			else = {
				random_country = {
					limit = {
						is_actual_major = yes
						has_war_with = ROOT
					}
					save_event_target_as = war_country
				}
			}
		}
	}

	option = {
		name = entente.76.a
		add_war_support = 0.05
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
		
	}
}

# King George - story #2 Prince Edward
country_event = {
	id = entente.77
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.77" }
	title = entente.77.t
	desc = entente.77.d
	picture = GFX_report_event_CAN_edward_heir

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_george = yes
		has_global_flag = CAN_king_george_VI
	}

	option = {
		name = entente.77.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		CAN_calc_royal_visit_effects = yes
	}
}

# King George - story #3 plane crash
country_event = {
	id = entente.781
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.730" 
		event_target:KR_king_base = {
			country_event = entente.78
		}
	}
	hidden = yes

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		event_target:KR_king_base = {
			CAN_has_george = yes
		}
		has_global_flag = CAN_king_george_VI
	}
	option = { 
	}
}

# King George - story #3 plane crash
country_event = {
	id = entente.78
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.78" }
	title = entente.78.t
	desc = entente.78.d
	picture = GFX_report_event_CAN_george

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_george = yes
		has_global_flag = CAN_king_george_VI
	}

	option = {
		name = entente.78.a
		set_variable = { global.king_george_story = 3 }
		custom_effect_tooltip = CAN_king_takes_time_off
		set_global_flag = { flag = CAN_king_busy days = 180 value = 1 }
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# King George - story #4 fuckboy
country_event = {
	id = entente.780
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.780" }
	title = entente.780.t
	desc = entente.780.d
	picture = GFX_report_event_CAN_george

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		CAN_has_george = yes
		has_global_flag = CAN_king_george_VI
	}

	option = {
		name = entente.780.a
		set_variable = { global.king_george_story = 4 }
		custom_effect_tooltip = CAN_king_popularity_decrease
		subtract_from_variable = { king_popularity = 1 }
		hidden_effect = {
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# News - Edward marries Constance Bennett
news_event = {
	id = entente.90
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.90" }
	title = entente.90.t
	desc = entente.90.d
	picture = GFX_news_event_CAN_constance

	major = yes
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = event_target:wedding_country }
		OR = {
			regional_europe_news = yes
			regional_north_america_news = yes
		}
	}
	option = {
		name = entente.90.a
		trigger = { CAN_is_commonwealth_tag = yes }
	}
	option = {
		name = entente.90.b
		trigger = { CAN_is_commonwealth_tag = no }
	}
}

# News - Edward marries Princess Isabel
news_event = {
	id = entente.91
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.91" }
	title = entente.91.t
	desc = entente.91.d
	picture = GFX_news_event_royal_visit

	major = yes
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = { tag = event_target:wedding_country }
		OR = {
			regional_europe_news = yes
			regional_north_america_news = yes
		}
	}
	option = {
		name = entente.90.a
		trigger = { CAN_is_commonwealth_tag = yes }
	}
	option = {
		name = entente.90.b
		trigger = { CAN_is_commonwealth_tag = no }
	}
}

#Crazy people say Abdicate
country_event = {
	id = entente.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.100" }
	title = entente.100.t
	desc = {
		text = entente.100.d.isabel_exile
		trigger = { 
			NOT = { tag = GBR } 
			NOT = {
				has_global_flag = CAN_edward_met_constance
			}
		}
	}
	desc = {
		text = entente.100.d.isabel_home
		trigger = { 
			tag = GBR  
			NOT = {
				has_global_flag = CAN_edward_met_constance
			}
		}
	}
	desc = {
		text = entente.100.d.constance_exiles
		trigger = { 
			NOT = { tag = GBR } 
			has_global_flag = CAN_edward_met_constance
		}
	}
	desc = {
		text = entente.100.d.constance_home
		trigger = { 
			tag = GBR  
			has_global_flag = CAN_edward_met_constance
		}
	}
	
	picture = GFX_report_event_CAN_edward_party

	is_triggered_only = yes

	trigger = {
		has_country_flag = KR_british_king_base
	}

	option = {
		name = entente.100.a
		custom_effect_tooltip = CAN_king_popularity_increase
		add_to_variable = { king_popularity = 1 }
		custom_effect_tooltip = CAN_exile_influence_decrease
		CAN_improve_canadian_influence_small_bop = yes
		if = {
			limit = { check_variable = { king_influence > 0 } }
			subtract_from_variable = { king_influence = 1 }
		}
	}
}

### Abdication Crisis

# Government divided over marriage
# country_event = {
	# id = entente.100
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.100" }
	# title = entente.100.t
	# picture = GFX_report_event_CAN_cabinet

	# desc = {
		# text = entente.100.d.exiles
		# trigger = { NOT = { tag = GBR } }
	# }
	# desc = {
		# text = entente.100.d.home
		# trigger = { tag = GBR }
	# }

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = KR_british_king_base
	# }

	# option = {
		# name = entente.100.a
		# if = {
			# limit = {
				# NOT = { tag = GBR }
				# check_variable = { king_influence > 1 }
			# }
			# custom_effect_tooltip = CAN_exile_influence_decrease
			# subtract_from_variable = { king_influence = 2 }
			# CAN_calc_exile_influence_effects = yes
		# }
		# else_if = {
			# limit = {
				# NOT = { tag = GBR }
				# check_variable = { king_influence > 0 }
			# }
			# custom_effect_tooltip = CAN_exile_influence_decrease
			# subtract_from_variable = { king_influence = 1 }
			# CAN_calc_exile_influence_effects = yes
		# }
		# add_stability = -0.05
		# set_variable = { king_support = king_popularity }
		# every_other_country = {
			# limit = {
				# exists = yes
				# CAN_is_commonwealth_tag = yes
				# has_socialist_government = no
				# is_in_faction_with = ROOT
			# }
			# country_event = entente.101
		# }
		# hidden_effect = {
			# country_event = { id = entente.104 days = 5 }
		# }
	# }
# }

#Dominions informed of crisis
# country_event = {
	# id = entente.101
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.101" }
	# title = entente.101.t
	# desc = entente.101.d
	# picture = GFX_report_event_CAN_edward2

	# is_triggered_only = yes

	# option = {
		# name = entente.101.a #We support the king, no matter what
		# ai_chance = {
			# factor = 50
			# modifier = {
				# factor = 0
				# OR = {
					# tag = DEH
					# tag = JAM
				# }
			# }
			# modifier = {
				# factor = 0
				# tag = CAN
				# OR = {
					# has_government = market_liberal
					# has_government = social_liberal
				# }
			# }
			# modifier = {
				# factor = 0
				# tag = SAF
				# has_government = authoritarian_democrat
			# }
			# modifier = {
				# factor = 2
				# NOT = { tag = SAF }
				# has_government = authoritarian_democrat
			# }
			# modifier = {
				# factor = 0
				# has_government = social_democrat
			# }
			# modifier = {
				# factor = 2
				# has_government = social_conservative
			# }
			# modifier = {
				# factor = 3
				# has_government = paternal_autocrat
			# }
		# }
		# FROM = {
			# country_event = { id = entente.102 days = 1 random = 72 }
		# }
	# }
	# option = {
		# name = entente.101.b #If he pursues this, he must abdicate
		# ai_chance = {
			# factor = 50
			# modifier = {
				# factor = 0
				# OR = {
					# tag = DEH
					# tag = JAM
				# }
			# }
			# modifier = {
				# factor = 2
				# NOT = { tag = CAN }
				# OR = {
					# has_government = market_liberal
					# has_government = social_liberal
				# }
			# }
			# modifier = {
				# factor = 0
				# tag = AST
				# has_government = national_populist
			# }
			# modifier = {
				# factor = 2
				# NOT = { tag = AST }
				# has_government = national_populist
			# }
		# }
		# FROM = {
			# country_event = { id = entente.103 days = 1 random = 72 }
		# }
	# }
	# option = {
		# name = entente.101.c #We have no interest in weighing in on the matter
		# ai_chance = {
			# factor = 10
			# modifier = {
				# factor = 0
				# OR = {
					# tag = CAN
					# tag = GBR
					# tag = AST
					# tag = NZL
					# tag = SAF
					# tag = CAF
				# }
			# }
		# }
	# }
# }

#Dominion supports the king
# country_event = {
	# id = entente.102
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.102" }
	# title = entente.102.t
	# desc = entente.102.d
	# picture = GFX_report_event_CAN_edward_meet

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = KR_british_king_base
	# }

	# option = {
		# name = entente.102.a
		# add_to_variable = { king_support = 1 }
	# }
# }

#Dominion believes the king should abdicate
# country_event = {
	# id = entente.103
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.103" }
	# title = entente.103.t
	# desc = entente.103.d
	# picture = GFX_report_event_CAN_edward_party

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = KR_british_king_base
	# }

	# option = {
		# name = entente.103.a
		# subtract_from_variable = { king_support = 1 }
	# }
# }

#King makes plea
# country_event = {
	# id = entente.104
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.104" }
	# title = entente.104.t
	# desc = entente.104.d
	# picture = GFX_report_event_CAN_edward2

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = KR_british_king_base
	# }

	# option = {
		# name = entente.104.a
		# add_political_power = -100
		# hidden_effect = {
			# if = {
				# limit = {
					# check_variable = { king_popularity > 1 }
					# check_variable = { king_support > 3 }
					# NOT = {
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ABDICATES
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ALBERT
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_HENRY
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_GEORGE
						# }
					# }
				# }
				#king is too popular to abdicate
				# country_event = { id = entente.105 days = 1 }
			# }
			# else_if = {
				# limit = {
					# NOT = { tag = GBR }
					# NOT = { has_government = authoritarian_democrat }
					# check_variable = { king_influence > 3 }
					# NOT = {
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ABDICATES
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ALBERT
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_HENRY
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_GEORGE
						# }
					# }
				# }
				#king's allies prevent him from abdicating
				# country_event = { id = entente.106 days = 1 }
			# }
			# else_if = {
				# limit = {
					# NOT = { tag = GBR }
					# has_government = authoritarian_democrat
					# check_variable = { king_influence > 2 }
					# NOT = {
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ABDICATES
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_ALBERT
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_HENRY
						# }
						# has_game_rule = {
							# rule = CAN_british_king
							# option = CAN_BRITISH_KING_GEORGE
						# }
					# }
				# }
				#king's allies prevent him from abdicating
				# country_event = { id = entente.106 days = 1 }
			# }
			# else = {
				#abdication decision event
				# country_event = { id = entente.107 days = 1 }
			# }
		# }
	# }
# }

#King too popular to abdicate
# country_event = {
	# id = entente.105
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.105" }
	# title = entente.105.t
	# desc = entente.105.d
	# picture = GFX_report_event_CAN_crowd2

	# is_triggered_only = yes
	# major = yes

	# show_major = {
		# OR = {
			# tag = FROM
			# AND = {
				# CAN_is_commonwealth_tag = yes
				# has_socialist_government = no
				# is_in_faction_with = FROM
			# }
		# }
	# }

	# option = {
		# name = entente.105.a
		# trigger = { tag = FROM }
		# clr_global_flag = CAN_king_busy
		# add_political_power = 50
		# custom_effect_tooltip = CAN_king_popularity_increase
		# add_to_variable = { king_popularity = 1 }
		# CAN_calc_royal_visit_effects = yes
		# hidden_effect = {
			# country_event = { id = entente.50 days = 90 random = 1440 }
		# }
	# }
	# option = {
		# name = entente.105.a
		# trigger = { NOT = { tag = FROM } }
	# }
# }

#King's allies prevent him from abdicating
# country_event = {
	# id = entente.106
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.106" }
	# title = entente.106.t
	# desc = entente.106.d
	# picture = GFX_report_event_CAN_cabinet

	# is_triggered_only = yes
	# major = yes

	# show_major = {
		# OR = {
			# tag = FROM
			# AND = {
				# CAN_is_commonwealth_tag = yes
				# has_socialist_government = no
				# is_in_faction_with = FROM
			# }
		# }
	# }

	# option = {
		# name = entente.106.a
		# trigger = { tag = FROM }
		# add_political_power = -50
		# clr_global_flag = CAN_king_busy
		# if = {
			# limit = { has_country_leader_with_trait = CAN_popular_figurehead }
			# remove_country_leader_trait = CAN_popular_figurehead
			# set_country_flag = GBR_remove_figurehead_trait
		# }
		# else_if = {
			# limit = { has_country_leader_with_trait = CAN_returning_king }
			# remove_country_leader_trait = CAN_returning_king
			# set_country_flag = GBR_remove_returning_king_trait
		# }
		# else = {
			# add_country_leader_trait = CAN_unpopular_monarch
			# set_country_flag = GBR_has_unpopular_monarch
		# }
		# custom_effect_tooltip = CAN_exile_influence_decrease
		# set_variable = { king_influence = 0 }
		# CAN_calc_exile_influence_effects = yes
		# if = {
			# limit = { check_variable = { king_popularity > 0 } }
			# custom_effect_tooltip = CAN_king_popularity_decrease
			# subtract_from_variable = { king_popularity = 1 }
			# CAN_calc_royal_visit_effects = yes
		# }
		# hidden_effect = {
			# country_event = { id = entente.50 days = 90 random = 1440 }
		# }
	# }
	# option = {
		# name = entente.106.a
		# trigger = { NOT = { tag = FROM } }
	# }
# }

#Abdication possible
# country_event = {
	# id = entente.107
	# immediate = { log = "[GetDateText]: [Root.GetName]: event entente.107" }
	# title = entente.107.t
	# desc = entente.107.d
	# picture = GFX_report_event_CAN_commons2

	# is_triggered_only = yes

	# trigger = {
		# has_country_flag = KR_british_king_base
	# }

	# option = {
		# name = entente.107.a #For the good of the Empire, he must abdicate
		# ai_chance = {
			# factor = 80
			# modifier = {
				# factor = 0.5
				# check_variable = { king_support > 3 }
			# }
			# modifier = {
				# factor = 0.5
				# check_variable = { king_popularity > 1 }
			# }
			# modifier = {
				# factor = 0
				# has_game_rule = {
					# rule = CAN_british_king
					# option = CAN_BRITISH_KING_EDWARD
				# }
			# }
		# }
		# custom_effect_tooltip = CAN_edward_will_step_down
		# if = {
			# limit = {
				# check_variable = { king_popularity > 1 }
			# }
			# add_stability = -0.10
			# add_political_power = -100
			# decrease_ruling_party_popularity_by_10 = yes
		# }
		# else_if = {
			# limit = {
				# check_variable = { king_popularity < 2 }
				# check_variable = { king_popularity > 0 }
			# }
			# add_stability = -0.10
			# add_political_power = -50
			# decrease_ruling_party_popularity_by_5 = yes
		# }
		# else = {
			# add_stability = -0.05
		# }
		# country_event = entente.108
	# }
	# option = {
		# name = entente.107.b #He is our King, and he remains so!
		# ai_chance = {
			# factor = 20
			# modifier = {
				# factor = 0.5
				# check_variable = { king_popularity < 1 }
			# }
			# modifier = {
				# factor = 0.5
				# check_variable = { king_support < 0 }
			# }
			# modifier = {
				# factor = 1.5
				# check_variable = { king_support > 2 }
			# }
			# modifier = {
				# factor = 2
				# check_variable = { king_popularity > 0 }
			# }
			# modifier = {
				# factor = 0
				# OR = {
					# has_game_rule = {
						# rule = CAN_british_king
						# option = CAN_BRITISH_KING_ABDICATES
					# }
					# has_game_rule = {
						# rule = CAN_british_king
						# option = CAN_BRITISH_KING_ALBERT
					# }
					# has_game_rule = {
						# rule = CAN_british_king
						# option = CAN_BRITISH_KING_HENRY
					# }
					# has_game_rule = {
						# rule = CAN_british_king
						# option = CAN_BRITISH_KING_GEORGE
					# }
				# }
			# }
		# }
		# clr_global_flag = CAN_king_busy
		# if = {
			# limit = { has_country_leader_with_trait = CAN_popular_figurehead }
			# remove_country_leader_trait = CAN_popular_figurehead
			# set_country_flag = GBR_remove_figurehead_trait
		# }
		# else_if = {
			# limit = { has_country_leader_with_trait = CAN_returning_king }
			# remove_country_leader_trait = CAN_returning_king
			# set_country_flag = GBR_remove_returning_king_trait
		# }
		# else = {
			# add_country_leader_trait = CAN_unpopular_monarch
			# set_country_flag = GBR_has_unpopular_monarch
		# }
		# if = {
			# limit = {
				# check_variable = { king_popularity < 2 }
				# check_variable = { king_popularity > 0 }
			# }
			# add_political_power = -100
			# decrease_ruling_party_popularity_by_10 = yes
		# }
		# else_if = {
			# limit = {
				# check_variable = { king_popularity < 1 }
			# }
			# add_stability = -0.05
			# add_political_power = -200
			# decrease_ruling_party_popularity_by_20 = yes
		# }
		# else = {
			# add_political_power = -50
		# }
		# hidden_effect = {
			# news_event = { id = entente.110 days = 1 }
			# country_event = { id = entente.50 days = 90 random = 1440 }
		# }
	# }
# }

# Choosing the new king
country_event = {
	id = entente.108
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.108" }
	title = entente.108.t
	picture = GFX_report_event_CAN_new_king

	desc = {
		text = entente.108.d.george
		trigger = { NOT = { has_global_flag = CAN_prince_george_dead } }
	}
	desc = {
		text = entente.108.d.nogeorge
		trigger = { has_global_flag = CAN_prince_george_dead }
	}

	is_triggered_only = yes

	trigger = {
		has_country_flag = KR_british_king_base
	}

	option = {
		name = entente.108.a #Albert
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_HENRY
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_GEORGE
				}
			}
		}
		custom_effect_tooltip = CAN_prince_albert_king
		hidden_effect = {
			clr_global_flag = CAN_king_busy
			clr_global_flag = CAN_king_edward_VIII
			clr_country_flag = GBR_has_returning_king
			clr_country_flag = GBR_remove_returning_king_trait
			clr_country_flag = GBR_has_unpopular_monarch
			clr_country_flag = GBR_remove_unpopular_monarch_trait
			clr_country_flag = GBR_remove_figurehead_trait
			set_global_flag = CAN_king_albert_I
			set_variable = { king_popularity = 2 }
			set_variable = { global.king_albert_story = 0 }
			CAN_create_monarchy = yes

			if = {
				limit = {
					DEH = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				DEH = { DEH_create_monarchy = yes }
			}
			if = {
				limit = {
					SAF = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				SAF = { SAF_create_monarchy = yes }
			}
			if = {
				limit = {
					SCT = { has_country_leader = { name = "Edward II" ruling_only = yes } }
				}
				SCT = { create_windsor_scottish_monarchy = yes }
			}
			if = {
				limit = {
					ICE = { has_country_leader = { name = "Játvarður VIII" ruling_only = yes } }
				}
				ICE = { ICE_create_british_monarchy = yes }
			}

			news_event = { id = entente.111 days = 1 }
			country_event = { id = entente.50 days = 90 random = 1440 }
			if = {
				limit = {
					NEE = { has_country_leader = { name = "Albert I" ruling_only = yes } }
				}
				NEE = {
					country_event = {
						id = neebritishflavor.12
						days = 2
					}
				}
			}
		}
	}
	option = {
		name = entente.108.b #Henry
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				tag = GBR
				NOT = {
					has_game_rule = {
						rule = CAN_british_king
						option = CAN_BRITISH_KING_HENRY
					}
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_GEORGE
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_ALBERT
				}
			}
		}
		custom_effect_tooltip = CAN_prince_henry_king
		if = {
			limit = { has_unit_leader = 924 }
			random_unit_leader = {
				limit = { has_id = 924 }
				remove_unit_leader = yes
			}
		}
		hidden_effect = {
			clr_global_flag = CAN_king_busy
			clr_global_flag = CAN_king_edward_VIII
			clr_country_flag = GBR_has_returning_king
			clr_country_flag = GBR_remove_returning_king_trait
			clr_country_flag = GBR_has_unpopular_monarch
			clr_country_flag = GBR_remove_unpopular_monarch_trait
			clr_country_flag = GBR_remove_figurehead_trait
			set_global_flag = CAN_king_henry_IX
			set_variable = { king_popularity = 2 }
			set_variable = { global.king_henry_story = 0 }
			CAN_create_monarchy = yes

			if = {
				limit = {
					DEH = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				DEH = { DEH_create_monarchy = yes }
			}
			if = {
				limit = {
					SAF = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				SAF = { SAF_create_monarchy = yes }
			}
			if = {
				limit = {
					AST = { has_country_leader = { ruling_only = yes name = "Prince Henry" } }
				}
				AST = { country_event = entente.113 }
			}
			if = {
				limit = {
					SCT = { has_country_leader = { name = "Edward II" ruling_only = yes } }
				}
				SCT = { create_windsor_scottish_monarchy = yes }
			}
			if = {
				limit = {
					ICE = { has_country_leader = { name = "Játvarður VIII" ruling_only = yes } }
				}
				ICE = { ICE_create_british_monarchy = yes }
			}

			news_event = { id = entente.111 days = 1 }
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
	option = {
		name = entente.108.c #George
		trigger = { NOT = { has_global_flag = CAN_prince_george_dead } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_HENRY
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAN_british_king
					option = CAN_BRITISH_KING_ALBERT
				}
			}
		}
		custom_effect_tooltip = CAN_prince_george_king
		hidden_effect = {
			clr_global_flag = CAN_king_busy
			clr_global_flag = CAN_king_edward_VIII
			clr_country_flag = GBR_has_returning_king
			clr_country_flag = GBR_remove_returning_king_trait
			clr_country_flag = GBR_has_unpopular_monarch
			clr_country_flag = GBR_remove_unpopular_monarch_trait
			clr_country_flag = GBR_remove_figurehead_trait
			set_global_flag = CAN_king_george_VI
			set_variable = { king_popularity = 2 }
			set_variable = { global.king_george_story = 0 }
			CAN_create_monarchy = yes

			if = {
				limit = {
					DEH = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				DEH = { DEH_create_monarchy = yes }
			}
			if = {
				limit = {
					SAF = { has_country_leader = { name = "Edward VIII" ruling_only = yes } }
				}
				SAF = { SAF_create_monarchy = yes }
			}
			if = {
				limit = {
					AST = { has_country_leader = { ruling_only = yes name = "Prince George" } }
				}
				AST = { country_event = entente.113 }
			}
			if = {
				limit = {
					SCT = { has_country_leader = { name = "Edward II" ruling_only = yes } }
				}
				SCT = { create_windsor_scottish_monarchy = yes }
			}
			if = {
				limit = {
					ICE = { has_country_leader = { name = "Játvarður VIII" ruling_only = yes } }
				}
				ICE = { ICE_create_british_monarchy = yes }
			}

			news_event = { id = entente.111 days = 1 }
			country_event = { id = entente.50 days = 90 random = 1440 }
		}
	}
}

# News - King Edward survives abdication crisis
news_event = {
	id = entente.110
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.110" }
	title = entente.110.t
	desc = entente.110.d
	picture = GFX_news_event_CAN_edward

	major = yes
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		OR = {
			regional_europe_news = yes
			regional_north_america_news = yes
		}
	}

	option = {
		name = entente.110.a
		trigger = { CAN_is_commonwealth_tag = yes }
	}
	option = {
		name = entente.110.b
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = no
		}
	}
	option = {
		name = entente.110.c
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = yes
		}
	}
}

# News - New king coronated
news_event = {
	id = entente.111
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.111" }
	title = entente.111.t
	picture = GFX_news_event_CAN_edward

	desc = {
		text = entente.111.d.albert
		trigger = { has_global_flag = CAN_king_albert_I }
	}
	desc = {
		text = entente.111.d.henry
		trigger = { has_global_flag = CAN_king_henry_IX }
	}
	desc = {
		text = entente.111.d.george
		trigger = { has_global_flag = CAN_king_george_VI }
	}

	major = yes
	is_triggered_only = yes

	option = {
		name = entente.111.a
		trigger = { CAN_is_commonwealth_tag = yes }
	}
	option = {
		name = entente.111.b
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = no
		}
	}
	option = {
		name = entente.111.c
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = yes
		}
	}
}

# News - New king coronated (Edward's dead edition)
news_event = {
	id = entente.1011
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.1011" }
	title = entente.1011.t
	picture = GFX_news_event_CAN_edward_dead

	desc = {
		text = entente.1011.d.albert
		trigger = { has_global_flag = CAN_king_albert_I }
	}
	desc = {
		text = entente.1011.d.henry
		trigger = { has_global_flag = CAN_king_henry_IX }
	}
	desc = {
		text = entente.1011.d.george
		trigger = { has_global_flag = CAN_king_george_VI }
	}

	major = yes
	is_triggered_only = yes

	option = {
		name = entente.1011.a
		trigger = { CAN_is_commonwealth_tag = yes }
	}
	option = {
		name = entente.1011.b
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = no
		}
	}
	option = {
		name = entente.1011.c
		trigger = {
			CAN_is_commonwealth_tag = no
			has_socialist_government = yes
		}
	}
}

# Henry goes to become Governor-General of Australasia
unit_leader_event = {
	id = entente.112
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.112" }
	title = entente.112.t
	desc = entente.112.d
	picture = GFX_report_event_CAN_henry

	is_triggered_only = yes

	option = {
		name = entente.112.a
		hidden_effect = {
			THIS = {
				retire = yes
			}
		}
	}
}

# Henry/George has left Australasia to become king
country_event = {
	id = entente.113
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.113" }
	title = entente.113.t
	desc = entente.113.d
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	option = {
		name = entente.113.a
		add_stability = 0.05
		hidden_effect = {
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = authoritarian_democrat_subtype
			}
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = social_democrat_subtype
			}
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = social_liberal_subtype
			}
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = market_liberal_subtype
			}
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = social_conservative_subtype
			}
			create_country_leader = {
				name = "Isaac Isaacs"
				picture = "gfx/leaders/AST/Portrait_AST_Isaac_Isaacs.png"
				expire = "1.1.1"
				ideology = national_populist_subtype
			}
		}
	}
}


### Imperial Conference

# Invitations to the Conference
country_event = {
	id = entente.200
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.200" }
	title = entente.200.t
	desc = entente.200.d
	picture = GFX_report_event_CAN_imperial_confrence

	is_triggered_only = yes

	option = {
		name = entente.200.a
		add_to_array = { global.CAN_imperial_conference = ROOT }
	}
}

# CAN - Preparing for the Conference
country_event = {
	id = entente.201
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.201" }
	title = entente.201.t
	desc = entente.201.d
	
	picture = GFX_report_event_CAN_imperial_confrence

	is_triggered_only = yes

	option = {
		name = entente.201.a #Canada is the key to retaking the Home Isles
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				any_of = {
					array = global.CAN_imperial_conference
					var:v = { is_ai = no }
				}
			}
		}
		add_political_power = 100
		add_timed_idea = {
			idea = CAN_imp_trade
			days = 180
		}
		hidden_effect = {
			country_event = { id = entente.202 days = 1 }
		}
	}
	option = {
		name = entente.201.b #We must first improve the other Dominions
		ai_chance = {
			factor = 60
		}
		set_global_flag = CAN_improve_dominions
		custom_effect_tooltip = CAN_imp_better_bonus
		every_country = {
			limit = {
				is_in_array = { global.CAN_imperial_conference = THIS }
			}
			add_political_power = 25
			add_opinion_modifier = { target = ROOT modifier = CAN_imperial_pride }
		}
		hidden_effect = {
			country_event = { id = entente.202 days = 1 }
		}
	}
}

# The Conference Begins
country_event = {
	id = entente.202
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.202" }
	title = entente.202.t
	picture = GFX_report_event_CAN_imperial_confrence

	desc = {
		text = entente.202.d.dominion
		trigger = { has_global_flag = CAN_improve_dominions }
	}
	desc = {
		text = entente.202.d.isles
		trigger = { NOT = { has_global_flag = CAN_improve_dominions } }
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			is_in_array = { global.CAN_imperial_conference = THIS }
		}
	}

	option = {
		name = entente.202.a
		trigger = { tag = CAN }
		hidden_effect = {
			random_country = {
				limit = {
					NOT = { tag = CAN }
					is_in_array = { global.CAN_imperial_conference = THIS }
				}
				country_event = { id = entente.203 days = 1 random = 24 }
			}
		}
	}
	option = {
		name = entente.202.b
		trigger = {
			NOT = { tag = CAN }
			has_global_flag = CAN_improve_dominions
		}
		custom_effect_tooltip = CAN_imp_better_bonus
		effect_tooltip = { add_political_power = 25 }
	}
	option = {
		name = entente.202.c
		trigger = {
			NOT = {
				tag = CAN
				has_global_flag = CAN_improve_dominions
			}
		}
		CAN = {
			effect_tooltip = {
				add_political_power = 100
				add_timed_idea = {
					idea = CAN_imp_trade
					days = 180
				}
			}
		}
	}
}

# Attending nation plans to speak
country_event = {
	id = entente.203
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.203" }
	title = entente.203.t
	desc = entente.203.d
	
	picture = GFX_report_event_CAN_imperial_confrence

	is_triggered_only = yes

	option = {
		name = entente.203.a #Military
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				tag = DEH
			}
			modifier = {
				factor = 0.1
				any_of = {
					array = global.CAN_imperial_conference
					var:v = { has_country_flag = CAN_chose_advisors }
				}
			}
		}
		set_country_flag = CAN_spoke_at_conference
		set_country_flag = CAN_chose_advisors
		if = {
			limit = { has_global_flag = CAN_improve_dominions }
			add_timed_idea = {
				idea = CAN_imp_advisors_2
				days = 180
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_imp_advisors_1
				days = 180
			}
		}
		hidden_effect = {
			country_event = entente.204
		}
	}
	option = {
		name = entente.203.b #Economy
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				tag = CAF
			}
			modifier = {
				factor = 0.1
				any_of = {
					array = global.CAN_imperial_conference
					var:v = { has_country_flag = CAN_chose_investment }
				}
			}
		}
		set_country_flag = CAN_spoke_at_conference
		set_country_flag = CAN_chose_investment
		if = {
			limit = { has_global_flag = CAN_improve_dominions }
			add_timed_idea = {
				idea = CAN_imp_investment_2
				days = 180
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_imp_investment_1
				days = 180
			}
		}
		hidden_effect = {
			country_event = entente.204
		}
	}
	option = {
		name = entente.203.c #Research
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				tag = AST
			}
			modifier = {
				factor = 0.1
				any_of = {
					array = global.CAN_imperial_conference
					var:v = { has_country_flag = CAN_chose_research }
				}
			}
		}
		set_country_flag = CAN_spoke_at_conference
		set_country_flag = CAN_chose_research
		if = {
			limit = { has_global_flag = CAN_improve_dominions }
			add_timed_idea = {
				idea = CAN_imp_research_2
				days = 180
			}
		}
		else = {
			add_timed_idea = {
				idea = CAN_imp_research_1
				days = 180
			}
		}
		hidden_effect = {
			country_event = entente.204
		}
	}
}

# Attending nation speaks
country_event = {
	id = entente.204
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.204" }
	title = entente.204.t
	picture = GFX_report_event_CAN_commission
	
	picture = GFX_report_event_CAN_imperial_confrence

	desc = {
		text = entente.204.d.adv_first
		trigger = {
			FROM = { has_country_flag = CAN_chose_advisors }
			NOT = {
				any_of = {
					array = global.CAN_imperial_conference
					var:v = {
						NOT = { tag = FROM }
						has_country_flag = CAN_chose_advisors
					}
				}
			}
		}
	}
	desc = {
		text = entente.204.d.adv
		trigger = {
			FROM = { has_country_flag = CAN_chose_advisors }
			any_of = {
				array = global.CAN_imperial_conference
				var:v = {
					NOT = { tag = FROM }
					has_country_flag = CAN_chose_advisors
				}
			}
		}
	}
	desc = {
		text = entente.204.d.inv_first
		trigger = {
			FROM = { has_country_flag = CAN_chose_investment }
			NOT = {
				any_of = {
					array = global.CAN_imperial_conference
					var:v = {
						NOT = { tag = FROM }
						has_country_flag = CAN_chose_investment
					}
				}
			}
		}
	}
	desc = {
		text = entente.204.d.inv
		trigger = {
			FROM = { has_country_flag = CAN_chose_investment }
			any_of = {
				array = global.CAN_imperial_conference
				var:v = {
					NOT = { tag = FROM }
					has_country_flag = CAN_chose_investment
				}
			}
		}
	}
	desc = {
		text = entente.204.d.res_first
		trigger = {
			FROM = { has_country_flag = CAN_chose_research }
			NOT = {
				any_of = {
					array = global.CAN_imperial_conference
					var:v = {
						NOT = { tag = FROM }
						has_country_flag = CAN_chose_research
					}
				}
			}
		}
	}
	desc = {
		text = entente.204.d.res
		trigger = {
			FROM = { has_country_flag = CAN_chose_research }
			any_of = {
				array = global.CAN_imperial_conference
				var:v = {
					NOT = { tag = FROM }
					has_country_flag = CAN_chose_research
				}
			}
		}
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			is_in_array = { global.CAN_imperial_conference = THIS }
		}
	}

	option = {
		name = entente.204.a
		trigger = { tag = FROM }
		hidden_effect = {
			if = {
				limit = {
					any_country = {
						is_in_array = { global.CAN_imperial_conference = THIS }
						NOT = { has_country_flag = CAN_spoke_at_conference }
						NOT = { tag = CAN }
					}
				}
				random_other_country = {
					limit = {
						is_in_array = { global.CAN_imperial_conference = THIS }
						NOT = { has_country_flag = CAN_spoke_at_conference }
						NOT = { tag = CAN }
					}
					country_event = { id = entente.203 days = 1 random = 24 }
				}
			}
			else = {
				CAN = {
					country_event = { id = entente.205 days = 1 random = 72 }
				}
			}
		}
	}
	option = {
		name = entente.204.b
		trigger = {
			NOT = { tag = FROM }
			FROM = { has_country_flag = CAN_chose_advisors }
		}
		FROM = {
			effect_tooltip = {
				if = {
					limit = { has_global_flag = CAN_improve_dominions }
					add_timed_idea = {
						idea = CAN_imp_advisors_2
						days = 180
					}
				}
				else = {
					add_timed_idea = {
						idea = CAN_imp_advisors_1
						days = 180
					}
				}
			}
		}
	}
	option = {
		name = entente.204.c
		trigger = {
			NOT = { tag = FROM }
			FROM = { has_country_flag = CAN_chose_investment }
		}
		FROM = {
			effect_tooltip = {
				if = {
					limit = { has_global_flag = CAN_improve_dominions }
					add_timed_idea = {
						idea = CAN_imp_investment_2
						days = 180
					}
				}
				else = {
					add_timed_idea = {
						idea = CAN_imp_investment_1
						days = 180
					}
				}
			}
		}
	}
	option = {
		name = entente.204.e
		trigger = {
			NOT = { tag = FROM }
			FROM = { has_country_flag = CAN_chose_research }
		}
		FROM = {
			effect_tooltip = {
				if = {
					limit = { has_global_flag = CAN_improve_dominions }
					add_timed_idea = {
						idea = CAN_imp_research_2
						days = 180
					}
				}
				else = {
					add_timed_idea = {
						idea = CAN_imp_research_1
						days = 180
					}
				}
			}
		}
	}
}

# Imperial Conference Ends
country_event = {
	id = entente.205
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.205" }
	title = entente.205.t
	desc = entente.205.d
	picture = GFX_report_event_CAN_imperial_confrence

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			tag = CAN
			is_in_array = { global.CAN_imperial_conference = THIS }
		}
	}

	option = {
		name = entente.205.a
		trigger = { tag = CAN }
		clr_global_flag = CAN_improve_dominions
		clear_array = global.CAN_imperial_conference
	}
	option = {
		name = entente.205.a
		trigger = { NOT = { tag = CAN } }
		clr_country_flag = CAN_spoke_at_conference
		clr_country_flag = CAN_chose_advisors
		clr_country_flag = CAN_chose_investment
		clr_country_flag = CAN_chose_research
	}
}


### Entente Air Training

# Air training scheme created
country_event = {
	id = entente.210
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.210" }
	title = entente.210.t
	desc = entente.210.d
	picture = GFX_report_event_CAN_air_traning_scheme

	is_triggered_only = yes

	option = {
		name = entente.210.a
		hidden_effect = {
			every_other_country = {
				limit = {
					is_in_faction_with = CAN
					NOT = { tag = CAN }
				}
				country_event = entente.211
			}
		}
	}
}

# Entente member invited to join
country_event = {
	id = entente.211
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.211" }
	title = entente.211.t
	desc = entente.211.d
	picture = GFX_report_event_CAN_air_traning_scheme

	is_triggered_only = yes

	option = { # Agree
		name = entente.211.a
		ai_chance = {
			factor = 80
		}
		air_experience = 20
		add_ideas = CAN_air_training_plan_idea
		CAN = {
			add_opinion_modifier = { target = ROOT modifier = KR_pleased }
			country_event = { id = entente.212 days = 1 random = 264 }
		}
	}
	option = { # Refuse
		name = entente.211.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				tag = NFA
			}
			modifier = {
				factor = 0
				OR = {
					tag = AST
					tag = CAF
				}
			}
		}
		CAN = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
		}
		add_political_power = 25
	}
}

# Entente member joins the programme
country_event = {
	id = entente.212
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.212" }
	title = entente.212.t
	desc = entente.212.d
	picture = GFX_report_event_CAN_air_traning_scheme

	is_triggered_only = yes

	trigger = {
		is_in_faction_with = FROM
	}

	option = {
		name = entente.212.a
		air_experience = 20
	}
}

# RAAC Founded
country_event = {
	id = entente.213
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.213" }
	title = entente.213.t
	desc = entente.213.d
	picture = GFX_report_event_CAN_air_traning_scheme

	is_triggered_only = yes

	option = {
		name = entente.213.a
		custom_effect_tooltip = unlock_raac_tt
		add_opinion_modifier = { target = CAN modifier = KR_pleased }
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 696 #Bermuda
					state = 690 #Northern Bahamas
					state = 689 #Jamaica
					state = 687 #West Guyana
				}
			}
			add_building_construction = {
				type = air_base
				level = 1
				instant_build = yes
			}
		}
		add_tech_bonus = {
			name = entente.213.t
			bonus = 1
			uses = 1
			category = air_equipment
		}
	}
}


### War Events

# King's home has been invaded
country_event = {
	id = entente.250
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.250" }
	title = entente.250.t
	desc = entente.250.d
	picture = GFX_report_event_canada_army

	trigger = {
		OR = {
			tag = CAN
			tag = AST
			tag = DEH
			tag = GBR
			tag = SAF
		}
		tag = event_target:KR_king_base
		has_war = yes
		has_country_flag = KR_british_king_base
		NOT = {
			has_idea = CAN_rally_the_country
			has_global_flag = KR_king_captured
		}
		any_owned_state = {
			is_core_of = ROOT
			controller = { has_war_with = ROOT }
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_state = {
				limit = {
					is_core_of = ROOT
					controller = { has_war_with = ROOT }
				}
				controller = {
					save_event_target_as = invader
				}
			}
			if = {
				limit = { has_idea = CAN_all_hands_on_deck_idea }
				swap_ideas = {
					remove_idea = CAN_all_hands_on_deck_idea
					add_idea = CAN_rally_the_country
				}
			}
			else_if = {
				limit = { has_idea = CAN_darkest_hour }
				swap_ideas = {
					remove_idea = CAN_darkest_hour
					add_idea = CAN_rally_the_country
				}
			}
			else_if = {
				limit = { has_idea = has_scripted_peace }
				swap_ideas = {
					remove_idea = has_scripted_peace
					add_idea = CAN_rally_the_country
				}
			}
			else = {
				add_ideas = CAN_rally_the_country
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = entente.250.a
		effect_tooltip = {
			add_ideas = CAN_rally_the_country
		}
	}
}

# King flees or is captured
country_event = {
	id = entente.251
	picture = GFX_report_event_CAN_fleeing

	title = {
		text = entente.251.t.flees
		trigger = { has_global_flag = KR_king_flees }
	}
	title = {
		text = entente.251.t.captured
		trigger = { has_global_flag = KR_king_captured }
	}

	desc = {
		text = entente.251.d.fleesandtransfer
		trigger = {
			has_global_flag = KR_king_flees
			has_global_flag = KR_entente_transfer
		}
	}
	desc = {
		text = entente.251.d.fleesandcollapse
		trigger = {
			has_global_flag = KR_king_flees
			has_global_flag = KR_entente_collapse
		}
	}
	desc = {
		text = entente.251.d.flees
		trigger = {
			has_global_flag = KR_king_flees
			NOT = {
				has_global_flag = KR_entente_transfer
				has_global_flag = KR_entente_collapse
			}
		}
	}
	desc = {
		text = entente.251.d.capturedandtransfer
		trigger = {
			has_global_flag = KR_king_captured
			has_global_flag = KR_entente_transfer
		}
	}
	desc = {
		text = entente.251.d.capturedandcollapse
		trigger = {
			has_global_flag = KR_king_captured
			has_global_flag = KR_entente_collapse
		}
	}
	desc = {
		text = entente.251.d.captured
		trigger = {
			has_global_flag = KR_king_captured
			NOT = {
				has_global_flag = KR_entente_transfer
				has_global_flag = KR_entente_collapse
			}
		}
	}

	trigger = {
		tag = event_target:KR_king_base
		is_subject = no
		has_socialist_government = no
		has_war = yes
		has_idea = CAN_rally_the_country
		OR = {
			has_capitulated = yes
			surrender_progress > 0.8
		}
		NOT = {
			AND = {
				tag = CAN
				is_subject = no
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
				CAN_can_surrender_to_america = yes
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.251"
		hidden_effect = {
			#find an appropriate new entente leader, if they lead the entente
			if = {
				limit = {
					tag = ENT
					OR = {
						is_faction_leader = yes
						AND = {
							is_in_faction = yes
							has_capitulated = yes
						}
					}
				}
				CAN_find_entente_leader = yes
			}

			#find appropriate country for king to flee to, if possible
			if = {
				limit = {
					GBR = {
						exists = yes
						is_in_faction_with = ROOT
						surrender_progress < 0.30
						NOT = {
							tag = ROOT
							has_capitulated = yes
							has_global_flag = KR_king_flees
						}
					}
				}
				set_global_flag = KR_king_flees
				GBR = { save_event_target_as = king_flees_to }
			}
			else_if = {
				limit = {
					CAN = {
						exists = yes
						is_in_faction_with = ROOT
						surrender_progress < 0.30
						NOT = {
							tag = ROOT
							has_capitulated = yes
							has_global_flag = KR_king_flees
						}
					}
				}
				set_global_flag = KR_king_flees
				CAN = { save_event_target_as = king_flees_to }
			}
			else_if = {
				limit = {
					AST = {
						exists = yes
						is_in_faction_with = ROOT
						surrender_progress < 0.30
						NOT = {
							tag = ROOT
							has_government = paternal_autocrat
							has_capitulated = yes
							has_global_flag = KR_king_flees
						}
					}
				}
				set_global_flag = KR_king_flees
				AST = { save_event_target_as = king_flees_to }
			}
			else_if = {
				limit = {
					DEH = {
						exists = yes
						is_in_faction_with = ROOT
						surrender_progress < 0.30
						NOT = {
							tag = ROOT
							has_government = social_democrat
							has_capitulated = yes
							has_global_flag = KR_king_flees
						}
					}
				}
				set_global_flag = KR_king_flees
				DEH = { save_event_target_as = king_flees_to }
			}
			else_if = {
				limit = {
					SAF = {
						exists = yes
						is_in_faction_with = ROOT
						surrender_progress < 0.30
						NOT = {
							tag = ROOT
							has_capitulated = yes
							has_global_flag = KR_king_flees
						}
					}
				}
				set_global_flag = KR_king_flees
				SAF = { save_event_target_as = king_flees_to }
			}
			else = {
				set_global_flag = KR_king_captured
			}
			CAN_peace_out_us = yes
		}
	}

	option = {
		name = canada.251.a
		add_stability = -0.10
		add_political_power = -200
		if = {
			limit = { NOT = { has_global_flag = KR_entente_collapse } }
			remove_ideas = CAN_rally_the_country
		}
		else = {
			effect_tooltip = {
				remove_ideas = CAN_rally_the_country
			}
		}

		# first have the king flee to another country
		if = {
			limit = { has_global_flag = KR_king_flees }
			event_target:king_flees_to = {
				CAN_transfer_king_base = yes
				hidden_effect = { news_event = entente.259 }
			}
		}
		# then have the king captured
		else = {
			hidden_effect = { news_event = entente.260 }
		}

		if = {
			limit = { tag = CAN }
			hidden_effect = { CAN_create_republic = yes }
		}

		# then transfer entente leadership, if being transferred
		if = {
			limit = { has_global_flag = KR_entente_transfer }
			event_target:entente_transfer_to = {
				CAN_transfer_entente_leader = yes
				hidden_effect = {
					if = {
						limit = { has_global_flag = CAN_iedc_created }
						ROOT = { CAN_remove_from_iedc = yes }
					}
					if = {
						limit = {
							any_home_area_neighbor_country = {
								is_in_faction_with = ROOT
								OR = {
									has_capitulated = yes
									surrender_progress > 0.8
								}
							}
						}
						every_other_country = {
							limit = {
								is_owner_neighbor_of = ROOT
								OR = {
									has_capitulated = yes
									surrender_progress > 0.8
								}
							}
							leave_faction = yes
						}
					}
					remove_from_faction = ROOT
				}
			}
		}
		# then end the entente, if it's collapsing
		else_if = {
			limit = { has_global_flag = KR_entente_collapse }
			hidden_effect = {
				# inform Entente members
				every_other_country = {
					limit = { is_in_faction_with = ROOT }
					set_country_flag = KR_was_in_entente
					country_event = entente.257
				}
				# peace out the Entente
				every_country = {
					limit = {
						has_war = yes
						is_subject = no
						any_enemy_country = { has_country_flag = KR_was_in_entente }
						OR = {
							is_in_faction = no
							is_faction_leader = yes
						}
					}
					country_event = { id = entente.258 hours = 3 }
				}
				# disband ISAC if created
				if = {
					limit = { has_global_flag = CAN_isac_created }
					remove_from_tech_sharing_group = entente_research
					clr_global_flag = CAN_isac_created
				}
				# disband IEDC if created
				if = {
					limit = { has_global_flag = CAN_iedc_created }
					CAN_remove_from_iedc = yes
					clr_global_flag = CAN_iedc_created
				}
				# reset ENT to GBR, to avoid errors
				GBR = { save_global_event_target_as = KR_entente_leader }
			}
			dismantle_faction = yes
		}

		clr_global_flag = KR_entente_transfer
	}
}

country_event = {
	id = entente.2510
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2510" }
	title = entente.2510.t
	desc = entente.2510.d

	is_triggered_only = yes

	option = {
		name = entente.2510.a
		ENT = { country_event = entente.2511 }
	}
	option = {
		name = entente.2510.f
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = entente.2511
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2511" }
	title = entente.2511.t
	desc = entente.2511.d

	is_triggered_only = yes

	option = {
		name = entente.2511.a
		FROM = {
			white_peace_with_ROOT = yes
		}
		if = {
			limit = {
				NEE = {
					is_in_faction_with = ENT
				}
			}
			FROM = {
				annex_country = {
					target = NEE
				}
			}
		}
		if = {
			limit = {
				ALA = {
					is_in_faction_with = ENT
				}
			}
			FROM = {
				annex_country = {
					target = ALA
				}
			}
		}
	}
	option = {
		name = entente.2511.b
		ai_chance = {
			factor = 0 
		}
		add_stability = -0.1
	}
}

# Entente leader has been invaded
country_event = {
	id = entente.253
	title = entente.253.t
	desc = entente.253.d
	picture = GFX_report_event_canada_army

	trigger = {
		tag = ENT
		is_faction_leader = yes
		NOT = {
			tag = event_target:KR_king_base
			has_idea = CAN_rally_the_country
			has_idea = CAN_darkest_hour
			has_global_flag = KR_entente_collapse
		}
		any_owned_state = {
			is_core_of = ROOT
			controller = { has_war_with = ROOT }
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.253"
		hidden_effect = {
			random_owned_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_controlled_by = ROOT }
				}
				controller = {
					save_event_target_as = invader
				}
			}
			if = {
				limit = { has_idea = CAN_all_hands_on_deck_idea }
				swap_ideas = {
					remove_idea = CAN_all_hands_on_deck_idea
					add_idea = CAN_darkest_hour
				}
			}
			else_if = {
				limit = { has_idea = has_scripted_peace }
				swap_ideas = {
					remove_idea = has_scripted_peace
					add_idea = CAN_darkest_hour
				}
			}
			else = {
				add_ideas = CAN_darkest_hour
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = entente.253.a
		effect_tooltip = {
			add_ideas = CAN_darkest_hour
		}
	}
}

# Entente leader collapses
country_event = {
	id = entente.254
	title = entente.254.t
	picture = GFX_report_event_CAN_army2

	desc = {
		text = entente.254.d.transfer
		trigger = { has_global_flag = KR_entente_transfer }
	}
	desc = {
		text = entente.254.d.collapse
		trigger = { has_global_flag = KR_entente_collapse }
	}

	trigger = {
		tag = ENT
		has_war = yes
		is_faction_leader = yes
		has_idea = CAN_darkest_hour
		OR = {
			has_capitulated = yes
			surrender_progress > 0.8
		}
		NOT = {
			AND = {
				tag = CAN
				is_subject = no
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
				CAN_can_surrender_to_america = yes
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.254"
		hidden_effect = {
			#find an appropriate new entente leader
			CAN_find_entente_leader = yes
		}
	}

	option = {
		name = entente.254.a
		add_stability = -0.10
		add_political_power = -200
		if = {
			limit = { has_global_flag = KR_entente_transfer }
			clr_global_flag = KR_entente_transfer
			event_target:entente_transfer_to = {
				CAN_transfer_entente_leader = yes
				hidden_effect = {
					news_event = { id = entente.255 hours = 8 }
					if = {
						limit = { has_global_flag = CAN_iedc_created }
						ROOT = { CAN_remove_from_iedc = yes }
					}
					remove_from_faction = ROOT
				}
			}
			remove_ideas = CAN_darkest_hour
		}
		else = {
			hidden_effect = {
				# inform Entente members
				every_other_country = {
					limit = { is_in_faction_with = ROOT }
					set_country_flag = KR_was_in_entente
					country_event = entente.257
				}
				# inform rest of the world
				random_other_country = {
					limit = {
						is_ai = yes
						NOT = { has_country_flag = KR_was_in_entente }
					}
					news_event = entente.256
				}
				# peace out the Entente
				every_country = {
					limit = {
						has_war = yes
						is_subject = no
						any_enemy_country = { has_country_flag = KR_was_in_entente }
						OR = {
							is_in_faction = no
							is_faction_leader = yes
						}
					}
					country_event = { id = entente.258 hours = 3 }
				}
				# disband ISAC if created
				if = {
					limit = { has_global_flag = CAN_isac_created }
					remove_from_tech_sharing_group = entente_research
					clr_global_flag = CAN_isac_created
				}
				# disband IEDC if created
				if = {
					limit = { has_global_flag = CAN_iedc_created }
					CAN_remove_from_iedc = yes
					clr_global_flag = CAN_iedc_created
				}
				### Restore control for countries controlling states owned by non-enemies
				restore_control_of_all_non_enemy_states = yes
			}
			dismantle_faction = yes
		}
	}
}

# News: Entente leadership transferred
news_event = {
	id = entente.255
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.255" }
	title = entente.255.t
	desc = entente.255.d
	picture = GFX_news_event_canada_army

	is_triggered_only = yes
	major = yes

	show_major = {
		NOT = { tag = FROM }
	}

	option = {
		name = entente.255.a
		trigger = {
			tag = event_target:entente_transfer_to
		}
	}
	option = {
		name = entente.255.b
		trigger = {
			is_in_faction_with = event_target:entente_transfer_to
			NOT = { tag = event_target:entente_transfer_to }
		}
	}
	option = {
		name = entente.255.c
		trigger = {
			has_war_with = event_target:entente_transfer_to
		}
	}
	option = {
		name = entente.255.e
		trigger = {
			NOT = {
				has_war_with = event_target:entente_transfer_to
				is_in_faction_with = event_target:entente_transfer_to
				tag = event_target:entente_transfer_to
			}
		}
	}
}

# News: Entente collapses
news_event = {
	id = entente.256
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.256" }
	title = entente.256.t
	desc = entente.256.d
	picture = GFX_news_event_canada_army

	is_triggered_only = yes
	major = yes

	show_major = {
		NOT = {
			tag = FROM
			is_in_faction_with = FROM
		}
	}

	option = {
		name = entente.256.a
		trigger = {
			has_war_with = FROM
		}
	}
	option = {
		name = entente.256.b
		trigger = {
			NOT = { has_war_with = FROM }
		}
	}
}

# Entente member informed of collapse
country_event = {
	id = entente.257
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.257" }
	title = entente.257.t
	desc = entente.257.d
	picture = GFX_report_event_CAN_army2

	is_triggered_only = yes

	option = {
		name = entente.257.a
		add_stability = -0.10
		add_political_power = -100
		if = {
			limit = { is_subject_of = FROM }
			overlord = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_free
				}
			}
		}
		if = {
			limit = { is_in_tech_sharing_group = entente_research }
			remove_from_tech_sharing_group = entente_research
		}
		if = {
			limit = {
				has_global_flag = CAN_iedc_created
				is_in_array = { global.iedc_members = ROOT }
			}
			CAN_remove_from_iedc = yes
		}
	}
}

# Hidden event to peace out Entente members
country_event = {
	id = entente.258

	is_triggered_only = yes
	hidden = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.258"
		# get rid of ideas
		if = {
			limit = {
				FROM = { has_idea = CAN_rally_the_country }
			}
			FROM = { remove_ideas = CAN_rally_the_country }
		}
		if = {
			limit = {
				FROM = { has_idea = CAN_darkest_hour }
			}
			FROM = { remove_ideas = CAN_darkest_hour }
		}

		# First European faction leaders peace out with any non-neighbors outside of Europe other than National France
		if = {
			limit = {
				is_in_europe = yes
				is_faction_leader = yes
			}
			every_country = {
				limit = {
					has_country_flag = KR_was_in_entente
					has_war_with = ROOT
					NOT = {
						tag = NFA
						AND = {
							tag = NZL
							AST = { is_in_faction_with = ROOT }
						}
						has_capitulated = yes
						is_in_europe = yes
						any_owned_state = {
							is_core_of = PREV
							any_neighbor_state = {
								is_owned_by_ROOT_or_ally = yes
							}
						}
						any_owned_state = {
							is_coastal = yes
							is_controlled_by_ROOT_or_ally = yes
						}
					}
				}
				white_peace = ROOT
			}
		}
		# Then Asian faction leaders peace out with any non-neighbors outside of Asia
		else_if = {
			limit = {
				is_in_asia = yes
				is_faction_leader = yes
			}
			every_country = {
				limit = {
					has_country_flag = KR_was_in_entente
					has_war_with = ROOT
					NOT = {
						has_capitulated = yes
						is_in_asia = yes
						AND = {
							tag = NZL
							AST = { is_in_faction_with = ROOT }
						}
						AND = {
							tag = HOL
							ROOT = { tag = INS }
						}
						any_owned_state = {
							is_core_of = PREV
							any_neighbor_state = {
								is_owned_by_ROOT_or_ally = yes
							}
						}
						any_owned_state = {
							is_coastal = yes
							is_controlled_by_ROOT_or_ally = yes
						}
					}
				}
				white_peace = ROOT
			}
		}
		# Then everyone else peaces out with any non-neighbors not on the same continent
		else = {
			every_country = {
				limit = {
					has_country_flag = KR_was_in_entente
					has_war_with = ROOT
					NOT = {
						has_capitulated = yes
						AND = {
							same_continent_as_ROOT = yes
							NOT = { tag = HAW }
						}
						AND = {
							tag = HOL
							ROOT = { tag = INS }
						}
						any_owned_state = {
							is_core_of = PREV
							any_neighbor_state = {
								is_owned_by_ROOT_or_ally = yes
							}
						}
						any_owned_state = {
							is_coastal = yes
							is_controlled_by_ROOT_or_ally = yes
						}
					}
				}
				white_peace = ROOT
			}
		}
	}
}

# News: King flees to other country
news_event = {
	id = entente.259
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.259" }
	title = entente.259.t
	picture = GFX_news_event_CAN_fleeing

	desc = {
		text = entente.259.d.transfer
		trigger = { has_global_flag = KR_entente_transfer }
	}
	desc = {
		text = entente.259.d.collapse
		trigger = { has_global_flag = KR_entente_collapse }
	}
	desc = {
		text = entente.259.d.notleader
		trigger = {
			NOT = {
				has_global_flag = KR_entente_transfer
				has_global_flag = KR_entente_collapse
			}
		}
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		NOT = { tag = FROM }
	}

	option = {
		name = entente.259.a
		trigger = {
			tag = event_target:king_flees_to
		}
	}
	option = {
		name = entente.259.b
		trigger = {
			is_in_faction_with = event_target:king_flees_to
			NOT = { tag = event_target:king_flees_to }
		}
	}
	option = {
		name = entente.259.c
		trigger = {
			has_war_with = event_target:king_flees_to
		}
	}
	option = {
		name = entente.259.e
		trigger = {
			NOT = {
				has_war_with = event_target:king_flees_to
				is_in_faction_with = event_target:king_flees_to
				tag = event_target:king_flees_to
			}
		}
	}
}

# News: King captured
news_event = {
	id = entente.260
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.260" }
	title = entente.260.t
	picture = GFX_news_event_eng_decolonization

	desc = {
		text = entente.260.d.transfer
		trigger = { has_global_flag = KR_entente_transfer }
	}
	desc = {
		text = entente.260.d.collapse
		trigger = { has_global_flag = KR_entente_collapse }
	}
	desc = {
		text = entente.260.d.notleader
		trigger = {
			NOT = {
				has_global_flag = KR_entente_transfer
				has_global_flag = KR_entente_collapse
			}
		}
	}

	is_triggered_only = yes
	major = yes

	show_major = {
		NOT = { tag = FROM }
	}

	option = {
		name = entente.260.a
		trigger = {
			is_in_faction_with = FROM
		}
	}
	option = {
		name = entente.260.b
		trigger = {
			has_war_with = FROM
		}
	}
	option = {
		name = entente.260.c
		trigger = {
			NOT = {
				has_war_with = FROM
				is_in_faction_with = FROM
			}
		}
	}
}

# The King returns to Canada/UK
news_event = {
	id = entente.261
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.261" }
	title = entente.261.t
	desc = entente.261.d
	picture = GFX_news_event_royal_visit

	is_triggered_only = yes
	major = yes

	option = {
		name = entente.261.a
		trigger = { tag = FROM }
	}
	option = {
		name = entente.261.b
		trigger = { tag = event_target:king_come_from }
	}
	option = {
		name = entente.261.c
		trigger = {
			is_in_faction_with = FROM
			NOT = {
				tag = FROM
				tag = event_target:king_come_from
			}
		}
	}
	option = {
		name = entente.261.e
		trigger = {
			has_war_with = FROM
			NOT = { tag = event_target:king_come_from }
		}
	}
	option = {
		name = entente.261.f
		trigger = {
			NOT = {
				tag = FROM
				is_in_faction_with = FROM
				has_war_with = FROM
				tag = event_target:king_come_from
			}
		}
	}
}

# The Halifax Conference - Nation invited (fired by decision OR Germany focus tree)
country_event = {
	id = entente.300
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.300" }
	title = {
		text = entente.300.t_canada
		trigger = {
			tag = CAN
		}
	}
	title = {
		text = entente.300.t_germany
		trigger = {
			tag = GER
		}
	}
	desc = {
		text = entente.300.d_canada
		trigger = {
			tag = CAN
		}
	}
	desc = {
		text = entente.300.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	option = {
		name = entente.300.a #Accept
		FROM = {
			country_event = { id = entente.302 days = 3 }
		}
		if = {
			limit = { tag = GER }
			set_country_flag = GER_Halifax_Started
		}
	}
	option = {
		name = entente.300.b #Refuse
		trigger = { is_ai = no }
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.301 days = 3 }
		}
	}
}

# Invitation refused
country_event = {
	id = entente.301
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.301" }
	title = {
		text = entente.301.t_canada
		trigger = {
			tag = CAN
		}
	}
	title = {
		text = entente.301.t_germany
		trigger = {
			tag = GER
		}
	}
	desc = {
		text = entente.301.d_canada
		trigger = {
			tag = CAN
		}
	}
	desc = {
		text = entente.301.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_GER_reichstag2

	is_triggered_only = yes

	option = {
		name = entente.301.a
		add_political_power = -25
		GER = {
			set_country_flag = GER_Halifax_Failure
		}
	}
}

# Invitation accepted
country_event = {
	id = entente.302
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.302" }
	title = {
		text = entente.302.t_canada
		trigger = {
			tag = CAN
		}
	}
	title = {
		text = entente.302.t_germany
		trigger = {
			tag = GER
		}
	}
	desc = {
		text = entente.302.d_canada
		trigger = {
			tag = CAN
		}
	}
	desc = {
		text = entente.302.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_GER_reichstag2

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
        name = entente.302.a
        add_political_power = 25
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = {
                        tag = ENT
                        tag = GER
                    }
                    OR = {
                        is_in_faction_with = ENT
                        is_in_faction_with = GER
                    }
                }
                country_event = { id = entente.303 days = 1 } #inform everyone
            }
            country_event = { id = entente.304 days = 8 } #conference begins
        }
    }
}

# The Halifax Conference - scheduled to begin
country_event = {
	id = entente.303
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.303" }
	title = entente.303.t
	desc = entente.303.d
	picture = GFX_report_event_CAN_parliament1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.303.a
	}
}

# The Halifax Conference - begins
country_event = {
	id = entente.304
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.304" }
	title = entente.304.t
	desc = entente.304.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes
	major = yes

	show_major = {
		OR = {
			is_in_faction_with = ENT
			is_in_faction_with = GER
		}
	}

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.304.a
		set_global_flag = GER_Halifax_Started
		if = {
			limit = {
				OR = {
					has_global_flag = MAF_collapse
					NOT = {
						country_exists = GEA
					}
				}
			}	
			set_global_flag = GER_Halifax_Colonies_Resolved
			custom_effect_tooltip = GER_Halifax_Colonies_Chaos
		}
	}
}

country_event = {
	id = entente.30701
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30701" }
	title = entente.30701.t
	desc = {
		text = entente.30701.d_france
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30701.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30701.a # Outright Refuse Entirely (France)
		trigger = {
			tag = NFA
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0
				GER = {
					is_ai = no
				}
				has_game_rule = {
					rule = CAN_halifax_conference_rule
					option = CAN_HALIFAX_FAVOR_GERMANY
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.30702 days = 1 }
		}
	}
	
	option = {
		name = entente.30701.b # Demand Nancy Instead (France)
		trigger = {
			tag = NFA
		}
		ai_chance = {
			factor = 40
		}
		GER = {
			country_event = { id = entente.30703 days = 1 }
		}
	}
	
	option = {
		name = entente.30701.c # Accept With No Compromise (France)
		trigger = {
			tag = NFA
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 1000
				GER = {
					has_country_flag = GER_Halifax_Nice_Boy
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_game_rule = {
						rule = CAN_halifax_conference_rule
						option = CAN_HALIFAX_FAVOR_GERMANY
					}
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = { id = entente.30704 days = 1 }
		}
	}
	
	option = {
		name = entente.30701.e # Refuse Outright (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NFA = {
					is_ai = no
				}
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.30702 days = 1 }
		}
	}
	
	option = {
		name = entente.30701.f # Will They Take Nancy Tho (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 40
		}
		FROM = {
			country_event = { id = entente.30703 days = 1 }
		}
	}
	
	option = {
		name = entente.30701.g # We can do Alsace Autonomy, Best Ever (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 1000
				OR = {
					CAN = { has_country_flag = GER_Halifax_Nice_Boy }
					NFA = { has_country_flag = GER_Halifax_Nice_Boy }
				}
			}
		}
		FROM = {
			country_event = { id = entente.30705 days = 1 }
		}
	}
}

country_event = {
	id = entente.30702 # Total Refusal on AL
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30702" }
	title = entente.30702.t
	desc = {
		text = entente.30702.d_france
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30702.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30702.a # Man, fuck this.
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_france_refuse_alsace
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
	
	option = {
		name = entente.30702.b # Well, fine, we'll take Nancy.
		trigger = {
			NOT = {
				tag = GER
			}
		}
		GER = {
			country_event = { id = entente.30704 days = 1 }
		}
	}
}

country_event = {
	id = entente.30703 # Nancy Compromise
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30703" }
	title = entente.30703.t
	desc = {
		text = entente.30703.d_france
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30703.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30703.a # Sounds good.
		clr_global_flag = GER_Halifax_Negotiating
		set_country_flag = GER_Halifax_Nice_Boy
		set_global_flag = ENT_france_agree_alsace
		set_global_flag = GER_Halifax_AL_Resolved
		set_global_flag = NFA_Halifax_Nancy
		custom_effect_tooltip = NFA_Halifax_Nancy_tt
	}
	
	option = {
		name = entente.30703.b # On second thought... No.
		trigger = {
			is_ai = no
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_france_refuse_alsace
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
}

country_event = {
	id = entente.30704 # France Gives In
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30704" }
	title = entente.30704.t
	desc = entente.30704.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30704.a # Great!
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = ENT_france_agree_alsace
		set_global_flag = GER_Halifax_AL_Resolved
	}
}

country_event = {
	id = entente.30705 # Alsatian Autonomy + Nancy + Reparations
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30705" }
	title = entente.30705.t
	desc = entente.30705.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30705.a # Well, alright!
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = ENT_france_agree_alsace
		set_global_flag = GER_Halifax_AL_Resolved
		set_global_flag = NFA_Halifax_Autonomy
		set_global_flag = NFA_Halifax_Nancy
		custom_effect_tooltip = NFA_Halifax_Nancy_tt
		28 = {
			add_state_modifier = {
				modifier = {
					recruitable_population_factor = -0.50
					local_resources = -0.30
				}
			}
		}
		add_timed_idea = {
			idea = GER_French_Reparations
			days = 365
		}
	}
	
	option = {
		name = entente.30705.b # Intolerable.
		trigger = {
			is_ai = no
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_france_refuse_alsace
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
}

country_event = {
	id = entente.30706 # British Colonial Question
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30706" }
	title = entente.30706.t
	desc = {
		text = entente.30706.d_canada
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30706.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30706.a # We cannot relinquish our colonial claims! (Canada)
		trigger = {
			tag = CAN
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0
				GER = {
					is_ai = no
				}
				has_game_rule = {
					rule = CAN_halifax_conference_rule
					option = CAN_HALIFAX_FAVOR_GERMANY
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.30707 days = 1 }
		}
	}
	
	option = {
		name = entente.30706.b # How about only the African ones? (Canada)
		trigger = {
			tag = CAN
		}
		ai_chance = {
			factor = 40
		}
		GER = {
			country_event = { id = entente.30708 days = 1 }
		}
		set_country_flag = GER_Halifax_Nice_Boy
	}
	
	option = {
		name = entente.30706.c # Fine, we'll live without them (Canada)
		trigger = {
			tag = CAN
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 1000
				GER = {
					has_country_flag = GER_Halifax_Nice_Boy
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_game_rule = {
						rule = CAN_halifax_conference_rule
						option = CAN_HALIFAX_FAVOR_GERMANY
					}
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = { id = entente.30709 days = 1 }
		}
		set_country_flag = GER_Halifax_Nice_Boy
	}
	
	option = {
		name = entente.30706.e # You lost them in 1925 pal (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				CAN = {
					is_ai = no
				}
			}
		}
		FROM = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.30707 days = 1 }
		}
	}
	
	option = {
		name = entente.30706.f # How about just the African ones? (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 20
		}
		FROM = {
			country_event = { id = entente.30708 days = 1 }
		}
		set_country_flag = GER_Halifax_Nice_Boy
	}
	
	option = {
		name = entente.30706.g # We will concede. (Germany)
		trigger = {
			tag = GER
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 35
				OR = {
					CAN = { has_country_flag = GER_Halifax_Nice_Boy }
					NFA = { has_country_flag = GER_Halifax_Nice_Boy }
				}
			}
		}
		FROM = {
			country_event = { id = entente.30710 days = 1 }
		}
		set_country_flag = GER_Halifax_Nice_Boy
	}
}

country_event = {
	id = entente.30707 # Total Refusal on Colonies
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30707" }
	title = entente.30707.t
	desc = {
		text = entente.30707.d_canada
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30707.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30707.a # Man, fuck this.
		ai_chance = {
			factor = 30
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_refuse_colonies
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
	
	option = {
		name = entente.30707.b # Let's just try the African compromise.
		trigger = { tag = CAN }
		ai_chance = {
			factor = 10
		}
		GER = {
			country_event = { id = entente.30708 days = 1 }
		}
	}
	
	option = {
		name = entente.30707.c # Let's just try the African compromise.
		trigger = { tag = GER }
		ai_chance = {
			factor = 10
		}
		FROM = {
			country_event = { id = entente.30708 days = 1 }
		}
	}
}

country_event = {
	id = entente.30708 # Africa Compromise
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30708" }
	title = entente.30708.t
	desc = {
		text = entente.30708.d_canada
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
	}
	desc = {
		text = entente.30708.d_germany
		trigger = {
			tag = GER
		}
	}
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30708.a # Sounds good.
		clr_global_flag = GER_Halifax_Negotiating
		set_country_flag = GER_Halifax_Nice_Boy
		set_global_flag = ENT_agree_colonies
		set_global_flag = GER_Halifax_Colonies_Resolved
		set_global_flag = CAN_Halifax_Colonies_Africa
	}
	
	option = {
		name = entente.30708.b # On second thought... No.
		trigger = {
			is_ai = no
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_refuse_colonies
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
}

country_event = {
	id = entente.30709 # Canada Gives In on Colonies
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30709" }
	title = entente.30709.t
	desc = entente.30709.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30709.a # Awesome
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = ENT_agree_colonies
		set_global_flag = GER_Halifax_Colonies_Resolved
	}
}

country_event = {
	id = entente.30710 # Germany Surrenders All Colonies
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30710" }
	title = entente.30710.t
	desc = entente.30710.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30710.a # Awesome
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = ENT_agree_colonies
		set_global_flag = GER_Halifax_Colonies_Resolved
		set_global_flag = CAN_Halifax_Colonies_Africa
		set_global_flag = CAN_Halifax_Colonies_Asia
	}
}

country_event = {
	id = entente.30711 # Entente in Mitteleuropa
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30711" }
	title = entente.30711.t
	desc = entente.30711.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30711.a # What? No!
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 0
				GER = {
					is_ai = no
				}
				has_game_rule = {
					rule = CAN_halifax_conference_rule
					option = CAN_HALIFAX_FAVOR_GERMANY
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = { id = entente.30712 days = 1 }
		}
	}
	
	option = {
		name = entente.30711.b # How about we just set up a preferential trade deal instead?
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
		ai_chance = {
			factor = 40
		}
		GER = {
			country_event = { id = entente.30713 days = 1 }
		}
		set_country_flag = GER_Halifax_Nice_Boy
	}
	
	option = {
		name = entente.30711.c # Oh well, it seems like a fun club anyway
		trigger = {
			OR = {
				tag = CAN
				tag = NFA
			}
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 1000
				GER = {
					has_country_flag = GER_Halifax_Nice_Boy
				}
			}
			modifier = {
				factor = 0
				NOT = {
					has_game_rule = {
						rule = CAN_halifax_conference_rule
						option = CAN_HALIFAX_FAVOR_GERMANY
					}
				}
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = { id = entente.30714 days = 1 }
		}
		set_country_flag = ENT_entente_agree_mittel
		set_country_flag = GER_Halifax_Nice_Boy
	}
}

country_event = {
	id = entente.30712 # Entente Total Refusal on ME
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30712" }
	title = entente.30712.t
	desc = entente.30712.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30712.a # Man, fuck this.
		ai_chance = {
			factor = 30
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_entente_refuse_mittel
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
	
	option = {
		name = entente.30712.b # Well, whatever.
		trigger = { tag = GER }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1000
				OR = {
					CAN = { is_ai = no }
					NFA = { is_ai = no }
				}
			}
		}
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = GER_Halifax_Mitteleuropa_Resolved
		set_country_flag = GER_Halifax_Nice_Boy
		FROM = {
			country_event = { id = entente.30715 days = 1 }
		}
	}
}

country_event = {
	id = entente.30713 # Economic Compromise
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30713" }
	title = entente.30713.t
	desc = entente.30713.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30713.a # Sounds good.
		clr_global_flag = GER_Halifax_Negotiating
		set_country_flag = GER_Halifax_Nice_Boy
		set_global_flag = GER_Halifax_Mitteleuropa_Economy
		set_global_flag = GER_Halifax_Mitteleuropa_Resolved
		add_timed_idea = {
			idea = GER_Entente_Economic_Boons
			days = 365
		}
	}
	
	option = {
		name = entente.30713.b # On second thought... No.
		trigger = {
			is_ai = no
		}
		clr_global_flag = GER_Halifax_Started
		ENT = {
			set_country_flag = ENT_refuse_colonies
			news_event = entente.320
			hidden_effect = { country_event = entente.328 }
		}
	}
}

country_event = {
	id = entente.30714 # Entente Will Join Mitteleuropa
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30714" }
	title = entente.30714.t
	desc = entente.30714.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30714.a # Awesome
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = GER_Halifax_Mitteleuropa_Join
		set_global_flag = GER_Halifax_Mitteleuropa_Resolved
	}
}

country_event = {
	id = entente.30715 # Germany Relinquishes ME Demand
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.30715" }
	title = entente.30715.t
	desc = entente.30715.d
	picture = GFX_report_event_generic_conference1

	is_triggered_only = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.30715.a # Awesome
		clr_global_flag = GER_Halifax_Negotiating
		set_global_flag = GER_Halifax_Mitteleuropa_Resolved
	}
}

# Halifax Conference - Conference succeeds
news_event = {
	id = entente.319
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.319" }
	title = entente.319.t
	desc = entente.319.d
	picture = GFX_news_event_CAN_conference

	is_triggered_only = yes
	major = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}

	option = {
		name = entente.319.a
		trigger = { tag = ENT }
		effect_tooltip = {
			add_political_power = 50
			if = {
				limit = { has_global_flag = ENT_france_agree_alsace }
				28 = { remove_claim_by = NFA }
			}
			every_country = {
				limit = { is_in_faction_with = GER }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
					}
					give_military_access = ROOT
				}
			}
		}
	}
	option = {
		name = entente.319.b
		trigger = { tag = GER }
		effect_tooltip = {
			if = {
				limit = {
					ENT = { has_global_flag = ENT_france_agree_alsace }
					28 = { is_claimed_by = NFA }
				}
				28 = { remove_claim_by = NFA }
			}
			every_country = {
				limit = { is_in_faction_with = ENT }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
					}
					give_military_access = ROOT
				}
			}
		}
	}
	option = {
		name = entente.319.c
		trigger = {
			NOT = {
				tag = ENT
				tag = GER
			}
			is_in_faction_with = ENT
		}
		effect_tooltip = {
			add_political_power = 25
			if = {
				limit = {
					ENT = { has_country_flag = ENT_france_agree_alsace }
					28 = { is_claimed_by = NFA }
				}
				28 = { remove_claim_by = NFA }
			}
			every_country = {
				limit = { is_in_faction_with = GER }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
					}
					give_military_access = ROOT
				}
			}
		}
	}
	option = {
		name = entente.319.c
		trigger = {
			NOT = {
				tag = ENT
				tag = GER
			}
			is_in_faction_with = GER
		}
		effect_tooltip = {
			add_political_power = 25
			if = {
				limit = {
					ENT = { has_country_flag = ENT_france_agree_alsace }
					28 = { is_claimed_by = NFA }
				}
				28 = { remove_claim_by = NFA }
			}
			every_country = {
				limit = { is_in_faction_with = ENT }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
					}
					give_military_access = ROOT
				}
			}
		}
	}
	option = {
		name = entente.319.e
		trigger = {
			has_socialist_government = yes
			NOT = {
				is_in_faction_with = ENT
				is_in_faction_with = GER
			}
		}
	}
	option = {
		name = entente.319.f
		trigger = {
			NOT = {
				has_socialist_government = yes
				is_in_faction_with = ENT
				is_in_faction_with = GER
			}
		}
	}
}

# Halifax Conference - Conference ends with disagreement
news_event = {
	id = entente.320
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.320" }
	title = entente.320.t
	picture = GFX_news_event_CAN_conference

	desc = {
		text = entente.320.d.alsace
		trigger = { ENT = { has_country_flag = ENT_france_refuse_alsace } }
	}
	desc = {
		text = entente.320.d.mittel
		trigger = { ENT = { has_country_flag = ENT_entente_refuse_mittel } }
	}
	desc = {
		text = entente.320.d.colonies
		trigger = { ENT = { has_country_flag = ENT_refuse_colonies } }
	}
	desc = {
		text = entente.320.d.northire
		trigger = { ENT = { has_country_flag = ENT_britain_refuse_northire } }
	}

	is_triggered_only = yes
	major = yes

	trigger = {
		CAN = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				GER = { has_completed_focus = GER_Halifax_Conference }
			}
			NOT = { has_war_with = GER }
		}
		GER = {
			is_faction_leader = yes
			OR = {
				has_war_with = FRA
				has_completed_focus = GER_Halifax_Conference
			}
		}
	}
	
	immediate = {
		GER = {
			set_country_flag = GER_Halifax_Failure
		}
	}

	option = {
		name = entente.320.a
		trigger = { tag = ENT }
	}
	option = {
		name = entente.320.b
		trigger = { tag = GER }
	}
	option = {
		name = entente.320.c
		trigger = {
			NOT = {
				tag = ENT
				tag = GER
			}
			OR = {
				is_in_faction_with = ENT
				is_in_faction_with = GER
			}
		}
	}
	option = {
		name = entente.320.e
		trigger = {
			has_socialist_government = yes
			NOT = {
				is_in_faction_with = ENT
				is_in_faction_with = GER
			}
		}
	}
	option = {
		name = entente.320.f
		trigger = {
			NOT = {
				has_socialist_government = yes
				is_in_faction_with = ENT
				is_in_faction_with = GER
			}
		}
	}
}

# Promises dropped if war between Germany/Entente begins
country_event = {
	id = entente.321
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.321" }
	title = entente.321.t
	desc = entente.321.d
	picture = GFX_report_event_generic_conference2

	trigger = {
		OR = {
			tag = GER
			tag = NFA
			tag = CAN
			tag = GBR
		}
		if = {
			limit = { tag = GER }
			has_global_flag = GER_stay_out_france_uk
			is_faction_leader = yes
			has_war_with = ENT
		}
		if = {
			limit = { tag = CAN }
			NOT = { country_exists = GBR }
		}
		if = {
			limit = {
				OR = {
					tag = CAN
					tag = GBR
				}
			}
			OR = {
				has_global_flag = ENT_britain_agree_northire
				has_global_flag = ENT_agree_colonies
			}
			has_war_with = GER
		}
		if = {
			limit = { tag = NFA }
			OR = {
				has_global_flag = ENT_france_agree_alsace
				has_global_flag = ENT_entente_agree_mittel
				has_global_flag = ENT_agree_colonies
			}
			has_war_with = GER
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = entente.321.a
		if = {
			limit = { tag = GER }
			clr_global_flag = GER_stay_out_france_uk
		}
		if = {
			limit = {
				OR = {
					tag = CAN
					tag = GBR
				}
			}
			clr_global_flag = ENT_britain_agree_northire
			clr_global_flag = ENT_agree_colonies
		}
		if = {
			limit = {
				tag = NFA
				has_global_flag = ENT_france_agree_alsace
			}
			clr_global_flag = ENT_france_agree_alsace
			if = {
				limit = { 28 = { is_not_claim_or_core_of_ROOT = yes } }
				28 = { add_claim_by = NFA }
			}
		}
		if = {
			limit = { tag = NFA }
			clr_global_flag = ENT_entente_agree_mittel
			clr_global_flag = ENT_agree_colonies
		}
	}
}

# Return French territory?
country_event = {
	id = entente.322
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.322" }
	title = entente.322.t
	desc = entente.322.d
	picture = GFX_report_event_generic_conference2

	trigger = {
		tag = GER
		has_global_flag = GER_stay_out_france_uk
		NOT = { country_exists = FRA }
		OR = {
			NFA = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
			ENT = {
				exists = yes
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}
		any_owned_state = {
			is_not_claim_or_core_of_ROOT = yes
			is_european_france = yes
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = entente.322.a
		if = {
			limit = {
				NFA = {
					exists = yes
					NOT = { has_war_with = ROOT }
				}
			}
			every_owned_state = {
				limit = {
					is_not_claim_or_core_of_ROOT = yes
					is_european_france = yes
				}
				NFA = { transfer_state = PREV }
			}
		}
		else = {
			every_owned_state = {
				limit = {
					is_not_claim_or_core_of_ROOT = yes
					is_european_france = yes
				}
				ENT = { transfer_state = PREV }
			}
		}
	}
	option = {
		name = entente.322.b
		trigger = { is_ai = no }
		add_political_power = -250
		add_stability = -0.10
		clr_global_flag = GER_stay_out_france_uk
		clr_global_flag = ENT_britain_agree_northire
		clr_global_flag = ENT_agree_colonies
		clr_global_flag = ENT_entente_agree_mittel
		if = {
			limit = { has_global_flag = ENT_france_agree_alsace }
			clr_global_flag = ENT_france_agree_alsace
			28 = { add_claim_by = NFA }
		}
		every_country = {
			limit = { is_in_faction_with = ENT }
			country_event = entente.324
		}
	}
}

# Return British territory?
country_event = {
	id = entente.323
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.323" }
	title = entente.323.t
	desc = entente.323.d
	picture = GFX_report_event_generic_conference2

	trigger = {
		tag = GER
		has_global_flag = GER_stay_out_france_uk
		NOT = { country_exists = ENG }
		OR = {
			GBR = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
			ENT = {
				exists = yes
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}
		any_owned_state = {
			is_not_claim_or_core_of_ROOT = yes
			is_british_isles = yes
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = entente.323.a
		if = {
			limit = {
				GBR = {
					exists = yes
					NOT = { has_war_with = ROOT }
				}
			}
			every_owned_state = {
				limit = {
					is_not_claim_or_core_of_ROOT = yes
					is_british_isles = yes
				}
				GBR = { transfer_state = PREV }
			}
		}
		else = {
			every_owned_state = {
				limit = {
					is_not_claim_or_core_of_ROOT = yes
					is_british_isles = yes
				}
				ENT = { transfer_state = PREV }
			}
		}
	}
	option = {
		name = entente.323.b
		trigger = { is_ai = no }
		add_political_power = -250
		add_stability = -0.10
		clr_global_flag = GER_stay_out_france_uk
		clr_global_flag = ENT_britain_agree_northire
		clr_global_flag = ENT_agree_colonies
		clr_global_flag = ENT_entente_agree_mittel
		if = {
			limit = { has_global_flag = ENT_france_agree_alsace }
			clr_global_flag = ENT_france_agree_alsace
			28 = { add_claim_by = NFA }
		}
		every_country = {
			limit = { is_in_faction_with = ENT }
			country_event = entente.324
		}
	}
}

# Germany betrays Halifax Conf terms
country_event = {
	id = entente.324
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.324" }
	title = entente.324.t
	desc = entente.324.d
	picture = GFX_report_event_generic_conference2

	is_triggered_only = yes

	option = {
		name = entente.324.a
		every_country = {
			limit = { is_in_faction_with = FROM }
			remove_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
			ROOT = {
				remove_opinion_modifier = { target = PREV modifier = CAN_halifax_conference_op }
			}
			if = {
				limit = { ROOT = { gives_military_access_to = PREV } }
				diplomatic_relation = {
					country = ROOT
					relation = military_access
					active = no
				}
			}
			if = {
				limit = { gives_military_access_to = ROOT }
				ROOT = {
					diplomatic_relation = {
						country = PREV
						relation = military_access
						active = no
					}
				}
			}
		}
	}
}

# Hidden events
country_event = {
	id = entente.325

	hidden = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.325"
		add_political_power = 50
		clr_country_flag = ENT_france_refuse_alsace
		clr_country_flag = ENT_entente_refuse_mittel
		clr_country_flag = ENT_refuse_colonies
		clr_country_flag = ENT_britain_refuse_northire
		if = {
			limit = { has_country_flag = ENT_france_agree_alsace }
			clr_country_flag = ENT_france_agree_alsace
			set_global_flag = ENT_france_agree_alsace
			28 = { remove_claim_by = NFA }
		}
		if = {
			limit = { has_country_flag = ENT_entente_agree_mittel }
			clr_country_flag = ENT_entente_agree_mittel
			set_global_flag = ENT_entente_agree_mittel
		}
		if = {
			limit = { has_country_flag = ENT_agree_colonies }
			clr_country_flag = ENT_agree_colonies
			set_global_flag = ENT_agree_colonies
		}
		if = {
			limit = { has_country_flag = ENT_britain_agree_northire }
			clr_country_flag = ENT_britain_agree_northire
			set_global_flag = ENT_britain_agree_northire
		}
		every_country = {
			limit = { is_in_faction_with = GER }
			add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
			if = {
				limit = {
					NOT = { gives_military_access_to = ROOT }
					OR = {
						any_neighbor_country = { has_war_with = ROOT }
						tag = IRE
						tag = ICE
					}
				}
				give_military_access = ROOT
			}
		}
	}
}

country_event = {
	id = entente.326

	hidden = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.326"
		clr_country_flag = GER_conf_demand_alsace
		clr_country_flag = GER_conf_demand_france_mitt
		clr_country_flag = GER_conf_demand_colonies
		clr_country_flag = GER_conf_demand_northireland
		set_global_flag = GER_stay_out_france_uk
		every_country = {
			limit = { is_in_faction_with = ENT }
			add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
			if = {
				limit = {
					NOT = { gives_military_access_to = ROOT }
					any_neighbor_country = { has_war_with = ROOT }
				}
				give_military_access = ROOT
			}
		}
	}
}

country_event = {
	id = entente.327

	hidden = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.327"
		add_political_power = 25
		if = {
			limit = { is_in_faction_with = ENT }
			every_country = {
				limit = { is_in_faction_with = GER }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
						OR = {
							any_neighbor_country = { has_war_with = ROOT }
							tag = IRE
							tag = ICE
						}
					}
					give_military_access = ROOT
				}
			}
		}
		if = {
			limit = { is_in_faction_with = GER }
			every_country = {
				limit = { is_in_faction_with = ENT }
				add_opinion_modifier = { target = ROOT modifier = CAN_halifax_conference_op }
				if = {
					limit = {
						NOT = { gives_military_access_to = ROOT }
						any_neighbor_country = { has_war_with = ROOT }
					}
					give_military_access = ROOT
				}
			}
		}
	}
}

country_event = {
	id = entente.328

	hidden = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event entente.328"
		clr_country_flag = ENT_france_refuse_alsace
		clr_country_flag = ENT_france_agree_alsace
		clr_country_flag = ENT_entente_refuse_mittel
		clr_country_flag = ENT_entente_agree_mittel
		clr_country_flag = ENT_refuse_colonies
		clr_country_flag = ENT_agree_colonies
		clr_country_flag = ENT_britain_refuse_northire
		clr_country_flag = ENT_britain_agree_northire
		GER = {
			clr_country_flag = GER_conf_demand_alsace
			clr_country_flag = GER_conf_demand_france_mitt
			clr_country_flag = GER_conf_demand_colonies
			clr_country_flag = GER_conf_demand_northireland
		}
	}
}

country_event = {
	id = entente.5000
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.5000" }
	title = entente.5000.t
	desc = entente.5000.d
	picture = GFX_report_event_KSV_helicopters

	is_triggered_only = yes
	fire_only_once = yes	

	option = {
		name = entente.5000.a
		if = {
			limit = { has_dlc_got = yes }
			complete_special_project = sp:sp_air_helicopter
			add_equipment_to_stockpile = { type = helicopter_equipment_1 amount = 100 }
		}
		else = {
			set_technology = {
				helicopter = 1
			}
			add_equipment_to_stockpile = { type = helicopter_1 amount = 100 }
		}
		hidden_effect = {
			every_country = {
				limit = {
					is_in_faction_with = CAN
					NOT = { tag = ROOT }
				}
			}
			country_event = {
				id = entente.5001
				days = 15
			}
		}
	}
}

country_event = {
	id = entente.5001
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.5001" }
	title = entente.5001.t
	desc = entente.5001.d
	picture = GFX_report_event_KSV_helicopters

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = entente.5001.a
		if = {
			limit = { has_dlc_got = yes }
			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.25
			}
		}
		else = {
			set_technology = {
				helicopter = 1
			}
			add_equipment_to_stockpile = { type = helicopter_1 amount = 25 }
		}
	}
}

country_event = { # A British proposal
	id = entente.2105
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2105" }
	title = entente.2105.t
	desc = entente.2105.d
	picture = GFX_report_event_CAN_pound

	is_triggered_only = yes

	option = { # Yes
		name = entente.2105.a
		ai_chance = {
			factor = 50
		}
		trigger = {
			NOT = {
				is_subject_of = ENT
			}
		}
		add_political_power = -25
		add_ideas = CAN_currency_idea
		GBR = {
			country_event = {
				id = entente.2106
				days = 1
			}
		}
	}
	option = { # We're a puppet...
		name = entente.2105.b
		ai_chance = {
			factor = 100
		}
		trigger = {
			is_subject_of = ENT
		}
		add_political_power = -25
		add_ideas = CAN_currency_idea
		GBR = {
			country_event = {
				id = entente.2106
				days = 1
			}
		}
	}
	option = { # No
		name = entente.2105.c
		ai_chance = {
			factor = 50
		}
		add_political_power = 25
		GBR = {
			country_event = {
				id = entente.2107
				days = 1
			}
		}
	}
}
country_event = { # A country accepts
	id = entente.2106
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2106" }
	title = entente.2106.t
	desc = entente.2106.d
	picture = GFX_report_event_CAN_pound

	is_triggered_only = yes

	option = { # Yes
		name = entente.2106.a
		add_political_power = 10
		add_opinion_modifier = {
			target = FROM
			modifier = GBR_sterling_yes
		}
	}
}
country_event = { # A country does not accept the Sterling Area
	id = entente.2107
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2107" }
	title = entente.2107.t
	desc = entente.2107.d
	picture = GFX_report_event_CAN_pound

	is_triggered_only = yes

	option = { # Yes
		name = entente.2107.a
		add_political_power = -10
		add_opinion_modifier = {
			target = FROM
			modifier = GBR_sterling_no
		}
	}
}
country_event = { # A country loses the Sterling
	id = entente.2108
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.2108" }
	title = entente.2108.t
	desc = entente.2108.d
	picture = GFX_report_event_generic_read_write

	trigger = {
		has_idea = CAN_currency_idea
		OR = {
			NOT = {
				is_in_faction_with = GBR
			}
			NOT = {
				country_exists = GBR
			}
			GBR = {
				is_subject = yes
			}
		}
	}
	fire_only_once = yes

	option = {
		name = entente.2108.a
		remove_ideas = CAN_currency_idea
	}
}

# Fate of Canadian Entente Leadership
country_event = {
	id = entente.400
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.400" }
	title = entente.400.t
	desc = {
		text = entente.400.d
		trigger = {
			NOT = {
				has_country_flag = CAN_exiles_exerted_control
			}
		}
	}
	desc = {
		text = entente.400.d_2
		trigger = {
			has_country_flag = CAN_exiles_exerted_control
		}
	}
	picture = GFX_report_event_CAN_poster2

	is_triggered_only = yes

	option = { #Take Command
		name = entente.400.a
		trigger = {
			NOT = {
				has_country_flag = CAN_entente_leadership_unavailable
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				has_government = social_conservative
			}
		}
		set_global_flag = CAN_entente_leadership
	}
	
	option = { #Accept British Leadership
		name = entente.400.b
		ai_chance = {
			factor = 50
		}
		set_country_flag = CAN_brit_leadership
		GBR = {
			set_country_flag = CAN_allowed_us_to_take_over
		}
	}
	
	option = { #Leave the Entente
		name = entente.400.c
		trigger = {
			has_country_flag = CAN_entente_leadership_unavailable
		}
		ai_chance = {
			factor = 50
		}
		custom_effect_tooltip = CAN_canada_will_work_to_become_republic
		GBR = {
			set_country_flag = CAN_allowed_us_to_take_over
		}
		hidden_effect = {
			if = {
				limit = { NOT = { has_country_flag = CAN_is_republic } }
				country_event = {
					id = canada.304
					days = 20
				}
			}
		}
	}
}

# Interventionism or Peace?
country_event = {
	id = entente.401
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.401" }
	title = entente.401.t
	desc = entente.401.d
	picture = GFX_report_event_CAN_poster

	is_triggered_only = yes

	option = { #Intervene for the Sake of Peace
		name = entente.401.a
		ai_chance = {
			factor = 50
		}
		set_country_flag = CAN_working_towards_peace
	}
	
	option = { #Please Not another World War
		name = entente.401.b
		ai_chance = {
			factor = 50
		}
		set_country_flag = CAN_interventionist
	}
}

# Germany - Canada Demands we leave Belgium 
country_event = {
	id = entente.402
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.402" }
	title = entente.402.t
	desc = entente.402.d
	picture = GFX_report_event_BEL_Belgium_Liberated

	is_triggered_only = yes

	option = { #Not a chance
		name = entente.402.a
		ai_chance = {
			factor = 80
		}
		CAN = {
			country_event = entente.403
		}
	}
	
	option = { #Why die for Belgium
		name = entente.402.b
		ai_chance = {
			factor = 20
		}
		CAN = {
			country_event = entente.404
		}
	}
}

# Germany Refuses to leave Belgium
country_event = {
	id = entente.403
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.403" }
	title = entente.403.t
	desc = entente.403.d
	picture = GFX_report_event_BEL_Belgium_Liberated

	is_triggered_only = yes

	option = { #Destroy Germany
		name = entente.403.a
		set_global_flag = CAN_german_tension
	}
}

# Germany leaves Belgium
country_event = {
	id = entente.404
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.404" }
	title = entente.404.t
	desc = entente.404.d
	picture = GFX_report_event_BEL_Belgium_Liberated

	is_triggered_only = yes

	option = { #:(
		name = entente.404.a
		BEL = {
			set_country_flag = bel_germans_went_home
			GER = {
				remove_from_faction = BEL
				end_puppet = BEL
			}
			random_unit_leader = {
				limit = { has_id = 199 }
				remove_unit_leader = yes
			}
			# White peace out if you're at war
			separate_peace_all_wars = yes
			country_event = {
				id = entente.4040 
				days = 6
			}
		}
	}
}

# Germany leaves Belgium
country_event = {
	id = entente.4040
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.4040" }
	title = entente.4040.t
	desc = entente.4040.d
	picture = GFX_report_event_BEL_Belgium_Liberated

	is_triggered_only = yes

	option = { #:(
		name = entente.4040.a
		
	}
	
	option = { #:(
		name = entente.404.b
		BEL = {
			set_country_flag = bel_germans_went_home

			remove_ideas = {
				BEL_anti_german_sentiment3
				BEL_Flandres_Lost
				BEL_Military_Struck
				BEL_Mass_Desertion
				BEL_Protest_1936
			}

			country_event = {
				id = bel.35
				days = 3
			}

			BEL = {
				set_party_name = {
					ideology = authoritarian_democrat
					long_name = BEL_Interim_Governement_party_long
					name = BEL_Interim_Governement_party
				}
				create_country_leader = {
					name = "Belgian Parliament"
					desc = "POLITICS_BELGIAN_PARLIMENT_DESC"
					picture = "gfx/leaders/BEL/Portrait_Belgium_Parliament.png"
					expire = "1.1.1"
					ideology = authoritarian_democrat_subtype
				}
				remove_all_ministers = yes
				add_ideas = BEL_Paul_Van_Zeeland_hog_sco
				add_ideas = BEL_Paul_Henri_Spaak_for_sli
				add_ideas = BEL_Joris_Van_Severen_eco_pau
				add_ideas = BEL_Abraham_Leon_sec_syn
			}
			# White peace out if you're at war
			separate_peace_all_wars = yes
		}
	}
}

# Germany - Canada Demands we leave their Colonies 
country_event = {
	id = entente.405
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.405" }
	title = entente.405.t
	desc = entente.405.d
	picture = GFX_report_event_MAF_cape_to_cairo

	is_triggered_only = yes

	option = { #Not a chance
		name = entente.405.a
		ai_chance = {
			factor = 80
		}
		CAN = {
			country_event = entente.406
		}
	}
	
	option = { #Why die for Kenya
		name = entente.405.b
		ai_chance = {
			factor = 20
		}
		CAN = {
			country_event = entente.407
		}
	}
}

# Germany Refuses to leave Former Colonies
country_event = {
	id = entente.406
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.406" }
	title = entente.406.t
	desc = entente.406.d
	picture = GFX_report_event_MAF_cape_to_cairo

	is_triggered_only = yes

	option = { #Destroy Germany
		name = entente.406.a
		set_global_flag = CAN_german_tension
	}
}

# Germany leaves Colonies
country_event = {
	id = entente.407
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.407" }
	title = entente.407.t
	desc = entente.407.d
	picture = GFX_report_event_MAF_cape_to_cairo

	is_triggered_only = yes

	option = { #Yay
		name = entente.407.a
		if = {
			limit = {
				KEN = {
					is_subject_of = MAF
				}
			}
			
			KEN = {
				overlord = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
				ENT = {
					add_to_faction = KEN
				}
				if = {
					limit = {
						NOT = { has_idea = GBR_Colonial_Government }
					}
					add_ideas = GBR_Colonial_Government
				}
				if = {
					limit = {
						has_country_flag = MAF_its_just_been_revoked
					}
					set_politics = {
						ruling_party = social_conservative
						elections_allowed = no
					}
					add_popularity = {
						ideology = social_conservative
						popularity = 0.2
					}
					set_cosmetic_tag = KEN_FREESTATE
				}
			}
		}
		if = {
			limit = {
				KEN = {
					is_subject_of = MAF
				}
			}
			NGR = {
				overlord = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
				ENT = {
					add_to_faction = NGR
				}
				if = {
					limit = {
						NOT = { has_idea = GBR_Colonial_Government }
					}
					add_ideas = GBR_Colonial_Government
				}
				set_cosmetic_tag = NGR_ENG_subject
			}
		}
		hidden_effect = {
			CIV = {
				country_event = {
					id = mittelpolitic.22
					days = 10
				}
			}
			if = {
				limit = {
					ZAM = {
						NOT = {
							has_government = national_populist
						}
					}
				}
				ZAM = {
					country_event = {
						id = mittelpolitic.23
						days = 20
					}
				}
			}
			KEN = {
				country_event = {
					id = mittelpolitic.25
					days = 34
				}
			}
		}
	}
}

# Canada extends Olive Branch
country_event = {
	id = entente.408
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.408" }
	title = entente.408.t
	desc = {
		trigger = {
			tag = GER
		}
		text = entente.408.d_germany
	}
	desc = {
		trigger = {
			tag = AUS
		}
		text = entente.408.d_austria
	}
	desc = {
		trigger = {
			tag = var:463.owner
		}
		text = entente.408.d_russia
	}
	desc = {
		trigger = {
			tag = JAP
		}
		text = entente.408.d_japan
	}
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = { #Fuck off
		name = entente.408.a
		ai_chance = {
			factor = 10
		}
		set_country_flag = ENT_REFUSED_PEACE
		add_opinion_modifier = { target = CAN modifier = KR_disapproves_of_govt }
	}
	
	option = { #Fuck off
		name = entente.408.b
		ai_chance = {
			factor = 90
		}
		add_opinion_modifier = { target = CAN modifier = KR_approves_of_govt }
		set_country_flag = ENT_ACCEPTED_PROPOSAL
		CAN = {
			add_to_variable = {
				var = CAN_leauge_of_nations_participants
				value = 1
			}
		}
	}
}

# Leauge of Nations Created
country_event = {
	id = entente.409
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente.409" }
	title = entente.409.t
	desc = {
		trigger = {
			tag = GER
		}
		text = entente.409.d_germany
	}
	desc = {
		trigger = {
			tag = AUS
		}
		text = entente.409.d_austria
	}
	desc = {
		trigger = {
			tag = var:219.owner
		}
		text = entente.409.d_russia
	}
	desc = {
		trigger = {
			tag = var:361.owner
		}
		text = entente.409.d_america
	}
	desc = {
		trigger = {
			tag = JAP
		}
		text = entente.409.d_japan
	}
	desc = {
		trigger = {
			tag = NFA
		}
		text = entente.409.d_france
	}
	desc = {
		trigger = {
			tag = NFA
		}
		text = entente.409.d_france
	}
	picture = GFX_report_event_CAN_lon_created

	is_triggered_only = yes

	option = { #Cooooool
		name = entente.409.a
		ai_chance = {
			factor = 10
		}
		
	}
	
}

### Imperial Federation Stuff ###

add_namespace = imp_fed

# Invitation to the Federation

country_event = {
	id = imp_fed.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.1" }
	title = imp_fed.1.t
	desc = imp_fed.1.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #yes
		name = imp_fed.1.a
		clr_country_flag = CAN_inviting_to_imp_fed
		ai_chance = {
			factor = 50
			modifier = {
				factor = 30
				has_country_flag = CAN_more_likely_to_imperial_federation
			}
		}
		ENT = {
			country_event = { #Accepted
				id = imp_fed.2
				days = 1
			}
		}
	}
	
	option = { #no
		name = imp_fed.1.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = -30
				has_country_flag = CAN_more_likely_to_imperial_federation
			}
		}
		trigger = {
			NOT = {
				is_subject_of = ENT
			}
		}
		ENT = { #Denied
			country_event = {
				id = imp_fed.3
				days = 1
			}
		}
		if = {
			limit = {
				tag = DEH
			}
			set_country_flag = DEH_refused_entente
		}
		if = {
			limit = {
				tag = SAF
			}
			set_country_flag = SAF_refused_entente
		}
		if = {
			limit = {
				tag = SFR
			}
			set_country_flag = SAF_refused_entente
		}
		if = {
			limit = {
				tag = AST
			}
			set_country_flag = AST_refused_entente
		}
		if = {
			limit = {
				tag = NZL
			}
			set_country_flag = NZL_refused_entente
		}
		if = {
			limit = {
				tag = NZL
			}
			set_country_flag = SAF_refused_entente
		}
	}
}

# Invitation Accepted

country_event = {
	id = imp_fed.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.2" }
	title = imp_fed.2.t
	desc = imp_fed.2.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Wonderful!
		name = imp_fed.2.a
		FROM = {
			set_country_flag = ENT_accepted_fed_proposal
		}
	}
}

# Invitation Denied

country_event = {
	id = imp_fed.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.3" }
	title = imp_fed.3.t
	desc = imp_fed.3.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Death to Them
		name = imp_fed.3.a
		effect_tooltip = {
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
		}
		FROM = {
			country_event = {
				id = imp_fed.4
				days = 4
			}
		}
	}
	
	option = { #It was fun while it lasted
		name = imp_fed.3.b
		add_stability = -0.02
		add_political_power = -20
		clr_country_flag = CAN_inviting_to_imp_fed
	}
}

# Canada is coming to kill us

country_event = {
	id = imp_fed.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.4" }
	title = imp_fed.4.t
	desc = imp_fed.4.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Throw off the Entente's Chains!
		name = imp_fed.4.a
		ai_chance = {
			factor = 50
		}
		leave_faction = yes
		separate_peace_all_wars = yes
		ENT = {
			create_wargoal = {
				type = annex_everything
				target = ROOT
			}
		}
		if = {
			limit = {
				has_country_flag = AST_refused_entente
			}
			AST_become_republic = yes
		}
		if = {
			limit = {
				has_country_flag = NZL_refused_entente
			}
			NZL_become_republic = yes
		}
		if = {
			limit = {
				has_country_flag = SAF_refused_entente
			}
			if = {
				limit = {
					has_idea = SAF_idea_great_trek_reenactment_positive
				}
				remove_ideas = SAF_idea_great_trek_reenactment_positive
			}
			else = {
				remove_ideas = SAF_idea_great_trek_reenactment_negative
			}
			add_war_support = 0.1
			custom_effect_tooltip = SAF_tt_Malan_becomes_president
			hidden_effect = {
				set_cosmetic_tag = SAF_republic
			}
			leave_faction = yes
			set_global_flag = saf_boer_war
			
			if = {
				limit = {
					has_war = yes
				}

				# first peace out with faction leaders
				every_country = {
					limit = {
						is_faction_leader = yes
						has_war_with = SAF
						has_war_with = ENT
					}
					SAF = { white_peace = PREV }
				}

				# then all non-puppets who aren't in factions
				every_country = {
					limit = {
						is_in_faction = no
						is_subject = no
						has_war_with = SAF
						has_war_with = ENT
					}
					SAF = { white_peace = PREV }
				}
			}

			if = {
				limit = {
					has_idea = SAF_wavering_dominion
				}
				remove_ideas = SAF_wavering_dominion
			}
			else_if = {
				limit = {
					has_idea = SAF_neutral_dominion
				}
				remove_ideas = SAF_neutral_dominion
			}
			
			hidden_effect = {
				create_country_leader = {
					name = "Daniel François Malan"
					desc = "POLITICS_DANIEL_MALAN_DESC"
					picture = "gfx/leaders/SAF/Portrait_SAF_Daniel_Francois_Malan.png"
					expire = "1.1.1"
					ideology = pataut_boer_nationalism_subtype
				}
			}
			if = {
				limit = {
					is_in_tech_sharing_group = entente_research
				}
				remove_from_tech_sharing_group = entente_research
			}
			if = {
				limit = {
					has_country_flag = saf_national_turned_pataut
				}
				add_popularity = { ideology = paternal_autocrat popularity = 0.1 }
			}
			else_if = {
				limit = {
					has_completed_focus = SAF_reorganise_the_national_party
				}
				add_popularity = { ideology = national_populist popularity = 0.1 }
			}
			else = {
				add_popularity = { ideology = authoritarian_democrat popularity = 0.1 }
			}
			set_politics = {
				ruling_party = paternal_autocrat
				elections_allowed = no
			}
		}
		if = {
			limit = {
				has_country_flag = DEH_refused_entente
			}
			set_country_flag = DEH_abandon_dominion
			if = {
				limit = {
					NOT = {
						has_cosmetic_tag = DEH_IND
					}
				}
				set_cosmetic_tag = DEH_IND
			}
			if = {
				limit = {
					has_government = market_liberal
				}
				DEH_election_liberal = yes
			}
			if = {
				limit = {
					has_government = social_liberal
				}
				DEH_election_swaraj = yes
			}
			if = {
				limit = {
					has_government = social_democrat
				}
				DEH_election_jinnah = yes
			}
			if = {
				limit = {
					has_government = social_conservative
				}
				DEH_election_unionist = yes
			}
		}
		FROM = {
			country_event = {
				id = imp_fed.5
				days = 4
			}
		}
		clr_country_flag = CAN_inviting_to_imp_fed
	}
	
	option = { #We have Reconsidered
		name = imp_fed.4.b
		ai_chance = {
			factor = 50
		}
		ENT = {
			country_event = { #Accepted
				id = imp_fed.2
				days = 1
			}
			change_tag_from = ROOT
		}
		clr_country_flag = CAN_inviting_to_imp_fed
	}
}

# Nope to the Nope

country_event = {
	id = imp_fed.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.5" }
	title = imp_fed.5.t
	desc = imp_fed.5.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Well Fuck them
		name = imp_fed.5.a
		
	}
}

country_event = { #Join the Fed?
	id = imp_fed.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.6" }
	title = imp_fed.6.t
	desc = imp_fed.6.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Wonderful!
		name = imp_fed.6.a
		ai_chance = {
			factor = 80
		}
		ENT = {
			country_event = imp_fed.8
			change_tag_from = ROOT
		}
	}
	
	option = { #We've changed our mind...
		name = imp_fed.6.b
		ai_chance = {
			factor = 20
		}
		trigger = {
			NOT = {
				is_subject_of = FROM
			}
		}
		ENT = {
			country_event = imp_fed.7
		}
		leave_faction = yes
		separate_peace_all_wars = yes
	}
}

country_event = { #They Pussy Out
	id = imp_fed.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.7" }
	title = imp_fed.7.t
	desc = imp_fed.7.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #The Fuck you Are
		name = imp_fed.7.a
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}
}

country_event = { #They Accept
	id = imp_fed.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.8" }
	title = imp_fed.8.t
	desc = imp_fed.8.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Cool
		name = imp_fed.8.a
		every_state = {
			limit = {
				is_core_of = FROM
			}
			ENT = {
				add_state_core = PREV
			}
		}
		every_country = {
			limit = {
				is_subject_of = FROM
			} 
			ENT = { puppet = PREV }
		}
		CAN = {
			annex_country = {
				target = FROM
				transfer_troops = yes
			}
		}
		FROM = {
			every_unit_leader = {
				set_nationality = ROOT
			}
		}
	}
}

country_event = { #Imperial Federation Formed
	id = imp_fed.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.9" }
	title = imp_fed.9.t
	desc = imp_fed.9.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Cool
		name = imp_fed.9.a
		trigger = {
			CAN_has_soccred_government = no
		}
		set_cosmetic_tag = ENT_IMPERIAL_FEDERATION
		add_stability = 0.1
		add_political_power = -100
		hidden_effect = {
			news_event = imp_fed.10
		}
	}
	
	option = { #Cool
		name = imp_fed.9.a
		trigger = {
			CAN_has_soccred_government = yes
		}
		set_cosmetic_tag = ENT_IMPERIAL_FEDERATION_HARGRAVE
		hidden_effect = {
			country_event = {
				id = imp_fed.11
				days = 16
			}
		}
		add_stability = 0.1
		add_political_power = -100
		hidden_effect = {
			news_event = imp_fed.10
		}
	}
}

news_event = { #Imp Fed News
	id = imp_fed.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event imp_fed.10"}
	title = imp_fed.10.t
	desc = imp_fed.10.d
	picture = GFX_news_event_CAN_imperial_federation

	major = yes
	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	option = {
		name = imp_fed.10.a
	}
}

country_event = { #Imperial Federation Formed Hargrave Edition
	id = imp_fed.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event imp_fed.11" }
	title = imp_fed.11.t
	desc = imp_fed.11.d
	picture = GFX_report_event_CAN_empire_map

	is_triggered_only = yes

	option = { #Cool
		name = imp_fed.11.a

	}
	
	option = { #Cool Flag
		name = imp_fed.11.b
		set_cosmetic_tag = ENT_IMPERIAL_FEDERATION_HARGRAVE2
	}
	
	option = { #Cool Name
		name = imp_fed.11.c
		set_cosmetic_tag = ENT_IMPERIAL_FEDERATION_HARGRAVE3
	}
}

add_namespace = entente_japan

# Japan in the Entente?

country_event = {
	id = entente_japan.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.1" }
	title = entente_japan.1.t
	desc = entente_japan.1.d
	picture = GFX_report_event_CAN_anglo_japanese_alliance

	is_triggered_only = yes

	option = { #yes
		name = entente_japan.1.a
		ai_chance = {
			factor = 50
		}
		JAP = {
			country_event = entente_japan.2
		}
	}
	
	option = { #no
		name = entente_japan.1.b
		ai_chance = {
			factor = 50
		}
		set_country_flag = CAN_no_japan_alliance
		set_country_flag = CAN_hostile_with_japan
	}
}

# Invitation to the Entente

country_event = {
	id = entente_japan.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.2" }
	title = entente_japan.2.t
	desc = entente_japan.2.d
	picture = GFX_report_event_CAN_anglo_japanese_alliance

	is_triggered_only = yes

	option = { #yes
		name = entente_japan.2.a
		ai_chance = {
			factor = 50
		}
		CAN = {
			country_event = entente_japan.3
		}
	}
	
	option = { #NAP
		name = entente_japan.1.b
		ai_chance = {
			factor = 50
		}
		CAN = {
			country_event = entente_japan.4
		}
	}
	
	option = { #Nah Fuck em
		name = entente_japan.1.c
		ai_chance = {
			factor = 50
		}
		CAN = {
			country_event = entente_japan.5
		}
	}
}

# Japan Accepts

country_event = {
	id = entente_japan.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.3" }
	title = entente_japan.3.t
	desc = entente_japan.3.d
	picture = GFX_report_event_CAN_anglo_japanese_alliance

	is_triggered_only = yes

	option = { #yes
		name = entente_japan.3.a
		set_country_flag = CAN_JAP_alliance_restored
		CAN = {
			add_to_faction = JAP
			country_event = entente_japan.3
		}
		every_country = {
			limit = {
				is_in_faction_with = JAP
			}
			CAN = {
				add_to_faction = PREV
			}
		}
	}
}

# Japan Non-Agression Pact 

country_event = {
	id = entente_japan.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.4" }
	title = entente_japan.4.t
	desc = entente_japan.4.d
	picture = GFX_report_event_CAN_anglo_japanese_alliance

	is_triggered_only = yes

	option = { #yes
		name = entente_japan.4.a
		diplomatic_relation = {
			country = JAP
			relation = non_aggression_pact
		}
		JAP = {
			diplomatic_relation = {
				country = CAN
				relation = non_aggression_pact
			}
		}
		every_country = {
			limit = {
				is_in_faction_with = CAN
			}
			diplomatic_relation = {
				country = JAP
				relation = non_aggression_pact
			}
		}
		every_country = {
			limit = {
				is_in_faction_with = JAP
			}
			diplomatic_relation = {
				country = CAN
				relation = non_aggression_pact
			}
		}
	}
}

# Japan Says Fack Off

country_event = {
	id = entente_japan.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.5" }
	title = entente_japan.5.t
	desc = entente_japan.5.d
	picture = GFX_report_event_CAN_anglo_japanese_alliance

	is_triggered_only = yes

	option = { #yes
		name = entente_japan.5.a
		add_political_power = -10
		set_country_flag = CAN_hostile_with_japan
	}
}

add_namespace = acw_peace

# Put Aside our Differences to focus on the CSA

country_event = {
	id = acw_peace.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.1" }
	title = acw_peace.1.t
	desc = acw_peace.1.d
	picture = GFX_report_event_CAN_acw_negotiations

	is_triggered_only = yes

	option = { #yes
		name = acw_peace.1.a
		ai_chance = {
			factor = 75
		}
		set_country_flag = ACW_FOCUS_ON_CSA
		every_country = {
			limit = {
				has_war_with = ROOT
				NOT = {
					tag = CSA
				}
			}
			white_peace_with_ROOT = yes
		}
		if = {
			limit = {
				NOT = {
					has_war_with = CSA
				}
			}
			declare_war_on = {
				target = CSA
				type = annex_everything
			}
		}
	}
	
	option = { #no
		name = acw_peace.1.b
		ai_chance = {
			factor = 25
		}
		add_war_support = 0.05
	}
}

# CSA Gone, Now What

country_event = {
	id = acw_peace.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.2" }
	title = acw_peace.2.t
	desc = acw_peace.2.d
	picture = GFX_report_event_CAN_acw_negotiations
	
	immediate = {
		set_variable = { ACW_peace_participants = 0 }
		set_variable = { ACW_peace_rejections = 0 }
		hidden_effect = {
			country_event = {
				id = acw_peace.100
				days = 20
			}
		}
	}

	fire_only_once = yes
	
	trigger = {
		has_country_flag = ACW_FOCUS_ON_CSA
		NOT = {
			country_exists = CSA
		}
	}

	option = { #Accept Proposal
		name = acw_peace.2.a
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				tag = COR
			}
			set_global_flag = COR_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
		}
		if = {
			limit = {
				tag = USA
			}
			set_global_flag = USA_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
		}
		if = {
			limit = {
				tag = TEX
			}
			set_global_flag = TEX_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
		}
		if = {
			limit = {
				tag = CAL
			}
			set_global_flag = CAL_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
		}
	}
	
	option = { #no
		name = acw_peace.2.b
		ai_chance = {
			factor = 50		
		}
		add_war_support = 0.05
		if = {
			limit = {
				tag = COR
			}
			set_global_flag = COR_no_accepted_proposal
			set_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = USA
			}
			set_global_flag = USA_no_accepted_proposal
			set_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = TEX
			}
			set_global_flag = TEX_no_accepted_proposal
			set_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = CAL
			}
			set_global_flag = CAL_no_accepted_proposal
			set_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_rejections = 1 }
		}
	}
}


country_event = {#Bounce Event
	id = acw_peace.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.2" }
	title = acw_peace.2.t
	desc = acw_peace.2.d
	picture = GFX_report_event_CAN_acw_negotiations
	hidden = yes
	immediate = {
		if = {
			limit = {
				check_variable = { ACW_peace_participants > 2 }
			}
			country_event = { #Referendum Announced
				id = acw_peace.3
				days = 4
			}
			CAN = {
				country_event = { #Referendum Announced
					id = acw_peace.3
					days = 4
				}
			}
		}
		else = {
			country_event = { #Referendum Cancelled
				id = acw_peace.5
				days = 4
			}
			CAN = {
				country_event = { #Referendum Cancelled
					id = acw_peace.5
					days = 4
				}
			}
		} 
	}

	fire_only_once = yes
	
	trigger = {
		has_country_flag = ACW_FOCUS_ON_CSA
		NOT = {
			country_exists = CSA
		}
	}

	option = { #Accept Proposal
		
	}
}

country_event = {#Second Bounce Event
	id = acw_peace.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.2" }
	title = acw_peace.2.t
	desc = acw_peace.2.d
	picture = GFX_report_event_CAN_acw_negotiations
	hidden = yes
	immediate = {
		if = {
			limit = {
				check_variable = { ACW_peace_participants > 2 }
			}
			every_country = {
				limit = { is_acw_tag = yes }
				country_event = { #Referendum Announced
					id = acw_peace.3
					days = 4
				}
			}
			CAN = {
				country_event = { #Referendum Announced
					id = acw_peace.3
					days = 4
				}
			}
		}
		else = {
			CAN = {
				country_event = { #Referendum Cancelled
					id = acw_peace.7
					days = 4
				}
			}
		} 
	}

	fire_only_once = yes
	
	is_triggered_only = yes

	option = { #Accept Proposal
		
	}
}

# Confrence not a failure

country_event = {
	id = acw_peace.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.3" }
	title = acw_peace.3.t
	desc = acw_peace.3.d
	picture = GFX_report_event_CAN_acw_negotiations
	
	is_triggered_only = yes
	

	option = { #Yay
		name = acw_peace.3.a
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				is_ai = no
			}
			country_event = acw_peace.4
		}
		else = {
			CAN = {
				country_event = acw_peace.4
			}
		}
	}
}

# Confrence not a failure

country_event = {
	id = acw_peace.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.4" }
	title = acw_peace.4.t
	desc = acw_peace.4.d
	picture = GFX_report_event_CAN_election
	
	is_triggered_only = yes
	
	immediate = {	
		hidden_effect = {
			if = {
				every_country = {
					limit = {
						has_country_flag = ACW_no_accepted_proposal
					}
					add_ideas = ACW_ilegitimate_government
				}
			}
		}
	}

	option = { #USA
		name = acw_peace.4.a
		ai_chance = {
			factor = 50
		}
		trigger = {
			has_global_flag = USA_accepted_proposal
			COR = { is_ai = yes }
			WCC = { is_ai = yes }
			CAL = { is_ai = yes }
			TEX = { is_ai = yes }
		}
		USA = {		
		if = {
			limit = {
				has_global_flag = TEX_accepted_proposal
			}
			USA = {
				annex_country = {
					target = TEX
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = COR_accepted_proposal
			}
			USA = {
				annex_country = {
					target = COR
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = CAL_accepted_proposal
			}
			USA = {
				annex_country = {
					target = CAL
					transfer_troops = no
				}
			}
		}
	    }
	}
	
	option = { #TEX
		name = acw_peace.4.b
		ai_chance = {
			factor = 50
		}
		trigger = {
			has_global_flag = TEX_accepted_proposal
			COR = { is_ai = yes }
			WCC = { is_ai = yes }
			CAL = { is_ai = yes }
			USA = { is_ai = yes }
		}
		if = {
			limit = {
				has_global_flag = USA_accepted_proposal
			}
			TEX = {
				annex_country = {
					target = USA
					transfer_troops = no
				}
				annex_country = {
					target = WCC
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = COR_accepted_proposal
			}
			TEX = {
				annex_country = {
					target = COR
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = CAL_accepted_proposal
			}
			TEX = {
				annex_country = {
					target = CAL
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				check_variable = { ACW_peace_rejections > 0 }
			}
			USA = {
				add_ideas = ACW_legitimate_government
			}
		}
	}
	
	option = { #CAL
		name = acw_peace.4.c
		ai_chance = {
			factor = 50
		}
		trigger = {
			has_global_flag = CAL_accepted_proposal
			COR = { is_ai = yes }
			WCC = { is_ai = yes }
			CAL = { is_ai = yes }
			USA = { is_ai = yes }
		}
		if = {
			limit = {
				has_global_flag = USA_accepted_proposal
			}
			CAL = {
				annex_country = {
					target = USA
					transfer_troops = no
				}
				annex_country = {
					target = WCC
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = COR_accepted_proposal
			}
			CAL = {
				annex_country = {
					target = COR
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = TEX_accepted_proposal
			}
			CAL = {
				annex_country = {
					target = TEX
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				check_variable = { ACW_peace_rejections > 0 }
			}
			CAL = {
				add_ideas = ACW_legitimate_government
			}
		}
	}
	
	option = { #COR
		name = acw_peace.4.e
		ai_chance = {
			factor = 50
		}
		trigger = {
			has_global_flag = COR_accepted_proposal
			USA = { is_ai = yes }
			WCC = { is_ai = yes }
			CAL = { is_ai = yes }
			TEX = { is_ai = yes }
		}
		if = {
			limit = {
				has_global_flag = USA_accepted_proposal
			}
			COR = {
				annex_country = {
					target = USA
					transfer_troops = no
				}
				annex_country = {
					target = WCC
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = CAL_accepted_proposal
			}
			COR = {
				annex_country = {
					target = CAL
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				has_global_flag = TEX_accepted_proposal
			}
			COR = {
				annex_country = {
					target = TEX
					transfer_troops = no
				}
			}
		}
		if = {
			limit = {
				check_variable = { ACW_peace_rejections > 0 }
			}
			COR = {
				add_ideas = ACW_legitimate_government
			}
		}
	}
}

# Failure

country_event = {
	id = acw_peace.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.5" }
	title = acw_peace.5.t
	desc = {
		text = acw_peace.5.d
		trigger = {	
			tag = CAN
		}
	}
	desc = {
		text = acw_peace.5.d_america
		trigger = {	
			NOT = {
				tag = CAN
			}
		}
	}
	picture = GFX_report_event_USA_Continental_Map
	
	is_triggered_only = yes
	
	option = { #Don't Make me Come Down There
		name = acw_peace.5.a
		ai_chance = {
			factor = 50
		}
		trigger = {
			tag = CAN
		}
		every_country = {
			limit = {
				has_country_flag = ACW_no_accepted_proposal
			}
			country_event = {
				id = acw_peace.6
				days = 4
			}
		}
		
	}
	
	option = { #Fuck it we tried
		name = acw_peace.5.b
		ai_chance = {
			factor = 50
		}
		trigger = {
			tag = CAN
		}
		add_stability = -0.05
		set_global_flag = ACW_peace_plan_failed
	}
	
	option = { #Fuck it we tried
		name = acw_peace.5.b
		ai_chance = {
			factor = 50
		}
		trigger = {
			NOT = {
				tag = CAN
			}
		}
		add_stability = -0.05
		set_global_flag = ACW_peace_plan_failed
	}
}

# Canada 'Suggests' We Reconsider

country_event = {
	id = acw_peace.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.6" }
	title = acw_peace.6.t
	desc = acw_peace.6.d
	picture = GFX_report_event_CAN_acw_negotiations
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = acw_peace.101
				days = 20
			}
		}
	}
		
	
	is_triggered_only = yes
	
	option = { #Don't Make me Come Down There
		name = acw_peace.6.a
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				tag = COR
			}
			set_global_flag = COR_accepted_proposal
			set_global_flag = COR_no_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			clr_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
			subtract_from_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = USA
			}
			set_global_flag = USA_accepted_proposal
			clr_global_flag = USA_no_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			clr_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
			subtract_from_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = TEX
			}
			set_global_flag = TEX_accepted_proposal
			clr_global_flag = TEX_no_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			clr_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
			subtract_from_variable = { ACW_peace_rejections = 1 }
		}
		if = {
			limit = {
				tag = CAL
			}
			set_global_flag = CAL_accepted_proposal
			clr_global_flag = CAL_no_accepted_proposal
			set_country_flag = ACW_accepted_proposal
			clr_country_flag = ACW_no_accepted_proposal
			add_to_variable = { ACW_peace_participants = 1 }
			subtract_from_variable = { ACW_peace_rejections = 1 }
		}
	}
	
	option = { #no
		name = acw_peace.6.b
		ai_chance = {
			factor = 50
		}
		set_global_flag = ACW_refused_mediation
	}
}

# A Second Failure

country_event = {
	id = acw_peace.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event entente_japan.7" }
	title = acw_peace.7.t
	desc = acw_peace.7.d
	picture = GFX_report_event_CAN_acw_negotiations
	
	is_triggered_only = yes
	
	option = { #We Tried
		name = acw_peace.7.a
		ai_chance = {
			factor = 50
		}
		add_stability = -0.05
		set_global_flag = ACW_peace_plan_failed
		
	}
	
	option = { #Fuck Em Up
		name = acw_peace.7.b
		ai_chance = {
			factor = 50
		}
		every_country = {
			limit = {
				is_acw_tag = yes
			}
			CAN = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
	}
}


#################################
### Leauge of Nations Events ###
#################################

add_namespace = leauge_of_nations


country_event = { # Test
	id = leauge_of_nations.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.51" }
	title = leauge_of_nations.51.t
	desc = leauge_of_nations.51.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.51.a
		clr_global_flag = LON_vetoed_vote
	}	
}

country_event = { # Leauge of Nations
	id = leauge_of_nations.51
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.51" }
	title = leauge_of_nations.51.t
	desc = leauge_of_nations.51.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.51.a
		hidden_effect = {
			scoped_sound_effect = "effect_leauge_of_nations"
		}
		LON_add_to_lon_council = yes
		add_ideas = LON_security_council_major_idea
		add_to_array = { global.LON_security_council = THIS }
		unlock_decision_category_tooltip = CAN_Leauge_of_Nations_decisions
		LON_create_array_of_potential_members = yes
		hidden_effect = {
			country_event = {
				id = leauge_of_nations.54
				days = 13
			}
		}
		every_other_country = {
			limit = { 
				OR = {
					is_actual_major = yes
					AND = {
						is_major = yes
						is_faction_leader = yes
						num_faction_members > 5
					}
				}
			}
			country_event = {
				id = leauge_of_nations.52
				days = 2
				random_days = 5
			}
		}
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.52
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.52" }
	title = leauge_of_nations.52.t
	desc = leauge_of_nations.52.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.52.a
		ai_chance = {
			base = 75
		}
		effect_tooltip = { LON_add_to_lon_council = yes }
		unlock_decision_category_tooltip = CAN_Leauge_of_Nations_decisions
		add_opinion_modifier = {
			target = FROM
			modifier = KR_approves_of_govt
		}
		FROM = {
			country_event = {
				id = leauge_of_nations.53
				days = 2
				random_days = 5
			}
		}
	}
	option = {
		name = leauge_of_nations.52.b
		ai_chance = {
			base = 25
		}
		set_country_flag = LON_refused_lon_participation
		CAN = {
			country_event = {
				id = leauge_of_nations.61
				days = 1
			}
		}
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.53
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.53" }
	title = leauge_of_nations.53.t
	desc = leauge_of_nations.53.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.53.a
		FROM = { 
			LON_add_to_lon_council = yes 
			add_ideas = LON_security_council_major_idea
			add_to_array = { global.LON_security_council = THIS }
		}
		add_opinion_modifier = {
			target = FROM
			modifier = KR_approves_of_govt
		}		
	}
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.54
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.54" }
	title = leauge_of_nations.54.t
	desc = leauge_of_nations.54.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.54.a
		add_political_power = 100
		if = {
			limit = {
				any_other_country = {
					has_country_flag = lon_council_vote
				}
			}
			country_event = {
				id = leauge_of_nations.55
				days = 2
			}
			country_event = {
				id = leauge_of_nations.58
				days = 20
			}
			country_event = {
				id = leauge_of_nations.59
				days = 25
			}
			country_event = {
				id = leauge_of_nations.63
				days = 40
			}
		}
		else = {
			country_event = {
				id = leauge_of_nations.58
				days = 5
			}
			country_event = {
				id = leauge_of_nations.59
				days = 10
			}
			country_event = {
				id = leauge_of_nations.60
				days = 15
			}
		}
	}
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.55
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.55" }
	title = leauge_of_nations.55.t
	desc = leauge_of_nations.55.d
	
	picture = GFX_report_event_CAN_lon_created
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.55.a
	}
}

country_event = { # Security Council Announced
	id = leauge_of_nations.56
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.56" }
	title = leauge_of_nations.56.t
	desc = leauge_of_nations.56.d
	
	picture = GFX_report_event_CAN_lon_security_council
	
	is_triggered_only = yes
	
	trigger = {
		check_variable = { global.LON_voters^num > 10 }
	}
	
	option = {
		name = leauge_of_nations.56.a
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
		LON_add_to_security_council = yes
	}
}

country_event = { # We are on the Security Council
	id = leauge_of_nations.57
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.57" }
	title = leauge_of_nations.57.t
	desc = leauge_of_nations.57.d
	
	picture = GFX_report_event_CAN_lon_security_council
	
	is_triggered_only = yes
	
	trigger = {
		check_variable = { global.LON_voters^num > 10 }
	}
	
	option = {
		name = leauge_of_nations.57.a
		set_country_flag = LON_temporary_sec_council_member
		custom_effect_tooltip = LON_serve_for_two_years
		hidden_effect = {
			country_event = {
				id = leauge_of_nations.60
				days = 730
			}
		}
	}
}

country_event = { # Leauge of Nations
	id = leauge_of_nations.58
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.58" }
	title = leauge_of_nations.58.t
	desc = leauge_of_nations.58.d
	
	picture = GFX_report_event_CAN_lon_security_council
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.58.a
		if = {
			limit = { tag = CAN }
			set_country_flag = CAN_demilitarization_vote
			unlock_decision_tooltip = LON_demilitarization
			every_other_country = {
				limit = { has_country_flag = lon_council_vote }
				country_event = leauge_of_nations.58
			}
		}
		add_political_power = 25
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.59
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.59" }
	title = leauge_of_nations.59.t
	desc = leauge_of_nations.59.d
	
	picture = GFX_report_event_CAN_toronto
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.58.a
		if = {
			limit = { tag = CAN }
			set_country_flag = LON_promotion_of_democracy_cooperation_vote
			unlock_decision_tooltip = LON_promotion_of_democracy_cooperation
			every_other_country = {
				limit = { has_country_flag = lon_council_vote }
				country_event = leauge_of_nations.59
			}
		}
		add_political_power = 25
	}	
}

country_event = { # Time on Security Council expires
	id = leauge_of_nations.60
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.60" }
	title = leauge_of_nations.60.t
	desc = leauge_of_nations.60.d
	
	picture = GFX_report_event_CAN_lon_security_council
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.60.a
		random_country = { 
			limit = { 
				is_in_array = { global.LON_voters = FROM } 
				NOT = {
					has_country_flag = LON_temporary_sec_council_member
					has_idea = LON_security_council_major_idea
				}
			} 
			country_event = { id = leauge_of_nations.56 days = 2 } 
		}
		clr_country_flag = LON_temporary_sec_council_member
		remove_ideas = LON_security_council_minor_idea
		remove_from_array = { global.LON_security_council = ROOT }
	}	
}

country_event = { # They say no
	id = leauge_of_nations.61
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.61" }
	title = leauge_of_nations.61.t
	desc = leauge_of_nations.61.d
	
	picture = GFX_report_event_CAN_lon_vote2
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.61.a
		add_political_power = -10
	}	
}

country_event = { # Meausre Vetoed
	id = leauge_of_nations.62
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.62" }
	title = leauge_of_nations.62.t
	desc = leauge_of_nations.62.d
	
	picture = GFX_report_event_CAN_lon_veto
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.62.a
		add_political_power = -10
	}	
}

country_event = { # Leauge of Nations
	id = leauge_of_nations.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.63" }
	title = leauge_of_nations.63.t
	desc = leauge_of_nations.63.d
	
	picture = GFX_report_event_CAN_lon_flag
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.63.a
		hidden_effect = {
			every_other_country = {
				limit = {
					NOT = { tag = CAN }
					is_a_potential_leauge_of_nationsmember = yes			
				}
				country_event = {
					id = leauge_of_nations.64
					days = 1
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = leauge_of_nations.640
				days = 10
			}
		}
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.64
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.64" }
	title = leauge_of_nations.63.t
	desc = leauge_of_nations.63.d
	
	picture = GFX_report_event_CAN_lon_flag

	is_triggered_only = yes
	

	option = {
		name = leauge_of_nations.64.a
		ai_chance = {
			factor = 50
		}
		trigger = {
			is_a_potential_leauge_of_nationsmember = yes
		}
		LON_add_to_lon_council = yes
	}	
	
	option = {
		ai_chance = {
			factor = 50
		}
		name = leauge_of_nations.64.b		
		add_stability = -0.02
	}	
}
country_event = { # Leauge of Nations invite trigger
	id = leauge_of_nations.640
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.64" }
	title = leauge_of_nations.63.t
	desc = leauge_of_nations.63.d
	
	picture = GFX_report_event_CAN_lon_flag

	is_triggered_only = yes
	
	hidden = yes

	option = {
		name = leauge_of_nations.64.a
		set_global_flag = LON_can_invite_countries
		country_event = {
			id = leauge_of_nations.56
			days = 10
		}
	}	
}
country_event = { #Demilitarization - voting
	id = leauge_of_nations.65
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.65 FROM = [From.GetName]" }
	title = leauge_of_nations.65.t
	desc = leauge_of_nations.65.d
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = lon_vote_ongoing
	}
	

	option = { #Yes
		name = LON_vote_yes
		ai_chance = {
			base = 33
		}
		add_to_variable = { global.lon_yes_votes = 1 }
		add_to_array = { global.lon_yes_votes = THIS }
	}

	option = {	#No
		name = LON_vote_no
		ai_chance = {
			base = 33
			modifier = {
				factor = 15
				has_authoritarian_government = yes
			}
			modifier = {
				factor = 15
				ROOT = { 
					OR = {
						GER_is_in_mitteleuropa = yes
						is_in_array = { global.asian_economic_sphere = THIS }
						is_in_tech_sharing_group = phalanstere_research
					}
				}				
			}
		}
		add_to_variable = { global.lon_no_votes = 1 }
		add_to_array = { global.lon_no_votes = THIS }
	}

	option = {	#Abstain
		name = LON_vote_abstain
		ai_chance = {
			base = 33
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
	}
	
	option = {	#Veto
		name = LON_vote_veto
		ai_chance = {
			base = 10
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
		set_global_flag = LON_vetoed_vote
		save_global_event_target_as = vetoing_country
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
	}
}
country_event = { #democracy promotion - voting
	id = leauge_of_nations.66
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.66 FROM = [From.GetName]" }
	title = leauge_of_nations.66.t
	desc = leauge_of_nations.66.d
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = lon_vote_ongoing
	}
	

	option = { #Yes
		name = LON_vote_yes
		ai_chance = {
			base = 33
			modifier = {
				factor = 10
				has_democratic_government = yes
			}
		}
		add_to_variable = { global.lon_yes_votes = 1 }
		add_to_array = { global.lon_yes_votes = THIS } 
	}

	option = {	#No
		name = LON_vote_no
		ai_chance = {
			base = 33
			modifier = {
				factor = 30
				has_authoritarian_government = yes
			}
		}
		add_to_variable = { global.lon_no_votes = 1 }
		add_to_array = { global.lon_no_votes = THIS }
	}

	option = {	#Abstain
		name = LON_vote_abstain
		ai_chance = {
			base = 33
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
	}
	
	option = {	#Veto
		name = LON_vote_veto
		ai_chance = {
			base = 10
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
		set_global_flag = LON_vetoed_vote
		save_global_event_target_as = vetoing_country
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
	}
}
country_event = { #vote fails
	id = leauge_of_nations.67
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.67 FROM = [From.GetName]" }
	title = leauge_of_nations.67.t
	desc = leauge_of_nations.67.d
	
	picture = GFX_report_event_CAN_lon_vote2
	
	is_triggered_only = yes
	fire_for_sender = no

	major = yes
	show_major = {
		has_country_flag = lon_council_vote
		if = {
			limit = { NOT = { has_country_flag = lon_council_vote }}
			wants_world_news = yes
		}
	}

	option = {	#that's a damn shame
		name = leauge_of_nations.67.a
	}
}

country_event = { #vote passes
	id = leauge_of_nations.68
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.68 FROM = [From.GetName]" }
	title = leauge_of_nations.68.t
	desc = leauge_of_nations.68.d
	
	picture = GFX_report_event_CAN_lon_vote3
	
	is_triggered_only = yes
	fire_for_sender = no

	major = yes
	show_major = {
		has_country_flag = lon_council_vote
		if = {
			limit = { NOT = { has_country_flag = lon_council_vote }}
			wants_world_news = yes
		}
	}

	option = {	#epic
		name = leauge_of_nations.68.a
	}
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.69
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.69" }
	title = {
		text = leauge_of_nations.69.t.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	title = {
		text = leauge_of_nations.69.t.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.69.d.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.69.d.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_military
	
	option = {
		name = leauge_of_nations.69.a
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
		add_political_power = 25
		set_global_flag = LON_demil_yes
		effect_tooltip = {
			every_other_country = {
				limit = { has_country_flag = lon_council_vote }
			}
			country_event = leauge_of_nations.71
		}
		hidden_effect = {
			every_other_country = {
				limit = { 
					has_country_flag = lon_council_vote
				}
				set_temp_variable = { LON_vote_delay = 2 }
				for_each_scope_loop = {
					array = global.LON_voters
					country_event = { id = leauge_of_nations.70 days = LON_vote_delay }
					add_to_temp_variable = { LON_vote_delay = 1 }
				}
			}
			every_other_country = {
				limit = { 
					has_country_flag = lon_council_vote
				}
				set_temp_variable = { LON_vote_delay = 2 }
				for_each_scope_loop = {
					array = global.LON_voters
					country_event = { id = leauge_of_nations.71 days = LON_vote_delay }
					add_to_temp_variable = { LON_vote_delay = 1 }
				}
			}
		}			
	}
	option = {
		name = leauge_of_nations.69.b
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
		add_political_power = -25
		
		add_stability = -0.1
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.70
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.70" }
	title = leauge_of_nations.70.t
	desc = leauge_of_nations.70.d
	
	picture = GFX_report_event_CAN_lon_military
	
	trigger = {
		NOT = {
			has_country_flag = LON_demil_event
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = LON_demil_event
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.70.a
		ai_chance = {
			base = 50
		}			
		add_ideas = LON_demilitarization_idea
	}	
	option = {
		name = leauge_of_nations.70.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 20
				has_added_tension_amount > 7
			}
		}		
	}		
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.71
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.71" }
	title = leauge_of_nations.71.t
	desc = leauge_of_nations.71.d
	
	picture = GFX_report_event_CAN_lon_military
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			has_country_flag = LON_demil_event
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = LON_demil_event
		}
	}
	
	option = {
		name = leauge_of_nations.71.a
		ai_chance = {
			base = 50
		
		}			
		add_ideas = LON_demilitarization_idea
	}	
	option = {
		name = leauge_of_nations.71.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 20
				has_added_tension_amount > 7
			}
		}		
	}		
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.72
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.72" }
	title = {
		text = leauge_of_nations.72.t.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	title = {
		text = leauge_of_nations.72.t.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.72.d.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.72.d.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_democracy
	
	option = {
		name = leauge_of_nations.72.a
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
		add_political_power = 25
		set_global_flag = LON_democracy_yes			
		effect_tooltip = {
			every_other_country = {
				limit = { has_country_flag = lon_council_vote }
			}
			country_event = leauge_of_nations.73
		}
		hidden_effect = {
			every_other_country = {
				limit = { 
					has_country_flag = lon_council_vote
				}
				set_temp_variable = { LON_vote_delay = 2 }
				for_each_scope_loop = {
					array = global.LON_voters
					country_event = { id = leauge_of_nations.73 days = LON_vote_delay }
					add_to_temp_variable = { LON_vote_delay = 1 }
				}
			}
			every_other_country = {
				limit = { 
					has_country_flag = lon_council_vote
				}
				set_temp_variable = { LON_vote_delay = 2 }
				for_each_scope_loop = {
					array = global.LON_voters
					country_event = { id = leauge_of_nations.74 days = LON_vote_delay }
					add_to_temp_variable = { LON_vote_delay = 1 }
				}
			}
		}			
	}
	option = {
		name = leauge_of_nations.72.b
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
		add_political_power = -25
		add_stability = -0.1
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.73
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.73" }
	title = leauge_of_nations.73.t
	desc = leauge_of_nations.73.d
	
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_democracy
	
	trigger = {
		NOT = {
			has_country_flag = LON_democracy_event
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = LON_democracy_event
		}
	}
	
	option = {
		name = leauge_of_nations.73.a
		ai_chance = {
			base = 70
		}	
		add_ideas = LON_democracy_promoted_idea
	}	
	option = {
		name = leauge_of_nations.73.b
		ai_chance = {
			base = 30
		}		
	}		
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.74
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.74" }
	title = leauge_of_nations.74.t
	desc = leauge_of_nations.74.d
	
	picture = GFX_report_event_CAN_lon_democracy
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			has_country_flag = LON_democracy_event
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = LON_democracy_event
		}
	}
	
	option = {
		name = leauge_of_nations.74.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 15
				has_democratic_socialist_government = yes
			}
		}			
		add_ideas = LON_democracy_promoted_idea
	}	
	option = {
		name = leauge_of_nations.74.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 30
				has_authoritarian_government = yes
			}
		}		
	}		
}
country_event = { #LON offers us an alliance
	id = leauge_of_nations.75
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.75" }
	title = leauge_of_nations.75.t
	desc = leauge_of_nations.75.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	option = {
		name = leauge_of_nations.75.a
		ai_chance = {
			base = 75
		}
		FROM = {
			set_country_flag = LON_allied_@ROOT
			country_event = {
				id = leauge_of_nations.76
				days = 3
				random = 72
			}
		}
	}
	option = {
		name = leauge_of_nations.75.b
		trigger = {
			NOT = { has_country_flag = LON_allied_@FROM }
		}
		set_country_flag = LON_alliance_refused_@FROM
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
		ai_chance = {
			base = 25
		}
		set_country_flag = LON_refused_lon_participation
		FROM = {
			country_event = {
				id = leauge_of_nations.76
				days = 3
				random = 72
			}
		}
	}	
}

country_event = { #Country responds
	id = leauge_of_nations.76
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.76" }

	title = {
		text = leauge_of_nations.76.t.accept
		trigger = { has_country_flag = LON_allied_@FROM }
	}
	title = {
		text = leauge_of_nations.76.t.refuse
		trigger = { NOT = { has_country_flag = LON_allied_@FROM } }
	}

	desc = {
		text = leauge_of_nations.76.d.accept
		trigger = { has_country_flag = LON_allied_@FROM }
	}
	desc = {
		text = leauge_of_nations.76.d.refuse
		trigger = { NOT = { has_country_flag = LON_allied_@FROM } }
	}

	picture = GFX_report_event_generic_diplomacy1

	is_triggered_only = yes

	option = {
		name = leauge_of_nations.76.a
		trigger = {
			has_country_flag = LON_allied_@FROM
		}
		clr_country_flag = LON_allied_@FROM
		activate_targeted_decision = { target = FROM decision = LON_initialize_country_accept }
	}
	option = {
		name = leauge_of_nations.76.b
		trigger = {
			NOT = { has_country_flag = LON_allied_@FROM }
		}
		add_opinion_modifier = {
			target = FROM
			modifier = KR_disapproves_of_govt
		}
	}
}
country_event = { #Membership - voting
	id = leauge_of_nations.77
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.77 FROM = [From.GetName]" }
	title = leauge_of_nations.77.t
	desc = leauge_of_nations.77.d
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = lon_vote_ongoing
	}
	

	option = { #Yes
		name = LON_vote_yes
		ai_chance = {
			base = 80
			modifier = {
				factor = 5
				event_target:LON_candidate_membership = { same_continent_as_ROOT = yes }
			}
			modifier = {
				factor = 30
				event_target:LON_candidate_membership = { has_same_government_as_ROOT = yes }
			}
			modifier = {
				factor = 15
				event_target:LON_candidate_membership = { same_government_type_as_ROOT_authoritarian = yes }
			}
			modifier = {
				factor = 0
				event_target:LON_candidate_membership = { any_owned_state = { is_claim_or_core_of_ROOT = yes } }
			}
			modifier = {
				factor = 0
				any_owned_state = { 
					OR = {
						is_claimed_by = event_target:LON_candidate_membership
						is_core_of = event_target:LON_candidate_membership
					}
				}
			}
		}
		add_to_variable = { global.lon_yes_votes = 1 }
		add_to_array = { global.lon_yes_votes = THIS }
	}

	option = {	#No
		name = LON_vote_no
		ai_chance = {
			base = 10
			modifier = {
				factor = 20
				event_target:LON_candidate_membership = { any_owned_state = { is_claim_or_core_of_ROOT = yes } }
			}
			modifier = {
				factor = 20
				any_owned_state = { 
					OR = {
						is_claimed_by = event_target:LON_candidate_membership
						is_core_of = event_target:LON_candidate_membership
					}
				}
			}
			modifier = {
				factor = 15
				event_target:LON_candidate_membership = { same_government_type_as_ROOT_authoritarian = no }
			}
		}
		add_to_variable = { global.lon_no_votes = 1 }
		add_to_array = { global.lon_no_votes = THIS }
	}

	option = {	#Abstain
		name = LON_vote_abstain
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				event_target:LON_candidate_membership = { same_continent_as_ROOT = no }
			}
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
	}
		
	option = {	#Veto
		name = LON_vote_veto
		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				any_owned_state = { 
					OR = {
						is_claimed_by = event_target:LON_candidate_membership
						is_core_of = event_target:LON_candidate_membership
					}
				}
			}
			modifier = {
				factor = 20
				has_war_with = event_target:LON_candidate_membership
			}
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
		set_global_flag = LON_vetoed_vote
		save_global_event_target_as = vetoing_country
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
		add_opinion_modifier = {
			target = event_target:LON_candidate_membership
			modifier = KR_hates_govt
		}
	}
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.78
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.78" }
	title = leauge_of_nations.78.t
	desc = leauge_of_nations.78.d
	
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.78.a
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.79
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.79" }
	title = {
		text = leauge_of_nations.79.t.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	title = {
		text = leauge_of_nations.79.t.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.79.d.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.79.d.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_admission
	
	trigger = {
		NOT = {
			has_global_flag = LON_vetoed_vote
		}
	}
					
	
	option = {
		name = leauge_of_nations.79.a
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
		event_target:LON_candidate_membership = {
			LON_add_to_lon_council = yes
			country_event = leauge_of_nations.80
		}
		clear_global_event_target = LON_candidate_membership
	}
	option = {
		name = leauge_of_nations.79.a
		trigger = { check_variable = { global.lon_yes_votes = global.lon_no_votes } }
		event_target:LON_candidate_membership = {
			LON_add_to_lon_council = yes
			country_event = leauge_of_nations.80
		}
		clear_global_event_target = LON_candidate_membership
	}
	option = {
		name = leauge_of_nations.79.b
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
		add_political_power = -25
		event_target:LON_candidate_membership = {
			country_event = leauge_of_nations.81
		}
		clear_global_event_target = LON_candidate_membership
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.80
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.80" }
	title = leauge_of_nations.80.t
	desc = leauge_of_nations.80.d
	
	picture = GFX_report_event_CAN_lon_admission
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.80.a
		add_political_power = 15
		add_stability = 0.05
		
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.81
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.81" }
	title = leauge_of_nations.81.t
	desc = leauge_of_nations.81.d
	
	picture = GFX_report_event_CAN_lon_admission
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.81.a
		add_political_power = -15
		add_stability = -0.05
	}	
}
country_event = { # get support from canada
	id = leauge_of_nations.83
	immediate = {log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.83"}
	title = leauge_of_nations.83.t
	desc = leauge_of_nations.83.d
	picture = GFX_report_event_CAN_lon_military2

	is_triggered_only = yes

	option = { # manpower and some guns
		name = leauge_of_nations.83.a
		ai_chance = {
			factor = 20
		}
		add_manpower = -5000
		effect_tooltip = {
			send_equipment = {
				target = FROM
				type = infantry_equipment
				amount = 500
			}
		}
		set_country_flag = LON_manpower_and_guns
	}

	option = { # some mans
		name = leauge_of_nations.83.b
		ai_chance = {
			factor = 40
		}
		add_manpower = -5000
		set_country_flag = LON_manpower		
	}

	option = { # some guns
		name = leauge_of_nations.83.c
		ai_chance = {
			factor = 40
		}
		set_country_flag = LON_guns		
		effect_tooltip = {
			send_equipment = {
				target = FROM
				type = infantry_equipment
				amount = 500
			}
		}
	}
	
	option = { # peacekeepers
		name = leauge_of_nations.83.f
		ai_chance = {
			factor = 40
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		set_country_flag = LON_peacekeepers
		effect_tooltip = {
			event_target:receiving_tag = { 
				add_ideas = LON_blue_helmets
			}
		}
	}
}
country_event = { # get support from Canada
	id = leauge_of_nations.84
	immediate = {log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.84"}
	title = leauge_of_nations.84.t
	desc = {
		text = leauge_of_nations.84.d
		trigger = {
			NOT = {
				event_target:helping_tag = { has_country_flag = LON_peacekeepers }
			}
		}
	}
	desc = {
		text = leauge_of_nations.84.d_2
		trigger = {
			event_target:helping_tag = { has_country_flag = LON_peacekeepers }
		}
	}
		
	picture = GFX_report_event_CAN_blue_helmets

	is_triggered_only = yes

	option = { # manpower and some guns
		name = leauge_of_nations.84.a
		trigger = {
			event_target:helping_tag = { has_country_flag = LON_manpower_and_guns }
		}
		ai_chance = {
			factor = 20
		}
		add_manpower = 5000
		event_target:helping_tag = { 
			clr_country_flag = LON_manpower_and_guns
			send_equipment = {
				target = ROOT
				type = infantry_equipment
				amount = 500
			}
			clear_global_event_target = helping_tag
		}
		clear_global_event_target = receiving_tag
	}

	option = { # some mans
		name = leauge_of_nations.84.a
		trigger = {
			event_target:helping_tag = { has_country_flag = LON_manpower }
		}
		ai_chance = {
			factor = 35
		}
		add_manpower = 5000
		event_target:helping_tag = { clr_country_flag = LON_manpower clear_global_event_target = helping_tag }
		clear_global_event_target = receiving_tag
	}

	option = { # some guns
		name = leauge_of_nations.84.a
		trigger = {
			event_target:helping_tag = { has_country_flag = LON_guns }
		}
		ai_chance = {
			factor = 35
		}
		event_target:helping_tag = { 
			clr_country_flag = LON_guns
			send_equipment = {
				target = ROOT
				type = infantry_equipment
				amount = 500
			}
			clear_global_event_target = helping_tag
		}	
		clear_global_event_target = receiving_tag
	}
	
	option = { # Peacekeepers
		name = leauge_of_nations.84.a
		trigger = {
			event_target:helping_tag = { has_country_flag = LON_peacekeepers }
		}
		ai_chance = {
			factor = 35
		}
		add_timed_idea = {
			idea = LON_blue_helmets
			days = 640
		}
		event_target:helping_tag = { clr_country_flag = LON_manpower clear_global_event_target = helping_tag }
		clear_global_event_target = receiving_tag
	}
}
country_event = { #Membership - voting
	id = leauge_of_nations.85
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.85 FROM = [From.GetName]" }
	title = leauge_of_nations.85.t
	desc = leauge_of_nations.85.d
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = lon_vote_ongoing
	}
	

	option = { #Yes
		name = LON_vote_yes
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				event_target:LON_candidate_membership = { same_government_type_as_ROOT_authoritarian = no }
			}
			modifier = {
				factor = 5
				event_target:LON_candidate_membership = { same_continent_as_ROOT = yes }
			}
			modifier = {
				factor = 30
				event_target:LON_candidate_membership = { has_same_government_as_ROOT = yes }
			}
			modifier = {
				factor = 15
				event_target:LON_candidate_membership = { same_government_type_as_ROOT_authoritarian = yes }
			}
			modifier = {
				factor = 50
				has_war_with = event_target:LON_candidate_membership
			}
			modifier = {
				factor = 0
				event_target:LON_candidate_membership = { any_owned_state = { is_claim_or_core_of_ROOT = yes } }
			}
			modifier = {
				factor = 0
				any_owned_state = { 
					OR = {
						is_claimed_by = event_target:LON_candidate_membership
						is_core_of = event_target:LON_candidate_membership
					}
				}
			}
		}
		trigger = {
			NOT = {
				tag = event_target:LON_candidate_membership
			}
		}
		add_to_variable = { global.lon_yes_votes = 1 }
		add_to_array = { global.lon_yes_votes = THIS }
	}

	option = {	#No
		name = LON_vote_no
		ai_chance = {
			base = 10
			modifier = {
				factor = 15
				event_target:LON_candidate_membership = { same_government_type_as_ROOT_authoritarian = no }
			}
			modifier = {
				factor = 25
				event_target:LON_candidate_membership = { is_in_faction_with = ROOT }
			}
		}
		add_to_variable = { global.lon_no_votes = 1 }
		add_to_array = { global.lon_no_votes = THIS }
	}

	option = {	#Abstain
		name = LON_vote_abstain
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				event_target:LON_candidate_membership = { same_continent_as_ROOT = no }
			}
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
	}
	
	option = {	#Veto
		name = LON_vote_veto
		ai_chance = {
			base = 5
			modifier = {
				factor = 5
				event_target:LON_candidate_membership = {
					is_in_faction_with = ROOT
				}
			}
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
		set_global_flag = LON_vetoed_vote
		save_global_event_target_as = vetoing_country
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
		add_opinion_modifier = {
			target = event_target:LON_candidate_membership
			modifier = KR_approves_of_govt
		}
	}
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.86
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.86" }
	title = leauge_of_nations.86.t
	desc = leauge_of_nations.86.d
	
	picture = GFX_report_event_CAN_lon_flag
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.86.a
		add_opinion_modifier = {
			target = CAN
			modifier = KR_disapproves_of_govt
		}
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.87
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.87" }
	title = {
		text = leauge_of_nations.87.t.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	title = {
		text = leauge_of_nations.87.t.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.87.d.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.87.d.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_admission
	
	option = {
		name = leauge_of_nations.87.a
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
		add_political_power = 25
		event_target:LON_candidate_membership = {
			LON_remove_from_lon_council = yes
			country_event = leauge_of_nations.88
		}
		clear_global_event_target = LON_candidate_membership
	}
	option = {
		name = leauge_of_nations.87.b
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
		add_political_power = -25
		event_target:LON_candidate_membership = {
			country_event = leauge_of_nations.89
		}
		clear_global_event_target = LON_candidate_membership
	}
	option = {
		name = leauge_of_nations.87.c
		trigger = { 
			check_variable = { global.lon_yes_votes < global.lon_no_votes }
			has_idea = LON_security_council_major_idea
		}
		ai_chance = { base = 100 }
		add_political_power = -50
		add_stability = -0.05
		event_target:LON_candidate_membership = {
			LON_remove_from_lon_council = yes
			country_event = leauge_of_nations.90
		}
		clear_global_event_target = LON_candidate_membership
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.88
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.88" }
	title = leauge_of_nations.88.t
	desc = leauge_of_nations.88.d
	
	picture = GFX_report_event_CAN_lon_admission
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.88.a
		add_political_power = -15
		add_stability = -0.05
		LON_remove_from_lon_council = yes
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.89
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.89" }
	title = leauge_of_nations.89.t
	desc = leauge_of_nations.89.d
	
	picture = GFX_report_event_CAN_lon_admission
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.89.a
		add_political_power = 15
		add_stability = 0.05
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.90
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.90" }
	title = leauge_of_nations.90.t
	desc = leauge_of_nations.90.d
	
	picture = GFX_report_event_CAN_lon_admission
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.90.a
		add_stability = -0.1
		add_opinion_modifier = {
			target = CAN
			modifier = KR_hostile
		}
		LON_remove_from_lon_council = yes
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.91
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.91" }
	title = leauge_of_nations.91.t
	desc = leauge_of_nations.91.d
	
	picture = GFX_report_event_CAN_lon_veto
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.91.a
		hidden_effect = {
			country_event = {
				id = leauge_of_nations.9100
				days = 10
			}
		}
		add_stability = -0.05
		add_opinion_modifier = {
			target = event_target:vetoing_country
			modifier = KR_hostile
		}
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
				NOT = {
					tag = ROOT
				}
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
	}	
}

country_event = { # Leauge of Nations
	id = leauge_of_nations.9100
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.91" }
	title = leauge_of_nations.91.t
	desc = leauge_of_nations.91.d
	
	immediate = {
		hidden_effect = {
			clr_global_flag = LON_vote_ongoing
			clr_global_flag = LON_promotion_of_democracy_cooperation_vote
			clr_global_flag = LON_candidate_membership_revoke
			clr_global_flag = LON_sanctions_vote
			clr_global_flag = LON_demilitarization_vote
			clr_global_flag = LON_promotion_of_democracy_cooperation_vote
			event_target:LON_candidate_membership = {
				clear_global_event_target = LON_candidate_membership
			}
			event_target:LON_sanctioned_country = {
				clear_global_event_target = LON_sanctioned_country
			}
			event_target:vetoing_country = {
				clear_global_event_target = vetoing_country
			}
		}
	}
	
	picture = GFX_report_event_CAN_lon_veto
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = leauge_of_nations.91.a
		
	}	
}

country_event = { #Sanctions against FROM
	id = leauge_of_nations.92
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.92 FROM = [From.GetName]" }
	title = leauge_of_nations.92.t
	desc = leauge_of_nations.92.d
	picture = GFX_report_event_CAN_lon_vote
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = lon_vote_ongoing
	}
	

	option = { #Yes
		name = LON_vote_yes
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				event_target:LON_sanctioned_country = { same_government_type_as_ROOT_authoritarian = no }
			}
			modifier = {
				factor = 5
				event_target:LON_sanctioned_country = { same_continent_as_ROOT = yes }
			}
			modifier = {
				factor = 30
				event_target:LON_sanctioned_country = { has_same_government_as_ROOT = yes }
			}
			modifier = {
				factor = 15
				event_target:LON_sanctioned_country = { same_government_type_as_ROOT_authoritarian = yes }
			}
			modifier = {
				factor = 50
				has_war_with = event_target:LON_sanctioned_country
			}
			modifier = {
				factor = 0
				event_target:LON_sanctioned_country = { any_owned_state = { is_claim_or_core_of_ROOT = yes } }
			}
			modifier = {
				factor = 0
				any_owned_state = { 
					OR = {
						is_claimed_by = event_target:LON_sanctioned_country
						is_core_of = event_target:LON_sanctioned_country
					}
				}
			}
		}
		trigger = {
			NOT = {
				tag = event_target:LON_sanctioned_country
				is_in_faction_with = event_target:LON_sanctioned_country
			}
		}
		add_to_variable = { global.lon_yes_votes = 1 }
		add_to_array = { global.lon_yes_votes = THIS }
	}

	option = {	#No
		name = LON_vote_no
		ai_chance = {
			base = 10
			modifier = {
				factor = 15
				event_target:LON_sanctioned_country = { same_government_type_as_ROOT_authoritarian = no }
			}
			modifier = {
				factor = 25
				event_target:LON_sanctioned_country = { is_in_faction_with = ROOT }
			}
		}
		add_to_variable = { global.lon_no_votes = 1 }
		add_to_array = { global.lon_no_votes = THIS }
	}

	option = {	#Abstain
		name = LON_vote_abstain
		ai_chance = {
			base = 10
			modifier = {
				factor = 5
				event_target:LON_sanctioned_country = { same_continent_as_ROOT = no }
			}
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
	}
	
	option = {	#Veto
		name = LON_vote_veto
		ai_chance = {
			base = 5
			modifier = {
				factor = 30
				event_target:LON_sanctioned_country = {
					is_in_faction_with = ROOT
				}
			}
		}
		trigger = {
			has_idea = LON_security_council_major_idea
		}
		add_to_variable = { global.lon_abstain_votes = 1 }
		add_to_array = { global.lon_abstain_votes = THIS }
		set_global_flag = LON_vetoed_vote
		save_global_event_target_as = vetoing_country
		every_country = {
			limit = {
				is_in_array = { global.LON_voters = FROM } 
			}
			country_event = {
				id = leauge_of_nations.62
				days = 2
			}
		}
		add_opinion_modifier = {
			target = event_target:LON_sanctioned_country
			modifier = KR_hates_govt
		}
	}
}
country_event = { # Nation being Informed of Sanctions
	id = leauge_of_nations.93
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.93" }
	title = leauge_of_nations.93.t
	desc = leauge_of_nations.93.d
	
	picture = GFX_report_event_CAN_lon_sanctions
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.93.a
		add_opinion_modifier = {
			target = CAN
			modifier = KR_disapproves_of_govt
		}
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.94
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.94" }
	title = {
		text = leauge_of_nations.94.t.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	title = {
		text = leauge_of_nations.94.t.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.94.d.yes
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
	}
	desc = {
		text = leauge_of_nations.94.d.no
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
	}
	is_triggered_only = yes
	
	picture = GFX_report_event_CAN_lon_sanctions
	
	option = {
		name = leauge_of_nations.94.a
		trigger = { check_variable = { global.lon_yes_votes > global.lon_no_votes } }
		add_political_power = 25
		event_target:LON_sanctioned_country = {
			country_event = leauge_of_nations.95
			clear_global_event_target = LON_sanctioned_country
		}
	}
	option = {
		name = leauge_of_nations.94.b
		trigger = { check_variable = { global.lon_yes_votes < global.lon_no_votes } }
		add_political_power = -25
		event_target:LON_sanctioned_country = {
			country_event = leauge_of_nations.96
			clear_global_event_target = LON_sanctioned_country
		}
	}
}
country_event = { # We have been Sanctioned
	id = leauge_of_nations.95
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.95" }
	title = leauge_of_nations.95.t
	desc = leauge_of_nations.95.d
	
	picture = GFX_report_event_CAN_lon_sanctions
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.95.a
		add_political_power = -15
		add_stability = -0.05
		add_ideas = LON_sanctions_idea
	}	
}
country_event = { # Leauge of Nations
	id = leauge_of_nations.96
	immediate = { log = "[GetDateText]: [Root.GetName]: event leauge_of_nations.96" }
	title = leauge_of_nations.96.t
	desc = leauge_of_nations.96.d
	
	picture = GFX_report_event_CAN_lon_sanctions
	
	is_triggered_only = yes
	
	option = {
		name = leauge_of_nations.96.a
		add_political_power = 15
		add_stability = 0.05
	}	
}
