################################
# Confederation of the Mountain Peoples of Zagros Events
################################
# By IRANIAN VOODOO DOCTOR
################################

add_namespace = zagros

# flagpicker yippee
country_event = {
	id = zagros.90
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.90"
	}
	title = zagros.90.t
	desc = zagros.90.d
	picture = GFX_report_event_ZGS_flagpicker
	is_triggered_only = yes
	option = {
		name = zagros.90.a
	}

	option = {
		name = zagros.90.b
		set_cosmetic_tag = ZGS_B
	}

	option = {
		name = zagros.90.c
		set_country_flag = ZGS_flag_picker_disabled
	}
}

### Zagros Introduction
country_event = {
	id = zagros.1
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.1"
	}
	title = zagros.1.t
	desc = zagros.1.d
	fire_only_once = yes
	is_triggered_only = yes
	# Tell me more
	option = {
		name = zagros.1.a
		country_event = { id = zagros.2 hours = 1 }
	}
	# Skip
	option = {
		name = zagros.1.b
		hidden_effect = {
			country_event = { id = zagros.3 days = 10 }
		}
	}
}

# State of the Confederation
country_event = {
	id = zagros.2
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.2"
	}
	title = zagros.2.t
	desc = zagros.2.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = zagros.2.a
		hidden_effect = {
			country_event = { id = zagros.3 days = 10 }
		}
	}
}

# The German in Shiraz
country_event = {
	id = zagros.3
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.3"
	}
	title = zagros.3.t
	desc = zagros.3.d
	fire_only_once = yes
	is_triggered_only = yes

	# Welcome him
	option = {
		name = zagros.3.a
		set_country_flag = ZGS_wassmuss_welcomed
		add_political_power = 25
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = small_increase
			}
		}
	}

	# Keep him at arm's length
	option = {
		name = zagros.3.b
		set_country_flag = ZGS_wassmuss_neutral
	}

	# Expel him
	option = {
		name = zagros.3.c
		set_country_flag = ZGS_wassmuss_expelled
		add_political_power = -25
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = small_decrease
			}
		}
	}
}

# Questionn of Centralisation
country_event = {
	id = zagros.4
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.4"
	}
	title = zagros.4.t
	desc = zagros.4.d
	fire_only_once = yes
	is_triggered_only = yes

	# Maintain decentralisation
	option = {
		name = zagros.4.a
		set_country_flag = ZGS_decentralised_path
		add_stability = 0.1
		add_political_power = 50
		custom_effect_tooltip = ZGS_confederation_stable_tt
		hidden_effect = {
			country_event = { id = zagros.5 days = 7 }
		}
	}

	# Pursue centralisation
	option = {
		name = zagros.4.b
		set_country_flag = ZGS_centralisation_pursued
		set_variable = { ZGS_qashqai_support = 50 }
		add_political_power = -25
		custom_effect_tooltip = ZGS_centralisation_risk_tt
		hidden_effect = {
			country_event = { id = zagros.6 days = 14 }
		}
	}
}

# If you don't pursue centralisation...
country_event = {
	id = zagros.5
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.5"
	}
	title = zagros.5.t
	desc = zagros.5.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = zagros.5.a
		set_country_flag = ZGS_stable_confederation
		add_stability = 0.05
		add_war_support = 0.05
	}
}

# Concerns of Ambition
country_event = {
	id = zagros.6
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.6"
	}
	title = zagros.6.t
	desc = zagros.6.d
	fire_only_once = yes
	is_triggered_only = yes

	# Cautious approach
	option = {
		name = zagros.6.a
		add_to_variable = { ZGS_qashqai_support = 10 }
		add_political_power = -25
		set_country_flag = ZGS_qashqai_cautious
		custom_effect_tooltip = ZGS_support_increased_tt
		hidden_effect = {
			country_event = { id = zagros.7 days = 14 }
		}
	}

	# LET DEM BITCHES KNOW I MEAN BUSINESS...
	option = {
		name = zagros.6.b
		add_to_variable = { ZGS_qashqai_support = -10 }
		add_war_support = 0.05
		set_country_flag = ZGS_qashqai_bold
		custom_effect_tooltip = ZGS_support_decreased_tt
		hidden_effect = {
			country_event = { id = zagros.7 days = 7 }
		}
	}
}

# Bakhtiari Concerns
country_event = {
	id = zagros.7
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.7"
	}
	title = zagros.7.t
	desc = zagros.7.d
	fire_only_once = yes
	is_triggered_only = yes

	# Appease them
	option = {
		name = zagros.7.a
		add_to_variable = { ZGS_qashqai_support = 15 }
		add_political_power = -75
		set_country_flag = ZGS_bakhtiari_appeased
		custom_effect_tooltip = ZGS_support_increased_tt
		hidden_effect = {
			country_event = { id = zagros.8 days = 14 }
		}
	}

	# Bribe key figures
	option = {
		name = zagros.7.b
		add_to_variable = { ZGS_qashqai_support = 5 }
		add_political_power = -50
		set_country_flag = ZGS_bakhtiari_bribed
		custom_effect_tooltip = ZGS_support_increased_small_tt
		hidden_effect = {
			country_event = { id = zagros.8 days = 14 }
		}
	}

	# Dismiss their concerns
	option = {
		name = zagros.7.c
		add_to_variable = { ZGS_qashqai_support = -15 }
		set_country_flag = ZGS_bakhtiari_dismissed
		custom_effect_tooltip = ZGS_support_decreased_tt
		hidden_effect = {
			country_event = { id = zagros.8 days = 7 }
		}
	}
}

# Khaz'al's Warning
country_event = {
	id = zagros.8
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.8"
	}
	title = zagros.8.t
	desc = zagros.8.d
	fire_only_once = yes
	is_triggered_only = yes

	# Reassure him
	option = {
		name = zagros.8.a
		add_to_variable = { ZGS_qashqai_support = 10 }
		add_political_power = -25
		set_country_flag = ZGS_khazal_reassured
		custom_effect_tooltip = ZGS_support_increased_tt
		hidden_effect = {
			country_event = { id = zagros.13 days = 14 }
		}
	}

	# Threaten him
	option = {
		name = zagros.8.b
		add_to_variable = { ZGS_qashqai_support = -20 }
		add_war_support = 0.05
		set_country_flag = ZGS_khazal_threatened
		custom_effect_tooltip = ZGS_support_decreased_tt
		hidden_effect = {
			country_event = { id = zagros.13 days = 7 }
		}
	}

	# Ignore him
	option = {
		name = zagros.8.c
		add_to_variable = { ZGS_qashqai_support = -10 }
		set_country_flag = ZGS_khazal_ignored
		custom_effect_tooltip = ZGS_support_decreased_small_tt
		hidden_effect = {
			country_event = { id = zagros.9 days = 10 }
		}
	}
}

# Confrontation
country_event = {
	id = zagros.9
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.9"
	}
	title = zagros.9.t
	desc = zagros.9.d
	fire_only_once = yes
	is_triggered_only = yes

	# Qashqai prevails (requires support >= 50)
	option = {
		name = zagros.9.a
		trigger = {
			check_variable = { ZGS_qashqai_support > 49 }
		}
		set_country_flag = ZGS_qashqai_survives
		add_stability = 0.05
		add_political_power = 50
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		create_country_leader = {
			name = "Ismail Khan Qashqai"
			picture = "gfx/leaders/ZGS/Portrait_Zagros_Solatodole_Qashqai.png"
			expire = "1.1.1"
			ideology = pataut_tribal_chiefdom_subtype
		}
		custom_effect_tooltip = ZGS_qashqai_victorious_tt
	}

	# Qashqai fails (support < 50)
	option = {
		name = zagros.9.b
		trigger = {
			check_variable = { ZGS_qashqai_support < 50 }
		}
		set_country_flag = ZGS_qashqai_overthrown
		add_stability = -0.1
		custom_effect_tooltip = ZGS_qashqai_overthrown_tt
		hidden_effect = {
			country_event = { id = zagros.10 days = 3 }
		}
	}
}

# Khaz'al Takes Charge
country_event = {
	id = zagros.10
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.10"
	}
	title = zagros.10.t
	desc = zagros.10.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = zagros.10.a
		set_country_flag = ZGS_khazal_in_charge
		set_politics = {
			ruling_party = paternal_autocrat
			elections_allowed = no
		}
		hidden_effect = {
			country_event = { id = zagros.11 days = 7 }
		}
	}
}

# What of the Bakhtiari?
country_event = {
	id = zagros.11
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.11"
	}
	title = zagros.11.t
	desc = zagros.11.d
	fire_only_once = yes
	is_triggered_only = yes

	# Collaborate with Bakhtiari - #Bakhtiari Khan as leader
	option = {
		name = zagros.11.a
		set_country_flag = ZGS_bakhtiari_path
			create_country_leader = {
		name = "Jafar Qoli Khan Bakhtiari"
		picture = "gfx/leaders/ZGS/Portrait_ZGS_Jafar_Qoli_Khan_Bakhtiari.png"
		expire = "1.1.1"
		ideology = authoritarian_democrat_subtype
	}
			set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = no
		}
		add_stability = 0.1
		add_political_power = 50
		custom_effect_tooltip = ZGS_bakhtiari_lead_tt
	}

	# Sideline Bakhtiari
	option = {
		name = zagros.11.b
		set_country_flag = ZGS_khazal_path
		add_stability = -0.05
		add_political_power = 25
		custom_effect_tooltip = ZGS_khazal_alone_tt
	}

	# Chaos!!! Wassmuss emerges (rare)
	option = {
		name = zagros.11.c
		trigger = {
			has_country_flag = ZGS_wassmuss_welcomed
			check_variable = { ZGS_qashqai_support < 30 }
			has_country_flag = ZGS_bakhtiari_dismissed
			OR = {
				has_country_flag = ZGS_khazal_threatened
				has_country_flag = ZGS_khazal_ignored
			}
		}
		custom_effect_tooltip = ZGS_wassmuss_emerges_tt
		hidden_effect = {
			country_event = { id = zagros.12 days = 7 }
		}
	}
}

# The German Steps Forward
country_event = {
	id = zagros.12
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event zagros.12"
	}
	title = zagros.12.t
	desc = zagros.12.d
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = zagros.12.a
		set_country_flag = ZGS_wassmuss_path
		clr_country_flag = ZGS_khazal_in_charge
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = no
		}
		add_stability = 0.1
		add_political_power = 100
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = large_increase
			}
		}
	}
}
	
