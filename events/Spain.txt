###########################
# Spain Events
###########################
# By ~mw~
###########################

add_namespace = sprd
add_namespace = sprf
add_namespace = sprc

#Events affecting other countries are under 'Foreign Policy'

# Introduction event
country_event = {
	id = sprd.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.1" }
	title = sprd.1.t
	desc = sprd.1.d
	picture = GFX_report_event_SPR_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.1.a
		add_stability = -0.30
	}
}

# Black Monday hits Spain
country_event = {
	id = sprd.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.2" }
	title = sprd.2.t
	desc = sprd.2.d
	picture = GFX_report_event_NOR_black_monday

	is_triggered_only = yes

	option = {
		name = sprd.2.a
		add_stability = -0.10
		add_ideas = SPR_black_monday
		hidden_effect = {
			country_event = {
				id = sprd.3
				days = 30
				random_days = 30
			}
		}
	}
}

# Social breakdown
country_event = {
	id = sprd.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.3" }
	title = sprd.3.t
	desc = sprd.3.d
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes

	option = {
		name = sprd.3.a
		add_stability = -0.20
	}
}

### Carlist Event Chains

# Carlist Succession Crisis in the Making
country_event = {
	id = sprd.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.4" }
	title = sprd.4.t
	desc = sprd.4.d
	picture = GFX_report_event_SPR_carlism

	is_triggered_only = yes

	option = {
		name = sprd.4.a
		add_stability = -0.02
		hidden_effect = {
			country_event = {
				id = sprd.5
				days = 20
			}
		}
	}
}

# Candidate - Javier de Bourbon-Parma
country_event = {
	id = sprd.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.5" }
	title = sprd.5.t
	desc = sprd.5.d
	picture = GFX_report_event_SPR_javier

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = sprd.5.a
		hidden_effect = {
			country_event = {
				id = sprd.6
				days = 5
			}
		}
	}
}

# Candidate - Carlos Pio de Habsburgo-Lorena y de Bourbon
country_event = {
	id = sprd.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.6" }
	title = sprd.6.t
	desc = sprd.6.d
	picture = GFX_report_event_SPR_carlos_pio

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = sprd.6.a
	}
}

# Alfonso Carlos Dies
country_event = {
	id = sprd.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.7" }
	title = sprd.7.t
	desc = sprd.7.d
	picture = GFX_report_event_SPR_alfonso_carlos

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1936.09.27
		NOT = {
			has_country_flag = alfonso_carlos_dead
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = sprd.7.a
		add_stability = -0.02
		set_country_flag = alfonso_carlos_dead
		hidden_effect = {
			country_event = {
				id = sprd.37
				days = 10
			}
		}
	}
}


# Javier gives another speech
country_event = {
	id = sprd.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.8" }
	title = sprd.8.t
	desc = {
		text = sprd.8.d_javier
		trigger = {
			has_country_flag = SPR_carlism_chose_javier
		}
	}
	desc = {
		text = sprd.8.d_carlos
		trigger = {
			has_country_flag = SPR_carlism_chose_carlos
		}
	}
	picture = GFX_report_event_SPR_carlism

	fire_only_once = yes

	trigger = {
		tag = SPR
		NOT = {
			has_war_with = CAR
		}
		NOT = {
			country_exists = CAR
		}
		OR = {
			has_country_flag = SPR_carlism_chose_javier
			has_country_flag = SPR_carlism_chose_carlos
		}
	}

	mean_time_to_happen = {
		days = 10
	}
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = sprd.9
				days = 30
				random_days = 150
			}
			country_event = {
				id = sprd.10
				days = 30
				random_days = 150
			}
			country_event = {
				id = sprd.11
				days = 30
				random_days = 150
			}
		}
	}

	option = {
		name = sprd.8.a #Time to ban his organisation
		custom_effect_tooltip = SPR_ban_carlists
		add_stability = -0.20
		set_country_flag = SPR_javier_banned
	}
	option = {
		name = sprd.8.b #Arrest Javier and his followers!
		custom_effect_tooltip = SPR_arrest_javier
		add_stability = -0.10
		set_country_flag = SPR_javier_arrested
		hidden_effect = {
			POR = {
				country_event = {
					id = sprf.3
					days = 20
					random_days = 80
				}
			}
		}
	}
	option = {
		name = sprd.8.c #Praise his efforts
		custom_effect_tooltip = SPR_encourage_javier
		add_political_power = -100
		add_stability = -0.02
		set_country_flag = SPR_javier_praised
	}
	option = {
		name = sprd.8.e #Ignore the pretender
		add_political_power = -50
		add_stability = -0.04
		set_country_flag = SPR_javier_ignored
	}
}

# Carlist bombing
country_event = {
	id = sprd.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.9" }
	title = sprd.9.t
	desc = sprd.9.d
	picture = GFX_report_event_IRE_bombing

	is_triggered_only = yes

	trigger = {
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_arrested
			has_country_flag = SPR_javier_ignored
		}
		NOT = {
			country_exists = CAR
			country_exists = CNT
			has_country_flag = election_success
			has_country_flag = aftermath_of_the_civil_war
		}
	}

	immediate = {
		hidden_effect = {
			country_event = {
				id = sprd.9
				days = 30
				random_days = 150
			}
		}
	}

	option = {
		name = sprd.9.a
		add_stability = -0.02
	}
}

# Carlist Demonstrations
country_event = {
	id = sprd.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.10" }
	title = sprd.10.t
	desc = sprd.10.d
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	trigger = {
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_ignored
		}
		NOT = {
			country_exists = CAR
			country_exists = CNT
			has_country_flag = election_success
			has_country_flag = aftermath_of_the_civil_war
		}
	}

	immediate = {
		hidden_effect = {
			country_event = {
				id = sprd.10
				days = 30
				random_days = 150
			}
		}
	}

	option = {
		name = sprd.10.a
		add_stability = -0.05
	}
}

# Assassination of Miguel Ponte Manso de Zuniga
country_event = {
	id = sprd.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.11" }
	title = sprd.11.t
	desc = sprd.11.d
	picture = GFX_report_event_generic_funeral

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_idea = SPR_Miguel_Ponte_Manso_de_Zuniga_sec_ade
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_arrested
			has_country_flag = SPR_cntfai_disband
			has_country_flag = SPR_cntfai_arrest
		}
		NOT = {
			country_exists = CAR
			country_exists = CNT
			has_country_flag = election_success
			has_country_flag = aftermath_of_the_civil_war
		}
	}

	option = {
		name = sprd.11.a
		add_stability = -0.05
		remove_ideas = SPR_Miguel_Ponte_Manso_de_Zuniga_sec_ade
		add_ideas = SPR_Blas_Perez_Gonzalez_sec_ade
	}
}

### CNT-FAI event chains

# The CNT-FAI speech
country_event = {
	id = sprd.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.13" }
	title = sprd.13.t
	desc = sprd.13.d
	picture = GFX_report_event_SPR_CNT_FAI

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = {
				id = sprd.14
				days = 20
				random_days = 30
			}
		}
	}

	option = {
		name = sprd.13.a #Ban the organisation of workers
		custom_effect_tooltip = SPR_ban_cntfai
		add_political_power = -100
		add_stability = -0.05
		set_country_flag = SPR_cntfai_banned
		add_popularity = {
			ideology = social_liberal
			popularity = -0.03
		}
		hidden_effect = {
			country_event = {
				id = sprd.15
				days = 20
				random_days = 30
			}
		}
	}
	option = {
		name = sprd.13.b #Arrest the leaders of the movement
		custom_effect_tooltip = SPR_arrest_cntfai
		add_stability = -0.10
		set_country_flag = SPR_cntfai_arrest
		add_popularity = {
			ideology = social_conservative
			popularity = -0.03
		}
		add_popularity = {
			ideology = social_liberal
			popularity = -0.03
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.03
		}
		add_popularity = {
			ideology = syndicalist
			popularity = -0.03
		}
		hidden_effect = {
			country_event = {
				id = sprd.16
				days = 20
				random_days = 30
			}
		}
	}
	option = {
		name = sprd.13.c #Forcefully disband the movement
		custom_effect_tooltip = SPR_force_cntfai
		add_stability = -0.20
		set_country_flag = SPR_cntfai_disband
		add_popularity = {
			ideology = social_conservative
			popularity = -0.05
		}
		add_popularity = {
			ideology = social_liberal
			popularity = -0.05
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = -0.03
		}
		add_popularity = {
			ideology = syndicalist
			popularity = -0.03
		}
		hidden_effect = {
			country_event = {
				id = sprd.17
				days = 20
				random_days = 30
			}
		}
	}
	option = {
		name = sprd.13.e #Allow this to happen
		custom_effect_tooltip = SPR_allow_cntfai
		add_political_power = -200
		set_country_flag = SPR_cntfai_allowed
		add_popularity = {
			ideology = social_conservative
			popularity = 0.03
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.03
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.03
		}
		hidden_effect = {
			country_event = {
				id = sprd.18
				days = 20
				random_days = 80
			}
		}
	}
}

# CNT-FAI Protests
country_event = {
	id = sprd.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.14" }
	title = sprd.14.t
	desc = sprd.14.d
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	option = {
		name = sprd.14.a
		add_stability = -0.05
	}
}

# National CNT-FAI Protests
country_event = {
	id = sprd.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.15" }
	title = sprd.15.t
	desc = sprd.15.d
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	option = {
		name = sprd.15.a #Send out the police!
		add_stability = -0.10
	}
	option = {
		name = sprd.15.b #Allow them to organise
		custom_effect_tooltip = SPR_allow_cntfai
		set_country_flag = SPR_cntfai_allowed
		clr_country_flag = SPR_cntfai_banned
		add_popularity = {
			ideology = social_conservative
			popularity = 0.03
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.03
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.03
		}
	}
}

# Arresting the CNT-FAI
country_event = {
	id = sprd.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.16" }
	title = sprd.16.t
	desc = sprd.16.d
	picture = GFX_report_event_HOL_zwolle_riots

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_other_country = {
				limit = {
					OR = {
						tag = FRA
						tag = ENG
						tag = SRI
					}
				}
				country_event = { id = sprf.5 days = 15 }
			}
		}
	}

	option = {
		name = sprd.16.a #Find the rat and establish a secret police!
		trigger = {
			NOT = { has_idea = SPR_Tomas_Conde_de_Redezno_sec_pau }
		}
		ai_chance = {
			factor = 85
		}
		add_stability = 0.05
		hidden_effect = { remove_ideas_with_trait = security_minister }
		add_ideas = SPR_Tomas_Conde_de_Redezno_sec_pau
	}
	option = {
		name = sprd.16.b #We knew this would happen
		ai_chance = {
			factor = 15
		}
		add_stability = -0.05
	}
}

# Forcefully Disbanding the CNT-FAI
country_event = {
	id = sprd.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.17" }
	title = sprd.17.t
	desc = sprd.17.d
	picture = GFX_report_event_HOL_zwolle_riots

	is_triggered_only = yes

	option = {
		name = sprd.17.a
		add_stability = 0.05
		hidden_effect = {
			random_other_country = {
				limit = {
					OR = {
						tag = FRA
						tag = ENG
						tag = SRI
					}
				}
				country_event = { id = sprf.5 days = 15 }
			}
		}
	}
}

# CNT-FAI organising the workers
country_event = {
	id = sprd.18
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.18" }
	title = sprd.18.t
	desc = sprd.18.d
	picture = GFX_report_event_SPR_CNT_FAI

	is_triggered_only = yes

	option = {
		name = sprd.18.a
		add_stability = 0.02
		hidden_effect = {
			country_event = {
				id = sprd.19
				days = 20
				random_days = 80
			}
		}
	}
}

# CNT-FAI Plan South commenced
country_event = {
	id = sprd.19
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.19" }
	title = sprd.19.t
	desc = sprd.19.d
	picture = GFX_report_event_generic_economic_policy

	is_triggered_only = yes

	option = {
		name = sprd.19.a
		add_stability = 0.05
		set_country_flag = SPR_cntfai_plan_south
		hidden_effect = {
			country_event = {
				id = sprd.20
				days = 20
				random_days = 80
			}
		}
	}
}

# CNT-FAI Plan South completed
country_event = {
	id = sprd.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.20" }
	title = sprd.20.t
	desc = sprd.20.d
	picture = GFX_report_event_generic_economic_policy

	is_triggered_only = yes

	option = {
		name = sprd.20.a
		173 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_resource = {
				type = steel
				amount = 4
			}
		}
		168 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
	}
}

### Election event chains

# King Alfonso has a stroke
country_event = {
	id = sprd.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.21" }
	title = sprd.21.t
	desc = sprd.21.d
	picture = GFX_report_event_SPR_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.21.a
		set_country_flag = SPR_alfonso_coma
		add_political_power = -100
		add_stability = -0.10
		hidden_effect = {
			country_event = {
				id = sprd.22
				days = 10
			}
		}
	}
}

# King Alfonso is in a coma
country_event = {
	id = sprd.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.22" }
	title = sprd.22.t
	desc = sprd.22.d
	picture = GFX_report_event_SPR_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.22.a #Call for open elections
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_civil_war
					option = SPR_CIVIL_WAR
				}
			}
		}
		custom_effect_tooltip = SPR_free_elections
		set_country_flag = SPR_elections
		hidden_effect = {
			country_event = {
				id = sprd.23
				days = 5
			}
		}
	}
	option = {
		name = sprd.22.b #Call for elections, but with only selected parties
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_SPR
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CNT
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CAR
					}
				}
			}
		}
		custom_effect_tooltip = SPR_rig_elections
		hidden_effect = {
			country_event = {
				id = sprd.25
				days = 5
			}
		}
	}
	option = {
		name = sprd.22.c #The King is not dead! Do nothing!
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_SPR
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CNT
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CAR
					}
				}
			}
		}
		add_stability = -0.10
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
}

# Free elections are held
country_event = {
	id = sprd.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.23" }
	title = sprd.23.t
	desc = sprd.23.d
	picture = GFX_report_event_election_vote

	trigger = {
		has_country_flag = SPR_elections
		NOT = {
			has_war_with = CAR
			has_war_with = CNT
		}
	}

	is_triggered_only = yes

	option = {
		name = sprd.23.a #Establishment Victory
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CNT
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CAR
					}
				}
			}
		}
		custom_effect_tooltip = SPR_ruling_party_wins
		hidden_effect = {
			country_event = {
				id = sprd.34
				hours = 5
			}
		}
	}
	
	option = {
		name = sprd.23.b #Cnt Fai victory
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_SPR
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CAR
					}
				}
			}
		}
		custom_effect_tooltip = SPR_CNT_wins
		hidden_effect = {
			country_event = {
				id = sprd.35
				hours = 5
			}
		}
	}
	
	option = {
		name = sprd.23.c #Carlist Victory
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_SPR
					}
					has_game_rule = {
						rule = SPR_civil_war
						option = SPR_CIVIL_WAR_AVOIDED_CNT
					}
				}
			}
		}
		custom_effect_tooltip = SPR_CAR_wins
		hidden_effect = {
			country_event = {
				id = sprd.36
				hours = 5
			}
		}
	}
}

# Elections cancelled due to war
country_event = {
	id = sprd.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.24" }
	title = sprd.24.t
	desc = sprd.24.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	trigger = {
		has_country_flag = SPR_elections
		OR = {
			has_war_with = CAR
			has_war_with = CNT
		}
	}

	option = {
		name = sprd.24.a
		clr_country_flag = SPR_elections
		add_stability = -0.10
	}
}

# Election riots
country_event = {
	id = sprd.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.25" }
	title = sprd.25.t
	desc = sprd.25.d
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	option = {
		name = sprd.25.a #Call off the election - Martial Law is declared
		ai_chance = {
			factor = 75
		}
		custom_effect_tooltip = SPR_cancel_election
		add_political_power = -200
		add_stability = 0.10
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
	option = {
		name = sprd.25.b #Nothing will stop this election
		ai_chance = {
			factor = 25
		}
		add_stability = -0.10
		hidden_effect = {
			country_event = {
				id = sprd.26
				days = 1
			}
		}
	}
}

# Election day disaster
country_event = {
	id = sprd.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.26" }
	title = sprd.26.t
	desc = sprd.26.d
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_war_with = CNT
			has_war_with = CAR
		}
	}

	option = {
		name = sprd.26.a
		add_stability = -0.10
		add_manpower = -10000
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
}

### POST-WAR EVENTS

# Replacing the king - Juan not assassinated
country_event = {
	id = sprd.27
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.27" }
	title = sprd.27.t
	desc = sprd.27.d
	picture = GFX_report_event_SPR_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.27.a #Name him as Alfonso's successor
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_future_of_the_monarchy
					option = SPR_FUTURE_OF_THE_MONARCHY_REPUBLIC
				}
			}
		}
		add_political_power = 40
		create_country_leader = {
			name = "Juan III"
			desc = "POLITICS_JUAN_BOURBON_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Juan_III.png"
			expire = "1965.1.1"
			ideology = autdem_christian_democracy_subtype
		}
		set_country_flag = SPR_King_Juan
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
	}
	option = {
		name = sprd.27.c #Name him as Alfonso's successor
		ai_chance = {
			factor = 0
		}
		add_political_power = 40
		create_country_leader = {
			name = "Jaime I"
			desc = "POLITICS_JAIME_BOURBON_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
			expire = "1965.1.1"
			ideology = autdem_christian_democracy_subtype
		}
		set_country_flag = SPR_King_Jaime
		if = {
			limit = {
				NOT = { has_government = authoritarian_democrat }
			}
			set_politics = {
				ruling_party = authoritarian_democrat
			}
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
	}
	option = {
		name = sprd.27.b #No, the time of the kingdom is over
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_future_of_the_monarchy
					option = SPR_FUTURE_OF_THE_MONARCHY_NEW_KING
				}
			}
		}
		add_political_power = -100
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Franco_Bahamonde.png"
			expire = "1965.1.1"
			ideology = authdem_junta_subtype
		}
		custom_effect_tooltip = SPR_become_republic
		set_cosmetic_tag = SPR_republic
		hidden_effect = {
			remove_ideas_with_trait = head_of_government
		}
		add_ideas = SPR_Francisco_Franco_Bahamonde_hog_ade
		set_country_flag = SPR_republic
	}
}

# Replacing the king - Juan assassinated
country_event = {
	id = sprd.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.28" }
	title = sprd.28.t
	desc = sprd.28.d
	picture = GFX_report_event_SPR_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.27.a #Name him as Alfonso's successor
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_future_of_the_monarchy
					option = SPR_FUTURE_OF_THE_MONARCHY_REPUBLIC
				}
			}
		}
		add_political_power = 40
		create_country_leader = {
			name = "Jaime I"
			desc = "POLITICS_JAIME_BOURBON_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
			expire = "1965.1.1"
			ideology = autdem_christian_democracy_subtype
		}
		set_country_flag = SPR_King_Jaime
		if = {
			limit = {
				NOT = { has_government = authoritarian_democrat }
			}
			set_politics = {
				ruling_party = authoritarian_democrat
			}
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.1
		}
	}
	option = {
		name = sprd.27.b #No, the time of the kingdom is over
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_future_of_the_monarchy
					option = SPR_FUTURE_OF_THE_MONARCHY_NEW_KING
				}
			}
		}
		add_political_power = -100
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Franco_Bahamonde.png"
			expire = "1965.1.1"
			ideology = authdem_junta_subtype
		}
		custom_effect_tooltip = SPR_become_republic
		set_cosmetic_tag = SPR_republic
		hidden_effect = {
			remove_ideas_with_trait = head_of_government
		}
		if = {
			limit = {
				NOT = { has_government = authoritarian_democrat }
			}
			set_politics = {
				ruling_party = authoritarian_democrat
			}
		}
		add_ideas = SPR_Francisco_Franco_Bahamonde_hog_ade
		set_country_flag = SPR_republic
	}
}

# Spain asks to join the Reichspakt
country_event = {
	id = sprd.30
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.30" }
	title = sprd.30.t
	desc = sprd.30.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	option = {
		name = sprd.30.a #Absolutely, they are welcome
		ai_chance = {
			factor = 95
		}
		add_political_power = 140
		effect_tooltip = {
			add_to_faction = SPR
		}
		SPR = {
			country_event = {
				id = sprd.32
				hours = 5
			}
		}
	}
	option = {
		name = sprd.30.b #It's not a good idea
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_REICHSPAKT
				}
			}
		}
		add_political_power = -20
		SPR = {
			country_event = {
				id = sprd.33
				hours = 5
			}
		}
	}
}

# Spain asks to join the Entente
country_event = {
	id = sprd.31
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.31" }
	title = sprd.31.t
	desc = sprd.31.d
	picture = GFX_report_event_generic_diplomacy4

	is_triggered_only = yes

	trigger = {
		is_faction_leader = yes
		FROM = {
			exists = yes
			is_in_faction = no
		}
	}

	option = {
		name = sprd.30.a #Absolutely, they are welcome
		ai_chance = {
			factor = 99
		}
		effect_tooltip = {
			add_to_faction = FROM
		}
		FROM = {
			country_event = {
				id = sprd.32
				hours = 5
			}
		}
	}
	option = {
		name = sprd.30.b #It's not a good idea
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_forpol
					option = SPR_FORPOL_ENTENTE
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = CAR_foreign_policy
					option = CAR_ENTENTE
				}
			}
		}
		add_political_power = -20
		FROM = {
			country_event = {
				id = sprd.33
				hours = 5
			}
		}
	}
}

# Spain admitted to faction
country_event = {
	id = sprd.32
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.32" }
	title = sprd.32.t
	desc = sprd.32.d
	picture = GFX_report_event_generic_diplomacy3

	is_triggered_only = yes

	trigger = {
		is_in_faction = no
		FROM = {
			exists = yes
			is_faction_leader = yes
		}
	}

	option = {
		name = sprd.32.a
		add_political_power = 60
		FROM = {
			add_to_faction = ROOT
		}
	}
}

# Spain is turned down
country_event = {
	id = sprd.33
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.33" }
	title = sprd.33.t
	desc = sprd.33.d
	picture = GFX_report_event_worried_french

	is_triggered_only = yes

	option = {
		name = sprd.33.a
		add_political_power = -20
	}
}

# The ruling party wins the elections
country_event = {
	id = sprd.34
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.34" }
	title = sprd.34.t
	desc = sprd.34.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.34.a
		add_stability = 0.10
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.2
		}
		set_country_flag = election_success
		clr_country_flag = SPR_carlists_will_rise
		clr_country_flag = SPR_cntfai_will_rise
		hidden_effect = {
			news_event = worldnews.85
		}
	}
}

# The CNT-FAI wins the elections
country_event = {
	id = sprd.35
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.35" }
	title = sprd.35.t
	desc = sprd.35.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.35.a #We will abide by the result
		ai_chance = {
			factor = 30
		}
		custom_effect_tooltip = SPR_become_CNT
		set_global_flag = SPR_avoided_war
		hidden_effect = {
			if = {
				limit = {
					has_idea = SPR_black_monday
				}
				set_global_flag = SPR_black_monday
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown
				}
				set_global_flag = SPR_social_breakdown
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown_2
				}
				set_global_flag = SPR_social_breakdown_2
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown_3
				}
				set_global_flag = SPR_social_breakdown_3
			}
			every_state = {
				limit = {
					is_core_of = SPR
				}
				add_core_of = CNT
			}
			every_state = {
				limit = {
					is_claimed_by = SPR
				}
				remove_claim_by = SPR
				add_claim_by = CNT
			}
			random_owned_controlled_state = {
				CNT = {
					transfer_state = PREV
				}
			}
			CNT = {
				annex_country = {
					target = SPR
					transfer_troops = yes
				}
			SPR = {
			CNT = { transfer_technology = yes }
			}
			CNT = { set_capital = { state = 41 } }
				set_country_flag = election_success
				add_stability = 0.10
				transfer_technology = yes
				if = {
					limit = {
						has_global_flag = SPR_black_monday
					}
					clr_global_flag = SPR_black_monday
					add_ideas = SPR_black_monday
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown
					}
					clr_global_flag = SPR_social_breakdown
					add_ideas = SPR_social_breakdown
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown_2
					}
					clr_global_flag = SPR_social_breakdown_2
					add_ideas = SPR_social_breakdown_2
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown_3
					}
					clr_global_flag = SPR_social_breakdown_3
					add_ideas = SPR_social_breakdown_3
				}
				change_tag_from = SPR
			}
			news_event = worldnews.85
		}
	}
	option = {
		name = sprd.35.b #Never! Invalidate the elections!
		ai_chance = {
			factor = 70
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_civil_war
					option = SPR_CIVIL_WAR_AVOIDED_CNT
				}
			}
		}
		add_political_power = -200
		add_stability = -0.10
		set_country_flag = SPR_cntfai_will_rise
	}
}

# The Carlists win the elections
country_event = {
	id = sprd.36
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.36" }
	title = sprd.36.t
	desc = sprd.36.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.35.a #We will abide by the result
		ai_chance = {
			factor = 50
		}
		custom_effect_tooltip = SPR_become_CAR
		hidden_effect = {
			if = {
				limit = {
					has_idea = SPR_black_monday
				}
				set_global_flag = CAR_black_monday
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown
				}
				set_global_flag = SPR_social_breakdown
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown_2
				}
				set_global_flag = SPR_social_breakdown_2
			}
			if = {
				limit = {
					has_idea = SPR_social_breakdown_3
				}
				set_global_flag = SPR_social_breakdown_3
			}
			every_state = {
				limit = {
					is_core_of = SPR
				}
				remove_core_of = SPR
				add_core_of = CAR
			}
			every_state = {
				limit = {
					is_claimed_by = SPR
				}
				remove_claim_by = SPR
				add_claim_by = CAR
			}
			random_owned_controlled_state = {
				CAR = {
					transfer_state = PREV
				}
			}
			CAR = {
				annex_country = {
					target = SPR
					transfer_troops = yes
				}
			SPR = {
			CAR = { transfer_technology = yes }
			}
			CAR = { set_capital = { state = 41 } }
				set_country_flag = election_success
				add_stability = 0.10
				transfer_technology = yes
				if = {
					limit = {
						has_global_flag = CAR_black_monday
					}
					clr_global_flag = CAR_black_monday
					add_ideas = CAR_black_monday
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown
					}
					clr_global_flag = SPR_social_breakdown
					add_ideas = SPR_social_breakdown
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown_2
					}
					clr_global_flag = SPR_social_breakdown_2
					add_ideas = SPR_social_breakdown_2
				}
				if = {
					limit = {
						has_global_flag = SPR_social_breakdown_3
					}
					clr_global_flag = SPR_social_breakdown_3
					add_ideas = SPR_social_breakdown_3
				}
				if = {
					limit = {
						SPR = {
							has_country_flag = SPR_carlism_chose_javier
						}
					}
					set_politics = {
						ruling_party = paternal_autocrat
						last_election = "1937.5.15"
						election_frequency = 48
						elections_allowed = no
					}
				}
				if = {
					limit = {
						SPR = {
							has_country_flag = SPR_carlism_chose_carlos
						}
					}
					CAR = {
						set_politics = {
							ruling_party = national_populist
							last_election = "1937.5.15"
							election_frequency = 48
							elections_allowed = no
						}
						set_popularities = {
							totalist = 0
							radical_socialist = 0
							syndicalist = 0
							social_democrat = 3
							social_liberal = 3
							market_liberal = 7
							social_conservative = 0
							authoritarian_democrat = 10
							paternal_autocrat = 17
							national_populist = 60
						}
						add_ideas = {
							CAR_Jesus_Cora_y_Lira_hog_npo
							CAR_Jose_Luis_Arrese_Magra_for_pau
							CAR_Joaquin_Bau_Nolla_eco_npo
							CAR_Tomas_Conde_de_Redezno_sec_pau
						}
						random_unit_leader = {
							limit = { has_id = 3110 }			
							remove_unit_leader = yes
						}
						create_field_marshal = { #Auto-Generated
							name = "Carlos VIII"
							portrait_path = "gfx/leaders/CAR/Portrait_CAR_Carlos_VIII.png"
							traits = {
								media_personality
								trait_reckless
								inspirational_leader
							}
							skill = 1
							attack_skill = 1
							defense_skill = 1
							planning_skill = 1
							logistics_skill = 1
						}
					}
				}
				change_tag_from = SPR
			}
			news_event = worldnews.85
		}
	}
	option = {
		name = sprd.35.b #Never! Invalidate the elections!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_civil_war
					option = SPR_CIVIL_WAR_AVOIDED_CAR
				}
			}
		}
		add_political_power = -200
		add_stability = -0.10
		set_country_flag = SPR_carlists_will_rise
	}
}
# The Grand Carlist Assembly
country_event = {
	id = sprd.37
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.37" }
	title = sprd.37.t
	desc = sprd.37.d
	picture = GFX_report_event_SPR_carlism

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = sprd.37.a
		set_country_flag = SPR_carlism_chose_javier
	}
	option = {
		name = sprd.37.b
		set_country_flag = SPR_carlism_chose_carlos
	}
}



########################################
#### Kingdom of Spain, Foreign Policy
########################################

# Carlists flee to Portugal
country_event = {
	id = sprf.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprf.3" }
	title = sprf.3.t
	desc = sprf.3.d
	picture = GFX_report_event_SPR_javier

	is_triggered_only = yes

	option = {
		name = sprf.3.a #Allow them to continue operating from Portugal
		ai_chance = {
			factor = 85
		}
		add_political_power = 50
		reverse_add_opinion_modifier = {
			target = GER
			modifier = KR_hates_govt
		}
		reverse_add_opinion_modifier = {
			target = AUS
			modifier = KR_hates_govt
		}
		reverse_add_opinion_modifier = {
			target = SPR
			modifier = KR_outraged
		}
	}
	option = {
		name = sprf.3.b #Break off diplomatic relations with Spain
		ai_chance = {
			factor = 10
		}
		reverse_add_opinion_modifier = {
			target = SPR
			modifier = KR_outraged
		}
	}
	option = {
		name = sprf.3.c #Wash our hands of the Carlists
		ai_chance = {
			factor = 5
		}
		add_political_power = -100
	}
}

# CNT-FAI flees to FRA/SRI/ENG
country_event = {
	id = sprf.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprf.5" }
	title = sprf.4.t
	desc = sprf.4.d
	picture = GFX_report_event_SPR_CNT_refugees

	is_triggered_only = yes

	trigger = {
		has_socialist_government = yes
		NOT = {
			country_exists = CNT
			has_global_flag = spanish_civil_war
		}
	}

	option = {
		name = sprf.4.a
		ai_chance = {
			factor = 75
			modifier = {
				add = -40
				tag = FRA
				NOT = { has_country_flag = FRA_support_cnt }
			}
			modifier = {
				add = 10
				tag = FRA
				has_country_flag = FRA_support_cnt
			}
			modifier = {
				add = -70
				tag = ENG
				NOT = { has_country_flag = FRA_support_cnt }
			}
		}
		set_variable = { CNT.CNT_foreign_support = ROOT }
		add_political_power = 60
		reverse_add_opinion_modifier = {
			target = SPR
			modifier = cntfai_supported
		}
		add_manpower = -20000
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -500
		}
	}
	option = {
		name = sprf.4.b
		ai_chance = {
			factor = 20
			modifier = {
				add = 25
				tag = FRA
				NOT = { has_country_flag = FRA_support_cnt }
			}
			modifier = {
				add = -10
				tag = FRA
				has_country_flag = FRA_support_cnt
			}
			modifier = {
				add = 10
				tag = FRA
				has_country_flag = FRA_support_cnt
			}
		}
		add_political_power = -20
		reverse_add_opinion_modifier = {
			target = SPR
			modifier = cntfai_given_refuge
		}
	}
	option = {
		name = sprf.4.c
		ai_chance = {
			factor = 5
			modifier = {
				add = 15
				tag = FRA
				NOT = { has_country_flag = FRA_support_cnt }
			}
			modifier = {
				add = 70
				tag = ENG
				NOT = { has_country_flag = FRA_support_cnt }
			}
		}
		add_political_power = -100
		set_country_flag = CNT_kicked_out
		reverse_add_opinion_modifier = {
			target = SPR
			modifier = cntfai_kicked_out
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					OR = {
						tag = FRA
						tag = ENG
						tag = SRI
					}
					NOT = { has_country_flag = CNT_kicked_out }
				}
				country_event = { id = sprf.5 days = 15 }
			}
		}
	}
}

# Latin Economic Union
country_event = {
	id = sprf.6
	title = sprf.6.t
	desc = sprf.6.d
	picture = GFX_report_event_SPA_javier

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event sprf.6 option sprf.6.a"
		name = sprf.6.a
		add_ideas = SPR_economic_cooperation_idea
		add_opinion_modifier = { target = ROOT modifier = mediterranean_economic_block }
		reverse_add_opinion_modifier = { target = ROOT modifier = mediterranean_economic_block }
	}
}

# Portugal Friendship
country_event = {
	id = sprf.7
	title = sprf.7.t
	desc = sprf.7.d
	picture = GFX_report_event_por_salazar_franco1

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event sprf.7 option sprf.7.a"
		name = sprf.7.a
		random_owned_controlled_state = {
			prioritize = { 112 } #Lisbon
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = { type = industrial_complex level = 1 instant_build = yes }
		}
		SPR = { add_opinion_modifier = { target = POR modifier = large_increase } }
		POR = { add_opinion_modifier = { target = SPR modifier = large_increase } }
	}
}

# Spanish Friendship
country_event = {
	id = sprf.8
	title = sprf.8.t
	desc = sprf.8.d
	picture = GFX_report_event_SIC_naples

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event sprf.8 option sprf.8.a"
		name = sprf.8.a
		SPR = { add_opinion_modifier = { target = SRD modifier = large_increase } }
		SRD = { add_opinion_modifier = { target = SPR modifier = large_increase } }
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 500
			producer = SPR
		}
		add_equipment_to_stockpile = {
			type = convoy_1
			amount = 50
			producer = SPR
		}
	}
}

country_event = { #Gibraltar lease event to GER (triggered by focus)
	id = sprf.11
	title = sprf.11.t
	desc = sprf.11.d
	picture = GFX_report_event_GER_ship

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprf.11 option sprf.11.a"
		name = sprf.11.a
		ai_chance = { base = 100 }
		118 = {
			transfer_state_to = GER
			set_compliance = 50
		}
		SPR = { give_military_access = GER }
		add_timed_idea = {
			idea = SPA_gibraltar_lease
			days = 90
		}
		hidden_effect = {
			SPR = {
				set_country_flag = SPR_GER_gibraltar_lease
				country_event = { id = sprf.12 days = 2 }
			}
		}
	}
	option = {
		log = "[GetLogInfo]: event sprf.11 option sprf.11.b"
		name = sprf.11.b
		ai_chance = { base = 0 }
		hidden_effect = {
			SPR = { country_event = { id = sprf.13 days = 2 } }
		}
	}
}
country_event = { #Germany accepts
	id = sprf.12
	title = sprf.12.t
	desc = sprf.12.d

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprf.12 option sprf.12.a"
		name = sprf.12.a
		add_political_power = 10
		add_offsite_building = {
			type = industrial_complex
			level = 3
		}
	}
}
country_event = { #Germany refuses
	id = sprf.13
	title = sprf.13.t
	desc = sprf.13.d

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprf.13 option sprf.13.a"
		name = sprf.13.a
		add_political_power = -20
	}
}
country_event = { #Gibraltar Seized after GER capped
	id = sprf.14
	title = sprf.14.t
	desc = sprf.14.d
	picture = GFX_report_event_spr_occupation_of_tangiers

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprf.14 option sprf.14.a"
		name = sprf.14.a
	}
}
country_event = { #Notify Germany that Gibraltar will be returned now
	id = sprf.15
	title = sprf.15.t
	desc = sprf.15.d
	picture = GFX_report_event_spr_occupation_of_tangiers

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		GER = { NOT = { has_war_with = SPR } }
	}

	option = {
		log = "[GetLogInfo]: event sprf.15 option sprf.15.a"
		name = sprf.15.a
		118 = {
			set_compliance = 0
			transfer_state_to = SPR
		}
		diplomatic_relation = {
			country = SPR
			relation = military_access
			active = no
		}
		hidden_effect = { SPR = { country_event = { id = sprf.16 hours = 5 } } }
	}
}
country_event = { #SPR notified of return of Gibraltar
	id = sprf.16
	title = sprf.16.t
	desc = sprf.16.d
	picture = GFX_report_event_spr_occupation_of_tangiers

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprf.16 option sprf.16.a"
		name = sprf.16.a
		hidden_effect = { clr_country_flag = SPR_GER_gibraltar_lease }
	}
}

########################################
#### Spanish Civil War
########################################

### UPRISINGS ###

# Carlist Uprising begins
country_event = {
	id = sprc.1
	title = sprc.1.t
	desc = sprc.1.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = SPR
		OR = {
			176 = { is_owned_and_controlled_by = SPR } #Castilla la Vieja
			172 = { is_owned_and_controlled_by = SPR } #Navarra
			174 = { is_owned_and_controlled_by = SPR } #León
			171 = { is_owned_and_controlled_by = SPR } #Galicia
			793 = { is_owned_and_controlled_by = SPR } #Asturias
		}
		has_country_flag = SPR_carlists_will_rise
		NOT = {
			date > 1937.10.1
			has_country_flag = election_success
			has_country_flag = SPR_elections
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprc.1"
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = Manuel_Fal_Conde_dead
		set_country_flag = Onesimo_Redondo_Ortega_dead
		set_country_flag = Jose_Luis_Arrese_Magra_dead
		every_state = {
			limit = {
				OR = {
					is_core_of = SPR
					is_core_of = CNT
				}
			}
			add_claim_by = CAR
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 176 #Castilla la Vieja
					state = 172 #Navarra
					state = 174 #León
					state = 171 #Galicia
					state = 793 #Asturias
				}
			}
			remove_claim_by = CAR
			add_core_of = CAR
			remove_core_of = SPR
			add_claim_by = SPR
			CAR = {
				transfer_state = PREV
			}
		}
		if = {
			limit = {
				has_idea = SPR_black_monday
			}
			CAR = {
				add_ideas = CAR_black_monday
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown
			}
			CAR = {
				add_ideas = SPR_social_breakdown
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown_2
			}
			CAR = {
				add_ideas = SPR_social_breakdown_2
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown_3
			}
			CAR = {
				add_ideas = SPR_social_breakdown_3
			}
		}
		CAR = {
			transfer_technology = yes
		}
	}

	option = {
		name = sprc.1.a #We shall fight them!
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_template = "Guardias de Reserva" }
					}
					division_template = {
						name = "Guardias de Reserva"
						division_names_group = SPR_INF_01
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
						support = {
							artillery = { x = 0 y = 0 }
						}
					}
				}
				41 = {
					create_unit = {
						division = "name = \"Falange de Madrid\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
						owner = SPR
						prioritize_location = 3938
					}
				}
			}
		}
		CAR = {
			country_event = {
				id = sprc.2
				days = 7
			}
		}
	}
	option = {
		name = sprc.1.b #Long live Javier I! (Play as the Carlists)
		trigger = {
			is_ai = no
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_template = "Guardias de Reserva" }
				}
				division_template = {
					name = "Guardias de Reserva"
					division_names_group = SPR_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
			}
			41 = {
				create_unit = {
					division = "name = \"Falange de Madrid\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
					owner = SPR
					prioritize_location = 3938
				}
			}
		}
		CAR = {
			country_event = {
				id = sprc.2
				days = 7
			}
			change_tag_from = SPR
		}
	}
	option = {
		name = sprc.1.c #Long live Carlos VIII! (Play as the Carlists)
		trigger = {
			is_ai = no
			has_country_flag = SPR_carlism_chose_carlos
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_template = "Guardias de Reserva" }
				}
				division_template = {
					name = "Guardias de Reserva"
					division_names_group = SPR_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
			}
			41 = {
				create_unit = {
					division = "name = \"Falange de Madrid\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
					owner = SPR
					prioritize_location = 3938
				}
			}
			CAR = {
				set_politics = {
					ruling_party = national_populist
					last_election = "1888.6.15"
					election_frequency = 48
					elections_allowed = no
				}
				set_popularities = {
					totalist = 0
					radical_socialist = 0
					syndicalist = 0
					social_democrat = 3
					social_liberal = 3
					market_liberal = 7
					social_conservative = 0
					authoritarian_democrat = 10
					paternal_autocrat = 17
					national_populist = 60
				}
				add_ideas = {
					CAR_Jesus_Cora_y_Lira_hog_npo
					CAR_Jose_Luis_Arrese_Magra_for_pau
					CAR_Joaquin_Bau_Nolla_eco_npo
					CAR_Jose_Luis_Arrese_Magra_sec_pau
				}
				random_unit_leader = {
					limit = { has_id = 3110 }			
					remove_unit_leader = yes
				}
				create_field_marshal = { #Auto-Generated
					name = "Carlos VIII"
					portrait_path = "gfx/leaders/CAR/Portrait_CAR_Carlos_VIII.png"
					traits = {
						media_personality
						trait_reckless
						inspirational_leader
					}
					skill = 1
					attack_skill = 1
					defense_skill = 1
					planning_skill = 1
					logistics_skill = 1
				}
			}
		}
		CAR = {
			country_event = {
				id = sprc.2
				days = 7
			}
			change_tag_from = SPR
		}
	}
}

# Carlist boot event
country_event = {
	id = sprc.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.2" }
	title = sprc.2.t
	desc = sprc.2.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.2.a
		hidden_effect = {
			load_oob = "SCW_CAR"
		}
		if = {
			limit = {
				is_ai = yes
				OR = {
					SPR = {
						is_ai = no
					}
					CNT = {
						is_ai = no
					}
				}
			}
			hidden_effect = {
				load_oob = SCW_CAR_reinforce1
			}
		}
		set_global_flag = spanish_civil_war
		add_equipment_to_stockpile = {
			type = infantry_equipment_1
			amount = 2000
			producer = ITA
		}
		add_opinion_modifier = {
			target = ITA
			modifier = supports_us_civil_war_2
		}
		add_opinion_modifier = {
			target = AUS
			modifier = supports_us_civil_war_1
		}
		add_opinion_modifier = {
			target = POR
			modifier = supports_us_civil_war_1
		}
		add_opinion_modifier = {
			target = GER
			modifier = against_us_civil_war_1
		}
		reverse_add_opinion_modifier = {
			target = GER
			modifier = against_carlist_1
		}
		if = {
			limit = {
				owns_state = 176
			}
			set_capital = { state = 176 }
		}
		declare_war_on = {
			target = SPR
			type = annex_everything
		}
		if = {
			limit = {
				country_exists = CNT
				NOT = {
					has_war_with = CNT
				}
			}
			declare_war_on = {
				target = CNT
				type = annex_everything
			}
			hidden_effect = {
				random_other_country = {
					limit = {
						NOT = {
							tag = CNT
						}
						NOT = {
							tag = SPR
						}
					}
					news_event = {
						id = worldnews.4
						days = 1
					}
				}
				country_event = {
					id = worldtension.4
					days = 1
				}
				country_event = { id = sprc.121 days = 15 random_days = 20 }
			}
		}
		add_ideas = extensive_conscription
		add_ideas = CAR_rally_carlists_idea
	}
}

# CNT-FAI uprising begins
country_event = {
	id = sprc.3
	title = sprc.3.t
	desc = sprc.3.d
	picture = GFX_report_event_SPR_civwar2

	fire_only_once = yes

	trigger = {
		tag = SPR
		OR = {
			165 = { is_owned_and_controlled_by = SPR } #Catalonia
			1313 = { is_owned_and_controlled_by = SPR } #Andorra
			167 = { is_owned_and_controlled_by = SPR } #Valencia
			166 = { is_owned_and_controlled_by = SPR } #Aragón
			168 = { is_owned_and_controlled_by = SPR } #Murcia
			940 = { is_owned_and_controlled_by = SPR } #Huesca
		}
		has_country_flag = SPR_cntfai_will_rise
		NOT = {
			date > 1937.10.1
			has_country_flag = election_success
			has_country_flag = SPR_elections
		}
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprc.3"
		set_country_flag = SPR_carlists_will_rise
		set_country_flag = Juan_Garcia_Oliver_dead
		set_country_flag = Angel_Pestana_dead
		set_country_flag = Juan_Peiro_Belis_dead
		set_country_flag = Joaquin_Ascaso_Budria_dead
		every_state = {
			limit = {
				OR = {
					is_core_of = SPR
					is_core_of = CAR
				}
			}
			add_claim_by = CNT
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 165 #Catalonia
					state = 1313 #Andorra
					state = 167 #Valencia
					state = 166 #Aragón
					state = 168 #Murcia
					state = 940
				}
			}
			remove_claim_by = CNT
			add_core_of = CNT
			remove_core_of = SPR
			add_claim_by = SPR
			CNT = {
				transfer_state = PREV
			}
		}
		if = {
			limit = {
				has_idea = SPR_black_monday
			}
			CNT = {
				add_ideas = SPR_black_monday
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown
			}
			CNT = {
				add_ideas = SPR_social_breakdown
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown_2
			}
			CNT = {
				add_ideas = SPR_social_breakdown_2
			}
		}
		if = {
			limit = {
				has_idea = SPR_social_breakdown_3
			}
			CNT = {
				add_ideas = SPR_social_breakdown_3
			}
		}
		CNT = {
			transfer_technology = yes
		}
	}

	option = {
		name = sprc.3.a #We shall fight to stop this revolution!
		set_global_flag = cntfai_risen
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_template = "Guardias de Reserva" }
					}
					division_template = {
						name = "Guardias de Reserva"
						division_names_group = SPR_INF_01
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
						support = {
							artillery = { x = 0 y = 0 }
						}
					}
				}
				169 = {
					create_unit = {
						division = "name = \"Falange de Madrid\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
						owner = CNT
						prioritize_location = 7183
					}
				}
			}
		}
		CNT = {
			country_event = {
				id = sprc.4
				days = 7
			}
		}
	}
	option = {
		name = sprc.3.b #Viva la Revolución! (Play as the CNT-FAI)
		trigger = {
			is_ai = no
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_template = "Guardias de Reserva" }
				}
				division_template = {
					name = "Guardias de Reserva"
					division_names_group = SPR_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
						infantry = { x = 2 y = 0 }
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
			}
			169 = {
				create_unit = {
					division = "name = \"Falange de Sevilla\" division_template = \"Guardias de Reserva\" start_experience_factor = 0 start_equipment_factor = 1.0"
					owner = SPR
					prioritize_location = 7183
				}
			}
		}
		CNT = {
			country_event = {
				id = sprc.4
				days = 7
			}
			change_tag_from = SPR
		}
	}
}

# CNT-FAI boot event
country_event = {
	id = sprc.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.4" }
	title = sprc.4.t
	desc = sprc.4.d
	picture = GFX_report_event_SPR_civwar2

	is_triggered_only = yes

	option = {
		name = sprc.4.a
		hidden_effect = {
			load_oob = "SCW_CNT"
			FRA = {
				country_event = {
					id = comfrance.22
					days = 3
					random = 72
				}
			}
		}
		if = {
			limit = {
				is_ai = yes
				OR = {
					SPR = {
						is_ai = no
					}
					CAR = {
						is_ai = no
					}
				}
			}
			hidden_effect = {
				load_oob = SCW_CNT_reinforce1
			}
		}
		set_global_flag = spanish_civil_war
		add_equipment_to_stockpile = {
			type = infantry_equipment_1
			amount = 2000
			producer = FRA
		}
		add_opinion_modifier = {
			target = ITA
			modifier = against_us_civil_war_2
		}
		reverse_add_opinion_modifier = {
			target = ITA
			modifier = against_cntfai_2
		}
		add_opinion_modifier = {
			target = GER
			modifier = against_us_civil_war_1
		}
		reverse_add_opinion_modifier = {
			target = GER
			modifier = against_cntfai_1
		}
		add_opinion_modifier = {
			target = FRA
			modifier = supports_us_civil_war_2
		}
		add_opinion_modifier = {
			target = ENG
			modifier = supports_us_civil_war_1
		}
		add_opinion_modifier = {
			target = SRI
			modifier = supports_us_civil_war_1
		}
		country_event = { id = sprc.207 days = 7 random_days = 8 }
		country_event = { id = sprc.208 days = 15 random_days = 15 }
		if = {
			limit = {
				owns_state = 165
			}
			set_capital = { state = 165 }
		}
		declare_war_on = {
			target = SPR
			type = annex_everything
		}
		if = {
			limit = {
				country_exists = CAR
				NOT = {
					has_war_with = CAR
				}
			}
			declare_war_on = {
				target = CAR
				type = annex_everything
			}
			hidden_effect = {
				random_other_country = {
					limit = {
						NOT = {
							tag = CAR
						}
						NOT = {
							tag = SPR
						}
					}
					news_event = {
						id = worldnews.4
						days = 1
					}
				}
				country_event = { id = sprc.121 days = 15 random_days = 20 }
			}
		}
		add_ideas = extensive_conscription
		add_ideas = CNT_rally_anarchists_idea
	}
}

# We need equipment
country_event = {
	id = sprc.5
	title = sprc.5.t
	desc = sprc.5.d
	picture = GFX_report_event_SPR_civwar2

	trigger = {
		OR = {
			tag = SPR
			tag = CNT
			tag = CAR
		}
		has_global_flag = spanish_civil_war
		has_equipment = { infantry_equipment < 250 }
		has_political_power > -1000
		NOT = {
			has_country_flag = SCW_received_equip
			has_country_flag = SCW_no_equip_thanks
		}
	}

	mean_time_to_happen = {
		days = 15
		modifier = {
			factor = 0.5
			surrender_progress > 0.5
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprc.5"
		set_country_flag = { flag = SCW_received_equip days = 30 value = 1 }
	}

	option = {
		name = sprc.5.a # Yes, we need those guns!
		add_political_power = -100
		if = {
			limit = { tag = CNT }
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 1500
				producer = FRA
			}
		}
		else_if = {
			limit = { tag = CAR }
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 1500
				producer = ITA
			}
		}
		else_if = {
			limit = { tag = SPR }
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 1500
				producer = GER
			}
		}
	}
	option = {
		name = sprc.5.b # No, let's not mortgage our future just yet
		trigger = { is_ai = no }
		clr_country_flag = SCW_received_equip
		set_country_flag = { flag = SCW_received_equip days = 90 value = 1 }
	}
	option = {
		name = sprc.5.c # Don't talk to me about buying guns
		trigger = { is_ai = no }
		set_country_flag = SCW_no_equip_thanks
	}
}

country_event = { #Choosing a Chief of Army
	id = sprc.6
	title = sprc.6.t
	desc = sprc.6.d

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		log = "[GetLogInfo]: event sprc.6 option sprc.6.a"
		name = sprc.6.a
		ai_chance = { base = 50 }
		clear_army_chief = yes
		add_ideas = SPR_Francisco_Franco_Bahamonde_cos_ade
	}

	option = {
		log = "[GetLogInfo]: event sprc.6 option sprc.6.b"
		name = sprc.6.b
		ai_chance = { base = 50 }
		clear_army_chief = yes
		add_ideas = SPR_Camilo_Alonso_Vega_cos_pau
	}
}

### KINGDOM OF SPAIN EVENTS ###

# events 101-103 removed

# Kingdom of Spain victory event (fired by focus)
country_event = {
	id = sprc.120
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.120" }
	title = sprc.120.t
	desc = sprc.120.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.120.a
		add_political_power = 200
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war
		hidden_effect = {
			random_other_country = {
				news_event = {
					id = worldnews.86
					days = 1
				}
			}
			country_event = {
				id = sprc.322
				days = 15
				random_days = 15
			}
		}
	}
}

# Main Terror check event
country_event = {
	id = sprc.121
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.121" }

	hidden = yes
	is_triggered_only = yes

	trigger = {
		has_global_flag = spanish_civil_war
		OR = {
			has_war_with = CAR
			has_war_with = CNT
			has_war_with = SPR
		}
	}

	option = {
		if = {
			limit = {
				any_of = {
					array = core_states
					var:v = {
						is_controlled_by = ROOT
						NOT = { is_owned_by = ROOT }
					}
				}
			}
			set_temp_variable_to_random = SPR_random
			if = {
				limit = {
					check_variable = { SPR_random > 0.92 }
				}
				country_event = sprc.122
			}
		}
		country_event = { id = sprc.121 days = 15 random_days = 20 }
	}
}

# Terror event
country_event = {
	id = sprc.122
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.122" }
	title = sprc.122.t
	desc = sprc.122.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	option = {
		name = sprc.122.a
		add_stability = -0.02
	}
}

# SPR surrender event
country_event = {
	id = sprc.124
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.124" }
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		tag = SPR
		surrender_progress > 0.80
		NOT = { controls_state = 41 }
	}

	option = {
		name = sprc.124.a
		add_ideas = SPR_ready_to_surrender
		if = {
			limit = { country_exists = CNT }
			CNT = { country_event = sprc.125 }
		}
		if = {
			limit = { country_exists = CAR }
			CNT = { country_event = sprc.125 }
		}
		every_other_country = {
			clr_country_flag = sent_volunteers_SPR
			clr_country_flag = no_SPR_intervention
		}
	}
}

country_event = {
	id = sprc.125
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.125" }
	title = sprc.125.t
	desc = sprc.125.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}

# CAR surrender event
country_event = {
	id = sprc.126
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.126" }
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		tag = CAR
		surrender_progress > 0.80
		NOT = { controls_state = 176 }
	}

	option = {
		name = sprc.124.a
		add_ideas = SPR_ready_to_surrender
		if = {
			limit = { country_exists = CNT }
			CNT = { country_event = sprc.127 }
		}
		if = {
			limit = { country_exists = SPR }
			SPR = { country_event = sprc.127 }
		}
		every_other_country = {
			clr_country_flag = sent_volunteers_CAR
			clr_country_flag = no_CAR_intervention
		}
	}
}

country_event = {
	id = sprc.127
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.127" }
	title = sprc.127.t
	desc = sprc.127.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}

# CNT surrender event
country_event = {
	id = sprc.128
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.128" }
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		tag = CNT
		surrender_progress > 0.80
		NOT = { controls_state = 165 }
	}

	option = {
		name = sprc.124.a
		add_ideas = SPR_ready_to_surrender
		if = {
			limit = { country_exists = CAR }
			CAR = { country_event = sprc.129 }
		}
		if = {
			limit = { country_exists = SPR }
			SPR = { country_event = sprc.129 }
		}
		every_other_country = {
			clr_country_flag = sent_volunteers_CNT
			clr_country_flag = no_CNT_intervention
		}
	}
}

country_event = {
	id = sprc.129
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.129" }
	title = sprc.129.t
	desc = sprc.129.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}


### CNT-FAI EVENTS ###

# events 204-206 removed

# Mine Workers rise up
country_event = {
	id = sprc.207
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.207" }
	title = sprc.207.t
	desc = sprc.207.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	trigger = {
		controls_state = 165
		has_war_with = SPR
		SPR = { has_country_flag = SPR_cntfai_plan_south }
	}

	option = {
		name = sprc.207.a
		custom_effect_tooltip = SPR_workers_rise
		hidden_effect = {
			load_oob = SCW_CNT_workers
		}
	}
}

# Foreign units return
country_event = {
	id = sprc.208
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.208" }
	title = sprc.208.t
	desc = sprc.208.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	trigger = {
		controls_state = 165
		has_war_with = SPR
		has_variable = CNT_foreign_support
	}

	option = {
		name = sprc.207.a
		custom_effect_tooltip = SPR_foreign_unit_arrives
		hidden_effect = {
			load_oob = SCW_CNT_foreign
		}
	}
}

# Madrid is taken by CNT
country_event = {
	id = sprc.211
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.211" }
	title = sprc.211.t
	desc = sprc.211.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	trigger = {
		has_global_flag = spanish_civil_war
		NOT = { owns_state = 41 } #Madrid
	}

	option = {
		name = sprc.211.a #We must scavenge what we can!
		ai_chance = {
			factor = 65
		}
		add_political_power = -50
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1000
			producer = SPR
		}
		41 = {
			damage_building = {
				type = industrial_complex
				damage = 1
			}
			damage_building = {
				type = arms_factory
				damage = 1
			}
		}
	}
	option = {
		name = sprc.211.b #Leave the city as it stands
		ai_chance = {
			factor = 35
		}
		add_political_power = 50
	}
}

# CNT victory event
country_event = {
	id = sprc.220
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.220" }
	title = sprc.220.t
	desc = sprc.220.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.220.a
		drop_cosmetic_tag = yes
		add_political_power = 200
		add_ideas = CNT_monarchist_resistance
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war
		hidden_effect = {
			random_other_country = {
				news_event = {
					id = worldnews.87
					days = 1
				}
			}
			country_event = {
				id = sprc.221
				days = 5
			}
			country_event = {
				id = sprc.322
				days = 15
				random_days = 15
			}
		}
	}
}

# CNT considers moving the capital to Madrid
country_event = {
	id = sprc.221
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.221" }
	title = sprc.221.t
	desc = sprc.221.d
	picture = GFX_report_event_generic_diplomacy4

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = sprc.221.a
		ai_chance = {
			factor = 80
		}
		add_political_power = 20
		set_capital = { state = 41 }
		hidden_effect = {
			country_event = {
				id = sprc.255
				days = 1
			}
		}
	}
	option = {
		name = sprc.221.b
		ai_chance = {
			factor = 20
		}
		add_political_power = 20
		hidden_effect = {
			country_event = {
				id = sprc.255
				days = 1
			}
		}
	}
}

### ASSASSINATION EVENT CHAIN

# Assassination plot begins
country_event = {
	id = sprc.306
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.306" }
	title = sprc.306.t
	desc = sprc.306.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = {
				name = "Alfonso XIII"
				ruling_only = yes
			}
		}
	}

	option = {
		name = sprc.306.a
		random_list = {
			75 = {
				country_event = {
					id = sprc.309
					days = 20
					} #success
			}
			25 = {
				country_event = {
					id = sprc.307
					days = 20
					} #fails
			}
		}
	}
}

# Assassination plot fails
country_event = {
	id = sprc.307
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.307" }
	title = sprc.307.t
	desc = sprc.307.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = {
				name = "Alfonso XIII"
				ruling_only = yes
			}
		}
	}

	option = {
		name = sprc.307.a
		add_political_power = -100
		hidden_effect = {
			SPR = {
				country_event = sprc.308
			}
		}
	}
}

# Inform Kingdom of Spain that plot failed
country_event = {
	id = sprc.308
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.308" }
	title = sprc.308.t
	desc = sprc.308.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	option = {
		name = sprc.308.a
		add_political_power = 50
	}
}

# Assassination plot succeeds
country_event = {
	id = sprc.309
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.309" }
	title = sprc.309.t
	desc = sprc.309.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = {
				name = "Alfonso XIII"
				ruling_only = yes
			}
		}
	}

	option = {
		name = sprc.309.a
		add_political_power = 100
		hidden_effect = {
			SPR = {
				country_event = sprc.310
			}
		}
	}
}

# Inform Kingdom of Spain that plot succeeded
country_event = {
	id = sprc.310
	title = sprc.310.t
	desc = sprc.310.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	trigger = {
		has_war_with = CAR
		has_country_leader = {
			name = "Alfonso XIII"
			ruling_only = yes
		}
	}

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprc.310"
		set_country_flag = SPR_Juan_III_killed
	}

	option = {
		name = sprc.310.a #Miguel Ferrer takes control
		trigger = {
			NOT = {
				has_country_flag = SPR_javier_praised
			}
		}
		ai_chance = {
			factor = 30
		}
		add_timed_idea = {
			idea = SPR_regent_killed
			days = 90
		}
		add_stability = -0.10
		create_country_leader = {
			name = "Miguel Cabanellas Ferrer"
			desc = "POLITICS_MIGUEL_FERRER_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Miguel_Cabanellas_Ferrer.png"
			expire = "1965.1.1"
			ideology = junta_subtype
		}
		set_politics = {
			ruling_party = paternal_autocrat
		}
		add_popularity = {
			ideology = paternal_autocrat
			popularity = 0.1
		}
		hidden_effect = {
			CNT = {
				country_event = {
					id = sprc.311
					days = 1
				}
			}
		}
	}
	option = {
		name = sprc.310.b #Franco Bahamonde becomes the regent
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.65
				has_country_flag = SPR_javier_praised
			}
		}
		add_timed_idea = {
			idea = SPR_regent_killed
			days = 90
		}
		add_stability = -0.10
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_Franco_Bahamonde.png"
			expire = "1965.1.1"
			ideology = authdem_junta_subtype
		}
		hidden_effect = {
			CNT = {
				country_event = {
					id = sprc.311
					days = 1
				}
			}
		}
	}
	option = {
		name = sprc.310.c #J.M. Gil-Robles Quiñones retains the government
		ai_chance = {
			factor = 40
		}
		add_timed_idea = {
			idea = SPR_regent_killed
			days = 90
		}
		add_stability = -0.10
		create_country_leader = {
			name = "J.M. Gil-Robles Quiñones"
			desc = "POLITICS_GIL_ROBLES_QUINONES_DESC"
			picture = "gfx/leaders/SPR/Portrait_SPR_J_M_Gil_Robles_Quinones.png"
			expire = "1965.1.1"
			ideology = autdem_christian_democracy_subtype
		}
		hidden_effect = {
			CNT = {
				country_event = {
					id = sprc.311
					days = 1
				}
			}
		}
	}
}

# CNT informed of the regent's assassination
country_event = {
	id = sprc.311
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.311" }
	title = sprc.311.t
	desc = sprc.311.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	option = {
		name = sprc.311.a
	}
}

# Carlist victory event (triggered by focus)
country_event = {
	id = sprc.320
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.320" }
	title = sprc.320.t
	desc = sprc.320.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.320.a
		add_political_power = 200
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war
		set_cosmetic_tag = CAR_kingdom
		hidden_effect = {
			country_event = {
				id = sprc.321
				days = 5
			}
			country_event = {
				id = sprc.322
				days = 15
				random_days = 15
			}
			random_other_country = {
				news_event = {
					id = worldnews.88
					days = 1
				}
			}
		}
	}
}

# CAR considers moving the capital to Madrid
country_event = {
	id = sprc.321
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.321" }
	title = sprc.321.t
	desc = sprc.321.d
	picture = GFX_report_event_generic_diplomacy4

	trigger = {
		41 = { is_owned_and_controlled_by = ROOT } #Madrid
	}

	is_triggered_only = yes

	option = {
		name = sprc.321.a
		ai_chance = {
			factor = 100
		}
		add_political_power = 20
		set_capital = { state = 41 }
	}
	option = {
		name = sprc.321.b
		ai_chance = {
			factor = 0
		}
		add_political_power = 20
	}
}

# The Troubles Continue
country_event = {
	id = sprc.322
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.322" }
	title = sprc.322.t
	desc = sprc.322.d
	picture = GFX_report_event_generic_ruins

	is_triggered_only = yes

	option = {
		name = sprc.322.a
		add_stability = -0.20
		hidden_effect = {
			country_event = {
				id = sprc.323
				days = 90
			}
		}
	}
}

# Recovery event #1
country_event = {
	id = sprc.323
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.323" }
	title = sprc.323.t
	desc = sprc.323.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.322.a
		if = {
			limit = {
				has_political_power < -500
			}
			add_political_power = 200
			add_stability = 0.10
		}
		if = {
			limit = {
				has_political_power > -501
				has_political_power < -100
			}
			add_political_power = 100
			add_stability = 0.05
		}
		if = {
			limit = {
				has_political_power > -101
			}
			add_political_power = 50
		}
		hidden_effect = {
			set_country_flag = spanish_postwar
			country_event = {
				id = sprc.324
				days = 90
			}
		}
	}
}

# Recovery event #2
country_event = {
	id = sprc.324
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.324" }
	title = sprc.323.t
	desc = sprc.323.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	trigger = {
		has_political_power < 0
	}

	option = {
		name = sprc.322.a
		if = {
			limit = {
				has_political_power < -500
			}
			add_political_power = 200
			add_stability = 0.10
		}
		if = {
			limit = {
				has_political_power > -501
				has_political_power < -100
			}
			add_political_power = 100
			add_stability = 0.05
		}
		if = {
			limit = {
				has_political_power > -101
			}
			add_political_power = 50
		}
		hidden_effect = {
			country_event = {
				id = sprc.324
				days = 90
			}
		}
	}
}

# Consolidating Spain
country_event = {
	id = sprc.326

	hidden = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprc.326"
		if = {
			limit = { tag = CAR }
			create_country_leader = {
				name = "Niceto Alcalá-Zamora"
				picture = "gfx/leaders/CNT/Portrait_CNT_Niceto_Alcala_Zamora.png"
				expire = "1965.1.1"
				ideology = christian_democracy_subtype
			}
			create_country_leader = {
				name = "Manuel Azaña Díaz"
				picture = "gfx/leaders/CNT/Portrait_CNT_Manuel_Azana_Diaz.png"
				expire = "1965.1.1"
				ideology = radical_liberalism_subtype
			}
			create_country_leader = {
				name = "José Díaz Ramos"
				picture = "gfx/leaders/SPR/Portrait_SPR_Jose_Diaz_Ramos.png"
				expire = "1965.1.1"
				ideology = syndicalist_subtype
			}
			create_country_leader = {
				name = "Dolores Ibáurri Gómez"
				picture = "gfx/leaders/CNT/Portrait_CNT_Dolores_Ibaurri_Gomez.png"
				expire = "1965.1.1"
				ideology = authcom_subtype
			}
			SPR = {
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 301 #Franco
							has_id = 303 #Cabanillas
						}
					}
					set_nationality = CAR
				}
			}
		}
		if = {
			limit = { tag = CNT }
			create_country_leader = {
				name = "Francisco Franco Bahamonde"
				desc = "POLITICS_FRANSISCO_FRANCO_DESC"
				picture = "gfx/leaders/SPR/Portrait_SPR_Franco_Bahamonde.png"
				expire = "1965.1.1"
				ideology = junta_subtype
			}
			create_country_leader = {
				name = "Jaime I"
				desc = "POLITICS_JAIME_BOURBON_DESC"
				picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
				expire = "1965.1.1"
				ideology = autdem_christian_democracy_subtype
			}
			create_country_leader = {
				name = "José Díaz Ramos"
				picture = "gfx/leaders/SPR/Portrait_SPR_Jose_Diaz_Ramos.png"
				expire = "1965.1.1"
				ideology = syndicalist_subtype
			}
			CAR = {
				every_unit_leader = {
					limit = { has_id = 313 } #de Llano
					set_nationality = CNT
				}
			}
			SPR = {
				every_unit_leader = {
					limit = { has_id = 303 } #Cabanillas
					set_nationality = CNT
				}
			}
		}
		if = {
			limit = { tag = SPR }
			create_country_leader = {
				name = "Niceto Alcalá-Zamora"
				picture = "gfx/leaders/CNT/Portrait_CNT_Niceto_Alcala_Zamora.png"
				expire = "1965.1.1"
				ideology = christian_democracy_subtype
			}
			create_country_leader = {
				name = "Ramón Otero Pedrayo"
				picture = "gfx/leaders/CAR/Portrait_CAR_Ramon_Otero_Pedrayo.png"
				expire = "1965.1.1"
				ideology = liberal_conservative_subtype
			}
			create_country_leader = {
				name = "Manuel Azaña Díaz"
				picture = "gfx/leaders/CNT/Portrait_CNT_Manuel_Azana_Diaz.png"
				expire = "1965.1.1"
				ideology = radical_liberalism_subtype
			}
			create_country_leader = {
				name = "Augusto Barcia Trelles"
				picture = "gfx/leaders/CNT/Portrait_CNT_Augusto_Barcia_Trelles.png"
				expire = "1965.1.1"
				ideology = socdem_democratic_socialism_subtype
			}
			create_country_leader = {
				name = "Julián Besteiro Fernández"
				picture = "gfx/leaders/CNT/Portrait_CNT_Julian_Besteiro_Fernandez.png"
				expire = "1965.1.1"
				ideology = moderate_socialist_subtype
			}
			create_country_leader = {
				name = "Dolores Ibáurri Gómez"
				picture = "gfx/leaders/CNT/Portrait_CNT_Dolores_Ibaurri_Gomez.png"
				expire = "1965.1.1"
				ideology = authcom_subtype
			}
			CNT = {
				every_unit_leader = {
					limit = { has_id = 319 } #Batet
					set_nationality = SPR
				}
			}
			CAR = {
				every_unit_leader = {
					limit = { has_id = 313 } #de Llano
					set_nationality = SPR
				}
			}
		}
	}
}

# Seizing Equatorial Guinea
country_event = {
	id = sprc.327
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.327" }
	title = sprc.327.t
	desc = sprc.327.d
	picture = GFX_report_event_generic_ruins

	fire_only_once = yes

	trigger = {
		OR = {
			tag = MAF
			tag = GER
		}
		927 = { is_owned_and_controlled_by = ROOT } #Kamerun
		297 = { is_owned_and_controlled_by = CNT } #Equatorial Guinea
		has_socialist_government = no
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = sprc.327.a
		add_political_power = 20
		transfer_state = 297
		297 = {
			add_claim_by = CNT
			if = {
				limit = {
					country_exists = SPR
				}
				add_claim_by = SPR
			}
			if = {
				limit = {
					country_exists = CAR
				}
				add_claim_by = CAR
			}
		}
	}
	option = {
		name = sprc.327.b
		trigger = {
			is_ai = no
		}
		add_political_power = -20
	}
}

country_event = { #Damn it CNT-FAI
	id = sprc.255
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.255" }
	title = sprc.255.t
	desc = sprc.255.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = sprc.255.a
		add_political_power = 20
		add_manpower = -2000
		set_global_flag = no_more_Andorra
	}

	option = {
		name = sprc.255.b
	}
}

country_event = { #Peace?
	id = sprc.256
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprc.256" }
	title = sprc.256.t
	desc = sprc.256.d

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = no_more_Andorra }
	}

	option = {
		name = sprc.256.a
		add_political_power = 20
	}
}

country_event = { #Congress of Iberian Socialists
	id = sprc.602
	title = sprc.602.t
	desc = sprc.602.d
	picture = GFX_report_event_SPA_CNT_FAI

	is_triggered_only = yes

	option = {
		log = "[GetLogInfo]: event sprc.602 option sprc.602.a"
		name = sprc.602.a #CNT
		ai_chance = {
			base = 50
			
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.1
		}
		set_temp_variable = { coalition_partner_var = token:totalist }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:radical_socialist }
		add_to_coalition = yes
	}
	option = {
		log = "[GetLogInfo]: event sprc.602 option sprc.602.b"
		name = sprc.602.b #PSOE
		ai_chance = {
			base = 50
		}
		set_politics = { ruling_party = radical_socialist }
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.1
		}
		set_temp_variable = { coalition_partner_var = token:totalist }
		add_to_coalition = yes
		set_temp_variable = { coalition_partner_var = token:syndicalist }
		add_to_coalition = yes
	}
}

country_event = { #Constitutional monarchy?
	id = sprd.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.255" }
	title = sprd.100.t
	desc = sprd.100.d
	picture = GFX_report_event_generic_strike	

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Yes.
		name = sprd.100.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_politics
					option = SPR_POLITICS_AUTHDEM
				}
			}
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_new_constitution }
			#}
		}
		add_stability = 0.05
		hidden_effect = {
			set_country_flag = SPR_constitutional_monarchy
			if = {
				limit = {
					has_country_flag = SPR_King_Jaime
				}
				create_country_leader = {
					name = "Jaime I"
					desc = "POLITICS_JAIME_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = christian_democracy_subtype
				}
				create_country_leader = {
					name = "Jaime I"
					desc = "POLITICS_JAIME_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = liberal_conservative_subtype
				}
				create_country_leader = {
					name = "Jaime I"
					desc = "POLITICS_JAIME_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = radical_liberalism_subtype
				}
				if = {
					limit = { has_country_flag = SPR_allow_psoe }
					create_country_leader = {
						name = "Jaime I"
						desc = "POLITICS_JAIME_BOURBON_DESC"
						picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
						expire = "1965.1.1"
						ideology = socdem_democratic_socialism_subtype
					}
				}
			}
			if = {
				limit = {
					has_country_flag = SPR_King_Juan
				}
				create_country_leader = {
					name = "Juan III"
					desc = "POLITICS_JUAN_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Juan_III.png"
					expire = "1965.1.1"
					ideology = christian_democracy_subtype
				}
				create_country_leader = {
					name = "Juan III"
					desc = "POLITICS_JUAN_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Juan_III.png"
					expire = "1965.1.1"
					ideology = liberal_conservative_subtype
				}
				create_country_leader = {
					name = "Juan III"
					desc = "POLITICS_JUAN_BOURBON_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Juan_III.png"
					expire = "1965.1.1"
					ideology = radical_liberalism_subtype
				}
				if = {
					limit = { has_country_flag = SPR_allow_psoe }
					create_country_leader = {
						name = "Juan III"
						desc = "POLITICS_JUAN_BOURBON_DESC"
						picture = "gfx/leaders/SPR/Portrait_SPR_Juan_III.png"
						expire = "1965.1.1"
						ideology = socdem_democratic_socialism_subtype
					}
				}
			}
		} 
	}
	option = { #No.
		name = sprd.100.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCCON
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_MARLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCDEM
					}
				}
			}
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_leaders_arrested }
			#}
		}
		add_stability = -0.05
		set_country_flag = SPR_absolute_monarchy
	}
}

# Main election event
country_event = {
	id = sprd.101
	title = sprd.101.t
	desc = sprd.101.d
	picture = GFX_report_event_HOL_election_1937

	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprd.101"
		remove_all_ministers = yes
		hidden_effect = {
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = -0.20
			}
			country_event = {
				id = sprd.102
				months = 48
			}
		}
	}

	option = {
		name = sprd.101.a #Partido Liberal Moderado
		ai_chance = {
			factor = 15
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCCON
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCDEM
					}
				}
			}
		}
		set_country_flag = SPR_had_election
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = market_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.20
		}
		add_ideas = {
			SPR_Ramon_Otero_Pedrayo_hog_mli
			SPR_Alvaro_Cunqueiro_Mora_for_mli
			SPR_Joaquin_Chapaprieta_Torregosa_eco_mli
			SPR_Miguel_Maura_Gamazo_sec_mli
		}
	}
	option = {
		name = sprd.101.b #PSOE
		trigger	= { has_country_flag = SPR_allow_psoe }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCCON
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_MARLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCLIB
					}
				}
			}
		}
		set_country_flag = SPR_had_election
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.20
		}
		add_ideas = {
			SPR_Jose_Giral_Pereira_hog_sde
			SPR_Anxel_Casal_for_sde
			SPR_Bibiano_Fernandez_Ossorio_eco_sde
			SPR_Marcelino_Domingo_Sanjuan_sec_sde
		}
	}
	option = {
		name = sprd.101.c #Acción Popular
		ai_chance = {
			factor = 45
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_MARLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCDEM
					}
				}
			}
		}
		set_country_flag = SPR_had_election
		add_stability = 0.05
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_conservative
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		add_ideas = {
			SPR_Francisco_Franco_Bahamonde_hog_ade
			SPR_Francisco_de_Borbon_de_la_Torre_for_sco
			SPR_Alexandre_Boveda_Iglesias_eco_sco
			SPR_Miguel_Cabanellas_Ferrer_sec_sco
		}
	}
	option = {
		name = sprd.101.e #Izquierda Republicana
		ai_chance = {
			factor = 15
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCCON
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_MARLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCDEM
					}
				}
			}
			#modifier = {
				#add = 25
				#NOT = { has_country_flag = { SPR_allow_psoe } }
			#}
		}
		set_country_flag = SPR_had_election
		add_stability = 0.05
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_liberal
			popularity = 0.2
		}
		add_ideas = {
			SPR_Diego_Martinez_Barrio_hog_sli
			SPR_Diego_Hidalgo_Duran_for_sli
			SPR_Emilio_Herrera_eco_sli
			SPR_Federico_Escofet_Alsina_sec_sli
		}
	}
}

country_event = { #Subsequent Elections
	id = sprd.102
	title = sprd.101.t
	desc = sprd.102.d
	picture = GFX_report_event_HOL_election_1937

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sprd.102"
		remove_all_ministers = yes
		hidden_effect = {
			country_event = {
				id = sprd.102
				months = 48
			}
		}
	}

	option = {
		name = sprd.101.a #Partido Liberal Moderado
		ai_chance = {
			factor = 15
		}
		set_country_flag = SPR_had_election
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = market_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = market_liberal
			popularity = 0.20
		}
		add_ideas = {
			SPR_Ramon_Otero_Pedrayo_hog_mli
			SPR_Alvaro_Cunqueiro_Mora_for_mli
			SPR_Joaquin_Chapaprieta_Torregosa_eco_mli
			SPR_Miguel_Maura_Gamazo_sec_mli
		}
	}
	option = {
		name = sprd.101.b #PSOE
		trigger	= { has_country_flag = SPR_allow_psoe }
		ai_chance = {
			factor = 25
		}
		set_country_flag = SPR_had_election
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_democrat
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_democrat
			popularity = 0.20
		}
		add_ideas = {
			SPR_Jose_Giral_Pereira_hog_sde
			SPR_Anxel_Casal_for_sde
			SPR_Bibiano_Fernandez_Ossorio_eco_sde
			SPR_Marcelino_Domingo_Sanjuan_sec_sde
		}
	}
	option = {
		name = sprd.101.c #Acción Popular
		ai_chance = {
			factor = 45
		}
		set_country_flag = SPR_had_election
		add_stability = 0.05
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_conservative
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		add_ideas = {
			SPR_Francisco_Franco_Bahamonde_hog_ade
			SPR_Francisco_de_Borbon_de_la_Torre_for_sco
			SPR_Alexandre_Boveda_Iglesias_eco_sco
			SPR_Miguel_Cabanellas_Ferrer_sec_sco
		}
	}
	option = {
		name = sprd.101.e #Izquierda Republicana
		ai_chance = {
			factor = 15
			#modifier = {
				#add = 25
				#NOT = { has_country_flag = { SPR_allow_psoe } }
			#}
		}
		set_country_flag = SPR_had_election
		add_stability = 0.05
		meta_effect = {
			text = {
				set_politics = {
					ruling_party = social_liberal
					last_election = "[CURRENT_DATE]"
					election_frequency = 48
					elections_allowed = yes
				}
			}
			CURRENT_DATE = "[?global.date.GetDateStringNoHour]"
		}
		add_popularity = {
			ideology = social_conservative
			popularity = 0.2
		}
		add_ideas = {
			SPR_Diego_Martinez_Barrio_hog_sli
			SPR_Diego_Hidalgo_Duran_for_sli
			SPR_Emilio_Herrera_eco_sli
			SPR_Federico_Escofet_Alsina_sec_sli
		}
	}
}


country_event = { #Constitutional republic?
	id = sprd.103
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.103" }
	title = sprd.103.t
	desc = sprd.103.d
	picture = GFX_report_event_generic_strike

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Yes.
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_politics
					option = SPR_POLITICS_AUTHDEM
				}
			}
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_new_constitution }
			#}
		}
		name = sprd.103.a
		add_stability = 0.05
		hidden_effect = {
			set_country_flag = SPR_constitutional_republic
			create_country_leader = {
				name = "Francisco Franco Bahamonde"
				desc = "POLITICS_FRANSISCO_FRANCO_DESC"
				picture = "gfx/leaders/SPR/Portrait_SPR_Franco_Bahamonde.png"
				expire = "1965.1.1"
				ideology = christian_democracy_subtype
			}
		}
	}
	option = { #No.
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCCON
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_MARLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCLIB
					}
					has_game_rule = {
						rule = SPR_politics
						option = SPR_POLITICS_SOCDEM
					}
				}
			}
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_leaders_arrested }
			#}
		}
		name = sprd.103.b
		add_stability = -0.05
		set_country_flag = SPR_francoist
	}
}

country_event = { #Reconcile with moderate socialists
	id = sprd.104
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.104" }
	title = sprd.104.t
	desc = sprd.104.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #Yes.
		name = sprd.104.a
		ai_chance = {
			factor = 1
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_new_constitution }
			#}
		}
		add_stability = 0.01
		set_party_name = {
			ideology = social_democrat
			long_name = SPR_social_democrat_party_alt_long
			name = SPR_social_democrat_party_alt
		}
		hidden_effect = {
			set_country_flag = SPR_allow_psoe
		}
	}
	option = { #No.
		name = sprd.104.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = {
					rule = SPR_politics
					option = SPR_POLITICS_SOCDEM
				}
			}
			#modifier = {
				#factor = 3
				#has_country_flag = { SPR_leaders_arrested }
			#}
		}
		add_stability = -0.01
	}
}

country_event = { #Franco's Speech
	id = sprd.105
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.105" }
	title = sprd.105.t
	desc = sprd.105.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = sprd.105.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
		add_stability = 0.1
	}
}

country_event = { #The King's Speech
	id = sprd.106
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.106" }
	title = sprd.106.t
	desc = sprd.106.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = sprd.106.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
		add_stability = 0.1
	}
}

country_event = { #Autonomous Communities
	id = sprd.107
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.106" }
	title = sprd.107.t
	desc = sprd.107.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #flavor
		name = sprd.107.a
	}
}

country_event = { #A Stable Spain
	id = sprd.108
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.106" }
	title = sprd.108.t
	desc = sprd.108.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { #flavor
		name = sprd.108.a
	}
}

country_event = {
	id = sprd.109
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.109" }
	title = sprd.109.t
	desc = sprd.109.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprd.109.a
		set_cosmetic_tag = SPR_BOURBON
		set_country_leader_name = {
			name = "Henri VI"
		}
		set_country_leader_description = {
                desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
        }
		hidden_effect = {
		add_state_core = 28
		}
		every_state = {
				limit = { is_core_of = FRA }
				add_core_of = SPR
				}
				}
	option = {
		name = sprd.109.b
		set_cosmetic_tag = SPR_FRANCO_SPAIN
		set_country_leader_name = {
			name = "Henri VI"
		}
		set_country_leader_description = {
                desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
        }
		hidden_effect = {
		add_state_core = 28
		}
		every_state = {
				limit = { is_core_of = FRA }
				add_core_of = SPR
				}
				}
	option = {
		name = sprd.109.c
		hidden_effect = {
		add_state_core = 28
		}
		every_state = {
			limit = { is_core_of = FRA }
			add_core_of = SPR
		}
	}
	option = {
		name = sprd.109.e
		trigger = {
		NOT = {
			country_exists = FRP
			}
		}
		hidden_effect = {
				SPR = {
					every_state = {
						limit = {
							OR = {
								is_core_of = FRA
								is_claimed_by = FRA
							}
						}
						remove_claim_by = SPR
					}
				}
				release_puppet = FRP
				FRP = {
					set_cosmetic_tag = FRP_SPR_KINGDOM
					set_politics = {
						ruling_party = authoritarian_democrat
						last_election = "1931.10.16"
						election_frequency = 60
						elections_allowed = no
					}
					set_popularities = {
						totalist = 8
						radical_socialist = 5
						syndicalist = 21
						social_democrat = 12
						social_liberal = 5
						market_liberal = 3
						social_conservative = 6
						authoritarian_democrat = 36
						paternal_autocrat = 4
						national_populist = 0
					}
					every_state = {
					limit = { 
					OR = {
						is_core_of = FRA
						is_claimed_by = FRA
						}
					}
					add_core_of = FRP
					}
					28 = { add_core_of = FRP }
					every_core_state = {
					limit = {
					OR = {
						is_owned_by = SPR
						is_owned_by = FRP
							}
						}
					set_state_owner_to = FRP
					}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = national_populist_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = absolute_monarchy_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = authoritarian_democrat_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = social_conservative_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = market_liberal_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = social_liberal_subtype
				}
				create_country_leader = {
					name = "Henri VI"
					desc = "POLITICS_JAIME_BOURBON_FRANCE_DESC"
					picture = "gfx/leaders/SPR/Portrait_SPR_Jaime_I.png"
					expire = "1965.1.1"
					ideology = social_democrat_subtype
				}
			}
		}
	}
}

country_event = {
	id = sprd.1000
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.1000" }
	title = sprd.1000.t
	desc = sprd.1000.d
	picture = GFX_report_event_KSV_helicopters

	trigger = {
		OR = {
			tag = SPR
			tag = POR
			tag = CAR
			tag = COL
			tag = CHL
			tag = COS
			tag = BRA
			tag = CUB
			tag = ECU
			tag = DOM
			tag = ELS
			tag = ARG
			tag = GUA
			tag = HAI
			tag = KOG
			tag = PAR
			tag = VEN
			tag = MEX
			tag = CEN
			tag = BOL
			tag = NIC
			tag = HON
			tag = PRU
			tag = URG
			tag = CNT			
			}
		has_global_flag = heli_time_worldwide
	}
	
	fire_only_once = yes	

	option = {
		name = sprd.1000.a
		set_technology = {
			helicopter = 1
		}
		add_equipment_to_stockpile = { type = helicopter_1 amount = 100 }
		hidden_effect = { set_country_flag = spaniards_heli_stop_repeat }
		hidden_effect = {
			every_country = {
				limit = {
				   OR = {
						is_in_faction_with = SPR
						is_in_faction_with = POR
						is_in_faction_with = CAR
						is_in_faction_with = COL
						is_in_faction_with = CHL
						is_in_faction_with = COS
						is_in_faction_with = BRA
						is_in_faction_with = CUB
						is_in_faction_with = ECU
						is_in_faction_with = DOM
						is_in_faction_with = ELS
						is_in_faction_with = ARG
						is_in_faction_with = GUA
						is_in_faction_with = HAI
						is_in_faction_with = KOG
						is_in_faction_with = PAR
						is_in_faction_with = VEN
						is_in_faction_with = MEX
						is_in_faction_with = CEN
						is_in_faction_with = BOL
						is_in_faction_with = NIC
						is_in_faction_with = HON
						is_in_faction_with = PRU
						is_in_faction_with = URG
						is_in_faction_with = CNT					
					}					
				}	
			}
			country_event = {
				id = sprd.1001
				days = 15
			}
		}
	}
}

country_event = {
	id = sprd.1001
	immediate = { log = "[GetDateText]: [Root.GetName]: event sprd.1001" }
	title = sprd.1001.t
	desc = sprd.1001.d
	picture = GFX_report_event_KSV_helicopters

	trigger = { NOT = { has_country_flag = spaniards_heli_stop_repeat } }

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = sprd.1001.a
		set_technology = {
			helicopter = 1
		}
		add_equipment_to_stockpile = { type = helicopter_1 amount = 25 }
	}
}
