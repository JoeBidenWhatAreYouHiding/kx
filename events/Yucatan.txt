###########################
# Yucatan
# By Herkles
###########################

add_namespace = yucatan

### Focus Tree Events  ###

country_event = { # New Constitution
	id = yucatan.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.1"}
	title = yucatan.1.t
	desc = yucatan.1.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # Yay
		name = yucatan.1.a
	}
}
country_event = { # The Land Issue
	id = yucatan.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.2"}
	title = yucatan.2.t
	desc = yucatan.2.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # Collectiveization
		name = yucatan.2.a
	}
	option = { # land tax
		name = yucatan.2.b
	}
	option = { # small land owners
		name = yucatan.2.c
	}
}
country_event = { # Mexican Spies
	id = yucatan.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.3"}
	title = yucatan.3.t
	desc = yucatan.3.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # execute the spies
		name = yucatan.3.a
		add_political_power = 30
		add_manpower = -20
	}
	option = { # deport the spies
		name = yucatan.3.b
		add_stability = 0.03
	}
	option = { # try to turn them against the Mexicans
		name = yucatan.3.c
		hidden_effect = {
			random_list = {
				60 = { # Mexico is compromised
					MEX = {
						add_timed_idea = {
							idea = YUC_compromised_security
							days = 60
						}
					}
				}
				40 = { # Mexico is not compromised
					add_timed_idea = {
						idea = YUC_compromised_security
						days = 60
					}
				}
			}
		}
	}
}

country_event = { # Who to Ally with?
	id = yucatan.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.5"}
	title = yucatan.5.t
	desc = yucatan.5.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # ally with the red shirts
		name = yucatan.5.a
		set_country_flag = YUC_redshirt_alliance_flag
		add_popularity = {
			ideology = totalist
			popularity = 0.05
		}
	}
	option = { # ally with the maya
		name = yucatan.5.b
		set_country_flag = YUC_maya_alliance_flag
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
	}
	option = { # ally both
		name = yucatan.5.c
		set_country_flag = YUC_maya_and_redshirt_alliance_flag
		add_popularity = {
			ideology = national_populist
			popularity = 0.05
		}
		add_popularity = {
			ideology = totalist
			popularity = 0.05
		}
	}
	option = { # no allies
		name = yucatan.5.e
		set_country_flag = YUC_no_ally_flag
	}
}

country_event = { # Who to Ally with?
	id = yucatan.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.5"}
	title = yucatan.6.t
	desc = yucatan.6.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # coup suceeds
		name = yucatan.6.a
		set_politics = {
			ruling_party = totalist
			elections_allowed = no
		}
		create_corps_commander = {
			name = "Tomás Garrido Canabal"
			portrait_path = "gfx/leaders/YUC/Portrait_Yucatan_Tomas_Garrido_Canabal.png"
			traits = { career_officer politically_connected }
			skill = 1
			attack_skill = 1
			defense_skill = 2
			planning_skill = 1
			logistics_skill = 2
			id = 4846
		}
	}
	option = { # pushed back
		name = yucatan.6.b
		country_event = {
			id = yucatan.7
			days = 3
		}
	}
}

country_event = { # Pataut or Authdem
	id = yucatan.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.7"}
	title = yucatan.7.t
	desc = yucatan.7.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { #
		name = yucatan.7.a
		set_politics = {
			ruling_party = authoritarian_democrat
			elections_allowed = yes
		}
		if = {
			limit = {
				has_country_leader = {
					name = "Salvador Alvarado"
				}
			}
			set_country_leader_portrait = {
				portrait = "gfx/leaders/YUC/Portrait_Yucatan_Salvador_Alvarado_President"
			}
		}
	}
	option = { # 
		name = yucatan.7.b
		
	}
	option = { # restore democracy
		name = yucatan.7.c
		country_event = {
			id = yucatan.20
			days = 23
		}
	}
}

country_event = { # maya attempt a coup
	id = yucatan.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.8"}
	title = yucatan.8.t
	desc = yucatan.8.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # coup suceeds
		name = yucatan.8.a
		set_politics = {
			ruling_party = national_populist
			elections_allowed = no
		}
		create_corps_commander = {
			name = "Francisco May Pech"
			portrait_path = "gfx/leaders/YUC/Portrait_YUC_FranciscoMay.png"
			traits = { organizer politically_connected }
			skill = 1
			attack_skill = 1
			defense_skill = 2
			planning_skill = 1
			logistics_skill = 2
			id = 4847
		}
	}
	option = { # pushed back
		name = yucatan.8.b
		hidden_effect = {
			country_event = {
				id = yucatan.7
				days = 10
			}
		}
	}
}

country_event = { # both sides attempt coup
	id = yucatan.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.9"}
	title = yucatan.9.t
	desc = yucatan.9.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # coup suceeds
		name = yucatan.8.a
		set_politics = {
			ruling_party = national_populist
			elections_allowed = no
		}
		create_corps_commander = {
			name = "Francisco May Pech"
			portrait_path = "gfx/leaders/YUC/Portrait_YUC_FranciscoMay.png"
			traits = { organizer politically_connected }
			skill = 1
			attack_skill = 1
			defense_skill = 2
			planning_skill = 1
			logistics_skill = 2
			id = 4847
		}
	}
	option = { # coup suceeds
		name = yucatan.8.b
		set_politics = {
			ruling_party = totalist
			elections_allowed = no
		}
		create_corps_commander = {
			name = "Tomás Garrido Canabal"
			portrait_path = "gfx/leaders/YUC/Portrait_Yucatan_Tomas_Garrido_Canabal.png"
			traits = { career_officer politically_connected }
			skill = 1
			attack_skill = 1
			defense_skill = 2
			planning_skill = 1
			logistics_skill = 2
			id = 4846
		}
	}
}

country_event = { # coup
	id = yucatan.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.10"}
	title = yucatan.10.t
	desc = yucatan.10.d
	picture = GFX_report_event_diplomacy2

	is_triggered_only = yes

	option = { # well shit
		name = yucatan.10.a
		add_ideas = YUC_shits_on_fire
		hidden_effect = {
			country_event = {
				id = yucatan.9
				days = 10
			}
		}
	}
}


### Political Events ###
country_event = { # First Elections
	id = yucatan.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.20"}
	title = yucatan.20.t
	desc = yucatan.20.d

	picture = GFX_report_event_election_vote

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = YUC
		has_completed_focus = YUC_yucatec_democracy
		not = {
			has_country_flag = YUC_first_elections
		}
		NOT = {
			has_government = authoritarian_democrat
		}
	}

	immediate = {
		remove_all_ministers = yes
	}

	option = { # Social Conservatives
		name = yucatan.21.g
		add_popularity = {
			ideology = market_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}
	option = { # Market Liberals
		name = yucatan.21.a
		add_popularity = {
			ideology = market_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}
	option = { # Social Liberals
		name = yucatan.21.b
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
	}
	option = { # Social Democrat
		name = yucatan.21.c
		add_popularity = {
			ideology = social_democrat
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
	}

	option = { # Radical Socialist
		name = yucatan.21.e
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.1
		}
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = yes
		}
	}
	option = { # synd
		name = yucatan.21.f
		add_popularity = {
			ideology = syndicalist
			popularity = 0.1
		}
		set_politics = {
			ruling_party = syndicalist
			elections_allowed = yes
		}
	}
}

country_event = { # First Elections (Authdem)
	id = yucatan.201
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.201"}
	title = yucatan.201.t
	desc = yucatan.201.d

	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	trigger = {
		tag = YUC
		has_completed_focus = YUC_yucatec_democracy
		not = {
			has_country_flag = YUC_first_elections
		}
		has_government = authoritarian_democrat
	}

	immediate = {
		remove_all_ministers = yes
	}

	option = { # Authdem
		name = yucatan.201.a
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.01
		}
	}
}

country_event = { # Other elections Elections
	id = yucatan.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.21"}
	title = yucatan.21.t
	desc = yucatan.21.d

	picture = GFX_report_event_election_vote

	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = YUC
		has_completed_focus = YUC_yucatec_democracy
		has_country_flag = YUC_first_elections
		NOT = {
			has_government = authoritarian_democrat
		}
	}

	immediate = {
		remove_all_ministers = yes
	}

	option = { # Social Conservatives
		name = yucatan.21.g
		add_popularity = {
			ideology = social_conservative
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_conservative
			elections_allowed = yes
		}
	}
	option = { # Market Liberals
		name = yucatan.21.a
		add_popularity = {
			ideology = market_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = market_liberal
			elections_allowed = yes
		}
	}
	option = { # Social Liberals
		name = yucatan.21.b
		add_popularity = {
			ideology = social_liberal
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_liberal
			elections_allowed = yes
		}
	}
	option = { # Social Democrat
		name = yucatan.21.c
		add_popularity = {
			ideology = social_democrat
			popularity = 0.1
		}
		set_politics = {
			ruling_party = social_democrat
			elections_allowed = yes
		}
	}

	option = { # Radical Socialist
		name = yucatan.21.e
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.1
		}
		set_politics = {
			ruling_party = radical_socialist
			elections_allowed = yes
		}
	}
	option = { # synd
		name = yucatan.21.f
		add_popularity = {
			ideology = syndicalist
			popularity = 0.1
		}
		set_politics = {
			ruling_party = syndicalist
			elections_allowed = yes
		}
	}
}

### Foreign Relations ###

### Flavor Events ###

country_event = { # Hidden event to unlock Yucatan focuses
	id = yucatan.2300
	immediate = {log = "[GetDateText]: [Root.GetName]: event yucatan.22"}

	hidden = yes
	
	trigger = {
		tag = YUC
		MEX = { exists = no }
		NOT = { has_country_flag = YUC_indepedence_war_over }
	}

	fire_only_once = yes
	
	option = {
		set_country_flag = YUC_indepedence_war_over
		if = {
			limit = {
				has_country_flag = YUC_redshirt_alliance_flag
			}
			country_event = {
				id = yucatan.6
				days = 23
			}
		}
		if = {
			limit = {
				has_country_flag = YUC_maya_alliance_flag
			}
			country_event = {
				id = yucatan.8
				days = 23
			}
		}
		if = {
			limit = {
				has_country_flag = YUC_maya_and_redshirt_alliance_flag
			}
			country_event = {
				id = yucatan.9
				days = 23
			}
		}
		if = {
			limit = {
				has_country_flag = YUC_no_ally_flag
			}
			country_event = {
				id = yucatan.7
				days = 23
			}
		}
	}
}

country_event = { # Join Central America - CEN
	id = yucatan.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event yucatan.28 FROM = [From.GetName]" }
	title = yucatan.28.t
	desc = yucatan.28.d
	picture = GFX_report_event_ELS_meeting

	is_triggered_only = yes

	option = { # let them in!
		name = yucatan.28.a
		ai_chance = {
			base = 90
		}
		YUC = {
			country_event = {
				id = yucatan.29
				days = 1
			}
		}
		add_political_power = -25
	}
	option = { # Nope
		name = yucatan.28.b
		ai_chance = {
			base = 10
		}
	}
}

country_event = { # We are accepted into Centroamerica
	id = yucatan.29
	immediate = { log = "[GetDateText]: [Root.GetName]: event yucatan.29 FROM = [From.GetName]" }
	title = yucatan.29.t
	desc = yucatan.29.d
	picture = GFX_report_event_ELS_meeting

	is_triggered_only = yes

	option = { # yay
		name = yucatan.29.a
		CEN = {
			country_event = {
				id = yucatan.30
			}
		}
	}
}

country_event = { # YUC Joins
	id = yucatan.30
	immediate = { log = "[GetDateText]: [Root.GetName]: event yucatan.30 FROM = [From.GetName]" }
	title = yucatan.30.t
	desc = yucatan.30.d
	picture = GFX_report_event_ELS_meeting

	is_triggered_only = yes

	option = { # yay
		name = yucatan.30.a
		annex_country = { target = YUC transfer_troops = yes }
		add_state_core = 474
		hidden_effect = {
			create_field_marshal = {
				name = "Salvador Alvarado"
				portrait_path = "gfx/leaders/YUC/Portrait_Yucatan_Salvador_Alvarado.png"
				traits = { organizer old_guard }
				skill = 2
				attack_skill = 2
				defense_skill = 2
				planning_skill = 3
				logistics_skill = 1
			}
			create_corps_commander = {
				name = "Manuel Castilla Brito"
				portrait_path = "gfx/leaders/YUC/Portrait_Manuel_Castilla_Brito.png"
				traits = { trickster defensive_doctrine politically_connected }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 1
				logistics_skill = 2
			}
		}
	}
}