###########################
# Ausgleich Events 3.0
###########################
# By ~mw~
###########################

add_namespace = ausgleich.new

### Ausgleich Preparations
country_event = {
	id = ausgleich.new.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.100" }
	title = ausgleich.new.100.t
	desc = ausgleich.new.100.d

	trigger = {
		tag = AUS
		is_subject = no
	}

	is_triggered_only = yes

	option = { # very well
		name = ausgleich.new.100.a
		trigger = {
			NOT = {
				has_government = national_populist
			}
		}
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.101
					days = 2
				}
			}
			country_event = {
				id = ausgleich.new.200
				days = 5
			}
			country_event = {
				id = ausgleich.new.751
				days = 32
			}
			country_event = {
				id = ausgleich.new.752
				days = 12
			}
		}
	}
	
	option = { #We have other ideas.
		name = ausgleich.new.100.b
		trigger = {
			has_government = national_populist
		}
		hidden_effect = {
			country_event = {
				id = kx.ausgleich.1
				days = 5
			}
			HUN = {
				country_event = {
					id = kx.ausgleich.2
					days = 5
				}
				set_country_flag = hungarian_army_flag
			}
		}
	}
}

### Hungary receives an invitation
country_event = {
	id = ausgleich.new.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.101" }
	title = ausgleich.new.101.t
	desc = ausgleich.new.101.d

	is_triggered_only = yes

	option = { # we'll see what comes of this
		name = ausgleich.new.101.a
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.102
					days = 2
				}
			}
		}
	}
}

### Hungary agrees to come
country_event = {
	id = ausgleich.new.102
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.102" }
	title = ausgleich.new.102.t
	desc = ausgleich.new.102.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # we'll see what comes of this
		name = ausgleich.new.102.a
	}
}

### Invite not only Hungary?
country_event = {
	id = ausgleich.new.200
	title = ausgleich.new.200.t
	desc = ausgleich.new.200.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.200"
		hidden_effect = {
			country_event = {
				id = ausgleich.new.300
				days = 14
			}
		}
	}

	option = { # No way. This is between us and the Magyars.
		name = ausgleich.new.200.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}

		add_political_power = 20
		set_global_flag = AUS_ausgleich_hungary_only
	}
	option = { # You are right. Invite the Bohemians, Galicians and Illyrians.
		name = ausgleich.new.200.b
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_STATUS_QUO
				}
			}
		}

		add_political_power = -20
		set_global_flag = AUS_ausgleich_kingdoms
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.201
					days = 2
				}
			}
			CZE = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
			GAL = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
			CRO = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
		}
	}
	option = { # You are right. Invite all peoples of the Dual Monarchy.
		name = ausgleich.new.200.c
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_STATUS_QUO
				}
			}
		}

		add_political_power = -100
		set_global_flag = AUS_ausgleich_peoples
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.201
					days = 2
				}
			}
			CZE = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
			GAL = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
			CRO = {
				country_event = {
					id = ausgleich.new.202
					days = 2
				}
			}
		}
	}
}

### HUN: Austria invites other delegations to the Ausgleich
country_event = {
	id = ausgleich.new.201
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.201" }

	title = {
		text = ausgleich.new.201.t_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	title = {
		text = ausgleich.new.201.t_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}
	desc = {
		text = ausgleich.new.201.d_kingdoms
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
	}
	desc = {
		text = ausgleich.new.201.d_peoples
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
	}

	is_triggered_only = yes

	option = { # formally protest
		name = ausgleich.new.201.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.6
				OR = {
					has_global_flag = AUS_ausgleich_kingdoms
					has_global_flag = AUS_ausgleich_peoples
				}
			}
		}

		#small opinion modifiers
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.203
					days = 2
				}
			}
		}
	}
	option = { # boycott the ausgleich
		name = ausgleich.new.201.b
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.1
				has_global_flag = AUS_ausgleich_kingdoms
			}
			modifier = {
				factor = 0.3
				has_global_flag = AUS_ausgleich_peoples
			}
		}

		#heavy opinion modifiers
		set_global_flag = AUS_ausgleich_boycott
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.203
					days = 2
				}
			}
		}
	}
	option = { # do nothing
		name = ausgleich.new.201.c
		ai_chance = {
			base = 100
			modifier = {
				factor = 0.3
				has_global_flag = AUS_ausgleich_kingdoms
			}
			modifier = {
				factor = 0.15
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
}

### BOH/CZE/GAL is invited to the Ausgleich
country_event = {
	id = ausgleich.new.202
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.202" }
	title = ausgleich.new.202.t
	desc = ausgleich.new.202.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes

	option = { # very good
		trigger = {
			has_global_flag = AUS_ausgleich_kingdoms
		}
		name = ausgleich.new.202.a
		#opinion modifier
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.203
					days = 2
				}
			}
		}
	}
	option = { # Agree and send a mixed delegation
		name = ausgleich.new.202.b
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		set_country_flag = ausgleich_mixed_delegation
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.203
					days = 2
				}
			}
		}
	}
	option = { # Send a majority-dominated delegation
		name = ausgleich.new.202.c
		trigger = {
			has_global_flag = AUS_ausgleich_peoples
		}
		#opinion modifier
		if = {
			limit = { tag = GAL }
			set_temp_variable = { WSU_threat_change = 10 }
			GAL_change_WSU_threat = yes
			set_temp_variable = { GAL_centralisation_change = 5 }
			GAL_change_centralisation = yes
		}
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.203
					days = 2
				}
			}
		}
	}
}

### Reactions to the invitations
country_event = {
	id = ausgleich.new.203
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.203" }

	title = {
		text = ausgleich.new.203.t_HUN
		trigger = {
			FROM = {
				tag = HUN
			}
		}
	}
	title = {
		text = ausgleich.new.203.t_other
		trigger = {
			FROM = {
				NOT = {
					tag = HUN
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.203.d_HUN
		trigger = {
			FROM = {
				tag = HUN
			}
		}
	}
	desc = {
		text = ausgleich.new.203.d_other
		trigger = {
			FROM = {
				NOT = {
					tag = HUN
				}
			}
		}
	}

	is_triggered_only = yes

	option = { # It's the way forward
		name = ausgleich.new.203.a
		trigger = {
			FROM = {
				tag = HUN
			}
		}
		add_political_power = -10
	}
	option = { # Excellent
		name = ausgleich.new.203.b
		trigger = {
			FROM = {
				NOT = {
					tag = HUN
				}
			}
		}
		add_political_power = 10
	}
}

#########################
### AUSGLEICH of 1937 ###
#########################

### Ausgleich begins
country_event = {
	id = ausgleich.new.300

	title = {
		text = ausgleich.new.300.t_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	title = {
		text = ausgleich.new.300.t_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	desc = {
		text = ausgleich.new.300.d_hungary
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_no_boycott
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}
	desc = {
		text = ausgleich.new.300.d_delegations_boycott
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.300"
		hidden_effect = {
			complete_national_focus = AUS_ausgleich
		}
	}

	option = { # Excellent
		name = ausgleich.new.300.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		add_political_power = 10
		hidden_effect = {
			country_event = {
				id = ausgleich.new.310
				days = 1
			}
		}
	}
	option = { # Excellent
		name = ausgleich.new.300.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = 10
		hidden_effect = {
			country_event = {
				id = ausgleich.new.312
				days = 1
			}
		}
	}
}

### Hungarian delegate makes speech
country_event = {
	id = ausgleich.new.310
	title = ausgleich.new.310.t
	desc = ausgleich.new.310.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.310"
		hidden_effect = {
			country_event = {
				id = ausgleich.new.311
				days = 1
			}
		}
	}

	option = { # how insolent
		name = ausgleich.new.310.a
		ai_chance = {
			base = 5
		}
	}
	option = { # send him home
		name = ausgleich.new.310.b
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_STATUS_QUO
				}
			}
		}
		set_country_flag = ausgleich_HUN_delegate_sent_home
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = 15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = 30
		}
	}
	option = { # he's right though, isn't he?
		name = ausgleich.new.310.c
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_STATUS_QUO
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_kingdoms
			}
			add_political_power = -15
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			add_political_power = -30
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_hungary_only
			}
			set_country_flag = AUS_ausgleich_dualism
		}
	}
}

country_event = { #Hungarian Demands - Reparation Payments
	id = ausgleich.new.311
	title = ausgleich.new.311.t
	desc = ausgleich.new.311.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.311"
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_hungary_only
				}
				country_event = {
					id = ausgleich.new.320
					days = 1
				}
			}
			else = {
				country_event = {
					id = ausgleich.new.312
					days = 1
				}
			}
		}
	}

	option = { # offer to pay from your own coffers
		name = ausgleich.new.311.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
		}

		set_global_flag = AUS_ausgleich_austrian_payments
	}
	option = { # the Illyrians should pay (absent)
		name = ausgleich.new.311.b
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
		}
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
		}

		set_global_flag = AUS_ausgleich_illyrian_payments
		set_global_flag = AUS_ausgleich_absent_demands
	}
	option = { # the Illyrians should pay (present)
		name = ausgleich.new.311.c
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
		}
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
		}

		set_global_flag = AUS_ausgleich_illyrian_payments
	}
	option = { # point out that they pay less taxes
		name = ausgleich.new.311.e
		ai_chance = {
			base = 80
		}
	}
	option = { # secretly offer them to take back Croatia
		name = ausgleich.new.311.f
		trigger = {
			has_country_flag = AUS_ausgleich_dualism
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_STATUS_QUO
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
		}

		set_global_flag = AUS_ausgleich_secret_deal
	}
}

#CZE Demands - Slovakia
country_event = {
	id = ausgleich.new.312
	title = ausgleich.new.312.t
	desc = ausgleich.new.312.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.312"
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			hidden_effect = {
				country_event = {
					id = ausgleich.new.315
					days = 1
				}
			}
		}
		else = {
			hidden_effect = {
				country_event = {
					id = ausgleich.new.313
					days = 1
				}
			}
		}
	}

	option = { #Ask Hungary
		name = ausgleich.new.312.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
	}
	option = { # Let's do this - Slovak majority territory
		name = ausgleich.new.312.b
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_slovakia
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
		SVK = {
			remove_state_core = 1136
			remove_state_core = 1122
			add_state_claim = 1136
			add_state_claim = 1122
		}
	}
	option = { # Let's do this - down to the Danube
		name = ausgleich.new.312.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_slovakia
	}
}

#GAL demands - Transcarpathia
country_event = {
	id = ausgleich.new.313
	title = ausgleich.new.313.t
	desc = ausgleich.new.313.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.313"
		hidden_effect = {
			country_event = {
				id = ausgleich.new.314
				days = 1
			}
		}
	}

	option = { #Ask Hungary
		name = ausgleich.new.313.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
	}
	option = { # Let's do this
		name = ausgleich.new.313.b
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_transcarpathia
		GAL = {
			add_state_core = 73
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
	}
}

#CRO demands - Backa
country_event = {
	id = ausgleich.new.314
	title = ausgleich.new.314.t
	desc = ausgleich.new.314.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.314"
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_peoples
			}
			hidden_effect = {
				country_event = {
					id = ausgleich.new.316
					days = 1
				}
			}
		}
		else = {
			hidden_effect = {
				country_event = {
					id = ausgleich.new.320
					days = 1
				}
			}
		}
	}

	option = { #Ask Hungary
		name = ausgleich.new.314.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
	}
	option = { # Let's do this - Majority territory
		name = ausgleich.new.314.b
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_backa
		CRO = {
			add_state_core = 45
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
	}
	option = { # Let's do this - All of the Backa
		name = ausgleich.new.314.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_backa
		CRO = {
			add_state_core = 45
			add_state_core = 875
		}
	}
}

#POL demands
country_event = {
	id = ausgleich.new.315
	title = ausgleich.new.315.t
	desc = ausgleich.new.315.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.315"
		hidden_effect = {
			country_event = {
				id = ausgleich.new.313
				days = 1
			}
		}
	}

	option = { # Interesting
		name = ausgleich.new.315.a
	}
}

#ROM demands
country_event = {
	id = ausgleich.new.316
	title = ausgleich.new.316.t
	desc = ausgleich.new.316.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.316"
		hidden_effect = {
			country_event = {
				id = ausgleich.new.320
				days = 1
			}
		}
	}

	option = { # Ask Hungary
		name = ausgleich.new.316.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		ai_chance = {
			base = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
		}
	}
	option = { # Let's do this - Majority territory
		name = ausgleich.new.316.b
		ai_chance = {
			base = 33
		}

		set_global_flag = AUS_ausgleich_transylvania
		if = {
			limit = {
				875 = { NOT = { is_core_of = CRO } }
			}
			875 = { add_core_of = TRS }
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = AUS_ausgleich_boycott
				}
			}
			country_event = ausgleich.new.317
			set_global_flag = AUS_ausgleich_boycott
		}
	}
	option = { # Let's do this - All of it
		name = ausgleich.new.316.c
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		ai_chance = {
			base = 33
		}
		set_global_flag = AUS_ausgleich_transylvania
		set_global_flag = AUS_ausgleich_transylvania_full
		if = {
			limit = {
				875 = { NOT = { is_core_of = CRO } }
			}
			875 = { add_core_of = TRS }
		}
	}
}

#Hungary boycotts the ausgleich (AUS)
country_event = {
	id = ausgleich.new.317
	title = ausgleich.new.317.t
	desc = ausgleich.new.317.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.317"
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.318
					days = 2
				}
			}
		}
	}

	option = { # That could've gone better
		name = ausgleich.new.317.a
		add_political_power = -50
		set_global_flag = AUS_ausgleich_boycott
	}
}

#Hungary boycotts the ausgleich (HUN)
country_event = {
	id = ausgleich.new.318
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.318" }
	title = ausgleich.new.318.t
	desc = ausgleich.new.318.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Good to know.
		name = ausgleich.new.318.a
	}
}

###End of the Ausgleich
country_event = {
	id = ausgleich.new.320
	title = ausgleich.new.320.t

	desc = {
		text = ausgleich.new.320.d_hungary_success
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_hungary_failure
		trigger = {
			has_global_flag = AUS_ausgleich_hungary_only
			has_global_flag = AUS_ausgleich_boycott
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_success
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
	}
	desc = {
		text = ausgleich.new.320.d_other_failure
		trigger = {
			OR = {
				has_global_flag = AUS_ausgleich_kingdoms
				has_global_flag = AUS_ausgleich_peoples
			}
			has_global_flag = AUS_ausgleich_boycott
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.320"
		hidden_effect = {
			HUN = {
				set_country_flag = HUN_ausgleich_resolved
				set_country_flag = hungarian_army_flag
			}
			if = {
				limit = {
					has_global_flag = AUS_ausgleich_secret_deal
				}
				HUN = {
					country_event = {
						id = ausgleich.new.325 #Illyrian Conflict
						days = 1
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_illyrian_payments
						has_global_flag = AUS_ausgleich_austrian_payments
					}
				}
				HUN = {
					country_event = {
						id = ausgleich.new.322 #Payments
						days = 1
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = AUS_ausgleich_backa
						has_global_flag = AUS_ausgleich_transcarpathia
						has_global_flag = AUS_ausgleich_transylvania
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				CZE = {
					country_event = {
						id = ausgleich.new.332
						days = 5
					}
				}
				GAL = {
					country_event = {
						id = ausgleich.new.332
						days = 5
					}
				}
				CRO = {
					country_event = {
						id = ausgleich.new.332
						days = 5
					}
				}
				HUN = {
					country_event = {
						id = ausgleich.new.340 #Riots
						days = 5
					}
				}
			}
		}
	}

	option = { # Great
		name = ausgleich.new.320.a
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_boycott
			}
		}
		remove_ideas = AUS_financial_ties_broken
		add_political_power = 50
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.321 #Success
					days = 1
				}
			}
		}
	}
	option = { # Could have been worse...
		name = ausgleich.new.320.b
		trigger = {
			has_global_flag = AUS_ausgleich_boycott
		}
		add_political_power = -50
	}
}

#Success at the Ausgleich (HUN)
country_event = {
	id = ausgleich.new.321
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.321" }
	title = ausgleich.new.321.t
	desc = ausgleich.new.321.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, what can you do
		name = ausgleich.new.321.a

		swap_ideas = {
			remove_idea = HUN_financial_ties_broken
			add_idea = HUN_financial_ties
		}
		
		hidden_effect = {
			set_country_flag = hungary_loyal
		}
	}
}

#HUN demands payments
country_event = {
	id = ausgleich.new.322
	title = ausgleich.new.322.t
	desc = ausgleich.new.322.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.322"
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_illyrian_payments
				has_global_flag = AUS_ausgleich_absent_demands
			}
			CRO = {
				country_event = {
					id = ausgleich.new.325
					days = 2
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = AUS_ausgleich_illyrian_payments
				NOT = {
					has_global_flag = AUS_ausgleich_absent_demands
				}
			}
			CRO = {
				country_event = {
					id = ausgleich.new.323
					days = 2
				}
			}
		}
		else = {
			AUS = {
				country_event = {
					id = ausgleich.new.323
					days = 2
				}
			}
		}
	}

	option = { # Send the demands
		name = ausgleich.new.322.a
	}
}

#AUS/CRO receives demand for agreed payments
country_event = {
	id = ausgleich.new.323
	title = ausgleich.new.323.t
	desc = ausgleich.new.323.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.323"
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.324
					days = 2
				}
			}
		}
	}

	option = { # Well, can't do a thing.
		name = ausgleich.new.323.a
		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
	}
}

#HUN receives reparations
country_event = {
	id = ausgleich.new.324
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.324" }
	title = ausgleich.new.324.t
	desc = ausgleich.new.324.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Good to know.
		name = ausgleich.new.324.a
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = hungary_loyal
					}
				}
				set_country_flag = hungary_loyal
			}
		}
	}
}

###Illyrian Conflict (CRO)
country_event = {
	id = ausgleich.new.325
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.325" }
	title = ausgleich.new.325.t
	desc = ausgleich.new.325.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Wait, what?
		name = ausgleich.new.325.a
		ai_chance = {
			factor = 80
		}

		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.326
					days = 2
				}
			}
		}
	}
	option = { # If that has been decided...
		name = ausgleich.new.325.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				has_global_flag = AUS_ausgleich_secret_deal
			}
		}

		add_timed_idea = {
			idea = AUS_paid_reparations
			days = 365
		}
		hidden_effect = {
			HUN = {
				country_event = {
					id = ausgleich.new.323
					days = 2
				}
			}
		}
	}
}

#CRO refuses annexation (HUN)
country_event = {
	id = ausgleich.new.326
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.326" }
	title = ausgleich.new.326.t
	desc = ausgleich.new.326.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Well, let's do this then
		name = ausgleich.new.326.a
		ai_chance = {
			factor = 90
		}

		hidden_effect = {
			AUS = {
				set_autonomy = {
					target = CRO
					autonomy_state = autonomy_free
				}
				country_event = {
					id = ausgleich.new.328
					days = 1
				}
			}
			CRO = {
				if = {
					limit = { has_war = yes }
					separate_peace_all_wars = yes
				}
				if = {
					limit = { is_in_faction = yes }
					leave_faction = yes
				}
				country_event = ausgleich.new.327
			}
			set_rule = { can_not_declare_war = no }
			remove_ideas = HUN_financial_ties
			remove_ideas = HUN_financial_ties_broken
			load_oob = HUN_AUS_Civil_war
		}
		custom_effect_tooltip = "Ten new militia divisions will be formed"
		declare_war_on = {
			target = CRO
			type = annex_everything
		}
	}
	option = { # Well, can't do anything about it
		name = ausgleich.new.326.b
		ai_chance = {
			factor = 10
		}
	}
}

#HUN declares war (CRO)
country_event = {
	id = ausgleich.new.327
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.327" }
	title = ausgleich.new.327.t
	desc = ausgleich.new.327.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Crap.
		name = ausgleich.new.327.a
	}
}

#HUN declares war (AUS)
country_event = {
	id = ausgleich.new.328
	title = ausgleich.new.328.t
	desc = ausgleich.new.328.d

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.328"
		set_global_flag = AUS_illyrian_war
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # This is outrageous.
		name = ausgleich.new.328.a
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
		}
		hidden_effect = {
			AUS = {
				set_autonomy = {
					target = HUN
					autonomy_state = autonomy_free
				}
				add_to_war = {
					targeted_alliance = CRO
					enemy = HUN
				}
				CRO = { get_current_government_type = yes }
				set_autonomy = {
					target = CRO
					autonomy_state = kr_integrated_puppet
				}
				CRO = { restore_previous_government_type = yes }
			}
		}
		effect_tooltip = {
			add_to_war = {
				targeted_alliance = CRO
				enemy = HUN
			}
		}
	}
	option = { # Leave them to it
		name = ausgleich.new.328.b
		trigger = {
			NOT = {
				has_global_flag = AUS_ausgleich_secret_deal
			}
		}
		add_political_power = -200
		hidden_effect = {
			if = {
				limit = {
					HUN = {
						NOT = {
							has_country_flag = hungary_loyal
						}
					}
				}
				HUN = {
					set_country_flag = hungary_loyal
				}
			}
		}				
	}
	option = { # It's happening
		name = ausgleich.new.328.c
		trigger = {
			has_global_flag = AUS_ausgleich_secret_deal
		}
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
		}
		set_country_flag = CRO_release
		set_global_flag = AUS_illyrian_war
		set_global_flag = AUS_betrayal
		add_to_war = {
			targeted_alliance = HUN
			enemy = CRO
		}
		hidden_effect = {
			CZE = {
				country_event = {
					id = ausgleich.new.329
					days = 6
				}
			}
			GAL = {
				country_event = {
					id = ausgleich.new.329
					days = 6
				}
			}
			if = {
				limit = {
					HUN = {
						NOT = {
							has_country_flag = hungary_loyal
						}
					}
				}
				HUN = {
					set_country_flag = hungary_loyal
				}
			}
		}
	}
}

#CZE/GAL notified of Austrian betrayal
country_event = {
	id = ausgleich.new.329
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.329" }
	title = ausgleich.new.329.t
	desc = ausgleich.new.329.d

	trigger = {
		is_subject_of = AUS
		has_global_flag = AUS_illyrian_war
		has_global_flag = AUS_betrayal
		AUS = {
			has_war_with = CRO
		}
	}

	is_triggered_only = yes

	option = { # How dare they!
		name = ausgleich.new.329.a

		hidden_effect = {
			AUS = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_free
				}
				country_event = {
					id = ausgleich.new.333
					hours = 1
					random_hours = 10
				}
			}
			set_rule = { can_not_declare_war = no }
			separate_peace_all_wars = yes
			leave_faction = yes
		}
		add_to_war = {
			targeted_alliance = CRO
			enemy = AUS
		}
	}
}

#CRO annexation mission
country_event = {
	id = ausgleich.new.330
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.330" }
	title = ausgleich.new.330.t
	desc = ausgleich.new.330.d

	is_triggered_only = yes

	option = { # Restore the 1921 borders
		name = ausgleich.new.330.a
		transfer_state = 163
		HUN = {
			transfer_state = 103
			transfer_state = 109
			transfer_state = 794
		}
		set_temp_variable = { tag_to_release = BOS }
		release_targeted_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_integrated_puppet
		}
		var:tag_to_release = { add_ideas = AUS_part_of_the_Empire }
	}
	option = { # Croatia-Slavonia to Hungary, Illyrian Condominium
		name = ausgleich.new.330.b
		HUN = {
			transfer_state = 103
			transfer_state = 1099
			transfer_state = 1105
			transfer_state = 109
			transfer_state = 1102
			transfer_state = 794
			transfer_state = 1128
		}
		set_temp_variable = { tag_to_release = CRO }
		release_targeted_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_integrated_puppet
		}
		var:tag_to_release = {
			add_ideas = AUS_part_of_the_Empire
			set_cosmetic_tag = CRO_ILL
		}
	}
	option = { # Occupy the whole thing for now
		name = ausgleich.new.330.c

		transfer_state = 103
		transfer_state = 1099
		transfer_state = 1105
		transfer_state = 104
		transfer_state = 1141
		transfer_state = 1142
		transfer_state = 1143
		transfer_state = 1145
		transfer_state = 105
		transfer_state = 1097
		transfer_state = 109
		transfer_state = 1102
		transfer_state = 163
		transfer_state = 1098
		transfer_state = 794
		transfer_state = 1128
		HUN = {
			country_event = {
				id = ausgleich.new.331
				days = 2
			}
		}
	}
}

#Austria breaks secret deal (HUN)
country_event = {
	id = ausgleich.new.331
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.331" }
	title = ausgleich.new.331.t
	desc = ausgleich.new.331.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # They can't do that!
		name = ausgleich.new.331.a
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			AUS = {
				set_autonomy = {
					target = HUN
					autonomy_state = autonomy_free
				}
			}
			separate_peace_all_wars = yes
			leave_faction = yes
			set_rule = { can_not_declare_war = no }
			load_oob = HUN_AUS_Civil_war
			clr_country_flag = hungary_loyal
		}
		custom_effect_tooltip = "Ten new militia divisions will be formed"
		declare_war_on = {
			target = AUS
			type = annex_everything
		}
		country_event = kr.hungary.2
	}
	option = { # well shit.
		name = ausgleich.new.331.b
		ai_chance = {
			factor = 0
		}
		add_political_power = -100
	}
}

#Notify Ausgleich results to CZE/GAL/CRO
country_event = {
	id = ausgleich.new.332
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.332" }
	title = ausgleich.new.332.t

	desc = {
		text = ausgleich.new.332.d_no_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.332.d_claims
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}
	}

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Certainly a valuable lesson for them.
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					NOT = {
						has_global_flag = AUS_ausgleich_slovakia
					}
				}
				AND = {
					tag = GAL
					NOT = {
						has_global_flag = AUS_ausgleich_transcarpathia
					}
				}
				AND = {
					tag = CRO
					NOT = {
						has_global_flag = AUS_ausgleich_backa
					}
				}
			}
		}
	}
	option = { # Great!
		name = ausgleich.new.332.a
		trigger = {
			OR = {
				AND = {
					tag = CZE
					has_global_flag = AUS_ausgleich_slovakia
				}
				AND = {
					tag = GAL
					has_global_flag = AUS_ausgleich_transcarpathia
				}
				AND = {
					tag = CRO
					has_global_flag = AUS_ausgleich_backa
				}
			}
		}

		add_political_power = 100
		if = {
			limit = {
				tag = CZE
			}
			add_ideas = BOM_ausgleich_slovak_state
		}
		else_if = {
			limit = {
				tag = GAL
			}
			add_ideas = GAL_ausgleich_transcarpathian_claims
		}
		else = {
			add_ideas = ILL_ausgleich_backan_claims
		}
	}
}

#Austria notified of CZE/GAL betrayal
country_event = {
	id = ausgleich.new.333
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.333" }
	title = ausgleich.new.333.t
	desc = ausgleich.new.333.d

	is_triggered_only = yes

	option = { # How dare they!
		name = ausgleich.new.333.a
		add_political_power = -15
	}
}



### Austrian Civil War
#Demonstrations in Hungary
country_event = {
	id = ausgleich.new.340
	title = ausgleich.new.340.t
	desc = ausgleich.new.340.d

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.340"
		hidden_effect = {
			AUS = {
				country_event = {
					id = ausgleich.new.341
					days = 4
				}
			}
		}
	}

	option = { # Good to know.
		name = ausgleich.new.340.a
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
			}
			add_timed_idea = {
				idea = HUN_slovak_demonstrations
				days = 365
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_timed_idea = {
				idea = HUN_transylvanian_demonstrations
				days = 365
			}
		}
	}
}

#Protests put down violently (AUS)
country_event = {
	id = ausgleich.new.341
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.341" }
	title = ausgleich.new.341.t
	desc = ausgleich.new.341.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Demand the Hungarians cede the territories
		name = ausgleich.new.341.a
		ai_chance = {
			factor = 50
		}
		HUN = {
			set_country_flag = hungarian_protests

			country_event = {
				id = ausgleich.new.342
				days = 4
			}
		}
	}
	option = { # do nothing
		name = ausgleich.new.341.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
				has_global_flag = AUS_ausgleich_transylvania
			}
			add_political_power = -120
		}
		else = {
			add_political_power = -60
		}
	}
}

#Austrian ultimatum (HUN)
country_event = {
	id = ausgleich.new.342
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.342" }
	title = ausgleich.new.342.t
	desc = ausgleich.new.342.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Do as they say.
		name = ausgleich.new.342.a
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}

		add_political_power = -100
		AUS = {
			country_event = {
				id = ausgleich.new.343
				days = 1
			}
		}
	}
	option = { # No way.
		name = ausgleich.new.342.b
		ai_chance = {
			factor = 95
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_FEDERATE_SUCCESS
				}
			}
		}
		hidden_effect = {
			clr_country_flag = hungary_loyal
		}

		AUS = {
			country_event = {
				id = kr.hungary.14
				days = 1
			}
		}
	}
}

#Hungary accepts ultimatum (AUS)
country_event = {
	id = ausgleich.new.343
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.343" }
	title = ausgleich.new.343.t
	desc = ausgleich.new.343.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # Great.
		name = ausgleich.new.343.a
		set_country_flag = AUS_a_new_Hungary
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_transcarpathia
			}
			HUN = {
				remove_state_core = 73
			}
			GAL = {
				transfer_state = 73
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_backa
			}
			HUN = {
				every_owned_state = {
					limit = { is_core_of = CRO }
					remove_core_of = HUN
					CRO = {
						transfer_state = PREV
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_slovakia
			}
			HUN = {
				every_owned_state = {
					limit = { is_core_of = SVK }
					remove_core_of = HUN
					ROOT = {
						transfer_state = PREV
					}
				}
				remove_ideas = HUN_slovak_demonstrations
			}
		}
		if = {
			limit = {
				has_global_flag = AUS_ausgleich_transylvania
			}
			HUN = {
				every_owned_state = {
					limit = {
						is_core_of = TRS
						OR = {
							has_global_flag = AUS_ausgleich_transylvania_full
							NOT = {
								state = 82 #Banat
								state = 83 #Partium
								state = 1114 #Partium
								state = 1118 #Partium
								state = 1117 #Partium
								state = 875 #West Banat
							}
						}
					}
					remove_core_of = HUN
					ROOT = {
						transfer_state = PREV
					}
				}
				remove_ideas = HUN_transylvanian_demonstrations
			}
		}
	}
}

#Hungary refuses ultimatum (AUS)
country_event = {
	id = ausgleich.new.344
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.344" }
	title = ausgleich.new.344.t
	desc = ausgleich.new.344.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # you know what this means!
		name = ausgleich.new.344.a
		ai_chance = {
			factor = 95
		}
		hidden_effect = {
			set_country_flag = AUS_HUN_civil_war
			random_other_country = {
				news_event = { id = worldnews.7 days = 1 }
			}
			HUN = {
				separate_peace_all_wars = yes
				leave_faction = yes
				load_oob = HUN_AUS_Civil_war
				set_country_flag = AUS_HUN_civil_war
				swap_ideas = {
					remove_idea = HUN_financial_ties
					add_idea = HUN_financial_ties_broken
				}
				country_event = kr.hungary.2
			}
			set_autonomy = {
				target = HUN
				autonomy_state = autonomy_free
			}
		}
		declare_war_on = {
			target = HUN
			type = annex_everything
		}
		CZE = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
		GAL = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
		CRO = {
			add_to_war = {
				targeted_alliance = AUS
				enemy = HUN
			}
		}
	}

	option = { # oh well.
		name = ausgleich.new.344.b
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		add_political_power = -40
	}
}

#Slovakia release mission
country_event = { #creation of Slovakia?
	id = ausgleich.new.345
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.345" }
	title = ausgleich.new.345.t
	desc = ausgleich.new.345.d

	is_triggered_only = yes

	option = { #yes
		name = ausgleich.new.345.a
		trigger = {
			if = {
				limit = { is_ai = yes }
				NOT = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_country_flag = AUS_transylvania_occupied
			}
		}
		if = {
			limit = {
				has_subject = GAL
				73 = {
					is_owned_by = ROOT
					is_core_of = GAL
				}
				1119 = {
					is_owned_by = ROOT
					is_core_of = GAL
				}
			}
			GAL = { transfer_state = 73 } #Transcarpathia
			GAL = { transfer_state = 1119 } #Transcarpathia
		}
		set_temp_variable = { tag_to_release = SVK }
		release_targeted_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_integrated_puppet
		}
		var:tag_to_release = {
			add_ideas = AUS_part_of_the_Empire
			hidden_effect = {
				every_owned_state = { remove_core_of = HUN }
			}
		}
	}

	option = { #no
		name = ausgleich.new.345.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
			modifier = {
				factor = 0
				has_subject = TRS
			}
		}
		add_political_power = -40
		set_country_flag = AUS_slovakia_occupied
	}
}

#Transylvania release mission
country_event = {
	id = ausgleich.new.346
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.346" }
	title = ausgleich.new.346.t
	desc = ausgleich.new.346.d

	is_triggered_only = yes

	option = { # yes.
		name = ausgleich.new.346.a
		trigger = {
			if = {
				limit = { is_ai = yes }
				NOT = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				has_country_flag = AUS_slovakia_occupied
			}
		}
		if = {
			limit = {
				has_subject = CRO
				45 = {
					is_owned_by = ROOT
					is_core_of = CRO
				}
			}
			CRO = { transfer_state = 45 } #Vojvodina
		}
		if = {
			limit = {
				has_subject = CRO
				875 = {
					is_owned_by = ROOT
					is_core_of = CRO
				}
			}
			CRO = { transfer_state = 875 } #West Banat
		}
		set_temp_variable = { tag_to_release = TRS }
		hidden_effect = {
			every_owned_state = {
				limit = {
					is_core_of = TRS
					OR = {
						has_global_flag = AUS_ausgleich_transylvania_full
						NOT = {
							state = 82 #Banat
							state = 83 #Partium
							state = 1114 #Partium
							state = 1118 #Partium
							state = 1117 #Szeklerland
							state = 875 #West Banat
						}
					}
				}
				HUN = { remove_state_core = PREV }
				if = {
					limit = {
						is_fully_controlled_by = controller
						controller = { is_ally_with = ROOT }
					}
					TRS = { transfer_state = PREV }
				}
				else = {
					TRS = { set_state_owner = PREV }
				}
			}
			HUN = { add_state_core = 789 }
		}
		puppet_released_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_integrated_puppet
		}
		var:tag_to_release = { add_ideas = AUS_part_of_the_Empire }
		if = {
			limit = { has_government = social_democrat }
			var:tag_to_release = { set_cosmetic_tag = TRS_puppet }
		}
	}

	option = { # no.
		name = ausgleich.new.346.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
			modifier = {
				factor = 0
				has_subject = SVK
			}
		}
		add_political_power = -40
		set_country_flag = AUS_transylvania_occupied
	}
}

#Hungary release mission
country_event = {
	id = ausgleich.new.347
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.347" }
	title = ausgleich.new.347.t
	desc = ausgleich.new.347.d

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { owns_state = 1122 }
				1122 = { add_core_of = HUN }
			}
			if = {
				limit = { owns_state = 1136 }
				1136 = { add_core_of = HUN }
			}
		}
	}

	option = { # yes.
		name = ausgleich.new.347.a
		trigger = {
			if = {
				limit = { is_ai = yes }
				NOT = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_MILITARY_OCCUPATION
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_country_flag = AUS_slovakia_occupied
					has_country_flag = AUS_transylvania_occupied
				}
			}
		}
		set_country_flag = AUS_a_new_Hungary
		set_temp_variable = { tag_to_release = HUN }
		release_targeted_tag = yes
		set_autonomy = {
			target = var:tag_to_release
			autonomy_state = kr_integrated_puppet
		}
		var:tag_to_release = {
			add_ideas = AUS_part_of_the_Empire
			if = {
				limit = { AUS = { has_country_leader_ideology = ariosophy_subtype } }
				create_country_leader = {
					name = "József Ágost Habsburg–Lotaringiai"
					desc = "POLITICS_JOSEPH_AUGUST_VON_HABSBURG_DESC"
					picture = "gfx/leaders/AUS/Portrait_AUS_Joseph_August_von_Habsburg.png"
					expire = "1.1.1"
					ideology = ariosophy_subtype
				}
			}
			else_if = {
				limit = { AUS = { has_country_leader_ideology = austropopulism_subtype } }
				create_country_leader = {
					name = "József Ágost Habsburg–Lotaringiai"
					desc = "POLITICS_JOSEPH_AUGUST_VON_HABSBURG_DESC"
					picture = "gfx/leaders/AUS/Portrait_AUS_Joseph_August_von_Habsburg.png"
					expire = "1.1.1"
					ideology = austropopulism_subtype
				}
			}
			else_if = {
				limit = { AUS = { has_country_leader_ideology = social_conservative_subtype } }
				create_country_leader = {
					name = "József Ágost Habsburg–Lotaringiai"
					desc = "POLITICS_JOSEPH_AUGUST_VON_HABSBURG_DESC"
					picture = "gfx/leaders/AUS/Portrait_AUS_Joseph_August_von_Habsburg.png"
					expire = "1.1.1"
					ideology = social_conservative_subtype
				}
			}
			else_if = {
				limit = { AUS = { has_country_leader_ideology = paneuropeanism_subtype } }
				create_country_leader = {
					name = "József Ágost Habsburg–Lotaringiai"
					desc = "POLITICS_JOSEPH_AUGUST_VON_HABSBURG_DESC"
					picture = "gfx/leaders/AUS/Portrait_AUS_Joseph_August_von_Habsburg.png"
					expire = "1.1.1"
					ideology = paneuropeanism_subtype
				}
			}
			else_if = {
				limit = { AUS = { has_country_leader_ideology = austromarxism_subtype } }
				create_country_leader = {
					name = "József Ágost Habsburg–Lotaringiai"
					desc = "POLITICS_JOSEPH_AUGUST_VON_HABSBURG_DESC"
					picture = "gfx/leaders/AUS/Portrait_AUS_Joseph_August_von_Habsburg.png"
					expire = "1.1.1"
					ideology = austromarxism_subtype
				}
			}
			set_country_flag = was_puppeted
		}
	}

	option = { # no.
		name = ausgleich.new.347.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_SUCCESS
					}
					has_game_rule = {
						rule = AUS_ausgleich
						option = AUS_AUSGLEICH_FEDERATE_CIVIL_WAR
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_subject = SVK
					has_subject = TRS
				}
			}
		}
		add_political_power = -40
		set_country_flag = AUS_hungary_occupied
	}
}

###Military Occupation revolt
country_event = {
	id = ausgleich.new.350
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.350" }
	title = ausgleich.new.350.t
	desc = ausgleich.new.350.d

	fire_only_once = yes
	is_triggered_only = yes

	option = { # yes.
		name = ausgleich.new.350.a
		ai_chance = {
			factor = 99
		}
		hidden_effect = {
			separate_peace_all_wars = yes
			leave_faction = yes
			load_oob = BOM_AusCivWar
			GAL = {
				country_event = {
					id = ausgleich.new.351
					days = 1
				}
			}
			CRO = {
				country_event = {
					id = ausgleich.new.351
					days = 1
				}
			}
		}
		AUS = {
			set_autonomy = {
				target = CZE
				autonomy_state = autonomy_free
			}
		}
		hidden_effect = {
			set_rule = { can_not_declare_war = no }
		}
		declare_war_on = {
			target = AUS
			type = annex_everything
		}

		create_faction = brotherhood_of_slavs
		custom_effect_tooltip = "Seven new militia divisions will be formed"
	}

	option = { # no.
		name = ausgleich.new.350.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_MILITARY_OCCUPATION
				}
			}
		}

		add_political_power = -100
	}
}

country_event = { #Bohemian faction building
	id = ausgleich.new.351
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.351" }
	title = ausgleich.new.351.t
	desc = ausgleich.new.351.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.351.a
		ai_chance = {
			factor = 97
		}

		add_political_power = 100
		hidden_effect = {
			separate_peace_all_wars = yes
			leave_faction = yes
			set_rule = { can_not_declare_war = no }
		}
		AUS = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
		}
		CZE = {
			add_to_faction = ROOT
			add_political_power = 100
			country_event = {
				id = ausgleich.new.352
				days = 2
			}
		}

	}

	option = {
		name = ausgleich.new.351.b
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				has_game_rule = {
					rule = AUS_ausgleich
					option = AUS_AUSGLEICH_MILITARY_OCCUPATION
				}
			}
		}

		add_political_power = -100
	}
}

country_event = { #CZE faction: War is declared
	id = ausgleich.new.352
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.352" }
	title = ausgleich.new.352.t
	desc = ausgleich.new.352.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ausgleich.new.352.a

		add_political_power = 100
		add_to_war = {
			targeted_alliance = CZE
			enemy = AUS
		}
		AUS = {
			country_event = ausgleich.new.353
		}
	}
}

country_event = { #AUS: War is declared
	id = ausgleich.new.353
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.353" }
	title = ausgleich.new.353.t
	desc = ausgleich.new.353.d

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ausgleich.new.353.a
		add_political_power = -100
	}
}

###Integration of the Constituents
country_event = {
	id = ausgleich.new.700
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.700" }
	title = ausgleich.new.700.t
	desc = ausgleich.new.700.d

	is_triggered_only = yes

	option = { #okay
		name = ausgleich.new.700.a

		ai_chance = {
			factor = 100
		}
		add_political_power = -100
		AUS = {
			country_event = {
				id = ausgleich.new.701
				days = 1
			}
		}
	}
	option = { #no
		name = ausgleich.new.700.b

		ai_chance = {
			factor = 0
		}
		add_political_power = -100
	}
	option = { #independence
		name = ausgleich.new.700.c

		ai_chance = {
			factor = 0
		}
		add_political_power = -300
		hidden_effect = {
			set_rule = { can_not_declare_war = no }
		}
		declare_war_on = {
			target = AUS
			type = annex_everything
		}
	}
}

country_event = { #integrating the subjects
	id = ausgleich.new.701
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.701" }
	title = ausgleich.new.701.t
	desc = ausgleich.new.701.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.701.a
		every_state = {
			limit = { 
				OR = {
					is_core_of = FROM 
					AND = {
						is_owned_by = FROM
						is_core_of = WSU 
					}
				}
			}
			add_core_of = AUS
		}
		if = {
			limit = { has_idea = AUS_k_u_k_armee_bonus }
			swap_ideas = {
				remove_idea = AUS_k_u_k_armee_bonus
				add_idea = AUS_k_u_k_armee_bonus_2
			}
		}
		annex_country = {
			target = FROM
			transfer_troops = yes
		}

		add_political_power = 20
	}
}

country_event = { #ROM attacks revolter HUN
	id = ausgleich.new.702
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.702" }
	title = ausgleich.new.702.t
	desc = ausgleich.new.702.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.702.a
		ai_chance = {
			base = 75
			modifier = {
				add = -75
				surrender_progress > 0.4
			}
			modifier = {
				add = -50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
			modifier = {
				add = 100
				has_game_rule = {
					rule = ROM_transylvania_revolt
					option = ROM_TRANSYLVANIA_REVOLT_WAR_AUSTRIAN_INTERVENTION
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ROM_transylvania_revolt
					option = ROM_TRANSYLVANIA_REVOLT_WAR_AUSTRIAN_ACQUIESCENCE
				}
			}
		}
		declare_war_on = {
			target = FROM
			type = annex_everything
		}
	}

	option = {
		name = ausgleich.new.702.b
		ai_chance = {
			base = 25
			modifier = {
				add = 75
				surrender_progress > 0.4
			}
			modifier = {
				add = 50
				any_enemy_country = {
					is_actual_major = yes
				}
			}
			modifier = {
				add = 100
				has_game_rule = {
					rule = ROM_transylvania_revolt
					option = ROM_TRANSYLVANIA_REVOLT_WAR_AUSTRIAN_ACQUIESCENCE
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ROM_transylvania_revolt
					option = ROM_TRANSYLVANIA_REVOLT_WAR_AUSTRIAN_INTERVENTION
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ROM_transylvania_revolt
					option = ROM_TRANSYLVANIA_REVOLT_PLAYER
				}
			}
		}
		add_political_power = -100
	}
}

### Belgrade Pact-Austrian Peace Deal

country_event = { #We're losing, sue for peace? (AUS)
	id = ausgleich.new.800
	title = ausgleich.new.800.t
	picture = GFX_report_event_generic_towar
	
	desc = {
		text = ausgleich.new.800.d
		trigger = {
			NOT = {
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						has_war_with = event_target:AUS_belgrade_pact_leader
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.800.d.germany
		trigger = {
			GER = {
				is_faction_leader = yes
				NOT = {
					has_war_with = ROOT
					has_war_with = event_target:AUS_belgrade_pact_leader
				}
			}
		}
	}
	
	fire_only_once = yes
	
	trigger = {
		tag = AUS
		is_valid_peace_target = yes
		OR = {
			AND = {
				has_war_with = SER
				SER = { is_valid_peace_target = yes }
			}
			AND = {
				has_war_with = ROM
				ROM = { is_valid_peace_target = yes }
			}
		}
		if = {
			limit = {
				has_subject = TRS
				has_war_with = ROM
			}
			TRS = { has_capitulated = yes }
		}
		OR = {
			count_triggers = {
				amount = 3
				## Hungary is at >50% surrender and/or Budapest is lost
				43 = { #Budapest
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = HUN }
						owner = { surrender_progress > 0.50 }
					}
				}
				
				## Transylvania exists and is at >50% surrender
				1112 = { #Cluj
					is_owned_by = TRS
					is_controlled_by_BP = yes
					owner = {
						is_subject_of = AUS
						surrender_progress > 0.50
					}
				}
				
				## Slovakia is at >50% surrender and/or Pressburg is lost
				1123 = { #Western Slovakia
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = SVK }
						owner = { surrender_progress > 0.50 }
					}
				}
				
				## Bohemia is at >50% surrender and/or Prague is lost
				1129 = { #Bohemia
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = CZE }
						owner = { surrender_progress > 0.50 }
					}
				}
				
				## Illyria is at >50% surrender and/or Zagreb is lost
				109 = { #Posavina
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = CRO }
						owner = { surrender_progress > 0.50 }
					}
				}
				
				## Galicia is at >50% surrender and/or Lemberg is lost
				91 = { #Lemberg
					owned_by_austria_or_puppet = yes
					is_controlled_by_BP = yes
					if = {
						limit = { is_owned_by = GAL }
						owner = { surrender_progress > 0.50 }
					}
				}
			}
			# SER/ROM has penetrated into the Austria strategic region
			# and Austria is at >50% surrender overall
			AND = {
				surrender_progress > 0.5 #for USGA/DanFed
				any_owned_state = {
					region = 21 #Austria
					is_controlled_by_BP = yes
				}
			}
		}
	}
	
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event ausgleich.new.800"
		hidden_effect = {
			add_ideas = has_scripted_peace
			if = {
				limit = {
					has_war_with = SER
					SER = { is_faction_leader = yes }
				}
				SER = { save_event_target_as = AUS_belgrade_pact_leader }
			}
			else = {
				random_enemy_country = {
					limit = {
						is_valid_peace_target = yes
						OR = {
							tag = SER
							tag = ROM
						}
					}
					save_event_target_as = AUS_belgrade_pact_leader
				}
			}
			country_event = { id = ausgleich.new.802 days = 2 }
		}
	}

	option = {
		name = ausgleich.new.800.a
		trigger = {
			NOT = {
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						has_war_with = event_target:AUS_belgrade_pact_leader
					}
				}
			}
		}
		every_enemy_country = {
			limit = {
				OR = {
					tag = SER
					tag = ROM
					tag = POL
					tag = ITA
					tag = VNC
				}
				is_valid_peace_target = yes
			}
			country_event = ausgleich.new.801
		}
	}

	option = {
		name = ausgleich.new.800.b
		trigger = {
			is_ai = no
			NOT = {
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						has_war_with = event_target:AUS_belgrade_pact_leader
					}
				}
			}
		}
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}
	
	option = {
		name = ausgleich.new.800.c #Turn to Germany for help
		trigger = {
			GER = {
				is_faction_leader = yes
				NOT = {
					has_war_with = ROOT
					has_war_with = event_target:AUS_belgrade_pact_leader
				}
			}
		}
		GER = { country_event = ausgleich.new.820 }
	}
	
	option = {
		name = ausgleich.new.800.e #Just give them whatever they want
		trigger = {
			is_ai = no
			NOT = {
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						has_war_with = event_target:AUS_belgrade_pact_leader
					}
				}
			}
		}
		every_enemy_country = {
			limit = {
				OR = {
					tag = SER
					tag = ROM
					tag = POL
					tag = ITA
					tag = VNC
				}
				is_valid_peace_target = yes
			}
			country_event = ausgleich.new.801
		}
	}
	
	option = {
		name = ausgleich.new.800.f #We will fight on without Germany!
		trigger = {
			is_ai = no
			GER = {
				is_faction_leader = yes
				NOT = {
					has_war_with = ROOT
					has_war_with = event_target:AUS_belgrade_pact_leader
				}
			}
		}
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}
}

country_event = { #Austria seeks peace (SER/ROM/POL/ITA)
	id = ausgleich.new.801
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.801" }
	picture = GFX_report_event_generic_diplomacy2
	
	title = {
		text = ausgleich.new.801.t
		trigger = {
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	title = {
		text = ausgleich.new.801.t.germany
		trigger = {
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	
	desc = {
		text = ausgleich.new.801.d.main
		trigger = {
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = augleich.new.801.d.main.faction1
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			var:faction_leader = { has_country_flag = AUS_accepts_peace }
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = augleich.new.801.d.main.faction2
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			var:faction_leader = { has_country_flag = AUS_will_continue_war }
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main1
		trigger = {
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = { has_country_flag = AUS_german_intervention }
			if = {
				limit = { tag = ITA }
				OR = {
					783 = { owned_by_austria_or_puppet = yes }
					103 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
					163 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main2
		trigger = {
			OR = {
				is_faction_leader = yes
				is_in_faction = no
			}
			AUS = { has_country_flag = AUS_german_intervention }
			if = {
				limit = { tag = ITA }
				NOT = {
					783 = { owned_by_austria_or_puppet = yes }
					103 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
					163 = {
						is_claimed_by = ITA
						owned_by_austria_or_puppet = yes
					}
				}
			}
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main.faction1
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			var:faction_leader = { has_country_flag = AUS_accepts_peace }
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.801.d.germany.main.faction2
		trigger = {
			is_in_faction = yes
			is_faction_leader = no
			var:faction_leader = { has_country_flag = AUS_will_continue_war }
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	
	is_triggered_only = yes
	
	trigger = {
		has_war_with = AUS
	}

	option = {
		name = ausgleich.new.801.a
		ai_chance = {
			factor = 50
		}
		set_country_flag = AUS_accepts_peace
		if = {
			limit = { num_subjects > 0 }
			every_other_country = {
				limit = { is_subject_of = ROOT }
				set_country_flag = AUS_accepts_peace
			}
		}
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = {
					NOT = { tag = ROOT }
					is_in_faction_with = ROOT
					is_subject = no
				}
				hidden_effect = {
					country_event = ausgleich.new.801
				}
			}
		}
		else_if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = no
				var:faction_leader = { has_country_flag = AUS_will_continue_war }
			}
			var:faction_leader = {
				country_event = ausgleich.new.823
			}
			leave_faction = yes
			every_other_country = {
				limit = { is_subject_of = ROOT }
				leave_faction = yes
			}
		}
		effect_tooltip = {
			AUS = {
				country_event = ausgleich.new.802
			}
		}
	}

	option = {
		name = ausgleich.new.801.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				tag = GRE
			}
			modifier = {
				factor = 0
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
			}
			modifier = {
				factor = 0
				is_in_faction = yes
				is_faction_leader = no
				var:faction_leader = { has_country_flag = AUS_accepts_peace }
			}
		}
		set_country_flag = AUS_will_continue_war
		add_stability = -0.2
		add_war_support = -0.2
		AUS = {
			country_event = { id = ausgleich.new.804 hours = 4 random = 12 }
		}
		if = {
			limit = { num_subjects > 0 }
			every_other_country = {
				limit = { is_subject_of = ROOT }
				set_country_flag = AUS_will_continue_war
			}
		}
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = {
					NOT = { tag = ROOT }
					is_in_faction_with = ROOT
					is_subject = no
				}
				hidden_effect = {
					country_event = ausgleich.new.801
				}
			}
		}
		else_if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = no
				var:faction_leader = { has_country_flag = AUS_accepts_peace }
			}
			var:faction_leader = {
				country_event = ausgleich.new.805
			}
			leave_faction = yes
			every_other_country = {
				limit = { is_subject_of = ROOT }
				leave_faction = yes
			}
		}
	}
}

country_event = { #Treaty of Budapest
	id = ausgleich.new.802
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.802" }
	title = ausgleich.new.802.t
	desc = ausgleich.new.802.d
	picture = GFX_report_event_generic_conference2
	
	trigger = {
		any_enemy_country = {
			is_valid_peace_target = yes
			has_country_flag = AUS_accepts_peace
		}
	}

	is_triggered_only = yes
	
	option = {
		name = ausgleich.new.802.a
		set_global_flag = AUS_treaty_of_budapest
		
		hidden_effect = {
			### Italian claims
			if = {
				limit = {
					ITA = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						is_owned_by_ROOT_or_subject = yes
						OR = {
							state = 783 #Trentino
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 736 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 1100 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 1144 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 39 #Alto Adige
								is_claimed_by = ITA
							}
							AND = {
								OR = {
									state = 103 #Lika
									state = 1099 #Lika
									state = 1105 #Lika
									state = 163 #Dalmatia
									state = 1098 #Dalmatia
								}
								is_claimed_by = ITA
							}
						}
					}
					ITA = { transfer_state = PREV }
				}
				every_country = {
					limit = {
						is_in_faction_with = ROOT
						is_italian_tag = yes
					}
					leave_faction = yes
				}
			}
			if = {
				limit = {
					VNC = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						is_owned_by_ROOT_or_subject = yes
						OR = {
							state = 783 #Trentino
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 736 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 1100 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 1144 #Istria
							}
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								state = 39 #Alto Adige
								is_claimed_by = VNC
							}
							AND = {
								OR = {
									state = 39 #Alto Adige
									state = 103 #Lika
									state = 1105 #Lika
									state = 163 #Dalmatia
									state = 1098 #Dalmatia
								}
								is_claimed_by = VNC
							}
						}
					}
					VNC = { transfer_state = PREV }
				}
				every_country = {
					limit = {
						is_in_faction_with = ROOT
						is_italian_tag = yes
					}
					leave_faction = yes
				}
			}
			
			### Polish claims
			if = {
				limit = {
					POL = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						is_owned_by_ROOT_or_subject = yes
						region = 155 #Galicia
					}
					POL = { transfer_state = PREV }
				}
				if = {
					limit = {
						GAL = {
							exists = yes
							is_subject_of = ROOT
						}
					}
					annex_country = { target = GAL }
				}
			}
			
			### Serbian claims
			if = {
				limit = {
					SER = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}	
				every_state = {
					limit = {
						is_owned_by_ROOT_or_subject = yes
						OR = {
							region = 143 #Northern Balkans
							state = 45 #Vojvodina
							state = 1128 #Syrmia
							state = 875 #West Banat
							AND = {
								ROOT = { NOT = { has_country_flag = AUS_german_intervention } }
								OR = {
									state = 736 #Istria
									state = 1100 #Istria
									state = 1144 #Istria
									state = 102 #Carniola
									state = 1101 #Carniola
									state = 1103 #Carniola
									state = 1104 #Carniola
								}
							}
						}
					}
					SER = { transfer_state = PREV }
				}
			}
			
			### Romanian claims
			if = {
				limit = {
					ROM = {
						has_war_with = ROOT
						has_country_flag = AUS_accepts_peace
					}
				}
				every_state = {
					limit = {
						is_owned_by_ROOT_or_subject = yes
						region = 144 #Transylvania
					}
					ROM = { transfer_state = PREV }
				}
			}
			
			### Peace everyone out
			every_other_country = {
				limit = { has_country_flag = AUS_accepts_peace }
				country_event = ausgleich.new.803
				country_event = { id = ausgleich.new.807 days = 1 }
				if = {
					limit = { is_valid_peace_target = yes }
					white_peace_with_ROOT = yes
				}
			}
			country_event = { id = ausgleich.new.808 days = 1 }
			
			### Fire the news event
			if = {
				limit = {
					OR = {
						SER = { has_country_flag = AUS_accepts_peace }
						ROM = { has_country_flag = AUS_accepts_peace }
					}
				}
				news_event = { id = ausgleich.new.806 days = 1 }
			}
			
			### Clear Austrian claims/cores/ambition_areas
			every_state = {
				limit = {
					OR = {
						is_claim_or_core_of_ROOT = yes
						has_variable = ambition_area_@ROOT
					}
				}
				if = {
					limit = {
						NOT = {
							owner = { is_ally_with = ROOT }
							AND = {
								owner = { tag = HUN }
								OR = {
									region = 27 #Hungary
									region = 145 #Slovakia
								}
								NOT = { state = 45 } #Vojvodina
							}
						}
					}
					remove_core_of = ROOT
					remove_claim_by = ROOT
					clear_variable = ambition_area_@ROOT
				}
			}
		}
		
		if = {
			limit = {
				has_country_flag = AUS_german_intervention
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			hidden_effect = {
				country_event = { id = ausgleich.new.825 hours = 8 }
			}
		}
		else_if = {
			limit = { is_faction_leader = yes }
			dismantle_faction = yes
		}
		hidden_effect = {
			remove_ideas = has_scripted_peace
			recheck_annexations = yes
			every_country = {
				limit = { is_subject_of = ROOT }
				recheck_annexations = yes
			}
		}
	}
}

country_event = { #Victory Against Austria (SER/ROM/POL/ITA)
	id = ausgleich.new.803
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.803" }
	title = ausgleich.new.803.t
	picture = GFX_report_event_generic_happy_crowd
	
	desc = {
		text = ausgleich.new.803.d.balkan
		trigger = {
			NOT = {
				tag = ITA
				tag = POL
			}
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.balkan
		trigger = {
			NOT = {
				tag = ITA
				tag = POL
			}
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.803.d.italy
		trigger = {
			tag = ITA
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.italy
		trigger = {
			tag = ITA
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}
	desc = {
		text = ausgleich.new.803.d.poland
		trigger = {
			tag = POL
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.803.d.germany.poland
		trigger = {
			tag = POL
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	is_triggered_only = yes

	option = {
		name = ausgleich.new.803.a
		add_political_power = 100
	}
}

country_event = { #FROM refuses peace (AUS)
	id = ausgleich.new.804
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.804" }
	title = ausgleich.new.804.t
	desc = ausgleich.new.804.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.804.a
		add_war_support = 0.1
		
		if = {
			limit = {
				has_country_flag = AUS_german_intervention
				GER = {
					is_faction_leader = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			if = {
				limit = { is_faction_leader = yes }
				every_other_country = {
					limit = { is_in_faction_with = ROOT }
					country_event = ausgleich.new.824
				}
				dismantle_faction = yes
			}
			else = {
				every_other_country = {
					limit = {
						is_subject_of = ROOT
						is_in_faction = no
					}
					country_event = ausgleich.new.824
				}
			}
			GER = { add_to_faction = ROOT }
		}
	}
}

country_event = { #FROM has refused peace, while faction leader has agreed to it
	id = ausgleich.new.805
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.805" }
	title = ausgleich.new.805.t
	desc = ausgleich.new.805.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.805.a
		effect_tooltip = { remove_from_faction = FROM }
	}
}

news_event = { #The Treaty of Budapest
	id = ausgleich.new.806
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.806" }
	title = ausgleich.new.806.t
	picture = GFX_news_event_romania_poland_visit
	
	desc = {
		text = ausgleich.new.806.d
		trigger = {
			AUS = {
				NOT = { has_country_flag = AUS_german_intervention }
			}
		}
	}
	desc = {
		text = ausgleich.new.806.d.germany
		trigger = {
			AUS = { has_country_flag = AUS_german_intervention }
		}
	}

	is_triggered_only = yes
	major = yes

	trigger = {
		wants_world_news = yes
	}
	
	show_major = {
		NOT = {
			tag = AUS
			has_country_flag = AUS_accepts_peace
		}
	}

	option = {
		name = ausgleich.new.806.a
	}
}

country_event = { #The Terms of the Treaty of Budapest
	id = ausgleich.new.807
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.807" }
	title = ausgleich.new.807.t
	desc = ausgleich.new.807.d

	trigger = {
		OR = {
			tag = SER
			tag = ROM
			tag = POL
			tag = ITA
		}
		has_global_flag = AUS_treaty_of_budapest
		has_country_flag = AUS_accepts_peace
		country_exists = AUS
		AUS = {
			is_subject = no
			NOT = { has_war_with = ROOT }
		}
		any_owned_state = {
			OR = {
				region = 145 #Slovakia
				region = 27 #Hungary
			}
			NOT = { state = 45 } #Vojvodina
		}
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = ausgleich.new.805.a
		if  = {
			limit = {
				43 = {
					is_owned_by = AUS
					owner = { is_subject_of = AUS }
				}
			}
			every_owned_state = {
				limit = {
					region = 27 #Hungary
					NOT = { state = 45 } #Vojvodina
				}
				AUS = { transfer_state = PREV }
			}
		}
		if = {
			limit = {
				1123 = {
					is_owned_by = AUS
					owner = { is_subject_of = AUS }
				}
			}
			every_owned_state = {
				limit = {
					region = 145 #Slovakia
				}
				AUS = { transfer_state = PREV }
			}
		}
	}
}

country_event = { #Returning Pact Claims
	id = ausgleich.new.808
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.808" }
	title = ausgleich.new.808.t
	desc = ausgleich.new.808.d

	trigger = {
		tag = AUS
		has_global_flag = AUS_treaty_of_budapest
		any_owned_state = {
			OR = {
				AND = {
					region = 144 #Transylvania
					country_exists = ROM
					ROM = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
				AND = {
					OR = {
						region = 143 #Northern Balkans
						state = 45 #Vojvodina
					}
					country_exists = SER
					SER = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
				AND = {
					region = 155 #Galicia
					country_exists = POL
					POL = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
			}
		}
	}

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = ausgleich.new.805.a
		every_owned_state = {
			if = {
				limit = {
					region = 144 #Transylvania
					country_exists = ROM
					ROM = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
				ROM = { transfer_state = PREV }
			}
			else_if = {
				limit = {
					OR = {
						region = 143 #Northern Balkans
						state = 45 #Vojvodina
					}
					country_exists = SER
					SER = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
				SER = { transfer_state = PREV }
			}
			else_if = {
				limit = {
					region = 155 #Galicia
					country_exists = POL
					POL = {
						is_subject = no
						NOT = { has_war_with = ROOT }
						has_country_flag = AUS_accepts_peace
					}
				}
				POL = { transfer_state = PREV }
			}
		}
		for_each_scope_loop = {
			array = ROOT.subjects
			every_owned_state = {
				if = {
					limit = {
						region = 144 #Transylvania
						country_exists = ROM
						ROM = {
							is_subject = no
							NOT = { has_war_with = ROOT }
							has_country_flag = AUS_accepts_peace
						}
					}
					ROM = { transfer_state = PREV }
				}
				else_if = {
					limit = {
						OR = {
							region = 143 #Northern Balkans
							state = 45 #Vojvodina
						}
						country_exists = SER
						SER = {
							is_subject = no
							NOT = { has_war_with = ROOT }
							has_country_flag = AUS_accepts_peace
						}
					}
					SER = { transfer_state = PREV }
				}
				else_if = {
					limit = {
						region = 155 #Galicia
						country_exists = POL
						POL = {
							is_subject = no
							NOT = { has_war_with = ROOT }
							has_country_flag = AUS_accepts_peace
						}
					}
					POL = { transfer_state = PREV }
				}
			}
		}
	}
}

country_event = { #Austria turns to Germany for help
	id = ausgleich.new.820
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.820" }
	title = ausgleich.new.820.t
	desc = ausgleich.new.820.d
	
	is_triggered_only = yes
	
	option = {
		name = ausgleich.new.820.a #We shall intervene
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0
				has_war = yes
				surrender_progress > 0.10
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						has_war_with = FRA
						FRA = { surrender_progress < 0.10 }
					}
					AND = {
						has_war_with = RUS
						RUS = { surrender_progress < 0.10 }
					}
				}
			}
		}
		AUS = {
			add_opinion_modifier = { target = ROOT modifier = KR_approves_of_govt }
			country_event = ausgleich.new.821
		}
	}
	option = {
		name = ausgleich.new.820.b #They are on their own
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.5
				has_war = no
			}
			modifier = {
				factor = 0.5
				BUL = {
					OR = {
						is_subject = yes
						exists = no
						NOT = {
							owns_state = 772 #Dobrudja
							owns_state = 106 #Macedonia
							owns_state = 184 #Western Thrace
						}
					}
				}
			}
		}
		AUS = {
			add_opinion_modifier = { target = ROOT modifier = KR_disapproves_of_govt }
			country_event = ausgleich.new.822
		}
	}	
}

country_event = { #Germany has agreed to intervene
	id = ausgleich.new.821
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.821" }
	title = ausgleich.new.821.t
	desc = ausgleich.new.821.d
	
	is_triggered_only = yes
	
	option = {
		name = ausgleich.new.821.a
		set_country_flag = AUS_german_intervention
		every_enemy_country = {
			limit = {
				OR = {
					tag = SER
					tag = ROM
					tag = POL
					tag = ITA
					tag = VNC
				}
				is_valid_peace_target = yes
			}
			country_event = ausgleich.new.801
		}
	}
}

country_event = { #Germany has refused to intervene
	id = ausgleich.new.822
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.822" }
	title = ausgleich.new.822.t
	desc = ausgleich.new.822.d
	
	is_triggered_only = yes
	
	option = {
		name = ausgleich.new.822.a
		every_enemy_country = {
			limit = {
				OR = {
					tag = SER
					tag = ROM
					tag = POL
					tag = ITA
					tag = VNC
				}
				is_valid_peace_target = yes
			}
			country_event = ausgleich.new.801
		}
	}
	
	option = {
		name = ausgleich.new.822.b #We will fight on anyhow!
		trigger = { is_ai = no }
		add_stability = -0.1
		add_war_support = -0.1
		hidden_effect = {
			remove_ideas = has_scripted_peace
		}
	}
}

country_event = { #FROM leaves faction when faction leader continues war
	id = ausgleich.new.823
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.823" }
	title = ausgleich.new.823.t
	desc = ausgleich.new.823.d

	is_triggered_only = yes

	option = {
		name = ausgleich.new.823.a
		effect_tooltip = { remove_from_faction = FROM }
	}
}

country_event = { #Austria has joined the Reichspakt - for Austrian subjects
	id = ausgleich.new.824
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.824" }
	title = ausgleich.new.824.t
	desc = ausgleich.new.824.d
	
	is_triggered_only = yes
	
	option = {
		name = ausgleich.new.824.a
		GER = { add_to_faction = ROOT }
		every_other_country = {
			limit = { is_subject_of = ROOT }
			GER = { add_to_faction = PREV }
		}
	}
	option = {
		name = ausgleich.new.824.b
		trigger = {
			is_ai = no
			is_subject = no
		}
		effect_tooltip = { leave_faction = yes }
	}
}

country_event = { #Austria joins the Reichspakt after Treaty is done
	id = ausgleich.new.825
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.825" }
	title = ausgleich.new.825.t
	desc = ausgleich.new.825.d
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = AUS_german_intervention
		GER = {
			is_faction_leader = yes
			NOT = {
				has_war_with = ROOT
				is_in_faction_with = ROOT
			}
		}
	}
	
	option = {
		name = ausgleich.new.825.a
		if = {
			limit = { is_faction_leader = yes }
			every_other_country = {
				limit = { is_in_faction_with = ROOT }
				country_event = ausgleich.new.824
			}
			dismantle_faction = yes
		}
		else = {
			every_other_country = {
				limit = {
					is_subject_of = ROOT
					is_in_faction = no
				}
				country_event = ausgleich.new.824
			}
		}
		GER = { add_to_faction = ROOT }
	}
}

country_event = { #Slovenia Demands Representation
	id = ausgleich.new.751
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.751" }
	title = ausgleich.new.751.t
	desc = ausgleich.new.751.d
	picture = GFX_report_event_IRE_bombing

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #Hand Slovenia over to Illyria.
		name = ausgleich.new.751.a
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ILL_slovenia_crisis
					option = CRO_SLOVENIA_CRISIS_ESCELATES
				}
			}
		}
		
		add_stability = 0.1
		add_political_power = -75
		set_country_flag = AUS_slovenian_crisis_occurred
		CRO = {
			transfer_state = 102
			transfer_state = 1101
			transfer_state = 1103
			transfer_state = 1104
		}
		CRO = {
			country_event = ill.6
		}
		remove_state_core = 102
		remove_state_core = 1101
		remove_state_core = 1103
		remove_state_core = 1104
		hidden_effect = {
			random_other_country = { 
				news_event = {
					days = 1
					id = ausnews.1
				}
			}
		}
	}
	
	option = { #Grant it status as a Cisleithanian Duchy.
		name = ausgleich.new.751.b
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ILL_slovenia_crisis
					option = CRO_SLOVENIA_CRISIS_ESCELATES
				}
			}
		}
		add_stability = 0.03
		add_political_power = -50
		set_country_flag = AUS_slovenian_crisis_occurred
		SLO = {
			transfer_state = 102
			transfer_state = 1101
			transfer_state = 1103
			transfer_state = 1103
			add_ideas = AUS_part_of_the_Empire
			country_event = {
				id = ausgleich.new.666
				days = 365
			}
		}
		CRO = {	
			set_country_flag = aus_slovenia_crisis_resolved
		}
		remove_state_core = 102
		remove_state_core = 1101
		remove_state_core = 1103
		remove_state_core = 1104
		puppet = SLO
		hidden_effect = {
			random_other_country = { 
				news_event = {
					days = 1
					id = ausnews.1
				}
			}
		}
	}
	
	option = { #Keep it!
		name = ausgleich.new.751.c
		ai_chance = {
			factor = 33
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = ILL_slovenia_crisis
						option = CRO_SLOVENIA_CRISIS_RESOLVED
					}
					has_game_rule = {
						rule = ILL_slovenia_crisis
						option = CRO_SLOVENIA_CRISIS_RESOLVED_INDEPENDENCE
					}
					has_game_rule = {
						rule = ILL_slovenia_crisis
						option = CRO_SLOVENIA_CRISIS_RESOLVED_LOYALTY
					}
				}
			}
		}
		add_stability = -0.15
		add_political_power = 50
		custom_effect_tooltip = AUS_very_bad_idea
		set_country_flag = AUS_slovenian_crisis_occurred
		set_country_flag = SLO_crisis_secession
		CRO = {
			country_event = ill.7
		}
		hidden_effect = {
			random_other_country = { 
				news_event = {
					days = 1
					id = ausnews.1
				}
			}
		}
	}
}

country_event = { #Slovenia - Rejoin nation
	id = ausgleich.new.666
	immediate = { log = "[GetDateText]: [Root.GetName]: event ausgleich.new.666" }
	title = ausgleich.new.666.t
	desc = ausgleich.new.666.d
	picture = GFX_report_event_AUS_Ausgleich_prag

	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				is_in_faction_with = AUS
				AUS = {
					is_faction_leader = yes
				}
			}
			AND = {
				is_in_faction_with = CRO
				CRO = {
					is_faction_leader = yes
				}
			}
			is_subject_of = CRO
			is_subject_of = AUS
		}
	}

	fire_only_once = yes
	
	option = { #Rejoin Austria
		name = ausgleich.new.666.a
		trigger = {
			NOT = {
				has_war_with = AUS
			}
		}
		ai_chance = {
			factor = 0
			modifier = {
				add = 100
				OR = {
					AUS = {
						is_ai = no
					}
					AND = {
						is_in_faction_with = AUS
						AUS = {
							is_ai = no
						}
						CRO = {
							is_ai = no
						}
					}
				}
			}
		}
		AUS = {
			annex_country = {
				target = SLO
				transfer_troops = yes
			}
		}
	}
	
	option = { #Rejoin Illyria
		name = ausgleich.new.666.b
		trigger = {
			NOT = {
				has_war_with = CRO
			}
		}
		ai_chance = {
			factor = 0
			modifier = {
				add = 100
				CRO = {
					is_ai = no
				}
			}
		}
		CRO = {
			annex_country = {
				target = SLO
				transfer_troops = yes
			}
		}
	}
	
	option = { #Let's stay as is
		name = ausgleich.new.666.c
		ai_chance = {
			factor = 0
		}
	}
}